/*! For license information please see 538.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[538],{1102:(t,e,n)=>{"use strict";var o=n(6291),i=r(Error);function r(t){return e.displayName=t.displayName||t.name,e;function e(e){return e&&(e=o.apply(null,arguments)),new t(e)}}t.exports=i,i.eval=r(EvalError),i.range=r(RangeError),i.reference=r(ReferenceError),i.syntax=r(SyntaxError),i.type=r(TypeError),i.uri=r(URIError),i.create=r},5896:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});const o="/images/vendor/leaflet/dist/layers-2x.png?8f2c4d11474275fbc1614b9098334eae"},6712:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});const o="/images/vendor/leaflet/dist/layers.png?416d91365b44e4b4f4777663e6f009f3"},2330:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});const o="/images/vendor/leaflet/dist/marker-icon.png?2b3e1faf89f94a4835397e7a43b4f77d"},5540:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});const o="/images/part-1.gif?4daafaaaefbffbf11d1890f706f33726"},1980:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});const o="/images/part-2.gif?191094188a35c4361cb5e035607b493f"},4173:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});const o="/images/part-3.gif?f841f0a456206eb5dc90123c1f13556e"},8190:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});const o="/images/part-4.gif?6bc365a78b4421a2f26a7e4630ddd002"},5183:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});const o="/images/part-5.gif?00b066ebd7ba5688f59c605a59a8b656"},5416:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});const o="/images/part-6.gif?5e00f299054075a2df949765c30f6652"},4310:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});const o="/images/no-image.png?11910ffa7553d608443b9c830a683263"},6291:t=>{!function(){var e;function n(t){for(var e,n,o,i,r=1,s=[].slice.call(arguments),a=0,l=t.length,c="",u=!1,p=!1,h=function(){return s[r++]},d=function(){for(var n="";/\d/.test(t[a]);)n+=t[a++],e=t[a];return n.length>0?parseInt(n):null};a<l;++a)if(e=t[a],u)switch(u=!1,"."==e?(p=!1,e=t[++a]):"0"==e&&"."==t[a+1]?(p=!0,e=t[a+=2]):p=!0,i=d(),e){case"b":c+=parseInt(h(),10).toString(2);break;case"c":c+="string"==typeof(n=h())||n instanceof String?n:String.fromCharCode(parseInt(n,10));break;case"d":c+=parseInt(h(),10);break;case"f":o=String(parseFloat(h()).toFixed(i||6)),c+=p?o:o.replace(/^0/,"");break;case"j":c+=JSON.stringify(h());break;case"o":c+="0"+parseInt(h(),10).toString(8);break;case"s":c+=h();break;case"x":c+="0x"+parseInt(h(),10).toString(16);break;case"X":c+="0x"+parseInt(h(),10).toString(16).toUpperCase();break;default:c+=e}else"%"===e?u=!0:c+=e;return c}(e=t.exports=n).format=n,e.vsprintf=function(t,e){return n.apply(null,[t].concat(e))},"undefined"!=typeof console&&"function"==typeof console.log&&(e.printf=function(){console.log(n.apply(null,arguments))})}()},7802:t=>{function e(t){return t instanceof Map?t.clear=t.delete=t.set=function(){throw new Error("map is read-only")}:t instanceof Set&&(t.add=t.clear=t.delete=function(){throw new Error("set is read-only")}),Object.freeze(t),Object.getOwnPropertyNames(t).forEach((function(n){var o=t[n];"object"!=typeof o||Object.isFrozen(o)||e(o)})),t}var n=e,o=e;n.default=o;class i{constructor(t){void 0===t.data&&(t.data={}),this.data=t.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function r(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function s(t,...e){const n=Object.create(null);for(const e in t)n[e]=t[e];return e.forEach((function(t){for(const e in t)n[e]=t[e]})),n}const a=t=>!!t.kind;class l{constructor(t,e){this.buffer="",this.classPrefix=e.classPrefix,t.walk(this)}addText(t){this.buffer+=r(t)}openNode(t){if(!a(t))return;let e=t.kind;t.sublanguage||(e=`${this.classPrefix}${e}`),this.span(e)}closeNode(t){a(t)&&(this.buffer+="</span>")}value(){return this.buffer}span(t){this.buffer+=`<span class="${t}">`}}class c{constructor(){this.rootNode={children:[]},this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(t){this.top.children.push(t)}openNode(t){const e={kind:t,children:[]};this.add(e),this.stack.push(e)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(t){return this.constructor._walk(t,this.rootNode)}static _walk(t,e){return"string"==typeof e?t.addText(e):e.children&&(t.openNode(e),e.children.forEach((e=>this._walk(t,e))),t.closeNode(e)),t}static _collapse(t){"string"!=typeof t&&t.children&&(t.children.every((t=>"string"==typeof t))?t.children=[t.children.join("")]:t.children.forEach((t=>{c._collapse(t)})))}}class u extends c{constructor(t){super(),this.options=t}addKeyword(t,e){""!==t&&(this.openNode(e),this.addText(t),this.closeNode())}addText(t){""!==t&&this.add(t)}addSublanguage(t,e){const n=t.root;n.kind=e,n.sublanguage=!0,this.add(n)}toHTML(){return new l(this,this.options).value()}finalize(){return!0}}function p(t){return t?"string"==typeof t?t:t.source:null}const h=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;const d="[a-zA-Z]\\w*",f="[a-zA-Z_]\\w*",m="\\b\\d+(\\.\\d+)?",v="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",g="\\b(0b[01]+)",y={begin:"\\\\[\\s\\S]",relevance:0},b={className:"string",begin:"'",end:"'",illegal:"\\n",contains:[y]},_={className:"string",begin:'"',end:'"',illegal:"\\n",contains:[y]},w={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},x=function(t,e,n={}){const o=s({className:"comment",begin:t,end:e,contains:[]},n);return o.contains.push(w),o.contains.push({className:"doctag",begin:"(?:TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):",relevance:0}),o},S=x("//","$"),k=x("/\\*","\\*/"),C=x("#","$"),O={className:"number",begin:m,relevance:0},T={className:"number",begin:v,relevance:0},M={className:"number",begin:g,relevance:0},E={className:"number",begin:m+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},A={begin:/(?=\/[^/\n]*\/)/,contains:[{className:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[y,{begin:/\[/,end:/\]/,relevance:0,contains:[y]}]}]},N={className:"title",begin:d,relevance:0},P={className:"title",begin:f,relevance:0},L={begin:"\\.\\s*[a-zA-Z_]\\w*",relevance:0};var I=Object.freeze({__proto__:null,MATCH_NOTHING_RE:/\b\B/,IDENT_RE:d,UNDERSCORE_IDENT_RE:f,NUMBER_RE:m,C_NUMBER_RE:v,BINARY_NUMBER_RE:g,RE_STARTERS_RE:"!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",SHEBANG:(t={})=>{const e=/^#![ ]*\//;return t.binary&&(t.begin=function(...t){return t.map((t=>p(t))).join("")}(e,/.*\b/,t.binary,/\b.*/)),s({className:"meta",begin:e,end:/$/,relevance:0,"on:begin":(t,e)=>{0!==t.index&&e.ignoreMatch()}},t)},BACKSLASH_ESCAPE:y,APOS_STRING_MODE:b,QUOTE_STRING_MODE:_,PHRASAL_WORDS_MODE:w,COMMENT:x,C_LINE_COMMENT_MODE:S,C_BLOCK_COMMENT_MODE:k,HASH_COMMENT_MODE:C,NUMBER_MODE:O,C_NUMBER_MODE:T,BINARY_NUMBER_MODE:M,CSS_NUMBER_MODE:E,REGEXP_MODE:A,TITLE_MODE:N,UNDERSCORE_TITLE_MODE:P,METHOD_GUARD:L,END_SAME_AS_BEGIN:function(t){return Object.assign(t,{"on:begin":(t,e)=>{e.data._beginMatch=t[1]},"on:end":(t,e)=>{e.data._beginMatch!==t[1]&&e.ignoreMatch()}})}});function D(t,e){"."===t.input[t.index-1]&&e.ignoreMatch()}function R(t,e){e&&t.beginKeywords&&(t.begin="\\b("+t.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",t.__beforeBegin=D,t.keywords=t.keywords||t.beginKeywords,delete t.beginKeywords,void 0===t.relevance&&(t.relevance=0))}function z(t,e){Array.isArray(t.illegal)&&(t.illegal=function(...t){return"("+t.map((t=>p(t))).join("|")+")"}(...t.illegal))}function B(t,e){if(t.match){if(t.begin||t.end)throw new Error("begin & end are not supported with match");t.begin=t.match,delete t.match}}function $(t,e){void 0===t.relevance&&(t.relevance=1)}const j=["of","and","for","in","not","or","if","then","parent","list","value"];function V(t,e,n="keyword"){const o={};return"string"==typeof t?i(n,t.split(" ")):Array.isArray(t)?i(n,t):Object.keys(t).forEach((function(n){Object.assign(o,V(t[n],e,n))})),o;function i(t,n){e&&(n=n.map((t=>t.toLowerCase()))),n.forEach((function(e){const n=e.split("|");o[n[0]]=[t,Z(n[0],n[1])]}))}}function Z(t,e){return e?Number(e):function(t){return j.includes(t.toLowerCase())}(t)?0:1}function F(t,{plugins:e}){function n(e,n){return new RegExp(p(e),"m"+(t.case_insensitive?"i":"")+(n?"g":""))}class o{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(t,e){e.position=this.position++,this.matchIndexes[this.matchAt]=e,this.regexes.push([e,t]),this.matchAt+=function(t){return new RegExp(t.toString()+"|").exec("").length-1}(t)+1}compile(){0===this.regexes.length&&(this.exec=()=>null);const t=this.regexes.map((t=>t[1]));this.matcherRe=n(function(t,e="|"){let n=0;return t.map((t=>{n+=1;const e=n;let o=p(t),i="";for(;o.length>0;){const t=h.exec(o);if(!t){i+=o;break}i+=o.substring(0,t.index),o=o.substring(t.index+t[0].length),"\\"===t[0][0]&&t[1]?i+="\\"+String(Number(t[1])+e):(i+=t[0],"("===t[0]&&n++)}return i})).map((t=>`(${t})`)).join(e)}(t),!0),this.lastIndex=0}exec(t){this.matcherRe.lastIndex=this.lastIndex;const e=this.matcherRe.exec(t);if(!e)return null;const n=e.findIndex(((t,e)=>e>0&&void 0!==t)),o=this.matchIndexes[n];return e.splice(0,n),Object.assign(e,o)}}class i{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(t){if(this.multiRegexes[t])return this.multiRegexes[t];const e=new o;return this.rules.slice(t).forEach((([t,n])=>e.addRule(t,n))),e.compile(),this.multiRegexes[t]=e,e}resumingScanAtSamePosition(){return 0!==this.regexIndex}considerAll(){this.regexIndex=0}addRule(t,e){this.rules.push([t,e]),"begin"===e.type&&this.count++}exec(t){const e=this.getMatcher(this.regexIndex);e.lastIndex=this.lastIndex;let n=e.exec(t);if(this.resumingScanAtSamePosition())if(n&&n.index===this.lastIndex);else{const e=this.getMatcher(0);e.lastIndex=this.lastIndex+1,n=e.exec(t)}return n&&(this.regexIndex+=n.position+1,this.regexIndex===this.count&&this.considerAll()),n}}if(t.compilerExtensions||(t.compilerExtensions=[]),t.contains&&t.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return t.classNameAliases=s(t.classNameAliases||{}),function e(o,r){const a=o;if(o.isCompiled)return a;[B].forEach((t=>t(o,r))),t.compilerExtensions.forEach((t=>t(o,r))),o.__beforeBegin=null,[R,z,$].forEach((t=>t(o,r))),o.isCompiled=!0;let l=null;if("object"==typeof o.keywords&&(l=o.keywords.$pattern,delete o.keywords.$pattern),o.keywords&&(o.keywords=V(o.keywords,t.case_insensitive)),o.lexemes&&l)throw new Error("ERR: Prefer `keywords.$pattern` to `mode.lexemes`, BOTH are not allowed. (see mode reference) ");return l=l||o.lexemes||/\w+/,a.keywordPatternRe=n(l,!0),r&&(o.begin||(o.begin=/\B|\b/),a.beginRe=n(o.begin),o.endSameAsBegin&&(o.end=o.begin),o.end||o.endsWithParent||(o.end=/\B|\b/),o.end&&(a.endRe=n(o.end)),a.terminatorEnd=p(o.end)||"",o.endsWithParent&&r.terminatorEnd&&(a.terminatorEnd+=(o.end?"|":"")+r.terminatorEnd)),o.illegal&&(a.illegalRe=n(o.illegal)),o.contains||(o.contains=[]),o.contains=[].concat(...o.contains.map((function(t){return function(t){t.variants&&!t.cachedVariants&&(t.cachedVariants=t.variants.map((function(e){return s(t,{variants:null},e)})));if(t.cachedVariants)return t.cachedVariants;if(H(t))return s(t,{starts:t.starts?s(t.starts):null});if(Object.isFrozen(t))return s(t);return t}("self"===t?o:t)}))),o.contains.forEach((function(t){e(t,a)})),o.starts&&e(o.starts,r),a.matcher=function(t){const e=new i;return t.contains.forEach((t=>e.addRule(t.begin,{rule:t,type:"begin"}))),t.terminatorEnd&&e.addRule(t.terminatorEnd,{type:"end"}),t.illegal&&e.addRule(t.illegal,{type:"illegal"}),e}(a),a}(t)}function H(t){return!!t&&(t.endsWithParent||H(t.starts))}function W(t){const e={props:["language","code","autodetect"],data:function(){return{detectedLanguage:"",unknownLanguage:!1}},computed:{className(){return this.unknownLanguage?"":"hljs "+this.detectedLanguage},highlighted(){if(!this.autoDetect&&!t.getLanguage(this.language))return console.warn(`The language "${this.language}" you specified could not be found.`),this.unknownLanguage=!0,r(this.code);let e={};return this.autoDetect?(e=t.highlightAuto(this.code),this.detectedLanguage=e.language):(e=t.highlight(this.language,this.code,this.ignoreIllegals),this.detectedLanguage=this.language),e.value},autoDetect(){return!this.language||(t=this.autodetect,Boolean(t||""===t));var t},ignoreIllegals:()=>!0},render(t){return t("pre",{},[t("code",{class:this.className,domProps:{innerHTML:this.highlighted}})])}};return{Component:e,VuePlugin:{install(t){t.component("highlightjs",e)}}}}const U={"after:highlightElement":({el:t,result:e,text:n})=>{const o=J(t);if(!o.length)return;const i=document.createElement("div");i.innerHTML=e.value,e.value=function(t,e,n){let o=0,i="";const s=[];function a(){return t.length&&e.length?t[0].offset!==e[0].offset?t[0].offset<e[0].offset?t:e:"start"===e[0].event?t:e:t.length?t:e}function l(t){function e(t){return" "+t.nodeName+'="'+r(t.value)+'"'}i+="<"+q(t)+[].map.call(t.attributes,e).join("")+">"}function c(t){i+="</"+q(t)+">"}function u(t){("start"===t.event?l:c)(t.node)}for(;t.length||e.length;){let e=a();if(i+=r(n.substring(o,e[0].offset)),o=e[0].offset,e===t){s.reverse().forEach(c);do{u(e.splice(0,1)[0]),e=a()}while(e===t&&e.length&&e[0].offset===o);s.reverse().forEach(l)}else"start"===e[0].event?s.push(e[0].node):s.pop(),u(e.splice(0,1)[0])}return i+r(n.substr(o))}(o,J(i),n)}};function q(t){return t.nodeName.toLowerCase()}function J(t){const e=[];return function t(n,o){for(let i=n.firstChild;i;i=i.nextSibling)3===i.nodeType?o+=i.nodeValue.length:1===i.nodeType&&(e.push({event:"start",offset:o,node:i}),o=t(i,o),q(i).match(/br|hr|img|input/)||e.push({event:"stop",offset:o,node:i}));return o}(t,0),e}const K={},G=t=>{console.error(t)},X=(t,...e)=>{console.log(`WARN: ${t}`,...e)},Y=(t,e)=>{K[`${t}/${e}`]||(console.log(`Deprecated as of ${t}. ${e}`),K[`${t}/${e}`]=!0)},Q=r,tt=s,et=Symbol("nomatch");var nt=function(t){const e=Object.create(null),o=Object.create(null),r=[];let s=!0;const a=/(^(<[^>]+>|\t|)+|\n)/gm,l="Could not find the language '{}', did you forget to load/include a language module?",c={disableAutodetect:!0,name:"Plain text",contains:[]};let p={noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:null,__emitter:u};function h(t){return p.noHighlightRe.test(t)}function d(t,e,n,o){let i="",r="";"object"==typeof e?(i=t,n=e.ignoreIllegals,r=e.language,o=void 0):(Y("10.7.0","highlight(lang, code, ...args) has been deprecated."),Y("10.7.0","Please use highlight(code, options) instead.\nhttps://github.com/highlightjs/highlight.js/issues/2277"),r=t,i=e);const s={code:i,language:r};O("before:highlight",s);const a=s.result?s.result:f(s.language,s.code,n,o);return a.code=s.code,O("after:highlight",a),a}function f(t,n,o,a){function c(t,e){const n=w.case_insensitive?e[0].toLowerCase():e[0];return Object.prototype.hasOwnProperty.call(t.keywords,n)&&t.keywords[n]}function u(){null!=C.subLanguage?function(){if(""===M)return;let t=null;if("string"==typeof C.subLanguage){if(!e[C.subLanguage])return void T.addText(M);t=f(C.subLanguage,M,!0,O[C.subLanguage]),O[C.subLanguage]=t.top}else t=m(M,C.subLanguage.length?C.subLanguage:null);C.relevance>0&&(E+=t.relevance),T.addSublanguage(t.emitter,t.language)}():function(){if(!C.keywords)return void T.addText(M);let t=0;C.keywordPatternRe.lastIndex=0;let e=C.keywordPatternRe.exec(M),n="";for(;e;){n+=M.substring(t,e.index);const o=c(C,e);if(o){const[t,i]=o;if(T.addText(n),n="",E+=i,t.startsWith("_"))n+=e[0];else{const n=w.classNameAliases[t]||t;T.addKeyword(e[0],n)}}else n+=e[0];t=C.keywordPatternRe.lastIndex,e=C.keywordPatternRe.exec(M)}n+=M.substr(t),T.addText(n)}(),M=""}function h(t){return t.className&&T.openNode(w.classNameAliases[t.className]||t.className),C=Object.create(t,{parent:{value:C}}),C}function d(t,e,n){let o=function(t,e){const n=t&&t.exec(e);return n&&0===n.index}(t.endRe,n);if(o){if(t["on:end"]){const n=new i(t);t["on:end"](e,n),n.isMatchIgnored&&(o=!1)}if(o){for(;t.endsParent&&t.parent;)t=t.parent;return t}}if(t.endsWithParent)return d(t.parent,e,n)}function v(t){return 0===C.matcher.regexIndex?(M+=t[0],1):(P=!0,0)}function g(t){const e=t[0],n=t.rule,o=new i(n),r=[n.__beforeBegin,n["on:begin"]];for(const n of r)if(n&&(n(t,o),o.isMatchIgnored))return v(e);return n&&n.endSameAsBegin&&(n.endRe=new RegExp(e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"m")),n.skip?M+=e:(n.excludeBegin&&(M+=e),u(),n.returnBegin||n.excludeBegin||(M=e)),h(n),n.returnBegin?0:e.length}function y(t){const e=t[0],o=n.substr(t.index),i=d(C,t,o);if(!i)return et;const r=C;r.skip?M+=e:(r.returnEnd||r.excludeEnd||(M+=e),u(),r.excludeEnd&&(M=e));do{C.className&&T.closeNode(),C.skip||C.subLanguage||(E+=C.relevance),C=C.parent}while(C!==i.parent);return i.starts&&(i.endSameAsBegin&&(i.starts.endRe=i.endRe),h(i.starts)),r.returnEnd?0:e.length}let b={};function _(e,i){const r=i&&i[0];if(M+=e,null==r)return u(),0;if("begin"===b.type&&"end"===i.type&&b.index===i.index&&""===r){if(M+=n.slice(i.index,i.index+1),!s){const e=new Error("0 width match regex");throw e.languageName=t,e.badRule=b.rule,e}return 1}if(b=i,"begin"===i.type)return g(i);if("illegal"===i.type&&!o){const t=new Error('Illegal lexeme "'+r+'" for mode "'+(C.className||"<unnamed>")+'"');throw t.mode=C,t}if("end"===i.type){const t=y(i);if(t!==et)return t}if("illegal"===i.type&&""===r)return 1;if(N>1e5&&N>3*i.index){throw new Error("potential infinite loop, way more iterations than matches")}return M+=r,r.length}const w=S(t);if(!w)throw G(l.replace("{}",t)),new Error('Unknown language: "'+t+'"');const x=F(w,{plugins:r});let k="",C=a||x;const O={},T=new p.__emitter(p);!function(){const t=[];for(let e=C;e!==w;e=e.parent)e.className&&t.unshift(e.className);t.forEach((t=>T.openNode(t)))}();let M="",E=0,A=0,N=0,P=!1;try{for(C.matcher.considerAll();;){N++,P?P=!1:C.matcher.considerAll(),C.matcher.lastIndex=A;const t=C.matcher.exec(n);if(!t)break;const e=_(n.substring(A,t.index),t);A=t.index+e}return _(n.substr(A)),T.closeAllNodes(),T.finalize(),k=T.toHTML(),{relevance:Math.floor(E),value:k,language:t,illegal:!1,emitter:T,top:C}}catch(e){if(e.message&&e.message.includes("Illegal"))return{illegal:!0,illegalBy:{msg:e.message,context:n.slice(A-100,A+100),mode:e.mode},sofar:k,relevance:0,value:Q(n),emitter:T};if(s)return{illegal:!1,relevance:0,value:Q(n),emitter:T,language:t,top:C,errorRaised:e};throw e}}function m(t,n){n=n||p.languages||Object.keys(e);const o=function(t){const e={relevance:0,emitter:new p.__emitter(p),value:Q(t),illegal:!1,top:c};return e.emitter.addText(t),e}(t),i=n.filter(S).filter(C).map((e=>f(e,t,!1)));i.unshift(o);const r=i.sort(((t,e)=>{if(t.relevance!==e.relevance)return e.relevance-t.relevance;if(t.language&&e.language){if(S(t.language).supersetOf===e.language)return 1;if(S(e.language).supersetOf===t.language)return-1}return 0})),[s,a]=r,l=s;return l.second_best=a,l}const v={"before:highlightElement":({el:t})=>{p.useBR&&(t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/<br[ /]*>/g,"\n"))},"after:highlightElement":({result:t})=>{p.useBR&&(t.value=t.value.replace(/\n/g,"<br>"))}},g=/^(<[^>]+>|\t)+/gm,y={"after:highlightElement":({result:t})=>{p.tabReplace&&(t.value=t.value.replace(g,(t=>t.replace(/\t/g,p.tabReplace))))}};function b(t){let e=null;const n=function(t){let e=t.className+" ";e+=t.parentNode?t.parentNode.className:"";const n=p.languageDetectRe.exec(e);if(n){const e=S(n[1]);return e||(X(l.replace("{}",n[1])),X("Falling back to no-highlight mode for this block.",t)),e?n[1]:"no-highlight"}return e.split(/\s+/).find((t=>h(t)||S(t)))}(t);if(h(n))return;O("before:highlightElement",{el:t,language:n}),e=t;const i=e.textContent,r=n?d(i,{language:n,ignoreIllegals:!0}):m(i);O("after:highlightElement",{el:t,result:r,text:i}),t.innerHTML=r.value,function(t,e,n){const i=e?o[e]:n;t.classList.add("hljs"),i&&t.classList.add(i)}(t,n,r.language),t.result={language:r.language,re:r.relevance,relavance:r.relevance},r.second_best&&(t.second_best={language:r.second_best.language,re:r.second_best.relevance,relavance:r.second_best.relevance})}const _=()=>{if(_.called)return;_.called=!0,Y("10.6.0","initHighlighting() is deprecated.  Use highlightAll() instead.");document.querySelectorAll("pre code").forEach(b)};let w=!1;function x(){if("loading"===document.readyState)return void(w=!0);document.querySelectorAll("pre code").forEach(b)}function S(t){return t=(t||"").toLowerCase(),e[t]||e[o[t]]}function k(t,{languageName:e}){"string"==typeof t&&(t=[t]),t.forEach((t=>{o[t.toLowerCase()]=e}))}function C(t){const e=S(t);return e&&!e.disableAutodetect}function O(t,e){const n=t;r.forEach((function(t){t[n]&&t[n](e)}))}"undefined"!=typeof window&&window.addEventListener&&window.addEventListener("DOMContentLoaded",(function(){w&&x()}),!1),Object.assign(t,{highlight:d,highlightAuto:m,highlightAll:x,fixMarkup:function(t){return Y("10.2.0","fixMarkup will be removed entirely in v11.0"),Y("10.2.0","Please see https://github.com/highlightjs/highlight.js/issues/2534"),e=t,p.tabReplace||p.useBR?e.replace(a,(t=>"\n"===t?p.useBR?"<br>":t:p.tabReplace?t.replace(/\t/g,p.tabReplace):t)):e;var e},highlightElement:b,highlightBlock:function(t){return Y("10.7.0","highlightBlock will be removed entirely in v12.0"),Y("10.7.0","Please use highlightElement now."),b(t)},configure:function(t){t.useBR&&(Y("10.3.0","'useBR' will be removed entirely in v11.0"),Y("10.3.0","Please see https://github.com/highlightjs/highlight.js/issues/2559")),p=tt(p,t)},initHighlighting:_,initHighlightingOnLoad:function(){Y("10.6.0","initHighlightingOnLoad() is deprecated.  Use highlightAll() instead."),w=!0},registerLanguage:function(n,o){let i=null;try{i=o(t)}catch(t){if(G("Language definition for '{}' could not be registered.".replace("{}",n)),!s)throw t;G(t),i=c}i.name||(i.name=n),e[n]=i,i.rawDefinition=o.bind(null,t),i.aliases&&k(i.aliases,{languageName:n})},unregisterLanguage:function(t){delete e[t];for(const e of Object.keys(o))o[e]===t&&delete o[e]},listLanguages:function(){return Object.keys(e)},getLanguage:S,registerAliases:k,requireLanguage:function(t){Y("10.4.0","requireLanguage will be removed entirely in v11."),Y("10.4.0","Please see https://github.com/highlightjs/highlight.js/pull/2844");const e=S(t);if(e)return e;throw new Error("The '{}' language is required, but not loaded.".replace("{}",t))},autoDetection:C,inherit:tt,addPlugin:function(t){!function(t){t["before:highlightBlock"]&&!t["before:highlightElement"]&&(t["before:highlightElement"]=e=>{t["before:highlightBlock"](Object.assign({block:e.el},e))}),t["after:highlightBlock"]&&!t["after:highlightElement"]&&(t["after:highlightElement"]=e=>{t["after:highlightBlock"](Object.assign({block:e.el},e))})}(t),r.push(t)},vuePlugin:W(t).VuePlugin}),t.debugMode=function(){s=!1},t.safeMode=function(){s=!0},t.versionString="10.7.3";for(const t in I)"object"==typeof I[t]&&n(I[t]);return Object.assign(t,I),t.addPlugin(v),t.addPlugin(U),t.addPlugin(y),t}({});t.exports=nt},974:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var o=n(1519),i=n.n(o)()((function(t){return t[1]}));i.push([t.id,".v-carousel{overflow:hidden;position:relative;width:100%}.v-carousel__controls{align-items:center;background:rgba(0,0,0,.3);bottom:0;display:flex;height:50px;justify-content:center;list-style-type:none;position:absolute;width:100%;z-index:1}.v-carousel__controls>.v-item-group{flex:0 1 auto}.v-carousel__controls__item{margin:0 8px}.v-carousel__controls__item .v-icon{opacity:.5}.v-carousel__controls__item--active .v-icon{opacity:1;vertical-align:middle}.v-carousel__controls__item:hover{background:none}.v-carousel__controls__item:hover .v-icon{opacity:.8}.v-carousel__progress{bottom:0;left:0;margin:0;position:absolute;right:0}.v-carousel .v-window-item{display:block;height:inherit;text-decoration:none}.v-carousel--hide-delimiter-background .v-carousel__controls{background:transparent}.v-carousel--vertical-delimiters .v-carousel__controls{height:100%!important;width:50px}",""]);const r=i},8564:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var o=n(1519),i=n.n(o)()((function(t){return t[1]}));i.push([t.id,".v-input--checkbox.v-input--indeterminate.v-input--is-disabled{opacity:.6}.v-input--checkbox.v-input--dense{margin-top:4px}",""]);const r=i},18:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var o=n(1519),i=n.n(o)()((function(t){return t[1]}));i.push([t.id,".theme--light.v-file-input .v-file-input__text{color:rgba(0,0,0,.87)}.theme--light.v-file-input .v-file-input__text--placeholder{color:rgba(0,0,0,.6)}.theme--light.v-file-input.v-input--is-disabled .v-file-input__text,.theme--light.v-file-input.v-input--is-disabled .v-file-input__text .v-file-input__text--placeholder{color:rgba(0,0,0,.38)}.theme--dark.v-file-input .v-file-input__text{color:#fff}.theme--dark.v-file-input .v-file-input__text--placeholder{color:hsla(0,0%,100%,.7)}.theme--dark.v-file-input.v-input--is-disabled .v-file-input__text,.theme--dark.v-file-input.v-input--is-disabled .v-file-input__text .v-file-input__text--placeholder{color:hsla(0,0%,100%,.5)}.v-file-input input[type=file]{left:0;max-width:0;opacity:0;pointer-events:none;position:absolute;width:0}.v-file-input .v-file-input__text{align-items:center;align-self:stretch;display:flex;flex-wrap:wrap;width:100%}.v-file-input .v-file-input__text.v-file-input__text--chips{flex-wrap:wrap}.v-file-input .v-file-input__text .v-chip{margin:4px}.v-file-input .v-text-field__slot{min-height:32px}.v-file-input.v-input--dense .v-text-field__slot{min-height:26px}.v-file-input.v-text-field--filled:not(.v-text-field--single-line) .v-file-input__text{padding-top:22px}.v-file-input.v-text-field--outlined .v-text-field__slot{padding:6px 0}.v-file-input.v-text-field--outlined.v-input--dense .v-text-field__slot{padding:3px 0}",""]);const r=i},9739:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var o=n(1519),i=n.n(o)()((function(t){return t[1]}));i.push([t.id,'.theme--light.v-slider .v-slider__thumb,.theme--light.v-slider .v-slider__track-background,.theme--light.v-slider .v-slider__track-fill{background:rgba(0,0,0,.26)}.theme--dark.v-slider .v-slider__thumb,.theme--dark.v-slider .v-slider__track-background,.theme--dark.v-slider .v-slider__track-fill{background:hsla(0,0%,100%,.2)}.v-slider{align-items:center;cursor:default;display:flex;flex:1;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.v-slider input{cursor:default;display:none;padding:0;width:100%}.v-slider__track-container{border-radius:0;position:absolute}.v-slider__thumb-container,.v-slider__track-background,.v-slider__track-fill{position:absolute;transition:.3s cubic-bezier(.25,.8,.5,1)}.v-slider__thumb-container{outline:none;top:50%}.v-slider__thumb-container:hover .v-slider__thumb:before{transform:scale(1)}.v-slider__thumb{height:12px;left:-6px;top:50%;transform:translateY(-50%);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:12px}.v-slider__thumb,.v-slider__thumb:before{border-radius:50%;position:absolute;transition:.3s cubic-bezier(.25,.8,.5,1)}.v-slider__thumb:before{background:currentColor;color:inherit;content:"";height:36px;left:-12px;opacity:.3;pointer-events:none;top:-12px;transform:scale(.1);width:36px}.v-slider__thumb:after{content:"";height:42px;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);width:42px}.v-slider__tick,.v-slider__ticks-container{position:absolute}.v-slider__tick{background-color:rgba(0,0,0,.5);border-radius:0;opacity:0;transition:.3s cubic-bezier(.25,.8,.5,1)}.v-slider__tick--filled{background-color:hsla(0,0%,100%,.5)}.v-application--is-ltr .v-slider__tick:first-child .v-slider__tick-label{transform:none}.v-application--is-rtl .v-slider__tick:first-child .v-slider__tick-label{transform:translateX(100%)}.v-application--is-ltr .v-slider__tick:last-child .v-slider__tick-label{transform:translateX(-100%)}.v-application--is-rtl .v-slider__tick:last-child .v-slider__tick-label{transform:none}.v-slider__tick-label{position:absolute;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap}.v-slider__thumb-label-container{top:0}.v-slider__thumb-label,.v-slider__thumb-label-container{left:0;position:absolute;transition:.3s cubic-bezier(.25,.8,.25,1)}.v-slider__thumb-label{align-items:center;border-radius:50% 50% 0;bottom:100%;color:#fff;display:flex;font-size:.75rem;height:32px;justify-content:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:32px}.v-slider--horizontal{margin-left:8px;margin-right:8px;min-height:32px}.v-slider--horizontal .v-slider__track-container{height:2px;left:0;top:50%;transform:translateY(-50%);width:100%}.v-slider--horizontal .v-slider__track-background,.v-slider--horizontal .v-slider__track-fill{height:100%}.v-slider--horizontal .v-slider__ticks-container{height:2px;left:0;width:100%}.v-application--is-ltr .v-slider--horizontal .v-slider__tick:first-child .v-slider__tick-label,.v-application--is-rtl .v-slider--horizontal .v-slider__tick:first-child .v-slider__tick-label{transform:translateX(0)}.v-application--is-ltr .v-slider--horizontal .v-slider__tick:last-child .v-slider__tick-label{transform:translateX(-100%)}.v-application--is-rtl .v-slider--horizontal .v-slider__tick:last-child .v-slider__tick-label{transform:translateX(100%)}.v-slider--horizontal .v-slider__tick .v-slider__tick-label{top:8px}.v-application--is-ltr .v-slider--horizontal .v-slider__tick .v-slider__tick-label{transform:translateX(-50%)}.v-application--is-rtl .v-slider--horizontal .v-slider__tick .v-slider__tick-label{transform:translateX(50%)}.v-slider--horizontal .v-slider__thumb-label{transform:translateY(-20%) translateY(-12px) translateX(-50%) rotate(45deg)}.v-slider--horizontal .v-slider__thumb-label>*{transform:rotate(-45deg)}.v-slider--vertical{margin-bottom:12px;margin-top:12px;min-height:150px}.v-slider--vertical .v-slider__track-container{height:100%;left:50%;top:0;transform:translateX(-50%);width:2px}.v-slider--vertical .v-slider__track-background,.v-slider--vertical .v-slider__track-fill{width:100%}.v-slider--vertical .v-slider__thumb-container{left:50%}.v-slider--vertical .v-slider__ticks-container{height:100%;left:50%;top:0;transform:translateX(-50%);width:2px}.v-application--is-ltr .v-slider--vertical .v-slider__tick .v-slider__tick-label,.v-application--is-ltr .v-slider--vertical .v-slider__tick:first-child .v-slider__tick-label,.v-application--is-ltr .v-slider--vertical .v-slider__tick:last-child .v-slider__tick-label{left:12px;transform:translateY(-50%)}.v-application--is-rtl .v-slider--vertical .v-slider__tick .v-slider__tick-label,.v-application--is-rtl .v-slider--vertical .v-slider__tick:first-child .v-slider__tick-label,.v-application--is-rtl .v-slider--vertical .v-slider__tick:last-child .v-slider__tick-label{right:12px;transform:translateY(-50%)}.v-slider--vertical .v-slider__thumb-label>*{transform:rotate(-135deg)}.v-slider__thumb-container--focused .v-slider__thumb:before{transform:scale(1)}.v-slider--active .v-slider__tick{opacity:1}.v-slider__thumb-container--active .v-slider__thumb:before{transform:scale(1.5)!important}.v-slider--disabled{pointer-events:none}.v-slider--disabled .v-slider__thumb{height:8px;left:-4px;width:8px}.v-slider--disabled .v-slider__thumb:before{display:none}.v-slider__ticks-container--always-show .v-slider__tick{opacity:1}.v-input__slider.v-input--is-readonly>.v-input__control{pointer-events:none}.v-application--is-ltr .v-input__slider .v-input__slot .v-label{margin-left:0;margin-right:12px}.v-application--is-ltr .v-input__slider--inverse-label .v-input__slot .v-label,.v-application--is-rtl .v-input__slider .v-input__slot .v-label{margin-left:12px;margin-right:0}.v-application--is-rtl .v-input__slider--inverse-label .v-input__slot .v-label{margin-left:0;margin-right:12px}.v-input__slider--vertical{align-items:center}.v-application--is-ltr .v-input__slider--vertical{flex-direction:column-reverse}.v-application--is-rtl .v-input__slider--vertical{flex-direction:column}.v-input__slider--vertical .v-input__append-outer,.v-input__slider--vertical .v-input__prepend-outer,.v-input__slider--vertical .v-input__slot{margin:0}.v-input__slider--vertical .v-messages{display:none}.v-input--has-state .v-slider__track-background{opacity:.4}',""]);const r=i},4899:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var o=n(1519),i=n.n(o)()((function(t){return t[1]}));i.push([t.id,".theme--light.v-stepper{background:#fff}.theme--light.v-stepper .v-stepper__step:not(.v-stepper__step--active):not(.v-stepper__step--complete):not(.v-stepper__step--error) .v-stepper__step__step{background:rgba(0,0,0,.38)}.theme--light.v-stepper .v-stepper__step__step,.theme--light.v-stepper .v-stepper__step__step .v-icon{color:#fff}.theme--light.v-stepper .v-stepper__header .v-divider{border-color:rgba(0,0,0,.12)}.theme--light.v-stepper .v-stepper__step--active .v-stepper__label{text-shadow:0 0 0 #000}.theme--light.v-stepper .v-stepper__step--editable:hover{background:rgba(0,0,0,.06)}.theme--light.v-stepper .v-stepper__step--editable:hover .v-stepper__label{text-shadow:0 0 0 #000}.theme--light.v-stepper .v-stepper__step--complete .v-stepper__label{color:rgba(0,0,0,.87)}.theme--light.v-stepper .v-stepper__step--inactive.v-stepper__step--editable:not(.v-stepper__step--error):hover .v-stepper__step__step{background:rgba(0,0,0,.54)}.theme--light.v-stepper .v-stepper__label{color:rgba(0,0,0,.38)}.theme--light.v-stepper--non-linear .v-stepper__step:not(.v-stepper__step--complete):not(.v-stepper__step--error) .v-stepper__label,.theme--light.v-stepper .v-stepper__label small{color:rgba(0,0,0,.6)}.v-application--is-ltr .theme--light.v-stepper--vertical .v-stepper__content:not(:last-child){border-left:1px solid rgba(0,0,0,.12)}.v-application--is-rtl .theme--light.v-stepper--vertical .v-stepper__content:not(:last-child){border-right:1px solid rgba(0,0,0,.12)}.theme--dark.v-stepper{background:#303030}.theme--dark.v-stepper .v-stepper__step:not(.v-stepper__step--active):not(.v-stepper__step--complete):not(.v-stepper__step--error) .v-stepper__step__step{background:hsla(0,0%,100%,.5)}.theme--dark.v-stepper .v-stepper__step__step,.theme--dark.v-stepper .v-stepper__step__step .v-icon{color:#fff}.theme--dark.v-stepper .v-stepper__header .v-divider{border-color:hsla(0,0%,100%,.12)}.theme--dark.v-stepper .v-stepper__step--active .v-stepper__label{text-shadow:0 0 0 #fff}.theme--dark.v-stepper .v-stepper__step--editable:hover{background:hsla(0,0%,100%,.06)}.theme--dark.v-stepper .v-stepper__step--editable:hover .v-stepper__label{text-shadow:0 0 0 #fff}.theme--dark.v-stepper .v-stepper__step--complete .v-stepper__label{color:hsla(0,0%,100%,.87)}.theme--dark.v-stepper .v-stepper__step--inactive.v-stepper__step--editable:not(.v-stepper__step--error):hover .v-stepper__step__step{background:hsla(0,0%,100%,.75)}.theme--dark.v-stepper .v-stepper__label{color:hsla(0,0%,100%,.5)}.theme--dark.v-stepper--non-linear .v-stepper__step:not(.v-stepper__step--complete):not(.v-stepper__step--error) .v-stepper__label,.theme--dark.v-stepper .v-stepper__label small{color:hsla(0,0%,100%,.7)}.v-application--is-ltr .theme--dark.v-stepper--vertical .v-stepper__content:not(:last-child){border-left:1px solid hsla(0,0%,100%,.12)}.v-application--is-rtl .theme--dark.v-stepper--vertical .v-stepper__content:not(:last-child){border-right:1px solid hsla(0,0%,100%,.12)}.v-sheet.v-stepper{border-radius:4px}.v-sheet.v-stepper:not(.v-sheet--outlined){box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.v-sheet.v-stepper.v-sheet--shaped{border-radius:24px 4px}.v-stepper{border-radius:4px;overflow:hidden;position:relative}.v-stepper__header{align-items:stretch;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);display:flex;flex-wrap:wrap;height:72px;justify-content:space-between}.v-stepper__header .v-divider{align-self:center;margin:0 -16px}.v-stepper__items{overflow:hidden;position:relative}.v-stepper__step__step{align-items:center;border-radius:50%;display:inline-flex;font-size:.75rem;height:24px;justify-content:center;min-width:24px;transition:.3s cubic-bezier(.25,.8,.25,1);width:24px}.v-application--is-ltr .v-stepper__step__step{margin-right:8px}.v-application--is-rtl .v-stepper__step__step{margin-left:8px}.v-stepper__step__step .v-icon.v-icon{font-size:1.25rem}.v-stepper__step__step .v-icon.v-icon.v-icon--svg{height:1.25rem;width:1.25rem}.v-stepper__step{align-items:center;display:flex;flex-direction:row;padding:24px;position:relative}.v-stepper__step--active .v-stepper__label{transition:.3s cubic-bezier(.4,0,.6,1)}.v-stepper__step--editable{cursor:pointer}.v-stepper__step.v-stepper__step--error .v-stepper__step__step{background:transparent;color:inherit}.v-stepper__step.v-stepper__step--error .v-stepper__step__step .v-icon{color:inherit;font-size:1.5rem}.v-stepper__step.v-stepper__step--error .v-stepper__label{color:inherit;font-weight:500;text-shadow:none}.v-stepper__step.v-stepper__step--error .v-stepper__label small{color:inherit}.v-stepper__label{align-items:flex-start;display:flex;flex-direction:column;line-height:1}.v-application--is-ltr .v-stepper__label{text-align:left}.v-application--is-rtl .v-stepper__label{text-align:right}.v-stepper__label small{font-size:.75rem;font-weight:300;text-shadow:none}.v-stepper__wrapper{overflow:hidden;transition:none}.v-stepper__content{flex:1 0 auto;padding:24px 24px 16px;top:0;width:100%}.v-stepper__content>.v-btn{margin:24px 8px 8px 0}.v-stepper--flat{box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)!important}.v-stepper--is-booted .v-stepper__content,.v-stepper--is-booted .v-stepper__wrapper{transition:.3s cubic-bezier(.25,.8,.5,1)}.v-stepper--vertical{padding-bottom:36px}.v-stepper--vertical .v-stepper__content{width:auto}.v-application--is-ltr .v-stepper--vertical .v-stepper__content{padding:16px 60px 16px 23px}.v-application--is-rtl .v-stepper--vertical .v-stepper__content{padding:16px 23px 16px 60px}.v-application--is-ltr .v-stepper--vertical .v-stepper__content{margin:-8px -36px -16px 36px}.v-application--is-rtl .v-stepper--vertical .v-stepper__content{margin:-8px 36px -16px -36px}.v-stepper--vertical .v-stepper__step{padding:24px 24px 16px}.v-application--is-ltr .v-stepper--vertical .v-stepper__step__step{margin-right:12px}.v-application--is-rtl .v-stepper--vertical .v-stepper__step__step{margin-left:12px}.v-stepper--alt-labels .v-stepper__header{height:auto}.v-stepper--alt-labels .v-stepper__header .v-divider{align-self:flex-start;margin:35px -67px 0}.v-stepper--alt-labels .v-stepper__step{align-items:center;flex-basis:175px;flex-direction:column;justify-content:flex-start}.v-stepper--alt-labels .v-stepper__step small{align-self:center}.v-stepper--alt-labels .v-stepper__step__step{margin-bottom:11px;margin-left:0;margin-right:0}@media only screen and (max-width:959.98px){.v-stepper:not(.v-stepper--vertical) .v-stepper__label{display:none}.v-stepper:not(.v-stepper--vertical) .v-stepper__step__step{margin-left:0;margin-right:0}}",""]);const r=i},2099:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var o=n(1519),i=n.n(o)()((function(t){return t[1]}));i.push([t.id,".v-tooltip{display:none}.v-tooltip--attached{display:inline}.v-tooltip__content{background:rgba(97,97,97,.9);border-radius:4px;color:#fff;display:inline-block;font-size:14px;line-height:22px;opacity:0;padding:5px 16px;pointer-events:none;position:absolute;text-transform:none;width:auto}.v-tooltip__content.menuable__content__active{opacity:.9}.v-tooltip__content--fixed{position:fixed}.v-tooltip__content[class*=-active]{transition-timing-function:cubic-bezier(0,0,.2,1)}.v-tooltip__content[class*=enter-active]{transition-duration:.15s}.v-tooltip__content[class*=leave-active]{transition-duration:75ms}",""]);const r=i},1502:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var o=n(1519),i=n.n(o)()((function(t){return t[1]}));i.push([t.id,"[data-v-2c2ff232] .border-color-gray:not(.v-input--is-focused) .v-input__control>.v-input__slot fieldset{color:rgba(0,0,0,.2)!important}",""]);const r=i},3963:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var o=n(1519),i=n.n(o)()((function(t){return t[1]}));i.push([t.id,"[data-v-7dcb135a] .v-btn__content{display:inline-block;max-height:60px;max-width:100%;overflow:hidden;text-align:center;text-overflow:ellipsis}#eventList[data-v-7dcb135a]{max-width:50%;min-width:160px;overflow-x:hidden;overflow-y:scroll;resize:horizontal}.eventDraggable[data-v-7dcb135a]{cursor:-webkit-grab!important;cursor:grab!important;pointer-events:auto!important}",""]);const r=i},9836:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var o=n(1519),i=n.n(o)()((function(t){return t[1]}));i.push([t.id,".map[data-v-54dca508]{border:1px solid #4d565661;margin:auto;width:100%}",""]);const r=i},6884:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var o=n(1519),i=n.n(o)()((function(t){return t[1]}));i.push([t.id,"[data-v-6b7cf79f] .youtube iframe{height:100%;left:0;position:absolute;top:0;width:100%}",""]);const r=i},6082:(t,e,n)=>{"use strict";n.d(e,{Z:()=>f});var o=n(1519),i=n.n(o),r=n(3965),s=n.n(r),a=n(6712),l=n(5896),c=n(2330),u=i()((function(t){return t[1]})),p=s()(a.Z),h=s()(l.Z),d=s()(c.Z);u.push([t.id,".leaflet-image-layer,.leaflet-layer,.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-pane,.leaflet-pane>canvas,.leaflet-pane>svg,.leaflet-tile,.leaflet-tile-container,.leaflet-zoom-box{left:0;position:absolute;top:0}.leaflet-container{overflow:hidden}.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-tile{-webkit-user-drag:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.leaflet-tile::-moz-selection{background:transparent}.leaflet-tile::selection{background:transparent}.leaflet-safari .leaflet-tile{image-rendering:-webkit-optimize-contrast}.leaflet-safari .leaflet-tile-container{height:1600px;-webkit-transform-origin:0 0;width:1600px}.leaflet-marker-icon,.leaflet-marker-shadow{display:block}.leaflet-container .leaflet-marker-pane img,.leaflet-container .leaflet-overlay-pane svg,.leaflet-container .leaflet-shadow-pane img,.leaflet-container .leaflet-tile,.leaflet-container .leaflet-tile-pane img,.leaflet-container img.leaflet-image-layer{max-height:none!important;max-width:none!important}.leaflet-container.leaflet-touch-zoom{touch-action:pan-x pan-y}.leaflet-container.leaflet-touch-drag{touch-action:none;touch-action:pinch-zoom}.leaflet-container.leaflet-touch-drag.leaflet-touch-zoom{touch-action:none}.leaflet-container{-webkit-tap-highlight-color:transparent}.leaflet-container a{-webkit-tap-highlight-color:rgba(51,181,229,.4)}.leaflet-tile{filter:inherit;visibility:hidden}.leaflet-tile-loaded{visibility:inherit}.leaflet-zoom-box{box-sizing:border-box;height:0;width:0;z-index:800}.leaflet-overlay-pane svg{-moz-user-select:none}.leaflet-pane{z-index:400}.leaflet-tile-pane{z-index:200}.leaflet-overlay-pane{z-index:400}.leaflet-shadow-pane{z-index:500}.leaflet-marker-pane{z-index:600}.leaflet-tooltip-pane{z-index:650}.leaflet-popup-pane{z-index:700}.leaflet-map-pane canvas{z-index:100}.leaflet-map-pane svg{z-index:200}.leaflet-vml-shape{height:1px;width:1px}.lvml{behavior:url(#default#VML);display:inline-block;position:absolute}.leaflet-control{pointer-events:visiblePainted;pointer-events:auto;position:relative;z-index:800}.leaflet-bottom,.leaflet-top{pointer-events:none;position:absolute;z-index:1000}.leaflet-top{top:0}.leaflet-right{right:0}.leaflet-bottom{bottom:0}.leaflet-left{left:0}.leaflet-control{clear:both;float:left}.leaflet-right .leaflet-control{float:right}.leaflet-top .leaflet-control{margin-top:10px}.leaflet-bottom .leaflet-control{margin-bottom:10px}.leaflet-left .leaflet-control{margin-left:10px}.leaflet-right .leaflet-control{margin-right:10px}.leaflet-fade-anim .leaflet-tile{will-change:opacity}.leaflet-fade-anim .leaflet-popup{opacity:0;transition:opacity .2s linear}.leaflet-fade-anim .leaflet-map-pane .leaflet-popup{opacity:1}.leaflet-zoom-animated{transform-origin:0 0}.leaflet-zoom-anim .leaflet-zoom-animated{transition:transform .25s cubic-bezier(0,0,.25,1);will-change:transform}.leaflet-pan-anim .leaflet-tile,.leaflet-zoom-anim .leaflet-tile{transition:none}.leaflet-zoom-anim .leaflet-zoom-hide{visibility:hidden}.leaflet-interactive{cursor:pointer}.leaflet-grab{cursor:-webkit-grab;cursor:grab}.leaflet-crosshair,.leaflet-crosshair .leaflet-interactive{cursor:crosshair}.leaflet-control,.leaflet-popup-pane{cursor:auto}.leaflet-dragging .leaflet-grab,.leaflet-dragging .leaflet-grab .leaflet-interactive,.leaflet-dragging .leaflet-marker-draggable{cursor:move;cursor:-webkit-grabbing;cursor:grabbing}.leaflet-image-layer,.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-pane>svg path,.leaflet-tile-container{pointer-events:none}.leaflet-image-layer.leaflet-interactive,.leaflet-marker-icon.leaflet-interactive,.leaflet-pane>svg path.leaflet-interactive,svg.leaflet-image-layer.leaflet-interactive path{pointer-events:visiblePainted;pointer-events:auto}.leaflet-container{background:#ddd;outline:0}.leaflet-container a{color:#0078a8}.leaflet-container a.leaflet-active{outline:2px solid orange}.leaflet-zoom-box{background:hsla(0,0%,100%,.5);border:2px dotted #38f}.leaflet-container{font:12px/1.5 Helvetica Neue,Arial,Helvetica,sans-serif}.leaflet-bar{border-radius:4px;box-shadow:0 1px 5px rgba(0,0,0,.65)}.leaflet-bar a,.leaflet-bar a:hover{background-color:#fff;border-bottom:1px solid #ccc;color:#000;display:block;height:26px;line-height:26px;text-align:center;text-decoration:none;width:26px}.leaflet-bar a,.leaflet-control-layers-toggle{background-position:50% 50%;background-repeat:no-repeat;display:block}.leaflet-bar a:hover{background-color:#f4f4f4}.leaflet-bar a:first-child{border-top-left-radius:4px;border-top-right-radius:4px}.leaflet-bar a:last-child{border-bottom:none;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.leaflet-bar a.leaflet-disabled{background-color:#f4f4f4;color:#bbb;cursor:default}.leaflet-touch .leaflet-bar a{height:30px;line-height:30px;width:30px}.leaflet-touch .leaflet-bar a:first-child{border-top-left-radius:2px;border-top-right-radius:2px}.leaflet-touch .leaflet-bar a:last-child{border-bottom-left-radius:2px;border-bottom-right-radius:2px}.leaflet-control-zoom-in,.leaflet-control-zoom-out{font:700 18px Lucida Console,Monaco,monospace;text-indent:1px}.leaflet-touch .leaflet-control-zoom-in,.leaflet-touch .leaflet-control-zoom-out{font-size:22px}.leaflet-control-layers{background:#fff;border-radius:5px;box-shadow:0 1px 5px rgba(0,0,0,.4)}.leaflet-control-layers-toggle{background-image:url("+p+");height:36px;width:36px}.leaflet-retina .leaflet-control-layers-toggle{background-image:url("+h+");background-size:26px 26px}.leaflet-touch .leaflet-control-layers-toggle{height:44px;width:44px}.leaflet-control-layers-expanded .leaflet-control-layers-toggle,.leaflet-control-layers .leaflet-control-layers-list{display:none}.leaflet-control-layers-expanded .leaflet-control-layers-list{display:block;position:relative}.leaflet-control-layers-expanded{background:#fff;color:#333;padding:6px 10px 6px 6px}.leaflet-control-layers-scrollbar{overflow-x:hidden;overflow-y:scroll;padding-right:5px}.leaflet-control-layers-selector{margin-top:2px;position:relative;top:1px}.leaflet-control-layers label{display:block}.leaflet-control-layers-separator{border-top:1px solid #ddd;height:0;margin:5px -10px 5px -6px}.leaflet-default-icon-path{background-image:url("+d+')}.leaflet-container .leaflet-control-attribution{background:#fff;background:hsla(0,0%,100%,.7);margin:0}.leaflet-control-attribution,.leaflet-control-scale-line{color:#333;padding:0 5px}.leaflet-control-attribution a{text-decoration:none}.leaflet-control-attribution a:hover{text-decoration:underline}.leaflet-container .leaflet-control-attribution,.leaflet-container .leaflet-control-scale{font-size:11px}.leaflet-left .leaflet-control-scale{margin-left:5px}.leaflet-bottom .leaflet-control-scale{margin-bottom:5px}.leaflet-control-scale-line{background:#fff;background:hsla(0,0%,100%,.5);border:2px solid #777;border-top:none;box-sizing:border-box;font-size:11px;line-height:1.1;overflow:hidden;padding:2px 5px 1px;white-space:nowrap}.leaflet-control-scale-line:not(:first-child){border-bottom:none;border-top:2px solid #777;margin-top:-2px}.leaflet-control-scale-line:not(:first-child):not(:last-child){border-bottom:2px solid #777}.leaflet-touch .leaflet-bar,.leaflet-touch .leaflet-control-attribution,.leaflet-touch .leaflet-control-layers{box-shadow:none}.leaflet-touch .leaflet-bar,.leaflet-touch .leaflet-control-layers{background-clip:padding-box;border:2px solid rgba(0,0,0,.2)}.leaflet-popup{margin-bottom:20px;position:absolute;text-align:center}.leaflet-popup-content-wrapper{border-radius:12px;padding:1px;text-align:left}.leaflet-popup-content{line-height:1.4;margin:13px 19px}.leaflet-popup-content p{margin:18px 0}.leaflet-popup-tip-container{height:20px;left:50%;margin-left:-20px;overflow:hidden;pointer-events:none;position:absolute;width:40px}.leaflet-popup-tip{height:17px;margin:-10px auto 0;padding:1px;transform:rotate(45deg);width:17px}.leaflet-popup-content-wrapper,.leaflet-popup-tip{background:#fff;box-shadow:0 3px 14px rgba(0,0,0,.4);color:#333}.leaflet-container a.leaflet-popup-close-button{background:transparent;border:none;color:#c3c3c3;font:16px/14px Tahoma,Verdana,sans-serif;font-weight:700;height:14px;padding:4px 4px 0 0;position:absolute;right:0;text-align:center;text-decoration:none;top:0;width:18px}.leaflet-container a.leaflet-popup-close-button:hover{color:#999}.leaflet-popup-scrolled{border-bottom:1px solid #ddd;border-top:1px solid #ddd;overflow:auto}.leaflet-oldie .leaflet-popup-content-wrapper{-ms-zoom:1}.leaflet-oldie .leaflet-popup-tip{-ms-filter:"progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)";filter:progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678,M12=0.70710678,M21=-0.70710678,M22=0.70710678);margin:0 auto;width:24px}.leaflet-oldie .leaflet-popup-tip-container{margin-top:-1px}.leaflet-oldie .leaflet-control-layers,.leaflet-oldie .leaflet-control-zoom,.leaflet-oldie .leaflet-popup-content-wrapper,.leaflet-oldie .leaflet-popup-tip{border:1px solid #999}.leaflet-div-icon{background:#fff;border:1px solid #666}.leaflet-tooltip{background-color:#fff;border:1px solid #fff;border-radius:3px;box-shadow:0 1px 3px rgba(0,0,0,.4);color:#222;padding:6px;pointer-events:none;position:absolute;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap}.leaflet-tooltip.leaflet-clickable{cursor:pointer;pointer-events:auto}.leaflet-tooltip-bottom:before,.leaflet-tooltip-left:before,.leaflet-tooltip-right:before,.leaflet-tooltip-top:before{background:transparent;border:6px solid transparent;content:"";pointer-events:none;position:absolute}.leaflet-tooltip-bottom{margin-top:6px}.leaflet-tooltip-top{margin-top:-6px}.leaflet-tooltip-bottom:before,.leaflet-tooltip-top:before{left:50%;margin-left:-6px}.leaflet-tooltip-top:before{border-top-color:#fff;bottom:0;margin-bottom:-12px}.leaflet-tooltip-bottom:before{border-bottom-color:#fff;margin-left:-6px;margin-top:-12px;top:0}.leaflet-tooltip-left{margin-left:-6px}.leaflet-tooltip-right{margin-left:6px}.leaflet-tooltip-left:before,.leaflet-tooltip-right:before{margin-top:-6px;top:50%}.leaflet-tooltip-left:before{border-left-color:#fff;margin-right:-12px;right:0}.leaflet-tooltip-right:before{border-right-color:#fff;left:0;margin-left:-12px}',""]);const f=u},5584:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var o=n(1519),i=n.n(o)()((function(t){return t[1]}));i.push([t.id,'.tiptap-vuetify-editor__action-render-btn{margin:2px 6px}.tiptap-vuetify-editor__btn-icon.v-icon.fas{font-size:16px}.tiptap-vuetify-editor__toolbar .v-toolbar{display:flex;height:auto!important;padding:5px}.tiptap-vuetify-editor__toolbar .v-toolbar .v-toolbar__content{flex-wrap:wrap;height:auto!important;padding:0}.tiptap-vuetify-editor-pop{opacity:.9!important;position:fixed;transition:transform .1s ease-in-out;z-index:1}.tiptap-vuetify-editor-pop .tiptap-vuetify-editor-pop__popper{background-image:linear-gradient(180deg,rgba(49,49,47,.99),#262625);background-repeat:repeat-x;border-radius:5px;color:#fff;display:inline-block;line-height:44px;opacity:0;padding:0 10px;pointer-events:none;visibility:hidden}.tiptap-vuetify-editor-pop .tiptap-vuetify-editor-pop__popper--visible{-webkit-animation:pop-upwards .18s linear forwards;animation:pop-upwards .18s linear forwards;-webkit-animation-delay:.2s;animation-delay:.2s;pointer-events:auto;transition:opacity 0s linear .2s;visibility:visible}.tiptap-vuetify-editor-pop[x-placement=top]{margin-bottom:7px}.tiptap-vuetify-editor-pop[x-placement=bottom]{margin-top:7px}.tiptap-vuetify-editor-pop[x-placement=bottom] .tiptap-vuetify-editor-pop__popper{background-image:linear-gradient(0deg,rgba(49,49,47,.99),#262625)}[x-arrow]{background-color:#262625;height:14px;position:fixed;transform:rotate(45deg);width:14px;z-index:-1}[x-placement=top] [x-arrow]{bottom:0;margin-bottom:-7px}[x-placement=bottom] [x-arrow]{margin-top:-7px;top:0}@-webkit-keyframes pop-upwards{0%{opacity:0;transform:matrix(.97,0,0,1,0,12)}20%{opacity:.7;transform:matrix(.99,0,0,1,0,2)}40%{opacity:1;transform:matrix(1,0,0,1,0,-1)}70%{opacity:1;transform:matrix(1,0,0,1,0,0)}to{opacity:1;transform:matrix(1,0,0,1,0,0)}}@keyframes pop-upwards{0%{opacity:0;transform:matrix(.97,0,0,1,0,12)}20%{opacity:.7;transform:matrix(.99,0,0,1,0,2)}40%{opacity:1;transform:matrix(1,0,0,1,0,-1)}70%{opacity:1;transform:matrix(1,0,0,1,0,0)}to{opacity:1;transform:matrix(1,0,0,1,0,0)}}.tiptap-vuetify-editor{position:relative}.tiptap-vuetify-editor .ProseMirror{margin:20px!important;outline:0!important}.tiptap-vuetify-editor--disabled{cursor:not-allowed}.tiptap-vuetify-editor__content{overflow:auto!important;padding:5px;transition:all 2s}.tiptap-vuetify-editor__content a{pointer-events:none}.tiptap-vuetify-editor__content h1,.tiptap-vuetify-editor__content h2,.tiptap-vuetify-editor__content h3,.tiptap-vuetify-editor__content h4{margin:10px 0 20px!important}.tiptap-vuetify-editor__content blockquote{border-left:.25em solid #dfe2e5;color:#6a737d;margin:20px 0!important;padding-left:1em}.tiptap-vuetify-editor__content code{margin:0 5px!important;padding:0 4px!important}.tiptap-vuetify-editor__content pre code{margin:0 5px!important;padding:8px!important}.tiptap-vuetify-editor__content code:after,.tiptap-vuetify-editor__content code:before{content:none!important;letter-spacing:normal!important}.tiptap-vuetify-editor__content p{margin-bottom:16px!important;margin-top:16px!important;min-height:1rem}.tiptap-vuetify-editor__content p.tiptap-vuetify-editor__paragraph--is-empty:first-child:before{color:#aaa;content:attr(data-empty-text);float:left;font-style:italic;height:0;pointer-events:none}.tiptap-vuetify-editor__content table{border-collapse:collapse;margin:0;overflow:hidden;table-layout:fixed;width:100%}.tiptap-vuetify-editor__content table td,.tiptap-vuetify-editor__content table th{border:2px solid grey;box-sizing:border-box;min-width:1em;padding:3px 5px;position:relative;vertical-align:top}.tiptap-vuetify-editor__content table td>*,.tiptap-vuetify-editor__content table th>*{margin-bottom:0}.tiptap-vuetify-editor__content table th{font-weight:700;text-align:left}.tiptap-vuetify-editor__content table .selectedCell:after{background:rgba(200,200,255,.4);bottom:0;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0;z-index:2}.tiptap-vuetify-editor__content table .column-resize-handle{background-color:#adf;bottom:0;pointer-events:none;position:absolute;right:-2px;top:0;width:4px;z-index:20}.tiptap-vuetify-editor__content .tableWrapper{margin:1em 0;overflow-x:auto}.tiptap-vuetify-editor__content .resize-cursor{cursor:col-resize}.tiptap-vuetify-editor__content--disabled{color:rgba(0,0,0,.38)}.tiptap-vuetify-editor__content--disabled:after{background-color:rgba(0,0,0,.06);bottom:0;content:"";left:0;position:absolute;right:0;top:0}#tiptap-vuetify-image-upload-area__input-file{display:none}.tiptap-vuetify-image-upload-area-holder{align-items:center;background-color:#c8dadf;display:flex!important;height:400px;justify-content:center;outline:2px dashed #92b0b3;outline-offset:-10px;transition:all .15s ease-in-out}.tiptap-vuetify-image-upload-area-holder--dragover,.tiptap-vuetify-image-upload-area-holder:hover{background-color:#a5b7bc;color:#444;cursor:pointer;outline:2px dashed #648083}.tiptap-vuetify-image-upload-area-holder--dragover .tiptap-vuetify-image-upload-area-holder__icon,.tiptap-vuetify-image-upload-area-holder:hover .tiptap-vuetify-image-upload-area-holder__icon{fill:#5f777a!important}.tiptap-vuetify-image-upload-area-holder .tiptap-vuetify-image-upload-area-holder__icon{fill:#92b0b3;display:block;height:80px;margin-bottom:40px;transition:all .15s ease-in-out;width:100%}.tiptap-vuetify-todo-item-view{display:flex}',""]);const r=i},3965:t=>{"use strict";t.exports=function(t,e){return e||(e={}),"string"!=typeof(t=t&&t.__esModule?t.default:t)?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},5243:function(t,e){!function(t){"use strict";var e="1.7.1";function n(t){var e,n,o,i;for(n=1,o=arguments.length;n<o;n++)for(e in i=arguments[n])t[e]=i[e];return t}var o=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function i(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var o=n.call(arguments,2);return function(){return t.apply(e,o.length?o.concat(n.call(arguments)):arguments)}}var r=0;function s(t){return t._leaflet_id=t._leaflet_id||++r,t._leaflet_id}function a(t,e,n){var o,i,r,s;return s=function(){o=!1,i&&(r.apply(n,i),i=!1)},r=function(){o?i=arguments:(t.apply(n,arguments),setTimeout(s,e),o=!0)},r}function l(t,e,n){var o=e[1],i=e[0],r=o-i;return t===o&&n?t:((t-i)%r+r)%r+i}function c(){return!1}function u(t,e){var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n}function p(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function h(t){return p(t).split(/\s+/)}function d(t,e){for(var n in Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?o(t.options):{}),e)t.options[n]=e[n];return t.options}function f(t,e,n){var o=[];for(var i in t)o.push(encodeURIComponent(n?i.toUpperCase():i)+"="+encodeURIComponent(t[i]));return(e&&-1!==e.indexOf("?")?"&":"?")+o.join("&")}var m=/\{ *([\w_-]+) *\}/g;function v(t,e){return t.replace(m,(function(t,n){var o=e[n];if(void 0===o)throw new Error("No value provided for variable "+t);return"function"==typeof o&&(o=o(e)),o}))}var g=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function y(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var b="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function _(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var w=0;function x(t){var e=+new Date,n=Math.max(0,16-(e-w));return w=e+n,window.setTimeout(t,n)}var S=window.requestAnimationFrame||_("RequestAnimationFrame")||x,k=window.cancelAnimationFrame||_("CancelAnimationFrame")||_("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function C(t,e,n){if(!n||S!==x)return S.call(window,i(t,e));t.call(e)}function O(t){t&&k.call(window,t)}var T={extend:n,create:o,bind:i,lastId:r,stamp:s,throttle:a,wrapNum:l,falseFn:c,formatNum:u,trim:p,splitWords:h,setOptions:d,getParamString:f,template:v,isArray:g,indexOf:y,emptyImageUrl:b,requestFn:S,cancelFn:k,requestAnimFrame:C,cancelAnimFrame:O};function M(){}function E(t){if("undefined"!=typeof L&&L&&L.Mixin){t=g(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}M.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=e.__super__=this.prototype,r=o(i);for(var s in r.constructor=e,e.prototype=r,this)Object.prototype.hasOwnProperty.call(this,s)&&"prototype"!==s&&"__super__"!==s&&(e[s]=this[s]);return t.statics&&(n(e,t.statics),delete t.statics),t.includes&&(E(t.includes),n.apply(null,[r].concat(t.includes)),delete t.includes),r.options&&(t.options=n(o(r.options),t.options)),n(r,t),r._initHooks=[],r.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=r._initHooks.length;t<e;t++)r._initHooks[t].call(this)}},e},M.include=function(t){return n(this.prototype,t),this},M.mergeOptions=function(t){return n(this.prototype.options,t),this},M.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var A={on:function(t,e,n){if("object"==typeof t)for(var o in t)this._on(o,t[o],e);else for(var i=0,r=(t=h(t)).length;i<r;i++)this._on(t[i],e,n);return this},off:function(t,e,n){if(t)if("object"==typeof t)for(var o in t)this._off(o,t[o],e);else for(var i=0,r=(t=h(t)).length;i<r;i++)this._off(t[i],e,n);else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var o=this._events[t];o||(o=[],this._events[t]=o),n===this&&(n=void 0);for(var i={fn:e,ctx:n},r=o,s=0,a=r.length;s<a;s++)if(r[s].fn===e&&r[s].ctx===n)return;r.push(i)},_off:function(t,e,n){var o,i,r;if(this._events&&(o=this._events[t]))if(e){if(n===this&&(n=void 0),o)for(i=0,r=o.length;i<r;i++){var s=o[i];if(s.ctx===n&&s.fn===e)return s.fn=c,this._firingCount&&(this._events[t]=o=o.slice()),void o.splice(i,1)}}else{for(i=0,r=o.length;i<r;i++)o[i].fn=c;delete this._events[t]}},fire:function(t,e,o){if(!this.listens(t,o))return this;var i=n({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var r=this._events[t];if(r){this._firingCount=this._firingCount+1||1;for(var s=0,a=r.length;s<a;s++){var l=r[s];l.fn.call(l.ctx||this,i)}this._firingCount--}}return o&&this._propagateEvent(i),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var o in this._eventParents)if(this._eventParents[o].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"==typeof t){for(var o in t)this.once(o,t[o],e);return this}var r=i((function(){this.off(t,e,n).off(t,r,n)}),this);return this.on(t,e,n).on(t,r,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[s(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[s(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,n({layer:t.target,propagatedFrom:t.target},t),!0)}};A.addEventListener=A.on,A.removeEventListener=A.clearAllEventListeners=A.off,A.addOneTimeEventListener=A.once,A.fireEvent=A.fire,A.hasEventListeners=A.listens;var N=M.extend(A);function P(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var I=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function D(t,e,n){return t instanceof P?t:g(t)?new P(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new P(t.x,t.y):new P(t,e,n)}function R(t,e){if(t)for(var n=e?[t,e]:t,o=0,i=n.length;o<i;o++)this.extend(n[o])}function z(t,e){return!t||t instanceof R?t:new R(t,e)}function B(t,e){if(t)for(var n=e?[t,e]:t,o=0,i=n.length;o<i;o++)this.extend(n[o])}function $(t,e){return t instanceof B?t:new B(t,e)}function j(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function V(t,e,n){return t instanceof j?t:g(t)&&"object"!=typeof t[0]?3===t.length?new j(t[0],t[1],t[2]):2===t.length?new j(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new j(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new j(t,e,n)}P.prototype={clone:function(){return new P(this.x,this.y)},add:function(t){return this.clone()._add(D(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(D(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new P(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new P(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=I(this.x),this.y=I(this.y),this},distanceTo:function(t){var e=(t=D(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=D(t)).x===this.x&&t.y===this.y},contains:function(t){return t=D(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+u(this.x)+", "+u(this.y)+")"}},R.prototype={extend:function(t){return t=D(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new P((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new P(this.min.x,this.max.y)},getTopRight:function(){return new P(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"==typeof t[0]||t instanceof P?D(t):z(t))instanceof R?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=z(t);var e=this.min,n=this.max,o=t.min,i=t.max,r=i.x>=e.x&&o.x<=n.x,s=i.y>=e.y&&o.y<=n.y;return r&&s},overlaps:function(t){t=z(t);var e=this.min,n=this.max,o=t.min,i=t.max,r=i.x>e.x&&o.x<n.x,s=i.y>e.y&&o.y<n.y;return r&&s},isValid:function(){return!(!this.min||!this.max)}},B.prototype={extend:function(t){var e,n,o=this._southWest,i=this._northEast;if(t instanceof j)e=t,n=t;else{if(!(t instanceof B))return t?this.extend(V(t)||$(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return o||i?(o.lat=Math.min(e.lat,o.lat),o.lng=Math.min(e.lng,o.lng),i.lat=Math.max(n.lat,i.lat),i.lng=Math.max(n.lng,i.lng)):(this._southWest=new j(e.lat,e.lng),this._northEast=new j(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,o=Math.abs(e.lat-n.lat)*t,i=Math.abs(e.lng-n.lng)*t;return new B(new j(e.lat-o,e.lng-i),new j(n.lat+o,n.lng+i))},getCenter:function(){return new j((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new j(this.getNorth(),this.getWest())},getSouthEast:function(){return new j(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof j||"lat"in t?V(t):$(t);var e,n,o=this._southWest,i=this._northEast;return t instanceof B?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=o.lat&&n.lat<=i.lat&&e.lng>=o.lng&&n.lng<=i.lng},intersects:function(t){t=$(t);var e=this._southWest,n=this._northEast,o=t.getSouthWest(),i=t.getNorthEast(),r=i.lat>=e.lat&&o.lat<=n.lat,s=i.lng>=e.lng&&o.lng<=n.lng;return r&&s},overlaps:function(t){t=$(t);var e=this._southWest,n=this._northEast,o=t.getSouthWest(),i=t.getNorthEast(),r=i.lat>e.lat&&o.lat<n.lat,s=i.lng>e.lng&&o.lng<n.lng;return r&&s},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=$(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},j.prototype={equals:function(t,e){return!!t&&(t=V(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+u(this.lat,t)+", "+u(this.lng,t)+")"},distanceTo:function(t){return H.distance(this,V(t))},wrap:function(){return H.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return $([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new j(this.lat,this.lng,this.alt)}};var Z,F={latLngToPoint:function(t,e){var n=this.projection.project(t),o=this.scale(e);return this.transformation._transform(n,o)},pointToLatLng:function(t,e){var n=this.scale(e),o=this.transformation.untransform(t,n);return this.projection.unproject(o)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t);return new R(this.transformation.transform(e.min,n),this.transformation.transform(e.max,n))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?l(t.lng,this.wrapLng,!0):t.lng;return new j(this.wrapLat?l(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),o=e.lat-n.lat,i=e.lng-n.lng;if(0===o&&0===i)return t;var r=t.getSouthWest(),s=t.getNorthEast();return new B(new j(r.lat-o,r.lng-i),new j(s.lat-o,s.lng-i))}},H=n({},F,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,o=t.lat*n,i=e.lat*n,r=Math.sin((e.lat-t.lat)*n/2),s=Math.sin((e.lng-t.lng)*n/2),a=r*r+Math.cos(o)*Math.cos(i)*s*s,l=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return this.R*l}}),W=6378137,U={R:W,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,o=Math.max(Math.min(n,t.lat),-n),i=Math.sin(o*e);return new P(this.R*t.lng*e,this.R*Math.log((1+i)/(1-i))/2)},unproject:function(t){var e=180/Math.PI;return new j((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(Z=W*Math.PI,new R([-Z,-Z],[Z,Z]))};function q(t,e,n,o){if(g(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=n,this._d=o}function J(t,e,n,o){return new q(t,e,n,o)}q.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new P((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var K=n({},H,{code:"EPSG:3857",projection:U,transformation:function(){var t=.5/(Math.PI*U.R);return J(t,.5,-t,.5)}()}),G=n({},K,{code:"EPSG:900913"});function X(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Y(t,e){var n,o,i,r,s,a,l="";for(n=0,i=t.length;n<i;n++){for(o=0,r=(s=t[n]).length;o<r;o++)l+=(o?"L":"M")+(a=s[o]).x+" "+a.y;l+=e?At?"z":"x":""}return l||"M0 0"}var Q=document.documentElement.style,tt="ActiveXObject"in window,et=tt&&!document.addEventListener,nt="msLaunchUri"in navigator&&!("documentMode"in document),ot=Pt("webkit"),it=Pt("android"),rt=Pt("android 2")||Pt("android 3"),st=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),at=it&&Pt("Google")&&st<537&&!("AudioNode"in window),lt=!!window.opera,ct=!nt&&Pt("chrome"),ut=Pt("gecko")&&!ot&&!lt&&!tt,pt=!ct&&Pt("safari"),ht=Pt("phantom"),dt="OTransition"in Q,ft=0===navigator.platform.indexOf("Win"),mt=tt&&"transition"in Q,vt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!rt,gt="MozPerspective"in Q,yt=!window.L_DISABLE_3D&&(mt||vt||gt)&&!dt&&!ht,bt="undefined"!=typeof orientation||Pt("mobile"),_t=bt&&ot,wt=bt&&vt,xt=!window.PointerEvent&&window.MSPointerEvent,St=!(!window.PointerEvent&&!xt),kt=!window.L_NO_TOUCH&&(St||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Ct=bt&&lt,Ot=bt&&ut,Tt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Mt=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",c,e),window.removeEventListener("testPassiveEventSupport",c,e)}catch(t){}return t}(),Et=!!document.createElement("canvas").getContext,At=!(!document.createElementNS||!X("svg").createSVGRect),Nt=!At&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}();function Pt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Lt={ie:tt,ielt9:et,edge:nt,webkit:ot,android:it,android23:rt,androidStock:at,opera:lt,chrome:ct,gecko:ut,safari:pt,phantom:ht,opera12:dt,win:ft,ie3d:mt,webkit3d:vt,gecko3d:gt,any3d:yt,mobile:bt,mobileWebkit:_t,mobileWebkit3d:wt,msPointer:xt,pointer:St,touch:kt,mobileOpera:Ct,mobileGecko:Ot,retina:Tt,passiveEvents:Mt,canvas:Et,svg:At,vml:Nt},It=xt?"MSPointerDown":"pointerdown",Dt=xt?"MSPointerMove":"pointermove",Rt=xt?"MSPointerUp":"pointerup",zt=xt?"MSPointerCancel":"pointercancel",Bt={},$t=!1;function jt(t,e,n,o){return"touchstart"===e?Zt(t,n,o):"touchmove"===e?qt(t,n,o):"touchend"===e&&Jt(t,n,o),this}function Vt(t,e,n){var o=t["_leaflet_"+e+n];return"touchstart"===e?t.removeEventListener(It,o,!1):"touchmove"===e?t.removeEventListener(Dt,o,!1):"touchend"===e&&(t.removeEventListener(Rt,o,!1),t.removeEventListener(zt,o,!1)),this}function Zt(t,e,n){var o=i((function(t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&He(t),Ut(t,e)}));t["_leaflet_touchstart"+n]=o,t.addEventListener(It,o,!1),$t||(document.addEventListener(It,Ft,!0),document.addEventListener(Dt,Ht,!0),document.addEventListener(Rt,Wt,!0),document.addEventListener(zt,Wt,!0),$t=!0)}function Ft(t){Bt[t.pointerId]=t}function Ht(t){Bt[t.pointerId]&&(Bt[t.pointerId]=t)}function Wt(t){delete Bt[t.pointerId]}function Ut(t,e){for(var n in t.touches=[],Bt)t.touches.push(Bt[n]);t.changedTouches=[t],e(t)}function qt(t,e,n){var o=function(t){t.pointerType===(t.MSPOINTER_TYPE_MOUSE||"mouse")&&0===t.buttons||Ut(t,e)};t["_leaflet_touchmove"+n]=o,t.addEventListener(Dt,o,!1)}function Jt(t,e,n){var o=function(t){Ut(t,e)};t["_leaflet_touchend"+n]=o,t.addEventListener(Rt,o,!1),t.addEventListener(zt,o,!1)}var Kt=xt?"MSPointerDown":St?"pointerdown":"touchstart",Gt=xt?"MSPointerUp":St?"pointerup":"touchend",Xt="_leaflet_";function Yt(t,e,n){var o,i,r=!1,s=250;function a(t){if(St){if(!t.isPrimary)return;if("mouse"===t.pointerType)return}else if(t.touches.length>1)return;var e=Date.now(),n=e-(o||e);i=t.touches?t.touches[0]:t,r=n>0&&n<=s,o=e}function l(t){if(r&&!i.cancelBubble){if(St){if("mouse"===t.pointerType)return;var n,s,a={};for(s in i)n=i[s],a[s]=n&&n.bind?n.bind(i):n;i=a}i.type="dblclick",i.button=0,e(i),o=null}}return t[Xt+Kt+n]=a,t[Xt+Gt+n]=l,t[Xt+"dblclick"+n]=e,t.addEventListener(Kt,a,!!Mt&&{passive:!1}),t.addEventListener(Gt,l,!!Mt&&{passive:!1}),t.addEventListener("dblclick",e,!1),this}function Qt(t,e){var n=t[Xt+Kt+e],o=t[Xt+Gt+e],i=t[Xt+"dblclick"+e];return t.removeEventListener(Kt,n,!!Mt&&{passive:!1}),t.removeEventListener(Gt,o,!!Mt&&{passive:!1}),t.removeEventListener("dblclick",i,!1),this}var te,ee,ne,oe,ie,re=xe(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),se=xe(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ae="webkitTransition"===se||"OTransition"===se?se+"End":"transitionend";function le(t){return"string"==typeof t?document.getElementById(t):t}function ce(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var o=document.defaultView.getComputedStyle(t,null);n=o?o[e]:null}return"auto"===n?null:n}function ue(t,e,n){var o=document.createElement(t);return o.className=e||"",n&&n.appendChild(o),o}function pe(t){var e=t.parentNode;e&&e.removeChild(t)}function he(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function de(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function fe(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function me(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=be(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function ve(t,e){if(void 0!==t.classList)for(var n=h(e),o=0,i=n.length;o<i;o++)t.classList.add(n[o]);else if(!me(t,e)){var r=be(t);ye(t,(r?r+" ":"")+e)}}function ge(t,e){void 0!==t.classList?t.classList.remove(e):ye(t,p((" "+be(t)+" ").replace(" "+e+" "," ")))}function ye(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function be(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function _e(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&we(t,e)}function we(t,e){var n=!1,o="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(o)}catch(t){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+o+"(opacity="+e+")"}function xe(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function Se(t,e,n){var o=e||new P(0,0);t.style[re]=(mt?"translate("+o.x+"px,"+o.y+"px)":"translate3d("+o.x+"px,"+o.y+"px,0)")+(n?" scale("+n+")":"")}function ke(t,e){t._leaflet_pos=e,yt?Se(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function Ce(t){return t._leaflet_pos||new P(0,0)}if("onselectstart"in document)te=function(){Ie(window,"selectstart",He)},ee=function(){Re(window,"selectstart",He)};else{var Oe=xe(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);te=function(){if(Oe){var t=document.documentElement.style;ne=t[Oe],t[Oe]="none"}},ee=function(){Oe&&(document.documentElement.style[Oe]=ne,ne=void 0)}}function Te(){Ie(window,"dragstart",He)}function Me(){Re(window,"dragstart",He)}function Ee(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(Ae(),oe=t,ie=t.style.outline,t.style.outline="none",Ie(window,"keydown",Ae))}function Ae(){oe&&(oe.style.outline=ie,oe=void 0,ie=void 0,Re(window,"keydown",Ae))}function Ne(t){do{t=t.parentNode}while(!(t.offsetWidth&&t.offsetHeight||t===document.body));return t}function Pe(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Le={TRANSFORM:re,TRANSITION:se,TRANSITION_END:ae,get:le,getStyle:ce,create:ue,remove:pe,empty:he,toFront:de,toBack:fe,hasClass:me,addClass:ve,removeClass:ge,setClass:ye,getClass:be,setOpacity:_e,testProp:xe,setTransform:Se,setPosition:ke,getPosition:Ce,disableTextSelection:te,enableTextSelection:ee,disableImageDrag:Te,enableImageDrag:Me,preventOutline:Ee,restoreOutline:Ae,getSizedParentNode:Ne,getScale:Pe};function Ie(t,e,n,o){if("object"==typeof e)for(var i in e)$e(t,i,e[i],n);else for(var r=0,s=(e=h(e)).length;r<s;r++)$e(t,e[r],n,o);return this}var De="_leaflet_events";function Re(t,e,n,o){if("object"==typeof e)for(var i in e)je(t,i,e[i],n);else if(e)for(var r=0,s=(e=h(e)).length;r<s;r++)je(t,e[r],n,o);else{for(var a in t[De])je(t,a,t[De][a]);delete t[De]}return this}function ze(){if(St)return!(nt||pt)}var Be={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function $e(t,e,n,o){var i=e+s(n)+(o?"_"+s(o):"");if(t[De]&&t[De][i])return this;var r=function(e){return n.call(o||t,e||window.event)},a=r;St&&0===e.indexOf("touch")?jt(t,e,r,i):kt&&"dblclick"===e&&!ze()?Yt(t,r,i):"addEventListener"in t?"touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e?t.addEventListener(Be[e]||e,r,!!Mt&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(r=function(e){e=e||window.event,Ye(t,e)&&a(e)},t.addEventListener(Be[e],r,!1)):t.addEventListener(e,a,!1):"attachEvent"in t&&t.attachEvent("on"+e,r),t[De]=t[De]||{},t[De][i]=r}function je(t,e,n,o){var i=e+s(n)+(o?"_"+s(o):""),r=t[De]&&t[De][i];if(!r)return this;St&&0===e.indexOf("touch")?Vt(t,e,i):kt&&"dblclick"===e&&!ze()?Qt(t,i):"removeEventListener"in t?t.removeEventListener(Be[e]||e,r,!1):"detachEvent"in t&&t.detachEvent("on"+e,r),t[De][i]=null}function Ve(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,Xe(t),this}function Ze(t){return $e(t,"wheel",Ve),this}function Fe(t){return Ie(t,"mousedown touchstart dblclick",Ve),$e(t,"click",Ge),this}function He(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function We(t){return He(t),Ve(t),this}function Ue(t,e){if(!e)return new P(t.clientX,t.clientY);var n=Pe(e),o=n.boundingClientRect;return new P((t.clientX-o.left)/n.x-e.clientLeft,(t.clientY-o.top)/n.y-e.clientTop)}var qe=ft&&ct?2*window.devicePixelRatio:ut?window.devicePixelRatio:1;function Je(t){return nt?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/qe:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var Ke={};function Ge(t){Ke[t.type]=!0}function Xe(t){var e=Ke[t.type];return Ke[t.type]=!1,e}function Ye(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(t){return!1}return n!==t}var Qe={on:Ie,off:Re,stopPropagation:Ve,disableScrollPropagation:Ze,disableClickPropagation:Fe,preventDefault:He,stop:We,getMousePosition:Ue,getWheelDelta:Je,fakeStop:Ge,skipped:Xe,isExternalTarget:Ye,addListener:Ie,removeListener:Re},tn=N.extend({run:function(t,e,n,o){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(o||.5,.2),this._startPos=Ce(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=C(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),ke(this._el,n),this.fire("step")},_complete:function(){O(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),en=N.extend({options:{crs:K,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=d(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(V(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=se&&yt&&!Ct&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ie(this._proxy,ae,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,o){return e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(V(t),e,this.options.maxBounds),o=o||{},this._stop(),this._loaded&&!o.reset&&!0!==o&&(void 0!==o.animate&&(o.zoom=n({animate:o.animate},o.zoom),o.pan=n({animate:o.animate,duration:o.duration},o.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,o.zoom):this._tryAnimatedPan(t,o.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,e),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(yt?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(yt?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var o=this.getZoomScale(e),i=this.getSize().divideBy(2),r=(t instanceof P?t:this.latLngToContainerPoint(t)).subtract(i).multiplyBy(1-1/o),s=this.containerPointToLatLng(i.add(r));return this.setView(s,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():$(t);var n=D(e.paddingTopLeft||e.padding||[0,0]),o=D(e.paddingBottomRight||e.padding||[0,0]),i=this.getBoundsZoom(t,!1,n.add(o));if((i="number"==typeof e.maxZoom?Math.min(e.maxZoom,i):i)===1/0)return{center:t.getCenter(),zoom:i};var r=o.subtract(n).divideBy(2),s=this.project(t.getSouthWest(),i),a=this.project(t.getNorthEast(),i);return{center:this.unproject(s.add(a).divideBy(2).add(r),i),zoom:i}},fitBounds:function(t,e){if(!(t=$(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=D(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new tn,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){ve(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(!1===(n=n||{}).animate||!yt)return this.setView(t,e,n);this._stop();var o=this.project(this.getCenter()),i=this.project(t),r=this.getSize(),s=this._zoom;t=V(t),e=void 0===e?s:e;var a=Math.max(r.x,r.y),l=a*this.getZoomScale(s,e),c=i.distanceTo(o)||1,u=1.42,p=u*u;function h(t){var e=(l*l-a*a+(t?-1:1)*p*p*c*c)/(2*(t?l:a)*p*c),n=Math.sqrt(e*e+1)-e;return n<1e-9?-18:Math.log(n)}function d(t){return(Math.exp(t)-Math.exp(-t))/2}function f(t){return(Math.exp(t)+Math.exp(-t))/2}function m(t){return d(t)/f(t)}var v=h(0);function g(t){return a*(f(v)/f(v+u*t))}function y(t){return a*(f(v)*m(v+u*t)-d(v))/p}function b(t){return 1-Math.pow(1-t,1.5)}var _=Date.now(),w=(h(1)-v)/u,x=n.duration?1e3*n.duration:1e3*w*.8;function S(){var n=(Date.now()-_)/x,r=b(n)*w;n<=1?(this._flyToFrame=C(S,this),this._move(this.unproject(o.add(i.subtract(o).multiplyBy(y(r)/c)),s),this.getScaleZoom(a/g(r),s),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),S.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return(t=$(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),o=this._limitCenter(n,this._zoom,$(t));return n.equals(o)||this.panTo(o,e),this._enforcingBounds=!1,this},panInside:function(t,e){var n=D((e=e||{}).paddingTopLeft||e.padding||[0,0]),o=D(e.paddingBottomRight||e.padding||[0,0]),i=this.getCenter(),r=this.project(i),s=this.project(t),a=this.getPixelBounds(),l=a.getSize().divideBy(2),c=z([a.min.add(n),a.max.subtract(o)]);if(!c.contains(s)){this._enforcingBounds=!0;var u=r.subtract(s),p=D(s.x+u.x,s.y+u.y);(s.x<c.min.x||s.x>c.max.x)&&(p.x=r.x-u.x,u.x>0?p.x+=l.x-n.x:p.x-=l.x-o.x),(s.y<c.min.y||s.y>c.max.y)&&(p.y=r.y-u.y,u.y>0?p.y+=l.y-n.y:p.y-=l.y-o.y),this.panTo(this.unproject(p),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=n({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var o=this.getSize(),r=e.divideBy(2).round(),s=o.divideBy(2).round(),a=r.subtract(s);return a.x||a.y?(t.animate&&t.pan?this.panBy(a):(t.pan&&this._rawPanBy(a),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:o})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=n({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=i(this._handleGeolocationResponse,this),o=i(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,o,t):navigator.geolocation.getCurrentPosition(e,o,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=new j(t.coords.latitude,t.coords.longitude),n=e.toBounds(2*t.coords.accuracy),o=this._locateOptions;if(o.setView){var i=this.getBoundsZoom(n);this.setView(e,o.maxZoom?Math.min(i,o.maxZoom):i)}var r={latlng:e,bounds:n,timestamp:t.timestamp};for(var s in t.coords)"number"==typeof t.coords[s]&&(r[s]=t.coords[s]);this.fire("locationfound",r)},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),pe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(O(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)pe(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n=ue("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new B(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=$(t),n=D(n||[0,0]);var o=this.getZoom()||0,i=this.getMinZoom(),r=this.getMaxZoom(),s=t.getNorthWest(),a=t.getSouthEast(),l=this.getSize().subtract(n),c=z(this.project(a,o),this.project(s,o)).getSize(),u=yt?this.options.zoomSnap:1,p=l.x/c.x,h=l.y/c.y,d=e?Math.max(p,h):Math.min(p,h);return o=this.getScaleZoom(d,o),u&&(o=Math.round(o/(u/100))*(u/100),o=e?Math.ceil(o/u)*u:Math.floor(o/u)*u),Math.max(i,Math.min(r,o))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new P(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new R(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=void 0===e?this._zoom:e;var o=n.zoom(t*n.scale(e));return isNaN(o)?1/0:o},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(V(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(D(t),e)},layerPointToLatLng:function(t){var e=D(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(V(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(V(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds($(t))},distance:function(t,e){return this.options.crs.distance(V(t),V(e))},containerPointToLayerPoint:function(t){return D(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return D(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(D(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(V(t)))},mouseEventToContainerPoint:function(t){return Ue(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=le(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Ie(e,"scroll",this._onScroll,this),this._containerId=s(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&yt,ve(t,"leaflet-container"+(kt?" leaflet-touch":"")+(Tt?" leaflet-retina":"")+(et?" leaflet-oldie":"")+(pt?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=ce(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ke(this._mapPane,new P(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ve(t.markerPane,"leaflet-zoom-hide"),ve(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){ke(this._mapPane,new P(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var o=this._zoom!==e;this._moveStart(o,!1)._move(t,e)._moveEnd(o),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n){void 0===e&&(e=this._zoom);var o=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(o||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return O(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){ke(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[s(this._container)]=this;var e=t?Re:Ie;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),yt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){O(this._resizeRequest),this._resizeRequest=C((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,o=[],i="mouseout"===e||"mouseover"===e,r=t.target||t.srcElement,a=!1;r;){if((n=this._targets[s(r)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){a=!0;break}if(n&&n.listens(e,!0)){if(i&&!Ye(r,t))break;if(o.push(n),i)break}if(r===this._container)break;r=r.parentNode}return o.length||a||i||!Ye(r,t)||(o=[this]),o},_handleDOMEvent:function(t){if(this._loaded&&!Xe(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e&&"keyup"!==e&&"keydown"!==e||Ee(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,o){if("click"===t.type){var i=n({},t);i.type="preclick",this._fireDOMEvent(i,i.type,o)}if(!t._stopped&&(o=(o||[]).concat(this._findEventTargets(t,e))).length){var r=o[0];"contextmenu"===e&&r.listens(e,!0)&&He(t);var s={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var a=r.getLatLng&&(!r._radius||r._radius<=10);s.containerPoint=a?this.latLngToContainerPoint(r.getLatLng()):this.mouseEventToContainerPoint(t),s.layerPoint=this.containerPointToLayerPoint(s.containerPoint),s.latlng=a?r.getLatLng():this.layerPointToLatLng(s.layerPoint)}for(var l=0;l<o.length;l++)if(o[l].fire(e,s,!0),s.originalEvent._stopped||!1===o[l].options.bubblingMouseEvents&&-1!==y(this._mouseEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return Ce(this._mapPane)||new P(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var o=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(o)},_latLngBoundsToNewLayerBounds:function(t,e,n){var o=this._getNewPixelOrigin(n,e);return z([this.project(t.getSouthWest(),e)._subtract(o),this.project(t.getNorthWest(),e)._subtract(o),this.project(t.getSouthEast(),e)._subtract(o),this.project(t.getNorthEast(),e)._subtract(o)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var o=this.project(t,e),i=this.getSize().divideBy(2),r=new R(o.subtract(i),o.add(i)),s=this._getBoundsOffset(r,n,e);return s.round().equals([0,0])?t:this.unproject(o.add(s),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),o=new R(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(o,e))},_getBoundsOffset:function(t,e,n){var o=z(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),i=o.min.subtract(t.min),r=o.max.subtract(t.max);return new P(this._rebound(i.x,-r.x),this._rebound(i.y,-r.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),o=yt?this.options.zoomSnap:1;return o&&(t=Math.round(t/o)*o),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ge(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n)||(this.panBy(n,e),0))},_createAnimProxy:function(){var t=this._proxy=ue("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",(function(t){var e=re,n=this._proxy.style[e];Se(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){pe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();Se(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var o=this.getZoomScale(e),i=this._getCenterOffset(t)._divideBy(1-1/o);return!(!0!==n.animate&&!this.getSize().contains(i)||(C((function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)}),this),0))},_animateZoom:function(t,e,n,o){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,ve(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:o}),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ge(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),C((function(){this._moveEnd(!0)}),this))}});function nn(t,e){return new en(t,e)}var on=M.extend({options:{position:"topright"},initialize:function(t){d(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),o=t._controlCorners[n];return ve(e,"leaflet-control"),-1!==n.indexOf("bottom")?o.insertBefore(e,o.firstChild):o.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(pe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),rn=function(t){return new on(t)};en.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=ue("div",e+"control-container",this._container);function o(o,i){var r=e+o+" "+e+i;t[o+i]=ue("div",r,n)}o("top","left"),o("top","right"),o("bottom","left"),o("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)pe(this._controlCorners[t]);pe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var sn=on.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,o){return n<o?-1:o<n?1:0}},initialize:function(t,e,n){for(var o in d(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[o],o);for(o in e)this._addLayer(e[o],o,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return on.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(s(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){ve(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(ve(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):ge(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ge(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=ue("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Fe(e),Ze(e);var o=this._section=ue("section",t+"-list");n&&(this._map.on("click",this.collapse,this),it||Ie(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var i=this._layersLink=ue("a",t+"-toggle",e);i.href="#",i.title="Layers",kt?(Ie(i,"click",We),Ie(i,"click",this.expand,this)):Ie(i,"focus",this.expand,this),n||this.expand(),this._baseLayersList=ue("div",t+"-base",o),this._separator=ue("div",t+"-separator",o),this._overlaysList=ue("div",t+"-overlays",o),e.appendChild(o)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&s(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(i((function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)}),this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;he(this._baseLayersList),he(this._overlaysList),this._layerControlInputs=[];var t,e,n,o,i=0;for(n=0;n<this._layers.length;n++)o=this._layers[n],this._addItem(o),e=e||o.overlay,t=t||!o.overlay,i+=o.overlay?0:1;return this.options.hideSingleBase&&(t=t&&i>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(s(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",o=document.createElement("div");return o.innerHTML=n,o.firstChild},_addItem:function(t){var e,n=document.createElement("label"),o=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=o):e=this._createRadioElement("leaflet-base-layers_"+s(this),o),this._layerControlInputs.push(e),e.layerId=s(t.layer),Ie(e,"click",this._onInputClick,this);var i=document.createElement("span");i.innerHTML=" "+t.name;var r=document.createElement("div");return n.appendChild(r),r.appendChild(e),r.appendChild(i),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n=this._layerControlInputs,o=[],i=[];this._handlingClick=!0;for(var r=n.length-1;r>=0;r--)t=n[r],e=this._getLayer(t.layerId).layer,t.checked?o.push(e):t.checked||i.push(e);for(r=0;r<i.length;r++)this._map.hasLayer(i[r])&&this._map.removeLayer(i[r]);for(r=0;r<o.length;r++)this._map.hasLayer(o[r])||this._map.addLayer(o[r]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,o=this._map.getZoom(),i=n.length-1;i>=0;i--)t=n[i],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&o<e.options.minZoom||void 0!==e.options.maxZoom&&o>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),an=function(t,e,n){return new sn(t,e,n)},ln=on.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=ue("div",e+" leaflet-bar"),o=this.options;return this._zoomInButton=this._createButton(o.zoomInText,o.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(o.zoomOutText,o.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,o,i){var r=ue("a",n,o);return r.innerHTML=t,r.href="#",r.title=e,r.setAttribute("role","button"),r.setAttribute("aria-label",e),Fe(r),Ie(r,"click",We),Ie(r,"click",i,this),Ie(r,"click",this._refocusOnMap,this),r},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";ge(this._zoomInButton,e),ge(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&ve(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&ve(this._zoomInButton,e)}});en.mergeOptions({zoomControl:!0}),en.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new ln,this.addControl(this.zoomControl))}));var cn=function(t){return new ln(t)},un=on.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=ue("div",e),o=this.options;return this._addScales(o,e+"-line",n),t.on(o.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=ue("div",e,n)),t.imperial&&(this._iScale=ue("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,o,i=3.2808399*t;i>5280?(e=i/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(o=this._getRoundNum(i),this._updateScale(this._iScale,o+" ft",o/i))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),pn=function(t){return new un(t)},hn=on.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){d(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=ue("div","leaflet-control-attribution"),Fe(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}});en.mergeOptions({attributionControl:!0}),en.addInitHook((function(){this.options.attributionControl&&(new hn).addTo(this)}));var dn=function(t){return new hn(t)};on.Layers=sn,on.Zoom=ln,on.Scale=un,on.Attribution=hn,rn.layers=an,rn.zoom=cn,rn.scale=pn,rn.attribution=dn;var fn=M.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});fn.addTo=function(t,e){return t.addHandler(e,this),this};var mn,vn={Events:A},gn=kt?"touchstart mousedown":"mousedown",yn={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},bn={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},_n=N.extend({options:{clickTolerance:3},initialize:function(t,e,n,o){d(this,o),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(Ie(this._dragStartTarget,gn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(_n._dragging===this&&this.finishDrag(),Re(this._dragStartTarget,gn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!me(this._element,"leaflet-zoom-anim")&&!(_n._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(_n._dragging=this,this._preventOutline&&Ee(this._element),Te(),te(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t,n=Ne(this._element);this._startPoint=new P(e.clientX,e.clientY),this._parentScale=Pe(n),Ie(document,bn[t.type],this._onMove,this),Ie(document,yn[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new P(e.clientX,e.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,He(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=Ce(this._element).subtract(n),ve(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ve(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,O(this._animRequest),this._lastEvent=t,this._animRequest=C(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),ke(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in ge(document.body,"leaflet-dragging"),this._lastTarget&&(ge(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),bn)Re(document,bn[t],this._onMove,this),Re(document,yn[t],this._onUp,this);Me(),ee(),this._moved&&this._moving&&(O(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,_n._dragging=!1}});function wn(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=kn(t=On(t,n),n)}function xn(t,e,n){return Math.sqrt(Nn(t,e,n,!0))}function Sn(t,e,n){return Nn(t,e,n)}function kn(t,e){var n=t.length,o=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(n);o[0]=o[n-1]=1,Cn(t,o,e,0,n-1);var i,r=[];for(i=0;i<n;i++)o[i]&&r.push(t[i]);return r}function Cn(t,e,n,o,i){var r,s,a,l=0;for(s=o+1;s<=i-1;s++)(a=Nn(t[s],t[o],t[i],!0))>l&&(r=s,l=a);l>n&&(e[r]=1,Cn(t,e,n,o,r),Cn(t,e,n,r,i))}function On(t,e){for(var n=[t[0]],o=1,i=0,r=t.length;o<r;o++)An(t[o],t[i])>e&&(n.push(t[o]),i=o);return i<r-1&&n.push(t[r-1]),n}function Tn(t,e,n,o,i){var r,s,a,l=o?mn:En(t,n),c=En(e,n);for(mn=c;;){if(!(l|c))return[t,e];if(l&c)return!1;a=En(s=Mn(t,e,r=l||c,n,i),n),r===l?(t=s,l=a):(e=s,c=a)}}function Mn(t,e,n,o,i){var r,s,a=e.x-t.x,l=e.y-t.y,c=o.min,u=o.max;return 8&n?(r=t.x+a*(u.y-t.y)/l,s=u.y):4&n?(r=t.x+a*(c.y-t.y)/l,s=c.y):2&n?(r=u.x,s=t.y+l*(u.x-t.x)/a):1&n&&(r=c.x,s=t.y+l*(c.x-t.x)/a),new P(r,s,i)}function En(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function An(t,e){var n=e.x-t.x,o=e.y-t.y;return n*n+o*o}function Nn(t,e,n,o){var i,r=e.x,s=e.y,a=n.x-r,l=n.y-s,c=a*a+l*l;return c>0&&((i=((t.x-r)*a+(t.y-s)*l)/c)>1?(r=n.x,s=n.y):i>0&&(r+=a*i,s+=l*i)),a=t.x-r,l=t.y-s,o?a*a+l*l:new P(r,s)}function Pn(t){return!g(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function Ln(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Pn(t)}var In={simplify:wn,pointToSegmentDistance:xn,closestPointOnSegment:Sn,clipSegment:Tn,_getEdgeIntersection:Mn,_getBitCode:En,_sqClosestPointOnSegment:Nn,isFlat:Pn,_flat:Ln};function Dn(t,e,n){var o,i,r,s,a,l,c,u,p,h=[1,4,2,8];for(i=0,c=t.length;i<c;i++)t[i]._code=En(t[i],e);for(s=0;s<4;s++){for(u=h[s],o=[],i=0,r=(c=t.length)-1;i<c;r=i++)a=t[i],l=t[r],a._code&u?l._code&u||((p=Mn(l,a,u,e,n))._code=En(p,e),o.push(p)):(l._code&u&&((p=Mn(l,a,u,e,n))._code=En(p,e),o.push(p)),o.push(a));t=o}return t}var Rn={clipPolygon:Dn},zn={project:function(t){return new P(t.lng,t.lat)},unproject:function(t){return new j(t.y,t.x)},bounds:new R([-180,-90],[180,90])},Bn={R:6378137,R_MINOR:6356752.314245179,bounds:new R([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,o=t.lat*e,i=this.R_MINOR/n,r=Math.sqrt(1-i*i),s=r*Math.sin(o),a=Math.tan(Math.PI/4-o/2)/Math.pow((1-s)/(1+s),r/2);return o=-n*Math.log(Math.max(a,1e-10)),new P(t.lng*e*n,o)},unproject:function(t){for(var e,n=180/Math.PI,o=this.R,i=this.R_MINOR/o,r=Math.sqrt(1-i*i),s=Math.exp(-t.y/o),a=Math.PI/2-2*Math.atan(s),l=0,c=.1;l<15&&Math.abs(c)>1e-7;l++)e=r*Math.sin(a),e=Math.pow((1-e)/(1+e),r/2),a+=c=Math.PI/2-2*Math.atan(s*e)-a;return new j(a*n,t.x*n/o)}},$n={LonLat:zn,Mercator:Bn,SphericalMercator:U},jn=n({},H,{code:"EPSG:3395",projection:Bn,transformation:function(){var t=.5/(Math.PI*Bn.R);return J(t,.5,-t,.5)}()}),Vn=n({},H,{code:"EPSG:4326",projection:zn,transformation:J(1/180,1,-1/180,.5)}),Zn=n({},F,{projection:zn,transformation:J(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,o=e.lat-t.lat;return Math.sqrt(n*n+o*o)},infinite:!0});F.Earth=H,F.EPSG3395=jn,F.EPSG3857=K,F.EPSG900913=G,F.EPSG4326=Vn,F.Simple=Zn;var Fn=N.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[s(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[s(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",(function(){e.off(n,this)}),this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});en.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=s(t);return this._layers[e]||(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=s(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&s(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){for(var e=0,n=(t=t?g(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[s(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=s(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var o in this._zoomBoundLayers){var i=this._zoomBoundLayers[o].options;t=void 0===i.minZoom?t:Math.min(t,i.minZoom),e=void 0===i.maxZoom?e:Math.max(e,i.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Hn=Fn.extend({initialize:function(t,e){var n,o;if(d(this,e),this._layers={},t)for(n=0,o=t.length;n<o;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&("number"==typeof t?t:this.getLayerId(t))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,o=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,o);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return s(t)}}),Wn=function(t,e){return new Hn(t,e)},Un=Hn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Hn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Hn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new B;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),qn=function(t,e){return new Un(t,e)},Jn=M.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){d(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var o=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(o,t),o},_setIconStyles:function(t,e){var n=this.options,o=n[e+"Size"];"number"==typeof o&&(o=[o,o]);var i=D(o),r=D("shadow"===e&&n.shadowAnchor||n.iconAnchor||i&&i.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),r&&(t.style.marginLeft=-r.x+"px",t.style.marginTop=-r.y+"px"),i&&(t.style.width=i.x+"px",t.style.height=i.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return Tt&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Kn(t){return new Jn(t)}var Gn=Jn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return Gn.imagePath||(Gn.imagePath=this._detectIconPath()),(this.options.imagePath||Gn.imagePath)+Jn.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=ue("div","leaflet-default-icon-path",document.body),e=ce(t,"background-image")||ce(t,"backgroundImage");return document.body.removeChild(t),e=null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Xn=fn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new _n(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ve(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ge(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,o=this._marker.options.autoPanSpeed,i=this._marker.options.autoPanPadding,r=Ce(e._icon),s=n.getPixelBounds(),a=n.getPixelOrigin(),l=z(s.min._subtract(a).add(i),s.max._subtract(a).subtract(i));if(!l.contains(r)){var c=D((Math.max(l.max.x,r.x)-l.max.x)/(s.max.x-l.max.x)-(Math.min(l.min.x,r.x)-l.min.x)/(s.min.x-l.min.x),(Math.max(l.max.y,r.y)-l.max.y)/(s.max.y-l.max.y)-(Math.min(l.min.y,r.y)-l.min.y)/(s.min.y-l.min.y)).multiplyBy(o);n.panBy(c,{animate:!1}),this._draggable._newPos._add(c),this._draggable._startPos._add(c),ke(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=C(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(O(this._panRequest),this._panRequest=C(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,o=Ce(e._icon),i=e._map.layerPointToLatLng(o);n&&ke(n,o),e._latlng=i,t.latlng=i,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){O(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Yn=Fn.extend({options:{icon:new Gn,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){d(this,e),this._latlng=V(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=V(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),o=!1;n!==this._icon&&(this._icon&&this._removeIcon(),o=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),ve(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var i=t.icon.createShadow(this._shadow),r=!1;i!==this._shadow&&(this._removeShadow(),r=!0),i&&(ve(i,e),i.alt=""),this._shadow=i,t.opacity<1&&this._updateOpacity(),o&&this.getPane().appendChild(this._icon),this._initInteraction(),i&&r&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),pe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&pe(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&ke(this._icon,t),this._shadow&&ke(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(ve(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Xn)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Xn(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&_e(this._icon,t),this._shadow&&_e(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Qn(t,e){return new Yn(t,e)}var to=Fn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return d(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),eo=to.extend({options:{fill:!0,radius:10},initialize:function(t,e){d(this,e),this._latlng=V(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=V(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return to.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),o=[t+n,e+n];this._pxBounds=new R(this._point.subtract(o),this._point.add(o))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function no(t,e){return new eo(t,e)}var oo=eo.extend({initialize:function(t,e,o){if("number"==typeof e&&(e=n({},o,{radius:e})),d(this,e),this._latlng=V(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new B(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:to.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,o=n.options.crs;if(o.distance===H.distance){var i=Math.PI/180,r=this._mRadius/H.R/i,s=n.project([e+r,t]),a=n.project([e-r,t]),l=s.add(a).divideBy(2),c=n.unproject(l).lat,u=Math.acos((Math.cos(r*i)-Math.sin(e*i)*Math.sin(c*i))/(Math.cos(e*i)*Math.cos(c*i)))/i;(isNaN(u)||0===u)&&(u=r/Math.cos(Math.PI/180*e)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(u)?0:l.x-n.project([c,t-u]).x,this._radiusY=l.y-s.y}else{var p=o.unproject(o.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(p).x}this._updateBounds()}});function io(t,e,n){return new oo(t,e,n)}var ro=to.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){d(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,o=1/0,i=null,r=Nn,s=0,a=this._parts.length;s<a;s++)for(var l=this._parts[s],c=1,u=l.length;c<u;c++){var p=r(t,e=l[c-1],n=l[c],!0);p<o&&(o=p,i=r(t,e,n))}return i&&(i.distance=Math.sqrt(o)),i},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,o,i,r,s,a=this._rings[0],l=a.length;if(!l)return null;for(t=0,e=0;t<l-1;t++)e+=a[t].distanceTo(a[t+1])/2;if(0===e)return this._map.layerPointToLatLng(a[0]);for(t=0,o=0;t<l-1;t++)if(i=a[t],r=a[t+1],(o+=n=i.distanceTo(r))>e)return s=(o-e)/n,this._map.layerPointToLatLng([r.x-s*(r.x-i.x),r.y-s*(r.y-i.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=V(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new B,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Pn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=Pn(t),o=0,i=t.length;o<i;o++)n?(e[o]=V(t[o]),this._bounds.extend(e[o])):e[o]=this._convertLatLngs(t[o]);return e},_project:function(){var t=new R;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new P(t,t);this._pxBounds=new R([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)])},_projectLatlngs:function(t,e,n){var o,i,r=t[0]instanceof j,s=t.length;if(r){for(i=[],o=0;o<s;o++)i[o]=this._map.latLngToLayerPoint(t[o]),n.extend(i[o]);e.push(i)}else for(o=0;o<s;o++)this._projectLatlngs(t[o],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,n,o,i,r,s,a,l=this._parts;for(e=0,o=0,i=this._rings.length;e<i;e++)for(n=0,r=(a=this._rings[e]).length;n<r-1;n++)(s=Tn(a[n],a[n+1],t,n,!0))&&(l[o]=l[o]||[],l[o].push(s[0]),s[1]===a[n+1]&&n!==r-2||(l[o].push(s[1]),o++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,o=t.length;n<o;n++)t[n]=wn(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,o,i,r,s,a,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,r=this._parts.length;n<r;n++)for(o=0,i=(s=(a=this._parts[n]).length)-1;o<s;i=o++)if((e||0!==o)&&xn(t,a[i],a[o])<=l)return!0;return!1}});function so(t,e){return new ro(t,e)}ro._flat=Ln;var ao=ro.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,o,i,r,s,a,l,c=this._rings[0],u=c.length;if(!u)return null;for(r=s=a=0,t=0,e=u-1;t<u;e=t++)n=c[t],o=c[e],i=n.y*o.x-o.y*n.x,s+=(n.x+o.x)*i,a+=(n.y+o.y)*i,r+=3*i;return l=0===r?c[0]:[s/r,a/r],this._map.layerPointToLatLng(l)},_convertLatLngs:function(t){var e=ro.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof j&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){ro.prototype._setLatLngs.call(this,t),Pn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Pn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new P(e,e);if(t=new R(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var o,i=0,r=this._rings.length;i<r;i++)(o=Dn(this._rings[i],t,!0)).length&&this._parts.push(o)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,o,i,r,s,a,l,c=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,a=this._parts.length;i<a;i++)for(r=0,s=(l=(e=this._parts[i]).length)-1;r<l;s=r++)n=e[r],o=e[s],n.y>t.y!=o.y>t.y&&t.x<(o.x-n.x)*(t.y-n.y)/(o.y-n.y)+n.x&&(c=!c);return c||ro.prototype._containsPoint.call(this,t,!0)}});function lo(t,e){return new ao(t,e)}var co=Un.extend({initialize:function(t,e){d(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,o,i=g(t)?t:t.features;if(i){for(e=0,n=i.length;e<n;e++)((o=i[e]).geometries||o.geometry||o.features||o.coordinates)&&this.addData(o);return this}var r=this.options;if(r.filter&&!r.filter(t))return this;var s=uo(t,r);return s?(s.feature=yo(t),s.defaultOptions=s.options,this.resetStyle(s),r.onEachFeature&&r.onEachFeature(t,s),this.addLayer(s)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=n({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer((function(e){this._setLayerStyle(e,t)}),this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}});function uo(t,e){var n,o,i,r,s="Feature"===t.type?t.geometry:t,a=s?s.coordinates:null,l=[],c=e&&e.pointToLayer,u=e&&e.coordsToLatLng||ho;if(!a&&!s)return null;switch(s.type){case"Point":return po(c,t,n=u(a),e);case"MultiPoint":for(i=0,r=a.length;i<r;i++)n=u(a[i]),l.push(po(c,t,n,e));return new Un(l);case"LineString":case"MultiLineString":return o=fo(a,"LineString"===s.type?0:1,u),new ro(o,e);case"Polygon":case"MultiPolygon":return o=fo(a,"Polygon"===s.type?1:2,u),new ao(o,e);case"GeometryCollection":for(i=0,r=s.geometries.length;i<r;i++){var p=uo({geometry:s.geometries[i],type:"Feature",properties:t.properties},e);p&&l.push(p)}return new Un(l);default:throw new Error("Invalid GeoJSON object.")}}function po(t,e,n,o){return t?t(e,n):new Yn(n,o&&o.markersInheritOptions&&o)}function ho(t){return new j(t[1],t[0],t[2])}function fo(t,e,n){for(var o,i=[],r=0,s=t.length;r<s;r++)o=e?fo(t[r],e-1,n):(n||ho)(t[r]),i.push(o);return i}function mo(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[u(t.lng,e),u(t.lat,e),u(t.alt,e)]:[u(t.lng,e),u(t.lat,e)]}function vo(t,e,n,o){for(var i=[],r=0,s=t.length;r<s;r++)i.push(e?vo(t[r],e-1,n,o):mo(t[r],o));return!e&&n&&i.push(i[0]),i}function go(t,e){return t.feature?n({},t.feature,{geometry:e}):yo(e)}function yo(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var bo={toGeoJSON:function(t){return go(this,{type:"Point",coordinates:mo(this.getLatLng(),t)})}};function _o(t,e){return new co(t,e)}Yn.include(bo),oo.include(bo),eo.include(bo),ro.include({toGeoJSON:function(t){var e=!Pn(this._latlngs);return go(this,{type:(e?"Multi":"")+"LineString",coordinates:vo(this._latlngs,e?1:0,!1,t)})}}),ao.include({toGeoJSON:function(t){var e=!Pn(this._latlngs),n=e&&!Pn(this._latlngs[0]),o=vo(this._latlngs,n?2:e?1:0,!0,t);return e||(o=[o]),go(this,{type:(n?"Multi":"")+"Polygon",coordinates:o})}}),Hn.include({toMultiPoint:function(t){var e=[];return this.eachLayer((function(n){e.push(n.toGeoJSON(t).geometry.coordinates)})),go(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var n="GeometryCollection"===e,o=[];return this.eachLayer((function(e){if(e.toGeoJSON){var i=e.toGeoJSON(t);if(n)o.push(i.geometry);else{var r=yo(i);"FeatureCollection"===r.type?o.push.apply(o,r.features):o.push(r)}}})),n?go(this,{geometries:o,type:"GeometryCollection"}):{type:"FeatureCollection",features:o}}});var wo=_o,xo=Fn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=$(e),d(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ve(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){pe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&de(this._image),this},bringToBack:function(){return this._map&&fe(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=$(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:ue("img");ve(e,"leaflet-image-layer"),this._zoomAnimated&&ve(e,"leaflet-zoom-animated"),this.options.className&&ve(e,this.options.className),e.onselectstart=c,e.onmousemove=c,e.onload=i(this.fire,this,"load"),e.onerror=i(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Se(this._image,n,e)},_reset:function(){var t=this._image,e=new R(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();ke(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){_e(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),So=function(t,e,n){return new xo(t,e,n)},ko=xo.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:ue("video");if(ve(e,"leaflet-image-layer"),this._zoomAnimated&&ve(e,"leaflet-zoom-animated"),this.options.className&&ve(e,this.options.className),e.onselectstart=c,e.onmousemove=c,e.onloadeddata=i(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),o=[],r=0;r<n.length;r++)o.push(n[r].src);this._url=n.length>0?o:[e.src]}else{g(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted;for(var s=0;s<this._url.length;s++){var a=ue("source");a.src=this._url[s],e.appendChild(a)}}}});function Co(t,e,n){return new ko(t,e,n)}var Oo=xo.extend({_initImage:function(){var t=this._image=this._url;ve(t,"leaflet-image-layer"),this._zoomAnimated&&ve(t,"leaflet-zoom-animated"),this.options.className&&ve(t,this.options.className),t.onselectstart=c,t.onmousemove=c}});function To(t,e,n){return new Oo(t,e,n)}var Mo=Fn.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){d(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&_e(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&_e(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(_e(this._container,0),this._removeTimeout=setTimeout(i(pe,void 0,this._container),200)):pe(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=V(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&de(this._container),this},bringToBack:function(){return this._map&&fe(this._container),this},_prepareOpen:function(t,e,n){if(e instanceof Fn||(n=e,e=t),e instanceof Un)for(var o in t._layers){e=t._layers[o];break}if(!n)if(e.getCenter)n=e.getCenter();else{if(!e.getLatLng)throw new Error("Unable to get source layer LatLng.");n=e.getLatLng()}return this._source=e,this.update(),n},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=D(this.options.offset),n=this._getAnchor();this._zoomAnimated?ke(this._container,t.add(n)):e=e.add(t).add(n);var o=this._containerBottom=-e.y,i=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=o+"px",this._container.style.left=i+"px"}},_getAnchor:function(){return[0,0]}}),Eo=Mo.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){Mo.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof to||this._source.on("preclick",Ve))},onRemove:function(t){Mo.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof to||this._source.off("preclick",Ve))},getEvents:function(){var t=Mo.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=ue("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=ue("div",t+"-content-wrapper",e);if(this._contentNode=ue("div",t+"-content",n),Fe(e),Ze(this._contentNode),Ie(e,"contextmenu",Ve),this._tipContainer=ue("div",t+"-tip-container",e),this._tip=ue("div",t+"-tip",this._tipContainer),this.options.closeButton){var o=this._closeButton=ue("a",t+"-close-button",e);o.href="#close",o.innerHTML="&#215;",Ie(o,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var o=t.offsetHeight,i=this.options.maxHeight,r="leaflet-popup-scrolled";i&&o>i?(e.height=i+"px",ve(t,r)):ge(t,r),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();ke(this._container,e.add(n))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var t=this._map,e=parseInt(ce(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,o=this._containerWidth,i=new P(this._containerLeft,-n-this._containerBottom);i._add(Ce(this._container));var r=t.layerPointToContainerPoint(i),s=D(this.options.autoPanPadding),a=D(this.options.autoPanPaddingTopLeft||s),l=D(this.options.autoPanPaddingBottomRight||s),c=t.getSize(),u=0,p=0;r.x+o+l.x>c.x&&(u=r.x+o-c.x+l.x),r.x-u-a.x<0&&(u=r.x-a.x),r.y+n+l.y>c.y&&(p=r.y+n-c.y+l.y),r.y-p-a.y<0&&(p=r.y-a.y),(u||p)&&t.fire("autopanstart").panBy([u,p])}},_onCloseButtonClick:function(t){this._close(),We(t)},_getAnchor:function(){return D(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Ao=function(t,e){return new Eo(t,e)};en.mergeOptions({closePopupOnClick:!0}),en.include({openPopup:function(t,e,n){return t instanceof Eo||(t=new Eo(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),Fn.include({bindPopup:function(t,e){return t instanceof Eo?(d(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new Eo(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){return this._popup&&this._map&&(e=this._popup._prepareOpen(this,t,e),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(We(t),e instanceof to?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var No=Mo.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){Mo.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){Mo.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=Mo.prototype.getEvents.call(this);return kt&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ue("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,n,o=this._map,i=this._container,r=o.latLngToContainerPoint(o.getCenter()),s=o.layerPointToContainerPoint(t),a=this.options.direction,l=i.offsetWidth,c=i.offsetHeight,u=D(this.options.offset),p=this._getAnchor();"top"===a?(e=l/2,n=c):"bottom"===a?(e=l/2,n=0):"center"===a?(e=l/2,n=c/2):"right"===a?(e=0,n=c/2):"left"===a?(e=l,n=c/2):s.x<r.x?(a="right",e=0,n=c/2):(a="left",e=l+2*(u.x+p.x),n=c/2),t=t.subtract(D(e,n,!0)).add(u).add(p),ge(i,"leaflet-tooltip-right"),ge(i,"leaflet-tooltip-left"),ge(i,"leaflet-tooltip-top"),ge(i,"leaflet-tooltip-bottom"),ve(i,"leaflet-tooltip-"+a),ke(i,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&_e(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return D(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Po=function(t,e){return new No(t,e)};en.include({openTooltip:function(t,e,n){return t instanceof No||(t=new No(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),Fn.include({bindTooltip:function(t,e){return t instanceof No?(d(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=new No(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),kt&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){return this._tooltip&&this._map&&(e=this._tooltip._prepareOpen(this,t,e),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(ve(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(ge(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,n,o=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),o=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(o)}});var Lo=Jn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(n.html instanceof Element?(he(e),e.appendChild(n.html)):e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var o=D(n.bgPos);e.style.backgroundPosition=-o.x+"px "+-o.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function Io(t){return new Lo(t)}Jn.Default=Gn;var Do=Fn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:bt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){d(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),pe(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(de(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(fe(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=a(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof P?t:new P(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,o=-t(-1/0,1/0),i=0,r=n.length;i<r;i++)e=n[i].style.zIndex,n[i]!==this._container&&e&&(o=t(o,+e));isFinite(o)&&(this.options.zIndex=o+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!et){_e(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var o in this._tiles){var i=this._tiles[o];if(i.current&&i.loaded){var r=Math.min(1,(t-i.loaded)/200);_e(i.el,r),r<1?e=!0:(i.active?n=!0:this._onOpaqueTile(i),i.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(O(this._fadeFrame),this._fadeFrame=C(this._updateOpacity,this))}},_onOpaqueTile:c,_initContainer:function(){this._container||(this._container=ue("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(pe(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var o=this._levels[t],i=this._map;return o||((o=this._levels[t]={}).el=ue("div","leaflet-tile-container leaflet-zoom-animated",this._container),o.el.style.zIndex=e,o.origin=i.project(i.unproject(i.getPixelOrigin()),t).round(),o.zoom=t,this._setZoomTransform(o,i.getCenter(),i.getZoom()),c(o.el.offsetWidth),this._onCreateLevel(o)),this._level=o,o}},_onUpdateLevel:c,_onRemoveLevel:c,_onCreateLevel:c,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var o=e.coords;this._retainParent(o.x,o.y,o.z,o.z-5)||this._retainChildren(o.x,o.y,o.z,o.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)pe(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,o){var i=Math.floor(t/2),r=Math.floor(e/2),s=n-1,a=new P(+i,+r);a.z=+s;var l=this._tileCoordsToKey(a),c=this._tiles[l];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),s>o&&this._retainParent(i,r,s,o))},_retainChildren:function(t,e,n,o){for(var i=2*t;i<2*t+2;i++)for(var r=2*e;r<2*e+2;r++){var s=new P(i,r);s.z=n+1;var a=this._tileCoordsToKey(s),l=this._tiles[a];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<o&&this._retainChildren(i,r,n+1,o))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,o){var i=Math.round(e);i=void 0!==this.options.maxZoom&&i>this.options.maxZoom||void 0!==this.options.minZoom&&i<this.options.minZoom?void 0:this._clampZoom(i);var r=this.options.updateWhenZooming&&i!==this._tileZoom;o&&!r||(this._tileZoom=i,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==i&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var o=this._map.getZoomScale(n,t.zoom),i=t.origin.multiplyBy(o).subtract(this._map._getNewPixelOrigin(e,n)).round();yt?Se(t.el,i,o):ke(t.el,i)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),o=this._tileZoom,i=this._map.getPixelWorldBounds(this._tileZoom);i&&(this._globalTileRange=this._pxBoundsToTileRange(i)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],o).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],o).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],o).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],o).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),o=e.getZoomScale(n,this._tileZoom),i=e.project(t,this._tileZoom).floor(),r=e.getSize().divideBy(2*o);return new R(i.subtract(r),i.add(r))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var o=this._getTiledPixelBounds(t),i=this._pxBoundsToTileRange(o),r=i.getCenter(),s=[],a=this.options.keepBuffer,l=new R(i.getBottomLeft().subtract([a,-a]),i.getTopRight().add([a,-a]));if(!(isFinite(i.min.x)&&isFinite(i.min.y)&&isFinite(i.max.x)&&isFinite(i.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var c in this._tiles){var u=this._tiles[c].coords;u.z===this._tileZoom&&l.contains(new P(u.x,u.y))||(this._tiles[c].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(t,n);else{for(var p=i.min.y;p<=i.max.y;p++)for(var h=i.min.x;h<=i.max.x;h++){var d=new P(h,p);if(d.z=this._tileZoom,this._isValidTile(d)){var f=this._tiles[this._tileCoordsToKey(d)];f?f.current=!0:s.push(d)}}if(s.sort((function(t,e){return t.distanceTo(r)-e.distanceTo(r)})),0!==s.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(h=0;h<s.length;h++)this._addTile(s[h],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var o=this._tileCoordsToBounds(t);return $(this.options.bounds).overlaps(o)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),o=t.scaleBy(n),i=o.add(n);return[e.unproject(o,t.z),e.unproject(i,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new B(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new P(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(pe(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){ve(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=c,t.onmousemove=c,et&&this.options.opacity<1&&_e(t,this.options.opacity),it&&!rt&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var n=this._getTilePos(t),o=this._tileCoordsToKey(t),r=this.createTile(this._wrapCoords(t),i(this._tileReady,this,t));this._initTile(r),this.createTile.length<2&&C(i(this._tileReady,this,t,null,r)),ke(r,n),this._tiles[o]={el:r,coords:t,current:!0},e.appendChild(r),this.fire("tileloadstart",{tile:r,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var o=this._tileCoordsToKey(t);(n=this._tiles[o])&&(n.loaded=+new Date,this._map._fadeAnimated?(_e(n.el,0),O(this._fadeFrame),this._fadeFrame=C(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(ve(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),et||!this._map._fadeAnimated?C(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new P(this._wrapX?l(t.x,this._wrapX):t.x,this._wrapY?l(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new R(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Ro(t){return new Do(t)}var zo=Do.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=d(this,e)).detectRetina&&Tt&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),it||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return Ie(n,"load",i(this._tileOnLoad,this,e,n)),Ie(n,"error",i(this._tileOnError,this,e,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:Tt?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var o=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=o),e["-y"]=o}return v(this._url,n(e,this.options))},_tileOnLoad:function(t,e){et?setTimeout(i(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var o=this.options.errorTileUrl;o&&e.getAttribute("src")!==o&&(e.src=o),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return this.options.zoomReverse&&(t=e-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=c,e.onerror=c,e.complete||(e.src=b,pe(e),delete this._tiles[t]))},_removeTile:function(t){var e=this._tiles[t];if(e)return at||e.el.setAttribute("src",b),Do.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(this._map&&(!n||n.getAttribute("src")!==b))return Do.prototype._tileReady.call(this,t,e,n)}});function Bo(t,e){return new zo(t,e)}var $o=zo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var o=n({},this.defaultWmsParams);for(var i in e)i in this.options||(o[i]=e[i]);var r=(e=d(this,e)).detectRetina&&Tt?2:1,s=this.getTileSize();o.width=s.x*r,o.height=s.y*r,this.wmsParams=o},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,zo.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,o=z(n.project(e[0]),n.project(e[1])),i=o.min,r=o.max,s=(this._wmsVersion>=1.3&&this._crs===Vn?[i.y,i.x,r.y,r.x]:[i.x,i.y,r.x,r.y]).join(","),a=zo.prototype.getTileUrl.call(this,t);return a+f(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+s},setParams:function(t,e){return n(this.wmsParams,t),e||this.redraw(),this}});function jo(t,e){return new $o(t,e)}zo.WMS=$o,Bo.wms=jo;var Vo=Fn.extend({options:{padding:.1,tolerance:0},initialize:function(t){d(this,t),s(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&ve(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),o=Ce(this._container),i=this._map.getSize().multiplyBy(.5+this.options.padding),r=this._map.project(this._center,e),s=this._map.project(t,e).subtract(r),a=i.multiplyBy(-n).add(o).add(i).subtract(s);yt?Se(this._container,a,n):ke(this._container,a)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new R(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Zo=Vo.extend({getEvents:function(){var t=Vo.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Vo.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Ie(t,"mousemove",this._onMouseMove,this),Ie(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ie(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){O(this._redrawRequest),delete this._ctx,pe(this._container),Re(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){Vo.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),o=Tt?2:1;ke(e,t.min),e.width=o*n.x,e.height=o*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",Tt&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Vo.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[s(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,o=e.prev;n?n.prev=o:this._drawLast=o,o?o.next=n:this._drawFirst=n,delete t._order,delete this._layers[s(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var e,n,o=t.options.dashArray.split(/[, ]+/),i=[];for(n=0;n<o.length;n++){if(e=Number(o[n]),isNaN(e))return;i.push(e)}t.options._dashArray=i}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||C(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new R,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var o=this._drawFirst;o;o=o.next)t=o.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,o,i,r,s=t._parts,a=s.length,l=this._ctx;if(a){for(l.beginPath(),n=0;n<a;n++){for(o=0,i=s[n].length;o<i;o++)r=s[n][o],l[o?"lineTo":"moveTo"](r.x,r.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,o=Math.max(Math.round(t._radius),1),i=(Math.max(Math.round(t._radiusY),1)||o)/o;1!==i&&(n.save(),n.scale(1,i)),n.beginPath(),n.arc(e.x,e.y/i,o,0,2*Math.PI,!1),1!==i&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,o=this._map.mouseEventToLayerPoint(t),i=this._drawFirst;i;i=i.next)(e=i.layer).options.interactive&&e._containsPoint(o)&&("click"!==t.type&&"preclick"===t.type||!this._map._draggableMoved(e))&&(n=e);n&&(Ge(t),this._fireEvent([n],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(ge(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var n,o,r=this._drawFirst;r;r=r.next)(n=r.layer).options.interactive&&n._containsPoint(e)&&(o=n);o!==this._hoveredLayer&&(this._handleMouseOut(t),o&&(ve(this._container,"leaflet-interactive"),this._fireEvent([o],t,"mouseover"),this._hoveredLayer=o)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(i((function(){this._mouseHoverThrottled=!1}),this),32)}},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var n=e.next,o=e.prev;n&&(n.prev=o,o?o.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var n=e.next,o=e.prev;o&&(o.next=n,n?n.prev=o:o&&(this._drawLast=o),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}});function Fo(t){return Et?new Zo(t):null}var Ho=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),Wo={_initContainer:function(){this._container=ue("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Vo.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=Ho("shape");ve(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=Ho("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[s(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;pe(e),t.removeInteractiveTarget(e),delete this._layers[s(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,o=t.options,i=t._container;i.stroked=!!o.stroke,i.filled=!!o.fill,o.stroke?(e||(e=t._stroke=Ho("stroke")),i.appendChild(e),e.weight=o.weight+"px",e.color=o.color,e.opacity=o.opacity,o.dashArray?e.dashStyle=g(o.dashArray)?o.dashArray.join(" "):o.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=o.lineCap.replace("butt","flat"),e.joinstyle=o.lineJoin):e&&(i.removeChild(e),t._stroke=null),o.fill?(n||(n=t._fill=Ho("fill")),i.appendChild(n),n.color=o.fillColor||o.color,n.opacity=o.fillOpacity):n&&(i.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),o=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+o+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){de(t._container)},_bringToBack:function(t){fe(t._container)}},Uo=Nt?Ho:X,qo=Vo.extend({getEvents:function(){var t=Vo.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=Uo("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Uo("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){pe(this._container),Re(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){Vo.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),ke(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=Uo("path");t.options.className&&ve(e,t.options.className),t.options.interactive&&ve(e,"leaflet-interactive"),this._updateStyle(t),this._layers[s(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){pe(t._path),t.removeInteractiveTarget(t._path),delete this._layers[s(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,Y(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),o="a"+n+","+(Math.max(Math.round(t._radiusY),1)||n)+" 0 1,0 ",i=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+o+2*n+",0 "+o+2*-n+",0 ";this._setPath(t,i)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){de(t._path)},_bringToBack:function(t){fe(t._path)}});function Jo(t){return At||Nt?new qo(t):null}Nt&&qo.include(Wo),en.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&Fo(t)||Jo(t)}});var Ko=ao.extend({initialize:function(t,e){ao.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=$(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Go(t,e){return new Ko(t,e)}qo.create=Uo,qo.pointsToPath=Y,co.geometryToLayer=uo,co.coordsToLatLng=ho,co.coordsToLatLngs=fo,co.latLngToCoords=mo,co.latLngsToCoords=vo,co.getFeature=go,co.asFeature=yo,en.mergeOptions({boxZoom:!0});var Xo=fn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Ie(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Re(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){pe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),te(),Te(),this._startPoint=this._map.mouseEventToContainerPoint(t),Ie(document,{contextmenu:We,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ue("div","leaflet-zoom-box",this._container),ve(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new R(this._point,this._startPoint),n=e.getSize();ke(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(pe(this._box),ge(this._container,"leaflet-crosshair")),ee(),Me(),Re(document,{contextmenu:We,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var e=new B(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});en.addInitHook("addHandler","boxZoom",Xo),en.mergeOptions({doubleClickZoom:!0});var Yo=fn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),o=e.options.zoomDelta,i=t.originalEvent.shiftKey?n-o:n+o;"center"===e.options.doubleClickZoom?e.setZoom(i):e.setZoomAround(t.containerPoint,i)}});en.addInitHook("addHandler","doubleClickZoom",Yo),en.mergeOptions({dragging:!0,inertia:!rt,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Qo=fn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new _n(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}ve(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ge(this._map._container,"leaflet-grab"),ge(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=$(this._map.options.maxBounds);this._offsetLimit=z(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,o=this._draggable._newPos.x,i=(o-e+n)%t+e-n,r=(o+e+n)%t-e-n,s=Math.abs(i+n)<Math.abs(r+n)?i:r;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=s},_onDragEnd:function(t){var e=this._map,n=e.options,o=!n.inertia||this._times.length<2;if(e.fire("dragend",t),o)e.fire("moveend");else{this._prunePositions(+new Date);var i=this._lastPos.subtract(this._positions[0]),r=(this._lastTime-this._times[0])/1e3,s=n.easeLinearity,a=i.multiplyBy(s/r),l=a.distanceTo([0,0]),c=Math.min(n.inertiaMaxSpeed,l),u=a.multiplyBy(c/l),p=c/(n.inertiaDeceleration*s),h=u.multiplyBy(-p/2).round();h.x||h.y?(h=e._limitOffset(h,e.options.maxBounds),C((function(){e.panBy(h,{duration:p,easeLinearity:s,noMoveStart:!0,animate:!0})}))):e.fire("moveend")}}});en.addInitHook("addHandler","dragging",Qo),en.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ti=fn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Ie(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Re(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,o=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(o,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,o=this._panKeys={},i=this.keyCodes;for(e=0,n=i.left.length;e<n;e++)o[i.left[e]]=[-1*t,0];for(e=0,n=i.right.length;e<n;e++)o[i.right[e]]=[t,0];for(e=0,n=i.down.length;e<n;e++)o[i.down[e]]=[0,t];for(e=0,n=i.up.length;e<n;e++)o[i.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,o=this._zoomKeys={},i=this.keyCodes;for(e=0,n=i.zoomIn.length;e<n;e++)o[i.zoomIn[e]]=t;for(e=0,n=i.zoomOut.length;e<n;e++)o[i.zoomOut[e]]=-t},_addHooks:function(){Ie(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Re(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,o=this._map;if(n in this._panKeys)o._panAnim&&o._panAnim._inProgress||(e=this._panKeys[n],t.shiftKey&&(e=D(e).multiplyBy(3)),o.panBy(e),o.options.maxBounds&&o.panInsideBounds(o.options.maxBounds));else if(n in this._zoomKeys)o.setZoom(o.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!o._popup||!o._popup.options.closeOnEscapeKey)return;o.closePopup()}We(t)}}});en.addInitHook("addHandler","keyboard",ti),en.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ei=fn.extend({addHooks:function(){Ie(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Re(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=Je(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var o=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),o),We(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var o=this._delta/(4*this._map.options.wheelPxPerZoomLevel),i=4*Math.log(2/(1+Math.exp(-Math.abs(o))))/Math.LN2,r=n?Math.ceil(i/n)*n:i,s=t._limitZoom(e+(this._delta>0?r:-r))-e;this._delta=0,this._startTime=null,s&&("center"===t.options.scrollWheelZoom?t.setZoom(e+s):t.setZoomAround(this._lastMousePos,e+s))}});en.addInitHook("addHandler","scrollWheelZoom",ei),en.mergeOptions({tap:!0,tapTolerance:15});var ni=fn.extend({addHooks:function(){Ie(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Re(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(He(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new P(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&ve(n,"leaflet-active"),this._holdTimeout=setTimeout(i((function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))}),this),1e3),this._simulateEvent("mousedown",e),Ie(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),Re(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&ge(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new P(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=document.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}});!kt||St&&!pt||en.addInitHook("addHandler","tap",ni),en.mergeOptions({touchZoom:kt&&!rt,bounceAtZoomLimits:!0});var oi=fn.extend({addHooks:function(){ve(this._map._container,"leaflet-touch-zoom"),Ie(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ge(this._map._container,"leaflet-touch-zoom"),Re(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),o=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(o)._divideBy(2))),this._startDist=n.distanceTo(o),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Ie(document,"touchmove",this._onTouchMove,this),Ie(document,"touchend",this._onTouchEnd,this),He(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),o=e.mouseEventToContainerPoint(t.touches[1]),r=n.distanceTo(o)/this._startDist;if(this._zoom=e.getScaleZoom(r,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&r<1||this._zoom>e.getMaxZoom()&&r>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===r)return}else{var s=n._add(o)._divideBy(2)._subtract(this._centerPoint);if(1===r&&0===s.x&&0===s.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(s),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),O(this._animRequest);var a=i(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=C(a,this,!0),He(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,O(this._animRequest),Re(document,"touchmove",this._onTouchMove,this),Re(document,"touchend",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});en.addInitHook("addHandler","touchZoom",oi),en.BoxZoom=Xo,en.DoubleClickZoom=Yo,en.Drag=Qo,en.Keyboard=ti,en.ScrollWheelZoom=ei,en.Tap=ni,en.TouchZoom=oi,t.version=e,t.Control=on,t.control=rn,t.Browser=Lt,t.Evented=N,t.Mixin=vn,t.Util=T,t.Class=M,t.Handler=fn,t.extend=n,t.bind=i,t.stamp=s,t.setOptions=d,t.DomEvent=Qe,t.DomUtil=Le,t.PosAnimation=tn,t.Draggable=_n,t.LineUtil=In,t.PolyUtil=Rn,t.Point=P,t.point=D,t.Bounds=R,t.bounds=z,t.Transformation=q,t.transformation=J,t.Projection=$n,t.LatLng=j,t.latLng=V,t.LatLngBounds=B,t.latLngBounds=$,t.CRS=F,t.GeoJSON=co,t.geoJSON=_o,t.geoJson=wo,t.Layer=Fn,t.LayerGroup=Hn,t.layerGroup=Wn,t.FeatureGroup=Un,t.featureGroup=qn,t.ImageOverlay=xo,t.imageOverlay=So,t.VideoOverlay=ko,t.videoOverlay=Co,t.SVGOverlay=Oo,t.svgOverlay=To,t.DivOverlay=Mo,t.Popup=Eo,t.popup=Ao,t.Tooltip=No,t.tooltip=Po,t.Icon=Jn,t.icon=Kn,t.DivIcon=Lo,t.divIcon=Io,t.Marker=Yn,t.marker=Qn,t.TileLayer=zo,t.tileLayer=Bo,t.GridLayer=Do,t.gridLayer=Ro,t.SVG=qo,t.svg=Jo,t.Renderer=Vo,t.Canvas=Zo,t.canvas=Fo,t.Path=to,t.CircleMarker=eo,t.circleMarker=no,t.Circle=oo,t.circle=io,t.Polyline=ro,t.polyline=so,t.Polygon=ao,t.polygon=lo,t.Rectangle=Ko,t.rectangle=Go,t.Map=en,t.map=nn;var ii=window.L;t.noConflict=function(){return window.L=ii,this},window.L=t}(e)},6470:(t,e,n)=>{"use strict";var o=n(7802),i=n(1102);a.prototype.addText=function(t){var e,n,o=this.stack;if(""===t)return;e=o[o.length-1],(n=e.children[e.children.length-1])&&"text"===n.type?n.value+=t:e.children.push({type:"text",value:t})},a.prototype.addKeyword=function(t,e){this.openNode(e),this.addText(t),this.closeNode()},a.prototype.addSublanguage=function(t,e){var n=this.stack,o=n[n.length-1],i=t.rootNode.children,r=e?{type:"element",tagName:"span",properties:{className:[e]},children:i}:i;o.children=o.children.concat(r)},a.prototype.openNode=function(t){var e=this.stack,n=this.options.classPrefix+t,o=e[e.length-1],i={type:"element",tagName:"span",properties:{className:[n]},children:[]};o.children.push(i),e.push(i)},a.prototype.closeNode=function(){this.stack.pop()},a.prototype.closeAllNodes=l,a.prototype.finalize=l,a.prototype.toHTML=function(){return""};var r="hljs-";function s(t,e,n){var s,l=o.configure({}),c=(n||{}).prefix;if("string"!=typeof t)throw i("Expected `string` for name, got `%s`",t);if(!o.getLanguage(t))throw i("Unknown language: `%s` is not registered",t);if("string"!=typeof e)throw i("Expected `string` for value, got `%s`",e);if(null==c&&(c=r),o.configure({__emitter:a,classPrefix:c}),s=o.highlight(e,{language:t,ignoreIllegals:!0}),o.configure(l||{}),s.errorRaised)throw s.errorRaised;return{relevance:s.relevance,language:s.language,value:s.emitter.rootNode.children}}function a(t){this.options=t,this.rootNode={children:[]},this.stack=[this.rootNode]}function l(){}},3888:(t,e,n)=>{"use strict";var o=n(3379),i=n.n(o),r=n(6082),s={insert:"head",singleton:!1};i()(r.Z,s),r.Z.locals},6247:function(t,e){!function(t){"use strict";var e={inject:["manager"],props:{index:{type:Number,required:!0},collection:{type:[String,Number],default:"default"},disabled:{type:Boolean,default:!1}},mounted:function(){var t=this.$props,e=t.collection,n=t.disabled,o=t.index;n||this.setDraggable(e,o)},watch:{index:function(t){this.$el&&this.$el.sortableInfo&&(this.$el.sortableInfo.index=t)},disabled:function(t){t?this.removeDraggable(this.collection):this.setDraggable(this.collection,this.index)},collection:function(t,e){this.removeDraggable(e),this.setDraggable(t,this.index)}},beforeDestroy:function(){var t=this.collection;this.disabled||this.removeDraggable(t)},methods:{setDraggable:function(t,e){var n=this.$el;n.sortableInfo={index:e,collection:t,manager:this.manager},this.ref={node:n},this.manager.add(t,this.ref)},removeDraggable:function(t){this.manager.remove(t,this.ref)}}},n=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=function(){function t(t,e){var n=[],o=!0,i=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){i=!0,r=t}finally{try{!o&&a.return&&a.return()}finally{if(i)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},s=function(){function t(){n(this,t),this.refs={}}return o(t,[{key:"add",value:function(t,e){this.refs[t]||(this.refs[t]=[]),this.refs[t].push(e)}},{key:"remove",value:function(t,e){var n=this.getIndex(t,e);-1!==n&&this.refs[t].splice(n,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var t=this;return this.refs[this.active.collection].find((function(e){return e.node.sortableInfo.index==t.active.index}))}},{key:"getIndex",value:function(t,e){return this.refs[t].indexOf(e)}},{key:"getOrderedRefs",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.active.collection;return this.refs[t].sort((function(t,e){return t.node.sortableInfo.index-e.node.sortableInfo.index}))}}]),t}();function a(t,e,n){var o=t.slice(0);if(n>=o.length)for(var i=n-o.length;1+i--;)o.push(void 0);return o.splice(n,0,o.splice(e,1)[0]),o}var l={start:["touchstart","mousedown"],move:["touchmove","mousemove"],end:["touchend","touchcancel","mouseup"]},c=function(){if("undefined"==typeof window||"undefined"==typeof document)return"";var t=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],e=(Array.prototype.slice.call(t).join("").match(/-(moz|webkit|ms)-/)||""===t.OLink&&["","o"])[1];return"ms"===e?"ms":e&&e.length?e[0].toUpperCase()+e.substr(1):""}();function u(t,e){for(;t;){if(e(t))return t;t=t.parentNode}}function p(t,e,n){return n<t?t:n>e?e:n}function h(t){return"px"===t.substr(-2)?parseFloat(t):0}function d(t){var e=window.getComputedStyle(t);return{top:h(e.marginTop),right:h(e.marginRight),bottom:h(e.marginBottom),left:h(e.marginLeft)}}var f={data:function(){return{sorting:!1,sortingIndex:null,manager:new s,events:{start:this.handleStart,move:this.handleMove,end:this.handleEnd}}},props:{value:{type:Array,required:!0},axis:{type:String,default:"y"},distance:{type:Number,default:0},pressDelay:{type:Number,default:0},pressThreshold:{type:Number,default:5},useDragHandle:{type:Boolean,default:!1},useWindowAsScrollContainer:{type:Boolean,default:!1},hideSortableGhost:{type:Boolean,default:!0},lockToContainerEdges:{type:Boolean,default:!1},lockOffset:{type:[String,Number,Array],default:"50%"},transitionDuration:{type:Number,default:300},appendTo:{type:String,default:"body"},draggedSettlingDuration:{type:Number,default:null},lockAxis:String,helperClass:String,contentWindow:Object,shouldCancelStart:{type:Function,default:function(t){return-1!==["input","textarea","select","option","button"].indexOf(t.target.tagName.toLowerCase())}},getHelperDimensions:{type:Function,default:function(t){var e=t.node;return{width:e.offsetWidth,height:e.offsetHeight}}}},provide:function(){return{manager:this.manager}},mounted:function(){var t=this;this.container=this.$el,this.document=this.container.ownerDocument||document,this._window=this.contentWindow||window,this.scrollContainer=this.useWindowAsScrollContainer?this.document.body:this.container;var e=function(e){t.events.hasOwnProperty(e)&&l[e].forEach((function(n){return t.container.addEventListener(n,t.events[e],{passive:!0})}))};for(var n in this.events)e(n)},beforeDestroy:function(){var t=this,e=function(e){t.events.hasOwnProperty(e)&&l[e].forEach((function(n){return t.container.removeEventListener(n,t.events[e])}))};for(var n in this.events)e(n)},methods:{handleStart:function(t){var e=this,n=this.$props,o=n.distance,i=n.shouldCancelStart;if(2===t.button||i(t))return!1;this._touched=!0,this._pos=this.getOffset(t);var r=u(t.target,(function(t){return null!=t.sortableInfo}));if(r&&r.sortableInfo&&this.nodeIsChild(r)&&!this.sorting){var s=this.$props.useDragHandle,a=r.sortableInfo,l=a.index,c=a.collection;if(s&&!u(t.target,(function(t){return null!=t.sortableHandle})))return;this.manager.active={index:l,collection:c},"a"===t.target.tagName.toLowerCase()&&t.preventDefault(),o||(0===this.$props.pressDelay?this.handlePress(t):this.pressTimer=setTimeout((function(){return e.handlePress(t)}),this.$props.pressDelay))}},nodeIsChild:function(t){return t.sortableInfo.manager===this.manager},handleMove:function(t){var e=this.$props,n=e.distance,o=e.pressThreshold;if(!this.sorting&&this._touched){var i=this.getOffset(t);this._delta={x:this._pos.x-i.x,y:this._pos.y-i.y};var r=Math.abs(this._delta.x)+Math.abs(this._delta.y);n||o&&!(o&&r>=o)?n&&r>=n&&this.manager.isActive()&&this.handlePress(t):(clearTimeout(this.cancelTimer),this.cancelTimer=setTimeout(this.cancel,0))}},handleEnd:function(){var t=this.$props.distance;this._touched=!1,t||this.cancel()},cancel:function(){this.sorting||(clearTimeout(this.pressTimer),this.manager.active=null)},handlePress:function(t){var e=this;t.stopPropagation();var n=this.manager.getActive();if(n){var o=this.$props,i=o.axis,s=o.getHelperDimensions,a=o.helperClass,c=o.hideSortableGhost,u=o.useWindowAsScrollContainer,p=o.appendTo,h=n.node,f=n.collection,m=h.sortableInfo.index,v=d(h),g=this.container.getBoundingClientRect(),y=s({index:m,node:h,collection:f});this.node=h,this.margin=v,this.width=y.width,this.height=y.height,this.marginOffset={x:this.margin.left+this.margin.right,y:Math.max(this.margin.top,this.margin.bottom)},this.boundingClientRect=h.getBoundingClientRect(),this.containerBoundingRect=g,this.index=m,this.newIndex=m,this._axis={x:i.indexOf("x")>=0,y:i.indexOf("y")>=0},this.offsetEdge=this.getEdgeOffset(h),this.initialOffset=this.getOffset(t),this.initialScroll={top:this.scrollContainer.scrollTop,left:this.scrollContainer.scrollLeft},this.initialWindowScroll={top:window.pageYOffset,left:window.pageXOffset};var b,_=h.querySelectorAll("input, textarea, select"),w=h.cloneNode(!0);[].concat(r(w.querySelectorAll("input, textarea, select"))).forEach((function(t,e){"file"!==t.type&&_[e]&&(t.value=_[e].value)})),this.helper=this.document.querySelector(p).appendChild(w),this.helper.style.position="fixed",this.helper.style.top=this.boundingClientRect.top-v.top+"px",this.helper.style.left=this.boundingClientRect.left-v.left+"px",this.helper.style.width=this.width+"px",this.helper.style.height=this.height+"px",this.helper.style.boxSizing="border-box",this.helper.style.pointerEvents="none",c&&(this.sortableGhost=h,h.style.visibility="hidden",h.style.opacity=0),this.translate={},this.minTranslate={},this.maxTranslate={},this._axis.x&&(this.minTranslate.x=(u?0:g.left)-this.boundingClientRect.left-this.width/2,this.maxTranslate.x=(u?this._window.innerWidth:g.left+g.width)-this.boundingClientRect.left-this.width/2),this._axis.y&&(this.minTranslate.y=(u?0:g.top)-this.boundingClientRect.top-this.height/2,this.maxTranslate.y=(u?this._window.innerHeight:g.top+g.height)-this.boundingClientRect.top-this.height/2),a&&(b=this.helper.classList).add.apply(b,r(a.split(" "))),this.listenerNode=t.touches?h:this._window,l.move.forEach((function(t){return e.listenerNode.addEventListener(t,e.handleSortMove,!1)})),l.end.forEach((function(t){return e.listenerNode.addEventListener(t,e.handleSortEnd,!1)})),this.sorting=!0,this.sortingIndex=m,this.$emit("sort-start",{event:t,node:h,index:m,collection:f})}},handleSortMove:function(t){t.preventDefault(),this.updatePosition(t),this.animateNodes(),this.autoscroll(),this.$emit("sort-move",{event:t})},handleSortEnd:function(t){var e=this,n=this.manager.active.collection;this.listenerNode&&(l.move.forEach((function(t){return e.listenerNode.removeEventListener(t,e.handleSortMove)})),l.end.forEach((function(t){return e.listenerNode.removeEventListener(t,e.handleSortEnd)})));var o=this.manager.refs[n],i=function(){e.helper.parentNode.removeChild(e.helper),e.hideSortableGhost&&e.sortableGhost&&(e.sortableGhost.style.visibility="",e.sortableGhost.style.opacity="");for(var i=0,r=o.length;i<r;i++){var s=o[i],l=s.node;s.edgeOffset=null,l.style[c+"Transform"]="",l.style[c+"TransitionDuration"]=""}clearInterval(e.autoscrollInterval),e.autoscrollInterval=null,e.manager.active=null,e.sorting=!1,e.sortingIndex=null,e.$emit("sort-end",{event:t,oldIndex:e.index,newIndex:e.newIndex,collection:n}),e.$emit("input",a(e.value,e.index,e.newIndex)),e._touched=!1};this.$props.transitionDuration||this.$props.draggedSettlingDuration?this.transitionHelperIntoPlace(o).then((function(){return i()})):i()},transitionHelperIntoPlace:function(t){var e=this;if(0===this.$props.draggedSettlingDuration||0===t.length)return Promise.resolve();var n={left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top},o=t[this.index].node,i=t[this.newIndex].node,r=-n.left;this.translate&&this.translate.x>0?r+=i.offsetLeft+i.offsetWidth-(o.offsetLeft+o.offsetWidth):r+=i.offsetLeft-o.offsetLeft;var s=-n.top;this.translate&&this.translate.y>0?s+=i.offsetTop+i.offsetHeight-(o.offsetTop+o.offsetHeight):s+=i.offsetTop-o.offsetTop;var a=null!==this.$props.draggedSettlingDuration?this.$props.draggedSettlingDuration:this.$props.transitionDuration;return this.helper.style[c+"Transform"]="translate3d("+r+"px,"+s+"px, 0)",this.helper.style[c+"TransitionDuration"]=a+"ms",new Promise((function(t){var n=function(n){n&&"transform"!==n.propertyName||(clearTimeout(o),e.helper.style[c+"Transform"]="",e.helper.style[c+"TransitionDuration"]="",t())},o=setTimeout(n,a+10);e.helper.addEventListener("transitionend",n,!1)}))},getEdgeOffset:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{top:0,left:0};if(t){var n={top:e.top+t.offsetTop,left:e.left+t.offsetLeft};return t.parentNode!==this.container?this.getEdgeOffset(t.parentNode,n):n}},getOffset:function(t){var e=t.touches?t.touches[0]:t;return{x:e.pageX,y:e.pageY}},getLockPixelOffsets:function(){var t=this.$props.lockOffset;if(Array.isArray(this.lockOffset)||(t=[t,t]),2!==t.length)throw new Error("lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given "+t);var e=i(t,2),n=e[0],o=e[1];return[this.getLockPixelOffset(n),this.getLockPixelOffset(o)]},getLockPixelOffset:function(t){var e=t,n=t,o="px";if("string"==typeof t){var i=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(t);if(null===i)throw new Error('lockOffset value should be a number or a string of a number followed by "px" or "%". Given '+t);e=n=parseFloat(t),o=i[1]}if(!isFinite(e)||!isFinite(n))throw new Error("lockOffset value should be a finite. Given "+t);return"%"===o&&(e=e*this.width/100,n=n*this.height/100),{x:e,y:n}},updatePosition:function(t){var e=this.$props,n=e.lockAxis,o=e.lockToContainerEdges,r=this.getOffset(t),s={x:r.x-this.initialOffset.x,y:r.y-this.initialOffset.y};if(s.y-=window.pageYOffset-this.initialWindowScroll.top,s.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=s,o){var a=this.getLockPixelOffsets(),l=i(a,2),u=l[0],h=l[1],d={x:this.width/2-u.x,y:this.height/2-u.y},f={x:this.width/2-h.x,y:this.height/2-h.y};s.x=p(this.minTranslate.x+d.x,this.maxTranslate.x-f.x,s.x),s.y=p(this.minTranslate.y+d.y,this.maxTranslate.y-f.y,s.y)}"x"===n?s.y=0:"y"===n&&(s.x=0),this.helper.style[c+"Transform"]="translate3d("+s.x+"px,"+s.y+"px, 0)"},animateNodes:function(){var t=this.$props,e=t.transitionDuration,n=t.hideSortableGhost,o=this.manager.getOrderedRefs(),i={left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top},r={left:this.offsetEdge.left+this.translate.x+i.left,top:this.offsetEdge.top+this.translate.y+i.top},s={top:window.pageYOffset-this.initialWindowScroll.top,left:window.pageXOffset-this.initialWindowScroll.left};this.newIndex=null;for(var a=0,l=o.length;a<l;a++){var u=o[a].node,p=u.sortableInfo.index,h=u.offsetWidth,d=u.offsetHeight,f={width:this.width>h?h/2:this.width/2,height:this.height>d?d/2:this.height/2},m={x:0,y:0},v=o[a].edgeOffset;v||(o[a].edgeOffset=v=this.getEdgeOffset(u));var g=a<o.length-1&&o[a+1],y=a>0&&o[a-1];g&&!g.edgeOffset&&(g.edgeOffset=this.getEdgeOffset(g.node)),p!==this.index?(e&&(u.style[c+"TransitionDuration"]=e+"ms"),this._axis.x?this._axis.y?p<this.index&&(r.left+s.left-f.width<=v.left&&r.top+s.top<=v.top+f.height||r.top+s.top+f.height<=v.top)?(m.x=this.width+this.marginOffset.x,v.left+m.x>this.containerBoundingRect.width-f.width&&(m.x=g.edgeOffset.left-v.left,m.y=g.edgeOffset.top-v.top),null===this.newIndex&&(this.newIndex=p)):p>this.index&&(r.left+s.left+f.width>=v.left&&r.top+s.top+f.height>=v.top||r.top+s.top+f.height>=v.top+d)&&(m.x=-(this.width+this.marginOffset.x),v.left+m.x<this.containerBoundingRect.left+f.width&&(m.x=y.edgeOffset.left-v.left,m.y=y.edgeOffset.top-v.top),this.newIndex=p):p>this.index&&r.left+s.left+f.width>=v.left?(m.x=-(this.width+this.marginOffset.x),this.newIndex=p):p<this.index&&r.left+s.left<=v.left+f.width&&(m.x=this.width+this.marginOffset.x,null==this.newIndex&&(this.newIndex=p)):this._axis.y&&(p>this.index&&r.top+s.top+f.height>=v.top?(m.y=-(this.height+this.marginOffset.y),this.newIndex=p):p<this.index&&r.top+s.top<=v.top+f.height&&(m.y=this.height+this.marginOffset.y,null==this.newIndex&&(this.newIndex=p))),u.style[c+"Transform"]="translate3d("+m.x+"px,"+m.y+"px,0)"):n&&(this.sortableGhost=u,u.style.visibility="hidden",u.style.opacity=0)}null==this.newIndex&&(this.newIndex=this.index)},autoscroll:function(){var t=this,e=this.translate,n={x:0,y:0},o={x:1,y:1},i={x:10,y:10};e.y>=this.maxTranslate.y-this.height/2?(n.y=1,o.y=i.y*Math.abs((this.maxTranslate.y-this.height/2-e.y)/this.height)):e.x>=this.maxTranslate.x-this.width/2?(n.x=1,o.x=i.x*Math.abs((this.maxTranslate.x-this.width/2-e.x)/this.width)):e.y<=this.minTranslate.y+this.height/2?(n.y=-1,o.y=i.y*Math.abs((e.y-this.height/2-this.minTranslate.y)/this.height)):e.x<=this.minTranslate.x+this.width/2&&(n.x=-1,o.x=i.x*Math.abs((e.x-this.width/2-this.minTranslate.x)/this.width)),this.autoscrollInterval&&(clearInterval(this.autoscrollInterval),this.autoscrollInterval=null,this.isAutoScrolling=!1),0===n.x&&0===n.y||(this.autoscrollInterval=setInterval((function(){t.isAutoScrolling=!0;var e={left:1*o.x*n.x,top:1*o.y*n.y};t.scrollContainer.scrollTop+=e.top,t.scrollContainer.scrollLeft+=e.left,t.translate.x+=e.left,t.translate.y+=e.top,t.animateNodes()}),5))}}},m={bind:function(t){t.sortableHandle=!0}};function v(t,e){return{name:t,mixins:[e],props:{tag:{type:String,default:"div"}},render:function(t){return t(this.tag,this.$slots.default)}}}var g=v("slick-list",f),y=v("slick-item",e);t.ElementMixin=e,t.ContainerMixin=f,t.HandleDirective=m,t.SlickList=g,t.SlickItem=y,t.arrayMove=a,Object.defineProperty(t,"__esModule",{value:!0})}(e)},8592:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var o=n(5243),i=function(t){var e={};for(var n in t){var o=t[n];null!=o&&(e[n]=o)}return e};function r(t,e,n,o,i,r,s,a,l,c){"boolean"!=typeof s&&(l=a,a=s,s=!1);var u,p="function"==typeof n?n.options:n;if(t&&t.render&&(p.render=t.render,p.staticRenderFns=t.staticRenderFns,p._compiled=!0,i&&(p.functional=!0)),o&&(p._scopeId=o),r?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(r)},p._ssrRegister=u):e&&(u=s?function(t){e.call(this,c(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,a(t))}),u)if(p.functional){var h=p.render;p.render=function(t,e){return u.call(e),h(t,e)}}else{var d=p.beforeCreate;p.beforeCreate=d?[].concat(d,u):[u]}return n}const s=r({render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",[t._t("default")],2)},staticRenderFns:[]},undefined,{name:"LIcon",props:{iconUrl:{type:String,custom:!0,default:null},iconRetinaUrl:{type:String,custom:!0,default:null},iconSize:{type:[Object,Array],custom:!0,default:null},iconAnchor:{type:[Object,Array],custom:!0,default:null},popupAnchor:{type:[Object,Array],custom:!0,default:function(){return[0,0]}},tooltipAnchor:{type:[Object,Array],custom:!0,default:function(){return[0,0]}},shadowUrl:{type:String,custom:!0,default:null},shadowRetinaUrl:{type:String,custom:!0,default:null},shadowSize:{type:[Object,Array],custom:!0,default:null},shadowAnchor:{type:[Object,Array],custom:!0,default:null},bgPos:{type:[Object,Array],custom:!0,default:function(){return[0,0]}},className:{type:String,custom:!0,default:""},options:{type:Object,custom:!0,default:function(){return{}}}},data:function(){return{parentContainer:null,observer:null,recreationNeeded:!1,swapHtmlNeeded:!1}},mounted:function(){var t=this;if(this.parentContainer=function(t){for(var e=!1;t&&!e;)void 0===t.mapObject?t=t.$parent:e=!0;return t}(this.$parent),!this.parentContainer)throw new Error("No parent container with mapObject found for LIcon");!function(t,e,n,i){var r=function(i){var r,s="set"+((r=i)&&"function"==typeof r.charAt?r.charAt(0).toUpperCase()+r.slice(1):r),a=n[i].type===Object||n[i].type===Array||Array.isArray(n[i].type);n[i].custom&&t[s]?t.$watch(i,(function(e,n){t[s](e,n)}),{deep:a}):"setOptions"===s?t.$watch(i,(function(t,n){(0,o.setOptions)(e,t)}),{deep:a}):e[s]&&t.$watch(i,(function(t,n){e[s](t)}),{deep:a})};for(var s in n)r(s)}(this,this.parentContainer.mapObject,this.$options.props),this.observer=new MutationObserver((function(){t.scheduleHtmlSwap()})),this.observer.observe(this.$el,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),this.scheduleCreateIcon()},beforeDestroy:function(){this.parentContainer.mapObject&&this.parentContainer.mapObject.setIcon(this.parentContainer.$props.icon),this.observer.disconnect()},methods:{scheduleCreateIcon:function(){this.recreationNeeded=!0,this.$nextTick(this.createIcon)},scheduleHtmlSwap:function(){this.htmlSwapNeeded=!0,this.$nextTick(this.createIcon)},createIcon:function(){if(this.htmlSwapNeeded&&!this.recreationNeeded&&this.iconObject&&this.parentContainer.mapObject.getElement())return this.parentContainer.mapObject.getElement().innerHTML=this.$el.innerHTML,void(this.htmlSwapNeeded=!1);if(this.recreationNeeded){this.iconObject&&o.DomEvent.off(this.iconObject,this.$listeners);var t=function(t,e){var n=e.options&&e.options.constructor===Object?e.options:{};t=t&&t.constructor===Object?t:{};var o=i(n);t=i(t);var r=e.$options.props;for(var s in t){var a=r[s]?r[s].default&&"function"==typeof r[s].default?r[s].default.call():r[s].default:Symbol("unique"),l=!1;l=Array.isArray(a)?JSON.stringify(a)===JSON.stringify(t[s]):a===t[s],o[s]&&!l?(console.warn(s+" props is overriding the value passed in the options props"),o[s]=t[s]):o[s]||(o[s]=t[s])}return o}({iconUrl:this.iconUrl,iconRetinaUrl:this.iconRetinaUrl,iconSize:this.iconSize,iconAnchor:this.iconAnchor,popupAnchor:this.popupAnchor,tooltipAnchor:this.tooltipAnchor,shadowUrl:this.shadowUrl,shadowRetinaUrl:this.shadowRetinaUrl,shadowSize:this.shadowSize,shadowAnchor:this.shadowAnchor,bgPos:this.bgPos,className:this.className,html:this.$el.innerHTML||this.html},this);t.html?this.iconObject=(0,o.divIcon)(t):this.iconObject=(0,o.icon)(t),o.DomEvent.on(this.iconObject,this.$listeners),this.parentContainer.mapObject.setIcon(this.iconObject),this.recreationNeeded=!1,this.htmlSwapNeeded=!1}},setIconUrl:function(){this.scheduleCreateIcon()},setIconRetinaUrl:function(){this.scheduleCreateIcon()},setIconSize:function(){this.scheduleCreateIcon()},setIconAnchor:function(){this.scheduleCreateIcon()},setPopupAnchor:function(){this.scheduleCreateIcon()},setTooltipAnchor:function(){this.scheduleCreateIcon()},setShadowUrl:function(){this.scheduleCreateIcon()},setShadowRetinaUrl:function(){this.scheduleCreateIcon()},setShadowAnchor:function(){this.scheduleCreateIcon()},setBgPos:function(){this.scheduleCreateIcon()},setClassName:function(){this.scheduleCreateIcon()},setHtml:function(){this.scheduleCreateIcon()}},render:function(){return null}},undefined,false,undefined,!1,void 0,void 0,void 0)},7892:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var o=n(5243),i=function(t){var e={};for(var n in t){var o=t[n];null!=o&&(e[n]=o)}return e};function r(t,e,n,o,i,r,s,a,l,c){"boolean"!=typeof s&&(l=a,a=s,s=!1);var u,p="function"==typeof n?n.options:n;if(t&&t.render&&(p.render=t.render,p.staticRenderFns=t.staticRenderFns,p._compiled=!0,i&&(p.functional=!0)),o&&(p._scopeId=o),r?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(r)},p._ssrRegister=u):e&&(u=s?function(t){e.call(this,c(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,a(t))}),u)if(p.functional){var h=p.render;p.render=function(t,e){return u.call(e),h(t,e)}}else{var d=p.beforeCreate;p.beforeCreate=d?[].concat(d,u):[u]}return n}const s=r({},undefined,{name:"LImageOverlay",mixins:[{mixins:[{props:{pane:{type:String,default:"overlayPane"},attribution:{type:String,default:null,custom:!0},name:{type:String,custom:!0,default:void 0},layerType:{type:String,custom:!0,default:void 0},visible:{type:Boolean,custom:!0,default:!0}},mounted:function(){this.layerOptions={attribution:this.attribution,pane:this.pane}},beforeDestroy:function(){this.unbindPopup(),this.unbindTooltip(),this.parentContainer.removeLayer(this)},methods:{setAttribution:function(t,e){this.$parent.mapObject.attributionControl.removeAttribution(e).addAttribution(t)},setName:function(){this.parentContainer.removeLayer(this),this.visible&&this.parentContainer.addLayer(this)},setLayerType:function(){this.parentContainer.removeLayer(this),this.visible&&this.parentContainer.addLayer(this)},setVisible:function(t){this.mapObject&&(t?this.parentContainer.addLayer(this):this.parentContainer.hideLayer?this.parentContainer.hideLayer(this):this.parentContainer.removeLayer(this))},unbindTooltip:function(){var t=this.mapObject?this.mapObject.getTooltip():null;t&&t.unbindTooltip()},unbindPopup:function(){var t=this.mapObject?this.mapObject.getPopup():null;t&&t.unbindPopup()},updateVisibleProp:function(t){this.$emit("update:visible",t)}}},{props:{interactive:{type:Boolean,default:!0},bubblingMouseEvents:{type:Boolean,default:!0}},mounted:function(){this.interactiveLayerOptions={interactive:this.interactive,bubblingMouseEvents:this.bubblingMouseEvents}}}],props:{url:{type:String,custom:!0},bounds:{custom:!0},opacity:{type:Number,custom:!0,default:1},alt:{type:String,default:""},interactive:{type:Boolean,default:!1},crossOrigin:{type:Boolean,default:!1},errorOverlayUrl:{type:String,custom:!0,default:""},zIndex:{type:Number,custom:!0,default:1},className:{type:String,default:""}},mounted:function(){this.imageOverlayOptions=Object.assign({},this.layerOptions,this.interactiveLayerOptions,{opacity:this.opacity,alt:this.alt,interactive:this.interactive,crossOrigin:this.crossOrigin,errorOverlayUrl:this.errorOverlayUrl,zIndex:this.zIndex,className:this.className})},methods:{setOpacity:function(t){return this.mapObject.setOpacity(t)},setUrl:function(t){return this.mapObject.setUrl(t)},setBounds:function(t){return this.mapObject.setBounds(t)},getBounds:function(){return this.mapObject.getBounds()},getElement:function(){return this.mapObject.getElement()},bringToFront:function(){return this.mapObject.bringToFront()},bringToBack:function(){return this.mapObject.bringToBack()}},render:function(){return null}},{props:{options:{type:Object,default:function(){return{}}}}}],mounted:function(){var t=this,e=function(t,e){var n=e.options&&e.options.constructor===Object?e.options:{};t=t&&t.constructor===Object?t:{};var o=i(n);t=i(t);var r=e.$options.props;for(var s in t){var a=r[s]?r[s].default&&"function"==typeof r[s].default?r[s].default.call():r[s].default:Symbol("unique"),l=!1;l=Array.isArray(a)?JSON.stringify(a)===JSON.stringify(t[s]):a===t[s],o[s]&&!l?(console.warn(s+" props is overriding the value passed in the options props"),o[s]=t[s]):o[s]||(o[s]=t[s])}return o}(this.imageOverlayOptions,this);this.mapObject=(0,o.imageOverlay)(this.url,this.bounds,e),o.DomEvent.on(this.mapObject,this.$listeners),function(t,e,n,i){var r=function(i){var r,s="set"+((r=i)&&"function"==typeof r.charAt?r.charAt(0).toUpperCase()+r.slice(1):r),a=n[i].type===Object||n[i].type===Array||Array.isArray(n[i].type);n[i].custom&&t[s]?t.$watch(i,(function(e,n){t[s](e,n)}),{deep:a}):"setOptions"===s?t.$watch(i,(function(t,n){(0,o.setOptions)(e,t)}),{deep:a}):e[s]&&t.$watch(i,(function(t,n){e[s](t)}),{deep:a})};for(var s in n)r(s)}(this,this.mapObject,this.$options.props),this.parentContainer=function(t){for(var e=!1;t&&!e;)void 0===t.mapObject?t=t.$parent:e=!0;return t}(this.$parent),this.parentContainer.addLayer(this,!this.visible),this.$nextTick((function(){t.$emit("ready",t.mapObject)}))},render:function(){return null}},undefined,undefined,undefined,!1,void 0,void 0,void 0)},5352:(t,e,n)=>{"use strict";n.d(e,{Z:()=>p});var o=n(5243),i=function(t){var e={};for(var n in t){var o=t[n];null!=o&&(e[n]=o)}return e},r={name:"LMap",mixins:[{props:{options:{type:Object,default:function(){return{}}}}}],props:{center:{type:[Object,Array],custom:!0,default:function(){return[0,0]}},bounds:{type:[Array,Object],custom:!0,default:null},maxBounds:{type:[Array,Object],default:null},zoom:{type:Number,custom:!0,default:0},minZoom:{type:Number,default:null},maxZoom:{type:Number,default:null},paddingBottomRight:{type:Array,custom:!0,default:null},paddingTopLeft:{type:Array,custom:!0,default:null},padding:{type:Array,custom:!0,default:null},worldCopyJump:{type:Boolean,default:!1},crs:{type:Object,custom:!0,default:function(){return o.CRS.EPSG3857}},maxBoundsViscosity:{type:Number,default:null},inertia:{type:Boolean,default:null},inertiaDeceleration:{type:Number,default:null},inertiaMaxSpeed:{type:Number,default:null},easeLinearity:{type:Number,default:null},zoomAnimation:{type:Boolean,default:null},zoomAnimationThreshold:{type:Number,default:null},fadeAnimation:{type:Boolean,default:null},markerZoomAnimation:{type:Boolean,default:null},noBlockingAnimations:{type:Boolean,default:!1}},data:function(){return{ready:!1,lastSetCenter:this.center?(0,o.latLng)(this.center):null,lastSetBounds:this.bounds?(0,o.latLngBounds)(this.bounds):null,layerControl:void 0,layersToAdd:[],layersInControl:[]}},computed:{fitBoundsOptions:function(){var t={animate:!this.noBlockingAnimations&&null};return this.padding?t.padding=this.padding:(this.paddingBottomRight&&(t.paddingBottomRight=this.paddingBottomRight),this.paddingTopLeft&&(t.paddingTopLeft=this.paddingTopLeft)),t}},beforeDestroy:function(){this.debouncedMoveEndHandler&&this.debouncedMoveEndHandler.cancel(),this.mapObject&&this.mapObject.remove()},mounted:function(){var t,e,n,r,s=this,a=function(t,e){var n=e.options&&e.options.constructor===Object?e.options:{};t=t&&t.constructor===Object?t:{};var o=i(n);t=i(t);var r=e.$options.props;for(var s in t){var a=r[s]?r[s].default&&"function"==typeof r[s].default?r[s].default.call():r[s].default:Symbol("unique"),l=!1;l=Array.isArray(a)?JSON.stringify(a)===JSON.stringify(t[s]):a===t[s],o[s]&&!l?(console.warn(s+" props is overriding the value passed in the options props"),o[s]=t[s]):o[s]||(o[s]=t[s])}return o}({minZoom:this.minZoom,maxZoom:this.maxZoom,maxBounds:this.maxBounds,maxBoundsViscosity:this.maxBoundsViscosity,worldCopyJump:this.worldCopyJump,crs:this.crs,center:this.center,zoom:this.zoom,inertia:this.inertia,inertiaDeceleration:this.inertiaDeceleration,inertiaMaxSpeed:this.inertiaMaxSpeed,easeLinearity:this.easeLinearity,zoomAnimation:this.zoomAnimation,zoomAnimationThreshold:this.zoomAnimationThreshold,fadeAnimation:this.fadeAnimation,markerZoomAnimation:this.markerZoomAnimation},this);this.mapObject=(0,o.map)(this.$el,a),this.bounds&&this.fitBounds(this.bounds),this.debouncedMoveEndHandler=(t=this.moveEndHandler,e=100,r=function(){for(var o=[],i=arguments.length;i--;)o[i]=arguments[i];var r=this;n&&clearTimeout(n),n=setTimeout((function(){t.apply(r,o),n=null}),e)},r.cancel=function(){n&&clearTimeout(n)},r),this.mapObject.on("moveend",this.debouncedMoveEndHandler),this.mapObject.on("overlayadd",this.overlayAddHandler),this.mapObject.on("overlayremove",this.overlayRemoveHandler),o.DomEvent.on(this.mapObject,this.$listeners),function(t,e,n,i){var r=function(i){var r,s="set"+((r=i)&&"function"==typeof r.charAt?r.charAt(0).toUpperCase()+r.slice(1):r),a=n[i].type===Object||n[i].type===Array||Array.isArray(n[i].type);n[i].custom&&t[s]?t.$watch(i,(function(e,n){t[s](e,n)}),{deep:a}):"setOptions"===s?t.$watch(i,(function(t,n){(0,o.setOptions)(e,t)}),{deep:a}):e[s]&&t.$watch(i,(function(t,n){e[s](t)}),{deep:a})};for(var s in n)r(s)}(this,this.mapObject,this.$options.props),this.ready=!0,this.$emit("leaflet:load"),this.$nextTick((function(){s.$emit("ready",s.mapObject)}))},methods:{registerLayerControl:function(t){var e=this;this.layerControl=t,this.mapObject.addControl(t.mapObject),this.layersToAdd.forEach((function(t){e.layerControl.addLayer(t)})),this.layersToAdd=[]},addLayer:function(t,e){void 0!==t.layerType&&(void 0===this.layerControl?this.layersToAdd.push(t):this.layersInControl.find((function(e){return e.mapObject._leaflet_id===t.mapObject._leaflet_id}))||(this.layerControl.addLayer(t),this.layersInControl.push(t)));e||!1===t.visible||this.mapObject.addLayer(t.mapObject)},hideLayer:function(t){this.mapObject.removeLayer(t.mapObject)},removeLayer:function(t,e){void 0!==t.layerType&&(void 0===this.layerControl?this.layersToAdd=this.layersToAdd.filter((function(e){return e.name!==t.name})):(this.layerControl.removeLayer(t),this.layersInControl=this.layersInControl.filter((function(e){return e.mapObject._leaflet_id!==t.mapObject._leaflet_id})))),e||this.mapObject.removeLayer(t.mapObject)},setZoom:function(t,e){null!=t&&(this.mapObject.setZoom(t,{animate:!this.noBlockingAnimations&&null}),this.cacheMapView())},setCenter:function(t,e){if(null!=t){var n=(0,o.latLng)(t),i=this.lastSetCenter||this.mapObject.getCenter();i.lat===n.lat&&i.lng===n.lng||(this.lastSetCenter=n,this.mapObject.panTo(n,{animate:!this.noBlockingAnimations&&null}),this.cacheMapView(void 0,n))}},setBounds:function(t,e){if(t){var n=(0,o.latLngBounds)(t);if(n.isValid())!(this.lastSetBounds||this.mapObject.getBounds()).equals(n,0)&&(this.fitBounds(n),this.cacheMapView(n))}},setPaddingBottomRight:function(t,e){this.paddingBottomRight=t},setPaddingTopLeft:function(t,e){this.paddingTopLeft=t},setPadding:function(t,e){this.padding=t},setCrs:function(t,e){var n=this.mapObject,o=n.getBounds();n.options.crs=t,this.fitBounds(o,{animate:!1})},fitBounds:function(t,e){this.mapObject.fitBounds(t,Object.assign({},this.fitBoundsOptions,e))},moveEndHandler:function(){this.$emit("update:zoom",this.mapObject.getZoom());var t=this.mapObject.getCenter();this.$emit("update:center",t);var e=this.mapObject.getBounds();this.$emit("update:bounds",e)},overlayAddHandler:function(t){var e=this.layersInControl.find((function(e){return e.name===t.name}));e&&e.updateVisibleProp(!0)},overlayRemoveHandler:function(t){var e=this.layersInControl.find((function(e){return e.name===t.name}));e&&e.updateVisibleProp(!1)},cacheMapView:function(t,e){this.lastSetBounds=t||this.mapObject.getBounds(),this.lastSetCenter=e||this.lastSetBounds.getCenter()}}};function s(t,e,n,o,i,r,s,a,l,c){"boolean"!=typeof s&&(l=a,a=s,s=!1);var u,p="function"==typeof n?n.options:n;if(t&&t.render&&(p.render=t.render,p.staticRenderFns=t.staticRenderFns,p._compiled=!0,i&&(p.functional=!0)),o&&(p._scopeId=o),r?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(r)},p._ssrRegister=u):e&&(u=s?function(t){e.call(this,c(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,a(t))}),u)if(p.functional){var h=p.render;p.render=function(t,e){return u.call(e),h(t,e)}}else{var d=p.beforeCreate;p.beforeCreate=d?[].concat(d,u):[u]}return n}var a,l="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function c(t){return function(t,e){return function(t,e){var n=l?e.media||"default":t,o=u[n]||(u[n]={ids:new Set,styles:[]});if(!o.ids.has(t)){o.ids.add(t);var i=e.source;if(e.map&&(i+="\n/*# sourceURL="+e.map.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e.map))))+" */"),o.element||(o.element=document.createElement("style"),o.element.type="text/css",e.media&&o.element.setAttribute("media",e.media),void 0===a&&(a=document.head||document.getElementsByTagName("head")[0]),a.appendChild(o.element)),"styleSheet"in o.element)o.styles.push(i),o.element.styleSheet.cssText=o.styles.filter(Boolean).join("\n");else{var r=o.ids.size-1,s=document.createTextNode(i),c=o.element.childNodes;c[r]&&o.element.removeChild(c[r]),c.length?o.element.insertBefore(s,c[r]):o.element.appendChild(s)}}}(t,e)}}var u={};const p=s({render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"vue2leaflet-map"},[t.ready?t._t("default"):t._e()],2)},staticRenderFns:[]},(function(t){t&&t("data-v-09f270aa_0",{source:".vue2leaflet-map{height:100%;width:100%}",map:void 0,media:void 0})}),r,undefined,false,undefined,!1,c,void 0,void 0)},8380:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var o=n(5243),i=function(t){var e={};for(var n in t){var o=t[n];null!=o&&(e[n]=o)}return e};function r(t,e,n,o,i,r,s,a,l,c){"boolean"!=typeof s&&(l=a,a=s,s=!1);var u,p="function"==typeof n?n.options:n;if(t&&t.render&&(p.render=t.render,p.staticRenderFns=t.staticRenderFns,p._compiled=!0,i&&(p.functional=!0)),o&&(p._scopeId=o),r?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(r)},p._ssrRegister=u):e&&(u=s?function(t){e.call(this,c(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,a(t))}),u)if(p.functional){var h=p.render;p.render=function(t,e){return u.call(e),h(t,e)}}else{var d=p.beforeCreate;p.beforeCreate=d?[].concat(d,u):[u]}return n}const s=r({},undefined,{name:"LMarker",mixins:[{props:{pane:{type:String,default:"overlayPane"},attribution:{type:String,default:null,custom:!0},name:{type:String,custom:!0,default:void 0},layerType:{type:String,custom:!0,default:void 0},visible:{type:Boolean,custom:!0,default:!0}},mounted:function(){this.layerOptions={attribution:this.attribution,pane:this.pane}},beforeDestroy:function(){this.unbindPopup(),this.unbindTooltip(),this.parentContainer.removeLayer(this)},methods:{setAttribution:function(t,e){this.$parent.mapObject.attributionControl.removeAttribution(e).addAttribution(t)},setName:function(){this.parentContainer.removeLayer(this),this.visible&&this.parentContainer.addLayer(this)},setLayerType:function(){this.parentContainer.removeLayer(this),this.visible&&this.parentContainer.addLayer(this)},setVisible:function(t){this.mapObject&&(t?this.parentContainer.addLayer(this):this.parentContainer.hideLayer?this.parentContainer.hideLayer(this):this.parentContainer.removeLayer(this))},unbindTooltip:function(){var t=this.mapObject?this.mapObject.getTooltip():null;t&&t.unbindTooltip()},unbindPopup:function(){var t=this.mapObject?this.mapObject.getPopup():null;t&&t.unbindPopup()},updateVisibleProp:function(t){this.$emit("update:visible",t)}}},{props:{options:{type:Object,default:function(){return{}}}}}],props:{pane:{type:String,default:"markerPane"},draggable:{type:Boolean,custom:!0,default:!1},latLng:{type:[Object,Array],custom:!0,default:null},icon:{type:[Object],custom:!1,default:function(){return new o.Icon.Default}},opacity:{type:Number,custom:!1,default:1},zIndexOffset:{type:Number,custom:!1,default:null}},data:function(){return{ready:!1}},beforeDestroy:function(){this.debouncedLatLngSync&&this.debouncedLatLngSync.cancel()},mounted:function(){var t,e,n,r,s=this,a=function(t,e){var n=e.options&&e.options.constructor===Object?e.options:{};t=t&&t.constructor===Object?t:{};var o=i(n);t=i(t);var r=e.$options.props;for(var s in t){var a=r[s]?r[s].default&&"function"==typeof r[s].default?r[s].default.call():r[s].default:Symbol("unique"),l=!1;l=Array.isArray(a)?JSON.stringify(a)===JSON.stringify(t[s]):a===t[s],o[s]&&!l?(console.warn(s+" props is overriding the value passed in the options props"),o[s]=t[s]):o[s]||(o[s]=t[s])}return o}(Object.assign({},this.layerOptions,{icon:this.icon,zIndexOffset:this.zIndexOffset,draggable:this.draggable,opacity:this.opacity}),this);this.mapObject=(0,o.marker)(this.latLng,a),o.DomEvent.on(this.mapObject,this.$listeners),this.debouncedLatLngSync=(t=this.latLngSync,e=100,r=function(){for(var o=[],i=arguments.length;i--;)o[i]=arguments[i];var r=this;n&&clearTimeout(n),n=setTimeout((function(){t.apply(r,o),n=null}),e)},r.cancel=function(){n&&clearTimeout(n)},r),this.mapObject.on("move",this.debouncedLatLngSync),function(t,e,n,i){var r=function(i){var r,s="set"+((r=i)&&"function"==typeof r.charAt?r.charAt(0).toUpperCase()+r.slice(1):r),a=n[i].type===Object||n[i].type===Array||Array.isArray(n[i].type);n[i].custom&&t[s]?t.$watch(i,(function(e,n){t[s](e,n)}),{deep:a}):"setOptions"===s?t.$watch(i,(function(t,n){(0,o.setOptions)(e,t)}),{deep:a}):e[s]&&t.$watch(i,(function(t,n){e[s](t)}),{deep:a})};for(var s in n)r(s)}(this,this.mapObject,this.$options.props),this.parentContainer=function(t){for(var e=!1;t&&!e;)void 0===t.mapObject?t=t.$parent:e=!0;return t}(this.$parent),this.parentContainer.addLayer(this,!this.visible),this.ready=!0,this.$nextTick((function(){s.$emit("ready",s.mapObject)}))},methods:{setDraggable:function(t,e){this.mapObject.dragging&&(t?this.mapObject.dragging.enable():this.mapObject.dragging.disable())},setLatLng:function(t){if(null!=t&&this.mapObject){var e=this.mapObject.getLatLng(),n=(0,o.latLng)(t);n.lat===e.lat&&n.lng===e.lng||this.mapObject.setLatLng(n)}},latLngSync:function(t){this.$emit("update:latLng",t.latlng),this.$emit("update:lat-lng",t.latlng)}},render:function(t){return this.ready&&this.$slots.default?t("div",{style:{display:"none"}},this.$slots.default):null}},undefined,undefined,undefined,!1,void 0,void 0,void 0)},6595:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var o=n(5243),i=function(t){var e={};for(var n in t){var o=t[n];null!=o&&(e[n]=o)}return e};function r(t,e,n,o,i,r,s,a,l,c){"boolean"!=typeof s&&(l=a,a=s,s=!1);var u,p="function"==typeof n?n.options:n;if(t&&t.render&&(p.render=t.render,p.staticRenderFns=t.staticRenderFns,p._compiled=!0,i&&(p.functional=!0)),o&&(p._scopeId=o),r?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(r)},p._ssrRegister=u):e&&(u=s?function(t){e.call(this,c(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,a(t))}),u)if(p.functional){var h=p.render;p.render=function(t,e){return u.call(e),h(t,e)}}else{var d=p.beforeCreate;p.beforeCreate=d?[].concat(d,u):[u]}return n}const s=r({render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticStyle:{display:"none"}},[t.ready?t._t("default"):t._e()],2)},staticRenderFns:[]},undefined,{name:"LPolyline",mixins:[{mixins:[{mixins:[{props:{pane:{type:String,default:"overlayPane"},attribution:{type:String,default:null,custom:!0},name:{type:String,custom:!0,default:void 0},layerType:{type:String,custom:!0,default:void 0},visible:{type:Boolean,custom:!0,default:!0}},mounted:function(){this.layerOptions={attribution:this.attribution,pane:this.pane}},beforeDestroy:function(){this.unbindPopup(),this.unbindTooltip(),this.parentContainer.removeLayer(this)},methods:{setAttribution:function(t,e){this.$parent.mapObject.attributionControl.removeAttribution(e).addAttribution(t)},setName:function(){this.parentContainer.removeLayer(this),this.visible&&this.parentContainer.addLayer(this)},setLayerType:function(){this.parentContainer.removeLayer(this),this.visible&&this.parentContainer.addLayer(this)},setVisible:function(t){this.mapObject&&(t?this.parentContainer.addLayer(this):this.parentContainer.hideLayer?this.parentContainer.hideLayer(this):this.parentContainer.removeLayer(this))},unbindTooltip:function(){var t=this.mapObject?this.mapObject.getTooltip():null;t&&t.unbindTooltip()},unbindPopup:function(){var t=this.mapObject?this.mapObject.getPopup():null;t&&t.unbindPopup()},updateVisibleProp:function(t){this.$emit("update:visible",t)}}},{props:{interactive:{type:Boolean,default:!0},bubblingMouseEvents:{type:Boolean,default:!0}},mounted:function(){this.interactiveLayerOptions={interactive:this.interactive,bubblingMouseEvents:this.bubblingMouseEvents}}}],props:{lStyle:{type:Object,custom:!0,default:null},stroke:{type:Boolean,custom:!0,default:!0},color:{type:String,custom:!0,default:"#3388ff"},weight:{type:Number,custom:!0,default:3},opacity:{type:Number,custom:!0,default:1},lineCap:{type:String,custom:!0,default:"round"},lineJoin:{type:String,custom:!0,default:"round"},dashArray:{type:String,custom:!0,default:null},dashOffset:{type:String,custom:!0,default:null},fill:{type:Boolean,custom:!0,default:!1},fillColor:{type:String,custom:!0,default:"#3388ff"},fillOpacity:{type:Number,custom:!0,default:.2},fillRule:{type:String,custom:!0,default:"evenodd"},className:{type:String,custom:!0,default:null}},mounted:function(){if(this.pathOptions=Object.assign({},this.layerOptions,this.interactiveLayerOptions,{stroke:this.stroke,color:this.color,weight:this.weight,opacity:this.opacity,lineCap:this.lineCap,lineJoin:this.lineJoin,dashArray:this.dashArray,dashOffset:this.dashOffset,fill:this.fill,fillColor:this.fillColor,fillOpacity:this.fillOpacity,fillRule:this.fillRule,className:this.className}),this.lStyle)for(var t in console.warn("lStyle is deprecated and is going to be removed in the next major version"),this.lStyle)this.pathOptions[t]=this.lStyle[t]},beforeDestroy:function(){this.parentContainer?this.parentContainer.removeLayer(this):console.error("Missing parent container")},methods:{setLStyle:function(t){this.mapObject.setStyle(t)},setStroke:function(t){this.mapObject.setStyle({stroke:t})},setColor:function(t){this.mapObject.setStyle({color:t})},setWeight:function(t){this.mapObject.setStyle({weight:t})},setOpacity:function(t){this.mapObject.setStyle({opacity:t})},setLineCap:function(t){this.mapObject.setStyle({lineCap:t})},setLineJoin:function(t){this.mapObject.setStyle({lineJoin:t})},setDashArray:function(t){this.mapObject.setStyle({dashArray:t})},setDashOffset:function(t){this.mapObject.setStyle({dashOffset:t})},setFill:function(t){this.mapObject.setStyle({fill:t})},setFillColor:function(t){this.mapObject.setStyle({fillColor:t})},setFillOpacity:function(t){this.mapObject.setStyle({fillOpacity:t})},setFillRule:function(t){this.mapObject.setStyle({fillRule:t})},setClassName:function(t){this.mapObject.setStyle({className:t})}}}],props:{smoothFactor:{type:Number,custom:!0,default:1},noClip:{type:Boolean,custom:!0,default:!1}},data:function(){return{ready:!1}},mounted:function(){this.polyLineOptions=Object.assign({},this.pathOptions,{smoothFactor:this.smoothFactor,noClip:this.noClip})},methods:{setSmoothFactor:function(t){this.mapObject.setStyle({smoothFactor:t})},setNoClip:function(t){this.mapObject.setStyle({noClip:t})},addLatLng:function(t){this.mapObject.addLatLng(t)}}},{props:{options:{type:Object,default:function(){return{}}}}}],props:{latLngs:{type:Array,default:function(){return[]}}},data:function(){return{ready:!1}},mounted:function(){var t=this,e=function(t,e){var n=e.options&&e.options.constructor===Object?e.options:{};t=t&&t.constructor===Object?t:{};var o=i(n);t=i(t);var r=e.$options.props;for(var s in t){var a=r[s]?r[s].default&&"function"==typeof r[s].default?r[s].default.call():r[s].default:Symbol("unique"),l=!1;l=Array.isArray(a)?JSON.stringify(a)===JSON.stringify(t[s]):a===t[s],o[s]&&!l?(console.warn(s+" props is overriding the value passed in the options props"),o[s]=t[s]):o[s]||(o[s]=t[s])}return o}(this.polyLineOptions,this);this.mapObject=(0,o.polyline)(this.latLngs,e),o.DomEvent.on(this.mapObject,this.$listeners),function(t,e,n,i){var r=function(i){var r,s="set"+((r=i)&&"function"==typeof r.charAt?r.charAt(0).toUpperCase()+r.slice(1):r),a=n[i].type===Object||n[i].type===Array||Array.isArray(n[i].type);n[i].custom&&t[s]?t.$watch(i,(function(e,n){t[s](e,n)}),{deep:a}):"setOptions"===s?t.$watch(i,(function(t,n){(0,o.setOptions)(e,t)}),{deep:a}):e[s]&&t.$watch(i,(function(t,n){e[s](t)}),{deep:a})};for(var s in n)r(s)}(this,this.mapObject,this.$options.props),this.ready=!0,this.parentContainer=function(t){for(var e=!1;t&&!e;)void 0===t.mapObject?t=t.$parent:e=!0;return t}(this.$parent),this.parentContainer.addLayer(this,!this.visible),this.$nextTick((function(){t.$emit("ready",t.mapObject)}))}},undefined,false,undefined,!1,void 0,void 0,void 0)},2727:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var o=n(5243),i=function(t){var e={};for(var n in t){var o=t[n];null!=o&&(e[n]=o)}return e};function r(t,e,n,o,i,r,s,a,l,c){"boolean"!=typeof s&&(l=a,a=s,s=!1);var u,p="function"==typeof n?n.options:n;if(t&&t.render&&(p.render=t.render,p.staticRenderFns=t.staticRenderFns,p._compiled=!0,i&&(p.functional=!0)),o&&(p._scopeId=o),r?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(r)},p._ssrRegister=u):e&&(u=s?function(t){e.call(this,c(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,a(t))}),u)if(p.functional){var h=p.render;p.render=function(t,e){return u.call(e),h(t,e)}}else{var d=p.beforeCreate;p.beforeCreate=d?[].concat(d,u):[u]}return n}const s=r({render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]},undefined,{name:"LTileLayer",mixins:[{mixins:[{mixins:[{props:{pane:{type:String,default:"overlayPane"},attribution:{type:String,default:null,custom:!0},name:{type:String,custom:!0,default:void 0},layerType:{type:String,custom:!0,default:void 0},visible:{type:Boolean,custom:!0,default:!0}},mounted:function(){this.layerOptions={attribution:this.attribution,pane:this.pane}},beforeDestroy:function(){this.unbindPopup(),this.unbindTooltip(),this.parentContainer.removeLayer(this)},methods:{setAttribution:function(t,e){this.$parent.mapObject.attributionControl.removeAttribution(e).addAttribution(t)},setName:function(){this.parentContainer.removeLayer(this),this.visible&&this.parentContainer.addLayer(this)},setLayerType:function(){this.parentContainer.removeLayer(this),this.visible&&this.parentContainer.addLayer(this)},setVisible:function(t){this.mapObject&&(t?this.parentContainer.addLayer(this):this.parentContainer.hideLayer?this.parentContainer.hideLayer(this):this.parentContainer.removeLayer(this))},unbindTooltip:function(){var t=this.mapObject?this.mapObject.getTooltip():null;t&&t.unbindTooltip()},unbindPopup:function(){var t=this.mapObject?this.mapObject.getPopup():null;t&&t.unbindPopup()},updateVisibleProp:function(t){this.$emit("update:visible",t)}}}],props:{pane:{type:String,default:"tilePane"},opacity:{type:Number,custom:!1,default:1},zIndex:{type:Number,default:1},tileSize:{type:Number,default:256},noWrap:{type:Boolean,default:!1}},mounted:function(){this.gridLayerOptions=Object.assign({},this.layerOptions,{pane:this.pane,opacity:this.opacity,zIndex:this.zIndex,tileSize:this.tileSize,noWrap:this.noWrap})}}],props:{tms:{type:Boolean,default:!1},subdomains:{type:[String,Array],default:"abc",validator:function(t){return"string"==typeof t||!!Array.isArray(t)&&t.every((function(t){return"string"==typeof t}))}},detectRetina:{type:Boolean,default:!1}},mounted:function(){this.tileLayerOptions=Object.assign({},this.gridLayerOptions,{tms:this.tms,subdomains:this.subdomains,detectRetina:this.detectRetina})},render:function(){return null}},{props:{options:{type:Object,default:function(){return{}}}}}],props:{url:{type:String,default:null},tileLayerClass:{type:Function,default:o.tileLayer}},mounted:function(){var t=this,e=function(t,e){var n=e.options&&e.options.constructor===Object?e.options:{};t=t&&t.constructor===Object?t:{};var o=i(n);t=i(t);var r=e.$options.props;for(var s in t){var a=r[s]?r[s].default&&"function"==typeof r[s].default?r[s].default.call():r[s].default:Symbol("unique"),l=!1;l=Array.isArray(a)?JSON.stringify(a)===JSON.stringify(t[s]):a===t[s],o[s]&&!l?(console.warn(s+" props is overriding the value passed in the options props"),o[s]=t[s]):o[s]||(o[s]=t[s])}return o}(this.tileLayerOptions,this);this.mapObject=this.tileLayerClass(this.url,e),o.DomEvent.on(this.mapObject,this.$listeners),function(t,e,n,i){var r=function(i){var r,s="set"+((r=i)&&"function"==typeof r.charAt?r.charAt(0).toUpperCase()+r.slice(1):r),a=n[i].type===Object||n[i].type===Array||Array.isArray(n[i].type);n[i].custom&&t[s]?t.$watch(i,(function(e,n){t[s](e,n)}),{deep:a}):"setOptions"===s?t.$watch(i,(function(t,n){(0,o.setOptions)(e,t)}),{deep:a}):e[s]&&t.$watch(i,(function(t,n){e[s](t)}),{deep:a})};for(var s in n)r(s)}(this,this.mapObject,this.$options.props),this.parentContainer=function(t){for(var e=!1;t&&!e;)void 0===t.mapObject?t=t.$parent:e=!0;return t}(this.$parent),this.parentContainer.addLayer(this,!this.visible),this.$nextTick((function(){t.$emit("ready",t.mapObject)}))}},undefined,false,undefined,!1,void 0,void 0,void 0)},4616:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var o=n(5243),i=function(t){var e={};for(var n in t){var o=t[n];null!=o&&(e[n]=o)}return e};function r(t,e,n,o,i,r,s,a,l,c){"boolean"!=typeof s&&(l=a,a=s,s=!1);var u,p="function"==typeof n?n.options:n;if(t&&t.render&&(p.render=t.render,p.staticRenderFns=t.staticRenderFns,p._compiled=!0,i&&(p.functional=!0)),o&&(p._scopeId=o),r?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(r)},p._ssrRegister=u):e&&(u=s?function(t){e.call(this,c(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,a(t))}),u)if(p.functional){var h=p.render;p.render=function(t,e){return u.call(e),h(t,e)}}else{var d=p.beforeCreate;p.beforeCreate=d?[].concat(d,u):[u]}return n}const s=r({},undefined,{name:"LTooltip",mixins:[{props:{content:{type:String,default:null,custom:!0}},mounted:function(){this.popperOptions={}},methods:{setContent:function(t){this.mapObject&&null!=t&&this.mapObject.setContent(t)}},render:function(t){return this.$slots.default?t("div",this.$slots.default):null}},{props:{options:{type:Object,default:function(){return{}}}}}],mounted:function(){var t=this,e=function(t,e){var n=e.options&&e.options.constructor===Object?e.options:{};t=t&&t.constructor===Object?t:{};var o=i(n);t=i(t);var r=e.$options.props;for(var s in t){var a=r[s]?r[s].default&&"function"==typeof r[s].default?r[s].default.call():r[s].default:Symbol("unique"),l=!1;l=Array.isArray(a)?JSON.stringify(a)===JSON.stringify(t[s]):a===t[s],o[s]&&!l?(console.warn(s+" props is overriding the value passed in the options props"),o[s]=t[s]):o[s]||(o[s]=t[s])}return o}(this.popperOptions,this);this.mapObject=(0,o.tooltip)(e),o.DomEvent.on(this.mapObject,this.$listeners),function(t,e,n,i){var r=function(i){var r,s="set"+((r=i)&&"function"==typeof r.charAt?r.charAt(0).toUpperCase()+r.slice(1):r),a=n[i].type===Object||n[i].type===Array||Array.isArray(n[i].type);n[i].custom&&t[s]?t.$watch(i,(function(e,n){t[s](e,n)}),{deep:a}):"setOptions"===s?t.$watch(i,(function(t,n){(0,o.setOptions)(e,t)}),{deep:a}):e[s]&&t.$watch(i,(function(t,n){e[s](t)}),{deep:a})};for(var s in n)r(s)}(this,this.mapObject,this.$options.props),this.mapObject.setContent(this.content||this.$el),this.parentContainer=function(t){for(var e=!1;t&&!e;)void 0===t.mapObject?t=t.$parent:e=!0;return t}(this.$parent),this.parentContainer.mapObject.bindTooltip(this.mapObject),this.$nextTick((function(){t.$emit("ready",t.mapObject)}))},beforeDestroy:function(){this.parentContainer&&(this.parentContainer.unbindTooltip?this.parentContainer.unbindTooltip():this.parentContainer.mapObject&&this.parentContainer.mapObject.unbindTooltip&&this.parentContainer.mapObject.unbindTooltip())}},undefined,undefined,undefined,!1,void 0,void 0,void 0)},3196:(t,e,n)=>{"use strict";n.d(e,{Z:()=>W});var o=n(538);String.prototype.includes||(String.prototype.includes=function(){return-1!==String.prototype.indexOf.apply(this,arguments)});var i=/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube(?:-nocookie)?\.com\S*[^\w\s-])([\w-]{11})(?=[^\w-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi,r=/t=(\d+)[ms]?(\d+)?s?/;function s(t){var e=t.replace(i,"$1");if(e.includes(";")){var n=e.split(";");if(n[1].includes("%"))e=("http://youtube.com"+decodeURIComponent(n[1])).replace(i,"$1");else e=n[0]}else e.includes("#")&&(e=e.split("#")[0]);return e}function a(t){void 0===t&&(t="");var e=t.match(r);if(!e)return 0;var n=e[0],o=e[1],i=e[2];return void 0!==i?(i=parseInt(i,10),o=parseInt(o,10)):n.includes("m")?(o=parseInt(o,10),i=0):(i=parseInt(o,10),o=0),i+60*o}var l={scripts:[],events:{},run:function(){var t=this;this.scripts.forEach((function(e){e(t.YT)})),this.scripts=[]},register:function(t){var e=this;this.YT?this.Vue.nextTick((function(){t(e.YT)})):this.scripts.push(t)}},c=0,u={name:"YoutubeEmbed",props:{playerHeight:{type:[String,Number],default:"360"},playerWidth:{type:[String,Number],default:"640"},playerVars:{type:Object,default:function(){return{autoplay:0,time:0}}},videoId:{type:String},mute:{type:Boolean,default:!1},host:{type:String,default:"https://www.youtube.com"}},render:function(t){return t("div",[t("div",{attrs:{id:this.elementId}})])},template:'<div><div :id="elementId"></div></div>',watch:{playerWidth:"setSize",playerHeight:"setSize",videoId:"update",mute:"setMute"},data:function(){return{elementId:"youtube-player-"+(c+=1),player:{}}},methods:{setSize:function(){this.player.setSize(this.playerWidth,this.playerHeight)},setMute:function(t){t?this.player.mute():this.player.unMute()},update:function(t){var e=(this.playerVars.autoplay?"load":"cue")+"VideoById";this.player.hasOwnProperty(e)?this.player[e](t):setTimeout(function(){this.update(t)}.bind(this),100)}},mounted:function(){var t=this;l.register((function(e){var n=t,o=n.playerHeight,i=n.playerWidth,r=n.playerVars,s=n.videoId,a=n.host;t.player=new e.Player(t.elementId,{height:o,width:i,playerVars:r,videoId:s,host:a,events:{onReady:function(e){t.setMute(t.mute),t.$emit("ready",e)},onStateChange:function(e){-1!==e.data&&t.$emit(l.events[e.data],e)},onError:function(e){t.$emit("error",e)}}})}))},beforeDestroy:function(){null!==this.player&&this.player.destroy&&this.player.destroy(),delete this.player}},p={install:function(t,e){void 0===e&&(e={}),l.Vue=t,u.ready=u.mounted;var n=e.global;void 0===n&&(n=!0);var o=e.componentId;if(void 0===o&&(o="youtube"),n&&t.component(o,u),t.prototype.$youtube={getIdFromURL:s,getTimeFromURL:a},"undefined"!=typeof window&&"undefined"!=typeof document){var i=document.createElement("script");i.src="https://www.youtube.com/player_api";var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(i,r),window.onYouTubeIframeAPIReady=function(){l.YT=YT;var t=YT.PlayerState;l.events[t.ENDED]="ended",l.events[t.PLAYING]="playing",l.events[t.PAUSED]="paused",l.events[t.BUFFERING]="buffering",l.events[t.CUED]="cued",l.Vue.nextTick((function(){l.run()}))}}}};const h=p;var d=n(629);function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}o.Z.use(h);const g={name:"MediaContent",props:{height:{type:String,required:!0}},data:function(){return{imgNotExist:[],videoPlaying:!1}},computed:m({},(0,d.Se)("map",["selectedEvent","indexSelectedEvent"])),methods:m({},(0,d.nv)("map",{deleteMedia:"deleteMedia"}))};var y=n(3379),b=n.n(y),_=n(6884),w={insert:"head",singleton:!1};b()(_.Z,w);_.Z.locals;var x=n(1900),S=n(3453),k=n.n(S),C=n(6800),O=n(974),T={insert:"head",singleton:!1};b()(O.Z,T);O.Z.locals;var M=n(7909),E=n(8205),A=n(9524),N=n(5174),P=n(7565),L=n(8131),I=n(8219);const D=M.Z.extend({name:"v-carousel",props:{continuous:{type:Boolean,default:!0},cycle:Boolean,delimiterIcon:{type:String,default:"$delimiter"},height:{type:[Number,String],default:500},hideDelimiters:Boolean,hideDelimiterBackground:Boolean,interval:{type:[Number,String],default:6e3,validator:t=>t>0},mandatory:{type:Boolean,default:!0},progress:Boolean,progressColor:String,showArrows:{type:Boolean,default:!0},verticalDelimiters:{type:String,default:void 0}},provide(){return{parentTheme:this.theme}},data(){return{internalHeight:this.height,slideTimeout:void 0}},computed:{classes(){return{...M.Z.options.computed.classes.call(this),"v-carousel":!0,"v-carousel--hide-delimiter-background":this.hideDelimiterBackground,"v-carousel--vertical-delimiters":this.isVertical}},isDark(){return this.dark||!this.light},isVertical(){return null!=this.verticalDelimiters}},watch:{internalValue:"restartTimeout",interval:"restartTimeout",height(t,e){t!==e&&t&&(this.internalHeight=t)},cycle(t){t?this.restartTimeout():(clearTimeout(this.slideTimeout),this.slideTimeout=void 0)}},created(){this.$attrs.hasOwnProperty("hide-controls")&&(0,I.fK)("hide-controls",':show-arrows="false"',this)},mounted(){this.startTimeout()},methods:{genControlIcons(){return this.isVertical?null:M.Z.options.methods.genControlIcons.call(this)},genDelimiters(){return this.$createElement("div",{staticClass:"v-carousel__controls",style:{left:"left"===this.verticalDelimiters&&this.isVertical?0:"auto",right:"right"===this.verticalDelimiters?0:"auto"}},[this.genItems()])},genItems(){const t=this.items.length,e=[];for(let n=0;n<t;n++){const o=this.$createElement(E.Z,{staticClass:"v-carousel__controls__item",attrs:{"aria-label":this.$vuetify.lang.t("$vuetify.carousel.ariaLabel.delimiter",n+1,t)},props:{icon:!0,small:!0,value:this.getValue(this.items[n],n)}},[this.$createElement(A.Z,{props:{size:18}},this.delimiterIcon)]);e.push(o)}return this.$createElement(P.Z,{props:{value:this.internalValue,mandatory:this.mandatory},on:{change:t=>{this.internalValue=t}}},e)},genProgress(){return this.$createElement(N.Z,{staticClass:"v-carousel__progress",props:{color:this.progressColor,value:(this.internalIndex+1)/this.items.length*100}})},restartTimeout(){this.slideTimeout&&clearTimeout(this.slideTimeout),this.slideTimeout=void 0,window.requestAnimationFrame(this.startTimeout)},startTimeout(){this.cycle&&(this.slideTimeout=window.setTimeout(this.next,+this.interval>0?+this.interval:6e3))}},render(t){const e=M.Z.options.render.call(this,t);return e.data.style=`height: ${(0,L.kb)(this.height)};`,this.hideDelimiters||e.children.push(this.genDelimiters()),(this.progress||this.progressColor)&&e.children.push(this.genProgress()),e}});var R=n(9536),z=n(9793),B=n(5530),$=n(9367);const j=(0,B.Z)(R.Z,$.Z).extend().extend({name:"v-carousel-item",inject:{parentTheme:{default:{isDark:!1}}},provide(){return{theme:this.parentTheme}},inheritAttrs:!1,methods:{genDefaultSlot(){return[this.$createElement(z.Z,{staticClass:"v-carousel__item",props:{...this.$attrs,height:this.windowGroup.internalHeight},on:this.$listeners,scopedSlots:{placeholder:this.$scopedSlots.placeholder}},(0,L.z9)(this))]},genWindowItem(){const{tag:t,data:e}=this.generateRouteLink();return e.staticClass="v-window-item",e.directives.push({name:"show",value:this.isActive}),this.$createElement(t,e,this.genDefaultSlot())}}});var V=n(4781),Z=n(7894),F=n(2221),H=(0,x.Z)(g,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-carousel",{attrs:{cycle:!t.videoPlaying,height:t.height,"show-arrows":t.selectedEvent.mediaUrl.length>1,"hide-delimiter-background":"","hide-delimiters":""}},[0!==t.selectedEvent.mediaUrl.length?t._l(t.selectedEvent.mediaUrl,(function(e,o){return n("v-carousel-item",{key:o},["constructor"===t.$route.name?n("v-btn",{staticClass:"v-btn--active",staticStyle:{right:"18px",top:"16px"},attrs:{fab:"","x-small":"",depressed:"",absolute:"",color:"grey"},on:{click:function(e){return t.deleteMedia({indexEvent:t.indexSelectedEvent,indexMediaUrl:o})}}},[n("v-icon",{attrs:{dark:""}},[t._v("clear")])],1):t._e(),t._v(" "),t.imgNotExist.includes(e)?e.indexOf("www.youtube.com")>-1?[n("youtube",{staticClass:"youtube",attrs:{"video-id":t.$youtube.getIdFromURL(e)},on:{playing:function(e){t.videoPlaying=!0},paused:function(e){t.videoPlaying=!1},ended:function(e){t.videoPlaying=!1}}})]:[n("div",{staticClass:"d-flex align-center fill-height"},[n("video",{attrs:{controls:"",width:"100%"},on:{play:function(e){t.videoPlaying=!0},pause:function(e){t.videoPlaying=!1}}},[n("source",{attrs:{src:e,type:"video/mp4"}})])])]:[n("v-img",{attrs:{height:"100%",contain:"",src:e},on:{error:function(n){return t.imgNotExist.push(e)}}})]],2)})):n("v-carousel-item",[n("v-sheet",{attrs:{color:"primary",height:"100%"}},[n("v-row",{staticClass:"fill-height",attrs:{align:"center",justify:"center"}},[n("div",{staticClass:"display-1"},[t._v("Контент")])])],1)],1)],2)}),[],!1,null,"6b7cf79f",null);const W=H.exports;k()(H,{VBtn:C.Z,VCarousel:D,VCarouselItem:j,VIcon:V.Z,VImg:z.Z,VRow:Z.Z,VSheet:F.Z})},1538:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>Ek});var o=n(7757),i=n.n(o),r=n(3666),s=n(629);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const u={name:"CreateMapDialog",data:function(){return{dialog:!1,loading:!1,loadingSharedTile:!1,sharedTileIndex:null,name:"",tileUrl:"",tileImage:null}},computed:l(l({},(0,s.rn)("tiles",["tiles","sharedTiles"])),(0,s.Se)("auth",["isAuth"])),methods:l(l(l({},(0,s.OI)("layout",["SHOW_MSG_DIALOG"])),(0,s.nv)("tiles",["createTile"])),{},{l_createSharedTile:function(t,e){var n=this;this.loadingSharedTile=!0,this.sharedTileIndex=e,this.createTile(t).then((function(t){return n.SHOW_MSG_DIALOG({show:!0,text:"Подложка добавлена!"})})).finally((function(){n.loadingSharedTile=!1,n.sharedTileIndex=null}))},l_createTile:function(){var t=this;this.loading=!0;var e={name:this.name,url:this.tileUrl,image:this.tileImage};this.createTile(e).then((function(e){t.SHOW_MSG_DIALOG({show:!0,text:"Подложка добавлена!"}),t.name="",t.tileUrl="",t.tileImage=null})).finally((function(){return t.loading=!1}))}})};var p=n(1900),h=n(3453),d=n.n(h),f=n(6800),m=n(4680),v=n(5255),g=n(7024),y=n(1819),b=n(9807),_=n(103),w=n(6930),x=n(9838),S=n(3240),k=n(9657),C=n(4781),O=n(9793),T=n(3989),M=n(5329),E=n(5797),A=n(7894),N=n(198),P=n(2515),L=n(7706),I=n(9487),D=n(1541),R=n(3845),z=(0,p.Z)(u,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-dialog",{attrs:{"max-width":"800","hide-overlay":"",scrollable:"",transition:"fade-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[o("v-btn",t._g({staticClass:"mt-4 v-btn--active",attrs:{disabled:!t.isAuth,depressed:"",color:"primary"}},n),[t._v("\n            Добавить подложку\n        ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),o("v-card",{attrs:{height:"575",loading:t.loading}},[o("v-toolbar",{staticClass:"pr-1",attrs:{height:"68",flat:""}},[o("v-btn",{attrs:{icon:""},on:{click:function(e){t.dialog=!1}}},[o("v-icon",[t._v("arrow_back")])],1),t._v(" "),o("v-icon",{staticClass:"mx-2",attrs:{large:"",color:"primary"}},[t._v("\n                layers\n            ")]),t._v(" "),o("v-toolbar-title",[t._v(" Добавление подложки")])],1),t._v(" "),o("v-divider"),t._v(" "),o("v-card-text",{staticClass:"pa-0"},[o("v-form",{ref:"form"},[o("v-card-text",[o("v-row",{attrs:{"no-gutters":""}},[o("v-col",[o("v-form",{ref:"form"},[o("v-container",{staticClass:"py-0"},[o("v-subheader",[t._v("Создание")]),t._v(" "),o("div",{staticClass:"d-flex flex-column pt-2"},[o("div",{staticClass:"d-flex pb-0"},[o("v-col",{staticClass:"pb-0",attrs:{cols:"6"}},[o("v-text-field",{attrs:{label:"Название",filled:"",rules:[function(e){return void 0===t.tiles.find((function(t){return t.name===e}))||"Подложка с таким названием уже существует"}],required:""},model:{value:t.name,callback:function(e){t.name="string"==typeof e?e.trim():e},expression:"name"}})],1),t._v(" "),o("v-col",{staticClass:"pb-0",attrs:{cols:"6"}},[o("v-select",{attrs:{filled:"",items:["Фреймы","Растяжение","Дублирование"],value:"Фреймы",label:"Вид отображения",required:""}})],1)],1),t._v(" "),o("v-col",{staticClass:"pt-2",attrs:{cols:"12"}},[o("div",{staticClass:"d-flex"},[o("v-text-field",{staticStyle:{"flex-basis":"200px"},attrs:{disabled:null!==t.tileImage,label:"Ссылка на картинку / подложку",filled:"",rules:[function(e){return void 0===t.tiles.find((function(t){return t.name===e}))||"Такое название уже используется"},function(e){return void 0===t.tiles.find((function(t){return t.url===e}))||"Подложка с такой ссылкой уже используется"}],required:""},model:{value:t.tileUrl,callback:function(e){t.tileUrl="string"==typeof e?e.trim():e},expression:"tileUrl"}}),t._v(" "),o("span",{staticClass:"flex-grow-0 mx-3 pt-5"},[t._v(" или ")]),t._v(" "),o("v-file-input",{staticStyle:{"flex-basis":"200px"},attrs:{disabled:""!==t.tileUrl,label:"Загрузка с компьютера",accept:"image/*",outlined:""},model:{value:t.tileImage,callback:function(e){t.tileImage=e},expression:"tileImage"}})],1),t._v(" "),o("v-row",{attrs:{"no-gutters":"",align:"center"}},[o("a",{staticClass:"text-decoration-none",attrs:{href:"http://leaflet-extras.github.io/leaflet-providers/preview/index.html",target:"_blank"}},[t._v("\n                                                    Внешняя библиотека подложек.\n                                                ")]),t._v(" "),o("v-spacer"),t._v(" "),o("v-btn",{staticClass:"px-7",attrs:{loading:t.loading,color:"primary",outlined:""},on:{click:t.l_createTile}},[t._v("\n                                                    Добавить\n                                                ")])],1)],1)],1)],1)],1)],1)],1),t._v(" "),o("v-divider",{staticClass:"mx-2 my-6"}),t._v(" "),o("v-row",[o("v-col",[o("v-container",{staticClass:"py-0"},[o("v-subheader",[t._v("Подложки от разработчиков")]),t._v(" "),o("v-row",{staticClass:"pt-3",attrs:{justify:"center"}},t._l(t.sharedTiles,(function(e,i){return o("v-hover",{key:e.id,scopedSlots:t._u([{key:"default",fn:function(r){var s=r.hover;return[o("v-card",{staticClass:"ma-5 align-self-start",attrs:{"max-width":t.$vuetify.breakpoint.xl?"180":"100",loading:t.loadingSharedTile&&t.sharedTileIndex===i}},[o("v-img",{attrs:{src:n(4310).Z},on:{click:function(e){return t.$router.push({path:"/viewer/"+t.map.id})}}}),t._v(" "),o("v-list-item",[o("v-list-item-content",[o("v-list-item-title",[t._v(t._s(e.name))])],1)],1),t._v(" "),o("v-fade-transition",[s?o("v-overlay",{attrs:{absolute:"",color:"primary",opacity:"0.2"}},[t.loadingSharedTile?t._e():o("v-btn",{on:{click:function(n){return t.l_createSharedTile(e,i)}}},[t._v("\n                                                        Добавить\n                                                    ")])],1):t._e()],1)],1)]}}],null,!0)})})),1)],1)],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);const B=z.exports;function $(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function j(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$(Object(n),!0).forEach((function(e){V(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function V(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}d()(z,{VBtn:f.Z,VCard:m.Z,VCardText:v.ZB,VCol:g.Z,VContainer:y.Z,VDialog:b.Z,VDivider:_.Z,VFadeTransition:w.Z5,VFileInput:x.Z,VForm:S.Z,VHover:k.Z,VIcon:C.Z,VImg:O.Z,VListItem:T.Z,VListItemContent:M.km,VListItemTitle:M.V9,VOverlay:E.Z,VRow:A.Z,VSelect:N.Z,VSpacer:P.Z,VSubheader:L.Z,VTextField:I.Z,VToolbar:D.Z,VToolbarTitle:R.qW});const Z={name:"Settings",components:{AddTileDialog:B},data:function(){return{dialog:!1,deletedTileId:[]}},computed:j(j(j(j(j({},(0,s.rn)("map",["name","description","subject_id","tile_id","config"])),(0,s.rn)({maps:function(t){return t.maps.maps},tiles:function(t){return t.tiles.tiles},sharedTiles:function(t){return t.tiles.sharedTiles},subjects:function(t){return t.subjects.subjects}})),(0,s.Se)("auth",["isAuth"])),(0,s.Se)("tiles",["selectedTile"])),{},{m_name:{get:function(){return this.name},set:function(t){this.SET_MAP_NAME(t)}},m_description:{get:function(){return this.description},set:function(t){this.SET_MAP_DESCRIPTION(t)}},m_subjectId:{get:function(){return this.subject_id},set:function(t){this.SET_MAP_SUBJECT_ID(t)}},m_tileId:{get:function(){return this.tile_id},set:function(t){this.SET_TILE_ID(t),this.SET_TILE_FOR_CREATE(this.selectedTile)}},m_minZoom:{get:function(){return this.config.minZoom},set:function(t){t&&t>=0&&t<=this.config.maxZoom&&this.SET_MIN_TILE_ZOOM(parseInt(t))}},m_maxZoom:{get:function(){return this.config.maxZoom},set:function(t){t&&t>=0&&t>=this.config.minZoom&&this.SET_MAX_TILE_ZOOM(parseInt(t))}},m_polylineWeight:{get:function(){return void 0===this.config.polylineWeight?2:this.config.polylineWeight},set:function(t){this.SET_POLYLINE_WEIGHT(t)}},m_showPolyline:{get:function(){return this.config.showPolyline},set:function(t){this.SET_SHOW_POLYLINE(t)}}}),methods:j(j(j(j({},(0,s.OI)("layout",["CHANGE_THEME","SHOW_MSG_DIALOG"])),(0,s.OI)("map",["SET_SHOW_POLYLINE","SET_POLYLINE_WEIGHT","SET_MIN_TILE_ZOOM","SET_MAX_TILE_ZOOM","SET_MAP_NAME","SET_MAP_DESCRIPTION","SET_MAP_SUBJECT_ID","SET_TILE_ID","SET_TILE_FOR_CREATE"])),(0,s.nv)("tiles",["deleteTile"])),{},{lDeleteTile:function(t){var e=this;this.maps.find((function(e){return e.tile_id===t}))?this.SHOW_MSG_DIALOG({show:!0,text:"Подложка используется!"}):(this.deletedTileId.push(t),this.deleteTile(t).finally((function(){var n=e.deletedTileId.findIndex((function(e){return e===t}));e.deletedTileId.splice(n,1)})))}})};var F=n(1480),H=n(3379),W=n.n(H),U=n(9739),q={insert:"head",singleton:!1};W()(U.Z,q);U.Z.locals;var J=n(4277),K=n(5530),G=n(2980),X=n(3664),Y=n(8131),Q=n(8219);const tt=(0,K.Z)(J.Z,G.Z).extend({name:"v-slider",directives:{ClickOutside:X.Z},mixins:[G.Z],props:{disabled:Boolean,inverseLabel:Boolean,max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:1},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:t=>"boolean"==typeof t||"always"===t},thumbSize:{type:[Number,String],default:32},tickLabels:{type:Array,default:()=>[]},ticks:{type:[Boolean,String],default:!1,validator:t=>"boolean"==typeof t||"always"===t},tickSize:{type:[Number,String],default:2},trackColor:String,trackFillColor:String,value:[Number,String],vertical:Boolean},data:()=>({app:null,oldValue:null,thumbPressed:!1,mouseTimeout:-1,isFocused:!1,isActive:!1,noClick:!1,startOffset:0}),computed:{classes(){return{...J.Z.options.computed.classes.call(this),"v-input__slider":!0,"v-input__slider--vertical":this.vertical,"v-input__slider--inverse-label":this.inverseLabel}},internalValue:{get(){return this.lazyValue},set(t){t=isNaN(t)?this.minValue:t;const e=this.roundValue(Math.min(Math.max(t,this.minValue),this.maxValue));e!==this.lazyValue&&(this.lazyValue=e,this.$emit("input",e))}},trackTransition(){return this.thumbPressed?this.showTicks||this.stepNumeric?"0.1s cubic-bezier(0.25, 0.8, 0.5, 1)":"none":""},minValue(){return parseFloat(this.min)},maxValue(){return parseFloat(this.max)},stepNumeric(){return this.step>0?parseFloat(this.step):0},inputWidth(){const t=(this.roundValue(this.internalValue)-this.minValue)/(this.maxValue-this.minValue)*100;return isNaN(t)?0:t},trackFillStyles(){const t=this.vertical?"bottom":"left",e=this.vertical?"top":"right",n=this.vertical?"height":"width",o=this.$vuetify.rtl?"auto":"0",i=this.$vuetify.rtl?"0":"auto",r=this.isDisabled?`calc(${this.inputWidth}% - 10px)`:`${this.inputWidth}%`;return{transition:this.trackTransition,[t]:o,[e]:i,[n]:r}},trackStyles(){const t=this.vertical?this.$vuetify.rtl?"bottom":"top":this.$vuetify.rtl?"left":"right",e=this.vertical?"height":"width",n=this.isDisabled?`calc(${100-this.inputWidth}% - 10px)`:`calc(${100-this.inputWidth}%)`;return{transition:this.trackTransition,[t]:"0px",[e]:n}},showTicks(){return this.tickLabels.length>0||!(this.isDisabled||!this.stepNumeric||!this.ticks)},numTicks(){return Math.ceil((this.maxValue-this.minValue)/this.stepNumeric)},showThumbLabel(){return!(this.isDisabled||!this.thumbLabel&&!this.$scopedSlots["thumb-label"])},computedTrackColor(){if(!this.isDisabled)return this.trackColor?this.trackColor:this.isDark?this.validationState:this.validationState||"primary lighten-3"},computedTrackFillColor(){if(!this.isDisabled)return this.trackFillColor?this.trackFillColor:this.validationState||this.computedColor},computedThumbColor(){return this.thumbColor?this.thumbColor:this.validationState||this.computedColor}},watch:{min(t){const e=parseFloat(t);e>this.internalValue&&this.$emit("input",e)},max(t){const e=parseFloat(t);e<this.internalValue&&this.$emit("input",e)},value:{handler(t){this.internalValue=t}}},beforeMount(){this.internalValue=this.value},mounted(){this.app=document.querySelector("[data-app]")||(0,Q.Kd)("Missing v-app or a non-body wrapping element with the [data-app] attribute",this)},methods:{genDefaultSlot(){const t=[this.genLabel()],e=this.genSlider();return this.inverseLabel?t.unshift(e):t.push(e),t.push(this.genProgress()),t},genSlider(){return this.$createElement("div",{class:{"v-slider":!0,"v-slider--horizontal":!this.vertical,"v-slider--vertical":this.vertical,"v-slider--focused":this.isFocused,"v-slider--active":this.isActive,"v-slider--disabled":this.isDisabled,"v-slider--readonly":this.isReadonly,...this.themeClasses},directives:[{name:"click-outside",value:this.onBlur}],on:{click:this.onSliderClick,mousedown:this.onSliderMouseDown,touchstart:this.onSliderMouseDown}},this.genChildren())},genChildren(){return[this.genInput(),this.genTrackContainer(),this.genSteps(),this.genThumbContainer(this.internalValue,this.inputWidth,this.isActive,this.isFocused,this.onFocus,this.onBlur)]},genInput(){return this.$createElement("input",{attrs:{value:this.internalValue,id:this.computedId,disabled:!0,readonly:!0,tabindex:-1,...this.$attrs}})},genTrackContainer(){const t=[this.$createElement("div",this.setBackgroundColor(this.computedTrackColor,{staticClass:"v-slider__track-background",style:this.trackStyles})),this.$createElement("div",this.setBackgroundColor(this.computedTrackFillColor,{staticClass:"v-slider__track-fill",style:this.trackFillStyles}))];return this.$createElement("div",{staticClass:"v-slider__track-container",ref:"track"},t)},genSteps(){if(!this.step||!this.showTicks)return null;const t=parseFloat(this.tickSize),e=(0,Y.MT)(this.numTicks+1),n=this.vertical?"bottom":this.$vuetify.rtl?"right":"left",o=this.vertical?this.$vuetify.rtl?"left":"right":"top";this.vertical&&e.reverse();const i=e.map((e=>{const i=[];this.tickLabels[e]&&i.push(this.$createElement("div",{staticClass:"v-slider__tick-label"},this.tickLabels[e]));const r=e*(100/this.numTicks),s=this.$vuetify.rtl?100-this.inputWidth<r:r<this.inputWidth;return this.$createElement("span",{key:e,staticClass:"v-slider__tick",class:{"v-slider__tick--filled":s},style:{width:`${t}px`,height:`${t}px`,[n]:`calc(${r}% - ${t/2}px)`,[o]:`calc(50% - ${t/2}px)`}},i)}));return this.$createElement("div",{staticClass:"v-slider__ticks-container",class:{"v-slider__ticks-container--always-show":"always"===this.ticks||this.tickLabels.length>0}},i)},genThumbContainer(t,e,n,o,i,r,s="thumb"){const a=[this.genThumb()],l=this.genThumbLabelContent(t);return this.showThumbLabel&&a.push(this.genThumbLabel(l)),this.$createElement("div",this.setTextColor(this.computedThumbColor,{ref:s,key:s,staticClass:"v-slider__thumb-container",class:{"v-slider__thumb-container--active":n,"v-slider__thumb-container--focused":o,"v-slider__thumb-container--show-label":this.showThumbLabel},style:this.getThumbContainerStyles(e),attrs:{role:"slider",tabindex:this.isDisabled?-1:this.$attrs.tabindex?this.$attrs.tabindex:0,"aria-label":this.$attrs["aria-label"]||this.label,"aria-valuemin":this.min,"aria-valuemax":this.max,"aria-valuenow":this.internalValue,"aria-readonly":String(this.isReadonly),"aria-orientation":this.vertical?"vertical":"horizontal"},on:{focus:i,blur:r,keydown:this.onKeyDown}}),a)},genThumbLabelContent(t){return this.$scopedSlots["thumb-label"]?this.$scopedSlots["thumb-label"]({value:t}):[this.$createElement("span",[String(t)])]},genThumbLabel(t){const e=(0,Y.kb)(this.thumbSize),n=this.vertical?`translateY(20%) translateY(${Number(this.thumbSize)/3-1}px) translateX(55%) rotate(135deg)`:"translateY(-20%) translateY(-12px) translateX(-50%) rotate(45deg)";return this.$createElement(w.T0,{props:{origin:"bottom center"}},[this.$createElement("div",{staticClass:"v-slider__thumb-label-container",directives:[{name:"show",value:this.isFocused||this.isActive||"always"===this.thumbLabel}]},[this.$createElement("div",this.setBackgroundColor(this.computedThumbColor,{staticClass:"v-slider__thumb-label",style:{height:e,width:e,transform:n}}),[this.$createElement("div",t)])])])},genThumb(){return this.$createElement("div",this.setBackgroundColor(this.computedThumbColor,{staticClass:"v-slider__thumb"}))},getThumbContainerStyles(t){const e=this.vertical?"top":"left";let n=this.$vuetify.rtl?100-t:t;return n=this.vertical?100-n:n,{transition:this.trackTransition,[e]:`${n}%`}},onSliderMouseDown(t){var e;if(t.preventDefault(),this.oldValue=this.internalValue,this.isActive=!0,null!=(e=t.target)&&e.matches(".v-slider__thumb-container, .v-slider__thumb-container *")){this.thumbPressed=!0;const e=t.target.getBoundingClientRect(),n="touches"in t?t.touches[0]:t;this.startOffset=this.vertical?n.clientY-(e.top+e.height/2):n.clientX-(e.left+e.width/2)}else this.startOffset=0,window.clearTimeout(this.mouseTimeout),this.mouseTimeout=window.setTimeout((()=>{this.thumbPressed=!0}),300);const n=!Y.e$||{passive:!0,capture:!0},o=!!Y.e$&&{passive:!0},i="touches"in t;this.onMouseMove(t),this.app.addEventListener(i?"touchmove":"mousemove",this.onMouseMove,o),(0,Y.qh)(this.app,i?"touchend":"mouseup",this.onSliderMouseUp,n),this.$emit("start",this.internalValue)},onSliderMouseUp(t){t.stopPropagation(),window.clearTimeout(this.mouseTimeout),this.thumbPressed=!1;const e=!!Y.e$&&{passive:!0};this.app.removeEventListener("touchmove",this.onMouseMove,e),this.app.removeEventListener("mousemove",this.onMouseMove,e),this.$emit("mouseup",t),this.$emit("end",this.internalValue),(0,Y.vZ)(this.oldValue,this.internalValue)||(this.$emit("change",this.internalValue),this.noClick=!0),this.isActive=!1},onMouseMove(t){"mousemove"===t.type&&(this.thumbPressed=!0),this.internalValue=this.parseMouseMove(t)},onKeyDown(t){if(!this.isInteractive)return;const e=this.parseKeyDown(t,this.internalValue);null==e||e<this.minValue||e>this.maxValue||(this.internalValue=e,this.$emit("change",e))},onSliderClick(t){if(this.noClick)return void(this.noClick=!1);this.$refs.thumb.focus(),this.onMouseMove(t),this.$emit("change",this.internalValue)},onBlur(t){this.isFocused=!1,this.$emit("blur",t)},onFocus(t){this.isFocused=!0,this.$emit("focus",t)},parseMouseMove(t){const e=this.vertical?"top":"left",n=this.vertical?"height":"width",o=this.vertical?"clientY":"clientX",{[e]:i,[n]:r}=this.$refs.track.getBoundingClientRect(),s="touches"in t?t.touches[0][o]:t[o];let a=Math.min(Math.max((s-i-this.startOffset)/r,0),1)||0;return this.vertical&&(a=1-a),this.$vuetify.rtl&&(a=1-a),parseFloat(this.min)+a*(this.maxValue-this.minValue)},parseKeyDown(t,e){if(!this.isInteractive)return;const{pageup:n,pagedown:o,end:i,home:r,left:s,right:a,down:l,up:c}=Y.Do;if(![n,o,i,r,s,a,l,c].includes(t.keyCode))return;t.preventDefault();const u=this.stepNumeric||1,p=(this.maxValue-this.minValue)/u;if([s,a,l,c].includes(t.keyCode)){e+=((this.$vuetify.rtl?[s,c]:[a,c]).includes(t.keyCode)?1:-1)*u*(t.shiftKey?3:t.ctrlKey?2:1)}else if(t.keyCode===r)e=this.minValue;else if(t.keyCode===i)e=this.maxValue;else{e-=(t.keyCode===o?1:-1)*u*(p>100?p/10:10)}return e},roundValue(t){if(!this.stepNumeric)return t;const e=this.step.toString().trim(),n=e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0,o=this.minValue%this.stepNumeric,i=Math.round((t-o)/this.stepNumeric)*this.stepNumeric+o;return parseFloat(Math.min(i,this.maxValue).toFixed(n))}}});var et=n(363),nt=n(6068),ot=(0,p.Z)(Z,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{"max-width":"800",scrollable:"",transition:"dialog-bottom-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[n("v-btn",t._g({staticClass:"mx-2",attrs:{height:"40"},on:{click:function(e){t.dialog=!0}}},o),[n("v-icon",{staticClass:"mr-1",staticStyle:{opacity:"0.76"}},[t._v(" settings")]),t._v("\n            Настройки\n        ")],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),n("v-card",[n("v-toolbar",{staticClass:"pr-1",attrs:{height:"68",flat:""}},[n("v-icon",{staticClass:"mr-2",attrs:{large:""}},[t._v("settings")]),t._v(" "),n("v-toolbar-title",[t._v("Настройки")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{icon:""},on:{click:function(e){t.dialog=!1}}},[n("v-icon",[t._v(" close")])],1)],1),t._v(" "),n("v-divider"),t._v(" "),n("v-card-text",{staticClass:"pa-0"},[n("v-form",{ref:"form"},[n("v-card-text",[n("v-row",{attrs:{"no-gutters":""}},[n("v-col",[n("v-form",{ref:"form"},[n("v-container",{staticClass:"py-0"},[n("v-row",[n("v-subheader",[t._v("Основная информация")]),t._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Название",filled:"",rules:[function(t){return!!t||"Введите название"}],required:""},model:{value:t.m_name,callback:function(e){t.m_name="string"==typeof e?e.trim():e},expression:"m_name"}})],1),t._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-textarea",{attrs:{filled:"",label:"Описание",rules:[function(t){return!!t||"Введите описание"}],required:""},model:{value:t.m_description,callback:function(e){t.m_description="string"==typeof e?e.trim():e},expression:"m_description"}})],1),t._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-select",{attrs:{items:t.subjects,"item-text":"name","item-value":"id",height:"68",filled:"",label:"Категория",rules:[function(t){return!!t||"Выберите категорию"}],required:""},model:{value:t.m_subjectId,callback:function(e){t.m_subjectId=e},expression:"m_subjectId"}})],1)],1)],1)],1)],1),t._v(" "),n("v-divider",{staticClass:"mx-2",attrs:{vertical:""}}),t._v(" "),n("v-col",[n("v-container",{staticClass:"py-0"},[n("v-row",[n("v-subheader",[t._v("Настройки отображения")]),t._v(" "),n("v-col",{attrs:{cols:"12"}},[t.isAuth?n("v-select",{attrs:{height:"68",filled:"","hide-details":"",items:t.tiles,"item-text":"name","item-value":"id",label:"Выберите",rules:[function(t){return!!t||"Выберите подложку"}],required:""},scopedSlots:t._u([{key:"item",fn:function(e){var o=e.item;return[t._v("\n                                                "+t._s(o.name)+"\n                                                "),n("v-spacer"),t._v(" "),t.deletedTileId.find((function(t){return t===o.id}))?n("v-progress-circular",{attrs:{indeterminate:"",size:"24",width:"1",color:"primary"}}):o.id!==t.m_tileId?n("v-btn",{attrs:{icon:""},on:{click:function(e){return e.stopPropagation(),t.lDeleteTile(o.id)}}},[n("v-icon",[t._v("\n                                                        remove\n                                                    ")])],1):t._e()]}}],null,!1,2224105957),model:{value:t.m_tileId,callback:function(e){t.m_tileId=e},expression:"m_tileId"}}):n("v-select",{attrs:{height:"68",filled:"","hide-details":"",items:t.sharedTiles,"item-text":"name","item-value":"id",label:"Выберите",rules:[function(t){return!!t||"Выберите подложку"}],required:""},model:{value:t.m_tileId,callback:function(e){t.m_tileId=e},expression:"m_tileId"}}),t._v(" "),n("AddTileDialog")],1),t._v(" "),n("v-col",{staticClass:"pt-0",attrs:{cols:"12"}},[n("v-switch",{attrs:{label:"Отображение связывающих линий","hide-details":""},model:{value:t.m_showPolyline,callback:function(e){t.m_showPolyline=e},expression:"m_showPolyline"}})],1),t._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-slider",{attrs:{min:"1",max:"10",label:"Толщина связывающих линий","hide-details":""},model:{value:t.m_polylineWeight,callback:function(e){t.m_polylineWeight=e},expression:"m_polylineWeight"}})],1),t._v(" "),n("v-col",{staticClass:"pt-2",attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Минимальный зум",filled:"",dense:"",type:"number",step:"1",rules:[function(t){return!!t||"Введите значение"},function(t){return t>=0||"Значение меньше ноля"},function(e){return e<=t.config.maxZoom||"Минимальный зум должен быть меньше максимального"}]},model:{value:t.m_minZoom,callback:function(e){t.m_minZoom="string"==typeof e?e.trim():e},expression:"m_minZoom"}})],1),t._v(" "),n("v-col",{staticClass:"pt-0",attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Максимальный зум",filled:"",dense:"",type:"number",rules:[function(t){return!!t||"Введите значение"},function(t){return t>=0||"Значение меньше ноля"},function(e){return e>=t.config.minZoom||"Максимальный зум должен быть больше минимального"}]},model:{value:t.m_maxZoom,callback:function(e){t.m_maxZoom="string"==typeof e?e.trim():e},expression:"m_maxZoom"}})],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);const it=ot.exports;d()(ot,{VBtn:f.Z,VCard:m.Z,VCardText:v.ZB,VCol:g.Z,VContainer:y.Z,VDialog:b.Z,VDivider:_.Z,VForm:S.Z,VIcon:C.Z,VProgressCircular:F.Z,VRow:A.Z,VSelect:N.Z,VSlider:tt,VSpacer:P.Z,VSubheader:L.Z,VSwitch:et.Z,VTextField:I.Z,VTextarea:nt.Z,VToolbar:D.Z,VToolbarTitle:R.qW});const rt={name:"ControlPanelHelp",data:function(){return{dialog:!1}}};var st=n(4899),at={insert:"head",singleton:!1};W()(st.Z,at);st.Z.locals;var lt=n(9744),ct=n(950),ut=n(7779);const pt=(0,K.Z)(lt.Z,(0,ct.J)("stepper"),ut.Z).extend({name:"v-stepper",provide(){return{stepClick:this.stepClick,isVertical:this.vertical}},props:{altLabels:Boolean,nonLinear:Boolean,flat:Boolean,vertical:Boolean},data(){const t={isBooted:!1,steps:[],content:[],isReverse:!1};return t.internalLazyValue=null!=this.value?this.value:(t[0]||{}).step||1,t},computed:{classes(){return{"v-stepper--flat":this.flat,"v-stepper--is-booted":this.isBooted,"v-stepper--vertical":this.vertical,"v-stepper--alt-labels":this.altLabels,"v-stepper--non-linear":this.nonLinear,...lt.Z.options.computed.classes.call(this)}},styles(){return{...lt.Z.options.computed.styles.call(this)}}},watch:{internalValue(t,e){this.isReverse=Number(t)<Number(e),e&&(this.isBooted=!0),this.updateView()}},created(){this.$listeners.input&&(0,Q.fK)("@input","@change",this)},mounted(){this.updateView()},methods:{register(t){"v-stepper-step"===t.$options.name?this.steps.push(t):"v-stepper-content"===t.$options.name&&(t.isVertical=this.vertical,this.content.push(t))},unregister(t){"v-stepper-step"===t.$options.name?this.steps=this.steps.filter((e=>e!==t)):"v-stepper-content"===t.$options.name&&(t.isVertical=this.vertical,this.content=this.content.filter((e=>e!==t)))},stepClick(t){this.$nextTick((()=>this.internalValue=t))},updateView(){for(let t=this.steps.length;--t>=0;)this.steps[t].toggle(this.internalValue);for(let t=this.content.length;--t>=0;)this.content[t].toggle(this.internalValue,this.isReverse)}},render(t){return t(this.tag,{staticClass:"v-stepper",class:this.classes,style:this.styles},this.$slots.default)}}),ht=(0,K.Z)((0,ct.f)("stepper","v-stepper-content","v-stepper")).extend().extend({name:"v-stepper-content",inject:{isVerticalProvided:{from:"isVertical"}},props:{step:{type:[Number,String],required:!0}},data(){return{height:0,isActive:null,isReverse:!1,isVertical:this.isVerticalProvided}},computed:{computedTransition(){return(this.$vuetify.rtl?!this.isReverse:this.isReverse)?w.YV:w.n6},styles(){return this.isVertical?{height:(0,Y.kb)(this.height)}:{}}},watch:{isActive(t,e){t&&null==e?this.height="auto":this.isVertical&&(this.isActive?this.enter():this.leave())}},mounted(){this.$refs.wrapper.addEventListener("transitionend",this.onTransition,!1),this.stepper&&this.stepper.register(this)},beforeDestroy(){this.$refs.wrapper.removeEventListener("transitionend",this.onTransition,!1),this.stepper&&this.stepper.unregister(this)},methods:{onTransition(t){this.isActive&&"height"===t.propertyName&&(this.height="auto")},enter(){let t=0;requestAnimationFrame((()=>{t=this.$refs.wrapper.scrollHeight})),this.height=0,setTimeout((()=>this.isActive&&(this.height=t||"auto")),450)},leave(){this.height=this.$refs.wrapper.clientHeight,setTimeout((()=>this.height=0),10)},toggle(t,e){this.isActive=t.toString()===this.step.toString(),this.isReverse=e}},render(t){const e={staticClass:"v-stepper__content"},n={staticClass:"v-stepper__wrapper",style:this.styles,ref:"wrapper"};this.isVertical||(e.directives=[{name:"show",value:this.isActive}]);const o=t("div",n,[this.$slots.default]),i=t("div",e,[o]);return t(this.computedTransition,{on:this.$listeners},[i])}});var dt=n(9524),ft=n(5836),mt=n(3766);const vt=(0,K.Z)(ft.Z,(0,ct.f)("stepper","v-stepper-step","v-stepper")).extend().extend({name:"v-stepper-step",directives:{ripple:mt.Z},inject:["stepClick"],props:{color:{type:String,default:"primary"},complete:Boolean,completeIcon:{type:String,default:"$complete"},editable:Boolean,editIcon:{type:String,default:"$edit"},errorIcon:{type:String,default:"$error"},rules:{type:Array,default:()=>[]},step:[Number,String]},data:()=>({isActive:!1,isInactive:!0}),computed:{classes(){return{"v-stepper__step--active":this.isActive,"v-stepper__step--editable":this.editable,"v-stepper__step--inactive":this.isInactive,"v-stepper__step--error error--text":this.hasError,"v-stepper__step--complete":this.complete}},hasError(){return this.rules.some((t=>!0!==t()))}},mounted(){this.stepper&&this.stepper.register(this)},beforeDestroy(){this.stepper&&this.stepper.unregister(this)},methods:{click(t){t.stopPropagation(),this.$emit("click",t),this.editable&&this.stepClick(this.step)},genIcon(t){return this.$createElement(dt.Z,t)},genLabel(){return this.$createElement("div",{staticClass:"v-stepper__label"},this.$slots.default)},genStep(){const t=!(this.hasError||!this.complete&&!this.isActive)&&this.color;return this.$createElement("span",this.setBackgroundColor(t,{staticClass:"v-stepper__step__step"}),this.genStepContent())},genStepContent(){const t=[];return this.hasError?t.push(this.genIcon(this.errorIcon)):this.complete?this.editable?t.push(this.genIcon(this.editIcon)):t.push(this.genIcon(this.completeIcon)):t.push(String(this.step)),t},toggle(t){this.isActive=t.toString()===this.step.toString(),this.isInactive=Number(t)<Number(this.step)}},render(t){return t("div",{staticClass:"v-stepper__step",class:this.classes,directives:[{name:"ripple",value:this.editable}],on:{click:this.click}},[this.genStep(),this.genLabel()])}});var gt=(0,p.Z)(rt,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-dialog",{attrs:{"max-width":"660",scrollable:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[o("v-btn",t._g({staticClass:"mx-2",attrs:{height:"40"}},n),[o("v-icon",{staticClass:"mr-1",staticStyle:{opacity:"0.76"}},[t._v("help_outline")]),t._v("\n            Помощь\n        ")],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),o("v-card",[o("v-toolbar",{staticClass:"pr-1",attrs:{height:"68",flat:""}},[o("v-icon",{staticClass:"mr-2",attrs:{large:""}},[t._v("help_outline")]),t._v(" "),o("v-toolbar-title",[t._v(" Помощь")]),t._v(" "),o("v-spacer"),t._v(" "),o("v-btn",{attrs:{icon:""},on:{click:function(e){t.dialog=!1}}},[o("v-icon",[t._v(" close ")])],1)],1),t._v(" "),o("v-divider"),t._v(" "),o("v-card-text",{staticClass:"pb-0"},[o("v-form",{ref:"form"},[o("v-container",{staticClass:"py-1"},[o("v-stepper",{staticClass:"elevation-0",attrs:{vertical:"","non-linear":""}},[o("v-stepper-step",{attrs:{editable:"",step:"1"}},[t._v("\n                            Установите подложку\n                            "),o("small",[t._v("Стандартную или пользовательскую")])]),t._v(" "),o("v-stepper-content",{attrs:{step:"1"}},[o("v-img",{staticClass:"mb-8",attrs:{contain:"","max-height":"100%",src:n(5540).Z}})],1),t._v(" "),o("v-stepper-step",{attrs:{editable:"",step:"2"}},[t._v("Добавьте событие")]),t._v(" "),o("v-stepper-content",{attrs:{step:"2"}},[o("v-img",{staticClass:"mb-8",attrs:{contain:"","max-height":"100%",src:n(1980).Z}})],1),t._v(" "),o("v-stepper-step",{attrs:{editable:"",step:"3"}},[t._v("Установите название и описание")]),t._v(" "),o("v-stepper-content",{attrs:{step:"3"}},[o("v-img",{staticClass:"mb-8",attrs:{contain:"","max-height":"100%",src:n(4173).Z}})],1),t._v(" "),o("v-stepper-step",{attrs:{editable:"",step:"4"}},[t._v("Установите нужные медиа-обьекты к описываемому событию")]),t._v(" "),o("v-stepper-content",{attrs:{step:"4"}},[o("v-img",{staticClass:"mb-8",attrs:{"max-height":"100%",contain:"",src:n(8190).Z}})],1),t._v(" "),o("v-stepper-step",{attrs:{editable:"",step:"5"}},[t._v("\n                            Установите метку на информационной карте\n                            "),o("small",[t._v("Иконки и размер меток можно изменять")])]),t._v(" "),o("v-stepper-content",{attrs:{step:"5"}},[o("v-img",{staticClass:"mb-8",attrs:{contain:"","max-height":"100%",src:n(5183).Z}})],1),t._v(" "),o("v-stepper-step",{attrs:{editable:"",step:"6"}},[t._v("\n                            Сохранить и поделиться атласом\n                            "),o("small",[t._v("Разместить атлас на нужном веб-ресурсе")])]),t._v(" "),o("v-stepper-content",{attrs:{step:"6"}},[o("v-img",{staticClass:"mb-8",attrs:{contain:"","max-height":"100%",src:n(5416).Z}})],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null);const yt=gt.exports;function bt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function _t(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?bt(Object(n),!0).forEach((function(e){wt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function wt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}d()(gt,{VBtn:f.Z,VCard:m.Z,VCardText:v.ZB,VContainer:y.Z,VDialog:b.Z,VDivider:_.Z,VForm:S.Z,VIcon:C.Z,VImg:O.Z,VSpacer:P.Z,VStepper:pt,VStepperContent:ht,VStepperStep:vt,VToolbar:D.Z,VToolbarTitle:R.qW});const xt={name:"ControlPanel",components:{Settings:it,Help:yt},data:function(){return{procSave:!1,waitUserAuth:!1,searchEventTitle:""}},computed:_t(_t(_t(_t(_t(_t(_t({},(0,s.Se)("map",["wasChanges"])),(0,s.Se)("auth",["isAuth"])),(0,s.rn)("map",["id"])),(0,s.rn)("layout",["authDialog"])),(0,s.rn)("map",["events"])),(0,s.rn)("tiles",["tiles"])),{},{mapIsExample:function(){return!this.$route.params.id}}),methods:_t(_t(_t(_t({},(0,s.nv)("map",["saveMap","recoveryMap"])),(0,s.OI)("layout",["SHOW_AUTH_DIALOG"])),(0,s.OI)("map",["SET_SELECTED_EVENT_ID"])),{},{save:function(){var t=this;this.isAuth?(this.procSave=!0,this.saveMap().finally((function(){return t.procSave=!1}))):(this.SHOW_AUTH_DIALOG(),this.waitUserAuth=!0)},findAndSelectEventByTitle:function(){var t=this,e=this.events.find((function(e){return e.title.toUpperCase()===t.searchEventTitle.toUpperCase()}));e||(e=this.events.find((function(e){return e.title.toUpperCase().includes(t.searchEventTitle.toUpperCase())}))),e&&this.SET_SELECTED_EVENT_ID(e.id)}}),watch:{authDialog:function(t,e){var n=this;e&&!t&&this.waitUserAuth&&this.isAuth?(this.procSave=!0,this.saveMap().finally((function(){n.procSave=!1,n.waitUserAuth=!1}))):e&&!t&&this.waitUserAuth&&(this.waitUserAuth=!1)}}},St=xt;var kt=n(581),Ct=(0,p.Z)(St,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex"},[t.mapIsExample?n("v-btn",{staticClass:"mr-2 primary--text",attrs:{to:"/",height:"40"}},[n("v-icon",{staticClass:"mr-1"},[t._v(" home")]),t._v("\n        Главная\n    ")],1):n("v-btn",{staticClass:"mr-2",attrs:{to:"/library",height:"40"}},[n("v-icon",{staticClass:"mr-1",attrs:{color:"primary"}},[t._v(" arrow_back_ios")]),t._v("\n        Моя библиотека\n    ")],1),t._v(" "),n("v-btn",{staticClass:"mx-2",attrs:{height:"40"},on:{click:function(e){return t.save()}}},[n("v-icon",{staticClass:"mr-1",class:{"primary--text":t.wasChanges},style:t.wasChanges?"":"opacity: 0.76"},[t._v("\n            save\n        ")]),t._v("\n        Сохранить\n    ")],1),t._v(" "),n("v-dialog",{attrs:{"overlay-opacity":"0",persistent:"",width:"300"},model:{value:t.procSave,callback:function(e){t.procSave=e},expression:"procSave"}},[n("v-card",{attrs:{color:"primary",dark:""}},[n("v-card-text",{staticClass:"pt-3"},[t._v("\n                Сохранение\n                "),n("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),t._v(" "),n("v-btn",{staticClass:"mx-2",attrs:{height:"40"},on:{click:function(e){return t.recoveryMap()}}},[n("v-icon",{staticClass:"mr-1",staticStyle:{opacity:"0.76"}},[t._v("\n            restore\n        ")]),t._v("\n        Восстановить\n    ")],1),t._v(" "),n("Settings"),t._v(" "),n("Help"),t._v(" "),n("v-text-field",{staticClass:"mx-4",attrs:{dense:"","single-line":"",rounded:"",filled:"",clearable:"","hide-details":"","prepend-inner-icon":"search",label:"Поиск события..."},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.findAndSelectEventByTitle.apply(null,arguments)}},model:{value:t.searchEventTitle,callback:function(e){t.searchEventTitle=e},expression:"searchEventTitle"}}),t._v(" "),n("v-btn",{staticClass:"ml-2",attrs:{height:"40"},on:{click:function(e){t.mapIsExample?t.$router.push("/viewer"):t.$router.push({path:"/viewer/"+t.id})}}},[n("v-icon",{staticClass:"mr-1",attrs:{color:"primary"}},[t._v("pageview")]),t._v("\n        Предпросмотр\n    ")],1)],1)}),[],!1,null,null,null);const Ot=Ct.exports;d()(Ct,{VBtn:f.Z,VCard:m.Z,VCardText:v.ZB,VDialog:b.Z,VIcon:C.Z,VProgressLinear:kt.Z,VTextField:I.Z});var Tt=n(6247);function Mt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Et(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Mt(Object(n),!0).forEach((function(e){At(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function At(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Nt={name:"ConstructorEventList",components:{EventList:Tt.SlickList,EventItem:Tt.SlickItem},data:function(){return{showButtonDeleteEvent:null}},computed:Et(Et({},(0,s.rn)("map",["config","events"])),{},{model_events:{get:function(){return this.events},set:function(t){this.SET_EVENTS(t)}}}),methods:Et(Et(Et({},(0,s.OI)("map",["SET_EVENTS","SET_SELECTED_EVENT_ID","DELETE_EVENT_BY_INDEX"])),(0,s.nv)("map",["deleteEventByIndex","addEvent"])),{},{addEventLocal:function(){this.addEvent().then((function(t){var e=document.getElementById("eventList");e.scrollTop=e.scrollHeight}))}})};var Pt=n(3963),Lt={insert:"head",singleton:!1};W()(Pt.Z,Lt);Pt.Z.locals;var It=(0,p.Z)(Nt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("EventList",{staticClass:"d-flex flex-column pr-2",style:{width:t.config.eventListWidth+"px"},attrs:{id:"eventList",lockAxis:"y",appendTo:"div#eventList",lockToContainerEdges:"",distance:3,lockOffset:"20%",helperClass:"eventDraggable"},model:{value:t.model_events,callback:function(e){t.model_events=e},expression:"model_events"}},[t._l(t.events,(function(e,o){return n("EventItem",{key:e.id,staticClass:"d-flex mb-1",staticStyle:{position:"relative",cursor:"pointer"},attrs:{index:o}},[n("v-icon",{directives:[{name:"show",rawName:"v-show",value:1!==t.events.length,expression:"events.length !== 1"}],class:{"d-none":t.showButtonDeleteEvent!==o},staticStyle:{position:"absolute",right:"2px",top:"2px","z-index":"4"},on:{mouseover:function(e){t.showButtonDeleteEvent=o},mouseleave:function(e){t.showButtonDeleteEvent=null},click:function(e){return e.stopPropagation(),t.deleteEventByIndex(o)}}},[t._v("\n            close\n        ")]),t._v(" "),n("div",{staticClass:"v-btn v-btn--block v-btn--depressed v-size--x-large text-wrap",class:[{"v-btn--text primary--text v-btn--active":t.config.selectedEventId===e.id},t.$vuetify.theme.dark?"theme--dark":"theme--light"],staticStyle:{"margin-bottom":"2px",border:"1px solid","min-height":"80px","max-width":"100%"},style:t.config.selectedEventId===e.id?"border-color: #1976d2":"border-color: rgba(0, 0, 0, 0.24)",on:{mouseover:function(e){t.showButtonDeleteEvent=o},mouseleave:function(e){t.showButtonDeleteEvent=null},click:function(n){return t.SET_SELECTED_EVENT_ID(e.id)}}},[n("span",{staticClass:"v-btn__content"},[t._v("\n                "+t._s(e.title)+"\n            ")])])],1)})),t._v(" "),n("v-btn",{staticClass:"mx-auto",staticStyle:{color:"rgba(0, 0, 0, 0.74)"},attrs:{"x-large":"",depressed:"",icon:""},on:{click:function(e){return t.addEventLocal()}}},[n("v-icon",[t._v("add")])],1)],2)}),[],!1,null,"7dcb135a",null);const Dt=It.exports;d()(It,{VBtn:f.Z,VIcon:C.Z});var Rt=n(538),zt=n(7317);function Bt(t){this.content=t}Bt.prototype={constructor:Bt,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return-1==e?void 0:this.content[e+1]},update:function(t,e,n){var o=n&&n!=t?this.remove(n):this,i=o.find(t),r=o.content.slice();return-1==i?r.push(n||t,e):(r[i+1]=e,n&&(r[i]=n)),new Bt(r)},remove:function(t){var e=this.find(t);if(-1==e)return this;var n=this.content.slice();return n.splice(e,2),new Bt(n)},addToStart:function(t,e){return new Bt([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Bt(n)},addBefore:function(t,e,n){var o=this.remove(e),i=o.content.slice(),r=o.find(t);return i.splice(-1==r?i.length:r,0,e,n),new Bt(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return(t=Bt.from(t)).size?new Bt(t.content.concat(this.subtract(t).content)):this},append:function(t){return(t=Bt.from(t)).size?new Bt(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Bt.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},get size(){return this.content.length>>1}},Bt.from=function(t){if(t instanceof Bt)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Bt(e)};const $t=Bt;function jt(t,e,n){for(var o=0;;o++){if(o==t.childCount||o==e.childCount)return t.childCount==e.childCount?null:n;var i=t.child(o),r=e.child(o);if(i!=r){if(!i.sameMarkup(r))return n;if(i.isText&&i.text!=r.text){for(var s=0;i.text[s]==r.text[s];s++)n++;return n}if(i.content.size||r.content.size){var a=jt(i.content,r.content,n+1);if(null!=a)return a}n+=i.nodeSize}else n+=i.nodeSize}}function Vt(t,e,n,o){for(var i=t.childCount,r=e.childCount;;){if(0==i||0==r)return i==r?null:{a:n,b:o};var s=t.child(--i),a=e.child(--r),l=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:n,b:o};if(s.isText&&s.text!=a.text){for(var c=0,u=Math.min(s.text.length,a.text.length);c<u&&s.text[s.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,o--;return{a:n,b:o}}if(s.content.size||a.content.size){var p=Vt(s.content,a.content,n-1,o-1);if(p)return p}n-=l,o-=l}else n-=l,o-=l}}var Zt=function(t,e){if(this.content=t,this.size=e||0,null==e)for(var n=0;n<t.length;n++)this.size+=t[n].nodeSize},Ft={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};Zt.prototype.nodesBetween=function(t,e,n,o,i){void 0===o&&(o=0);for(var r=0,s=0;s<e;r++){var a=this.content[r],l=s+a.nodeSize;if(l>t&&!1!==n(a,o+s,i,r)&&a.content.size){var c=s+1;a.nodesBetween(Math.max(0,t-c),Math.min(a.content.size,e-c),n,o+c)}s=l}},Zt.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)},Zt.prototype.textBetween=function(t,e,n,o){var i="",r=!0;return this.nodesBetween(t,e,(function(s,a){s.isText?(i+=s.text.slice(Math.max(t,a)-a,e-a),r=!n):s.isLeaf&&o?(i+="function"==typeof o?o(s):o,r=!n):!r&&s.isBlock&&(i+=n,r=!0)}),0),i},Zt.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var e=this.lastChild,n=t.firstChild,o=this.content.slice(),i=0;for(e.isText&&e.sameMarkup(n)&&(o[o.length-1]=e.withText(e.text+n.text),i=1);i<t.content.length;i++)o.push(t.content[i]);return new Zt(o,this.size+t.size)},Zt.prototype.cut=function(t,e){if(null==e&&(e=this.size),0==t&&e==this.size)return this;var n=[],o=0;if(e>t)for(var i=0,r=0;r<e;i++){var s=this.content[i],a=r+s.nodeSize;a>t&&((r<t||a>e)&&(s=s.isText?s.cut(Math.max(0,t-r),Math.min(s.text.length,e-r)):s.cut(Math.max(0,t-r-1),Math.min(s.content.size,e-r-1))),n.push(s),o+=s.nodeSize),r=a}return new Zt(n,o)},Zt.prototype.cutByIndex=function(t,e){return t==e?Zt.empty:0==t&&e==this.content.length?this:new Zt(this.content.slice(t,e))},Zt.prototype.replaceChild=function(t,e){var n=this.content[t];if(n==e)return this;var o=this.content.slice(),i=this.size+e.nodeSize-n.nodeSize;return o[t]=e,new Zt(o,i)},Zt.prototype.addToStart=function(t){return new Zt([t].concat(this.content),this.size+t.nodeSize)},Zt.prototype.addToEnd=function(t){return new Zt(this.content.concat(t),this.size+t.nodeSize)},Zt.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0},Ft.firstChild.get=function(){return this.content.length?this.content[0]:null},Ft.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},Ft.childCount.get=function(){return this.content.length},Zt.prototype.child=function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e},Zt.prototype.maybeChild=function(t){return this.content[t]},Zt.prototype.forEach=function(t){for(var e=0,n=0;e<this.content.length;e++){var o=this.content[e];t(o,n,e),n+=o.nodeSize}},Zt.prototype.findDiffStart=function(t,e){return void 0===e&&(e=0),jt(this,t,e)},Zt.prototype.findDiffEnd=function(t,e,n){return void 0===e&&(e=this.size),void 0===n&&(n=t.size),Vt(this,t,e,n)},Zt.prototype.findIndex=function(t,e){if(void 0===e&&(e=-1),0==t)return Wt(0,t);if(t==this.size)return Wt(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var n=0,o=0;;n++){var i=o+this.child(n).nodeSize;if(i>=t)return i==t||e>0?Wt(n+1,i):Wt(n,o);o=i}},Zt.prototype.toString=function(){return"<"+this.toStringInner()+">"},Zt.prototype.toStringInner=function(){return this.content.join(", ")},Zt.prototype.toJSON=function(){return this.content.length?this.content.map((function(t){return t.toJSON()})):null},Zt.fromJSON=function(t,e){if(!e)return Zt.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new Zt(e.map(t.nodeFromJSON))},Zt.fromArray=function(t){if(!t.length)return Zt.empty;for(var e,n=0,o=0;o<t.length;o++){var i=t[o];n+=i.nodeSize,o&&i.isText&&t[o-1].sameMarkup(i)?(e||(e=t.slice(0,o)),e[e.length-1]=i.withText(e[e.length-1].text+i.text)):e&&e.push(i)}return new Zt(e||t,n)},Zt.from=function(t){if(!t)return Zt.empty;if(t instanceof Zt)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new Zt([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(Zt.prototype,Ft);var Ht={index:0,offset:0};function Wt(t,e){return Ht.index=t,Ht.offset=e,Ht}function Ut(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var o=0;o<t.length;o++)if(!Ut(t[o],e[o]))return!1}else{for(var i in t)if(!(i in e)||!Ut(t[i],e[i]))return!1;for(var r in e)if(!(r in t))return!1}return!0}Zt.empty=new Zt([],0);var qt=function(t,e){this.type=t,this.attrs=e};function Jt(t){var e=Error.call(this,t);return e.__proto__=Jt.prototype,e}qt.prototype.addToSet=function(t){for(var e,n=!1,o=0;o<t.length;o++){var i=t[o];if(this.eq(i))return t;if(this.type.excludes(i.type))e||(e=t.slice(0,o));else{if(i.type.excludes(this.type))return t;!n&&i.type.rank>this.type.rank&&(e||(e=t.slice(0,o)),e.push(this),n=!0),e&&e.push(i)}}return e||(e=t.slice()),n||e.push(this),e},qt.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t},qt.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1},qt.prototype.eq=function(t){return this==t||this.type==t.type&&Ut(this.attrs,t.attrs)},qt.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t},qt.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type "+e.type+" in this schema");return n.create(e.attrs)},qt.sameSet=function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0},qt.setFrom=function(t){if(!t||0==t.length)return qt.none;if(t instanceof qt)return[t];var e=t.slice();return e.sort((function(t,e){return t.type.rank-e.type.rank})),e},qt.none=[],Jt.prototype=Object.create(Error.prototype),Jt.prototype.constructor=Jt,Jt.prototype.name="ReplaceError";var Kt=function(t,e,n){this.content=t,this.openStart=e,this.openEnd=n},Gt={size:{configurable:!0}};function Xt(t,e,n){var o=t.findIndex(e),i=o.index,r=o.offset,s=t.maybeChild(i),a=t.findIndex(n),l=a.index,c=a.offset;if(r==e||s.isText){if(c!=n&&!t.child(l).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(i!=l)throw new RangeError("Removing non-flat range");return t.replaceChild(i,s.copy(Xt(s.content,e-r-1,n-r-1)))}function Yt(t,e,n,o){var i=t.findIndex(e),r=i.index,s=i.offset,a=t.maybeChild(r);if(s==e||a.isText)return o&&!o.canReplace(r,r,n)?null:t.cut(0,e).append(n).append(t.cut(e));var l=Yt(a.content,e-s-1,n);return l&&t.replaceChild(r,a.copy(l))}function Qt(t,e,n){if(n.openStart>t.depth)throw new Jt("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Jt("Inconsistent open depths");return te(t,e,n,0)}function te(t,e,n,o){var i=t.index(o),r=t.node(o);if(i==e.index(o)&&o<t.depth-n.openStart){var s=te(t,e,n,o+1);return r.copy(r.content.replaceChild(i,s))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=o||e.depth!=o){var a=function(t,e){for(var n=e.depth-t.openStart,o=e.node(n).copy(t.content),i=n-1;i>=0;i--)o=e.node(i).copy(Zt.from(o));return{start:o.resolveNoCache(t.openStart+n),end:o.resolveNoCache(o.content.size-t.openEnd-n)}}(n,t);return re(r,se(t,a.start,a.end,e,o))}var l=t.parent,c=l.content;return re(l,c.cut(0,t.parentOffset).append(n.content).append(c.cut(e.parentOffset)))}return re(r,ae(t,e,o))}function ee(t,e){if(!e.type.compatibleContent(t.type))throw new Jt("Cannot join "+e.type.name+" onto "+t.type.name)}function ne(t,e,n){var o=t.node(n);return ee(o,e.node(n)),o}function oe(t,e){var n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function ie(t,e,n,o){var i=(e||t).node(n),r=0,s=e?e.index(n):i.childCount;t&&(r=t.index(n),t.depth>n?r++:t.textOffset&&(oe(t.nodeAfter,o),r++));for(var a=r;a<s;a++)oe(i.child(a),o);e&&e.depth==n&&e.textOffset&&oe(e.nodeBefore,o)}function re(t,e){if(!t.type.validContent(e))throw new Jt("Invalid content for node "+t.type.name);return t.copy(e)}function se(t,e,n,o,i){var r=t.depth>i&&ne(t,e,i+1),s=o.depth>i&&ne(n,o,i+1),a=[];return ie(null,t,i,a),r&&s&&e.index(i)==n.index(i)?(ee(r,s),oe(re(r,se(t,e,n,o,i+1)),a)):(r&&oe(re(r,ae(t,e,i+1)),a),ie(e,n,i,a),s&&oe(re(s,ae(n,o,i+1)),a)),ie(o,null,i,a),new Zt(a)}function ae(t,e,n){var o=[];(ie(null,t,n,o),t.depth>n)&&oe(re(ne(t,e,n+1),ae(t,e,n+1)),o);return ie(e,null,n,o),new Zt(o)}Gt.size.get=function(){return this.content.size-this.openStart-this.openEnd},Kt.prototype.insertAt=function(t,e){var n=Yt(this.content,t+this.openStart,e,null);return n&&new Kt(n,this.openStart,this.openEnd)},Kt.prototype.removeBetween=function(t,e){return new Kt(Xt(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)},Kt.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd},Kt.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},Kt.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t},Kt.fromJSON=function(t,e){if(!e)return Kt.empty;var n=e.openStart||0,o=e.openEnd||0;if("number"!=typeof n||"number"!=typeof o)throw new RangeError("Invalid input for Slice.fromJSON");return new Kt(Zt.fromJSON(t,e.content),n,o)},Kt.maxOpen=function(t,e){void 0===e&&(e=!0);for(var n=0,o=0,i=t.firstChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.firstChild)n++;for(var r=t.lastChild;r&&!r.isLeaf&&(e||!r.type.spec.isolating);r=r.lastChild)o++;return new Kt(t,n,o)},Object.defineProperties(Kt.prototype,Gt),Kt.empty=new Kt(Zt.empty,0,0);var le=function(t,e,n){this.pos=t,this.path=e,this.depth=e.length/3-1,this.parentOffset=n},ce={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};le.prototype.resolveDepth=function(t){return null==t?this.depth:t<0?this.depth+t:t},ce.parent.get=function(){return this.node(this.depth)},ce.doc.get=function(){return this.node(0)},le.prototype.node=function(t){return this.path[3*this.resolveDepth(t)]},le.prototype.index=function(t){return this.path[3*this.resolveDepth(t)+1]},le.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)},le.prototype.start=function(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1},le.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size},le.prototype.before=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]},le.prototype.after=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize},ce.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},ce.nodeAfter.get=function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var n=this.pos-this.path[this.path.length-1],o=t.child(e);return n?t.child(e).cut(n):o},ce.nodeBefore.get=function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)},le.prototype.posAtIndex=function(t,e){e=this.resolveDepth(e);for(var n=this.path[3*e],o=0==e?0:this.path[3*e-1]+1,i=0;i<t;i++)o+=n.child(i).nodeSize;return o},le.prototype.marks=function(){var t=this.parent,e=this.index();if(0==t.content.size)return qt.none;if(this.textOffset)return t.child(e).marks;var n=t.maybeChild(e-1),o=t.maybeChild(e);if(!n){var i=n;n=o,o=i}for(var r=n.marks,s=0;s<r.length;s++)!1!==r[s].type.spec.inclusive||o&&r[s].isInSet(o.marks)||(r=r[s--].removeFromSet(r));return r},le.prototype.marksAcross=function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var n=e.marks,o=t.parent.maybeChild(t.index()),i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||o&&n[i].isInSet(o.marks)||(n=n[i--].removeFromSet(n));return n},le.prototype.sharedDepth=function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0},le.prototype.blockRange=function(t,e){if(void 0===t&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new de(this,t,n)},le.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset},le.prototype.max=function(t){return t.pos>this.pos?t:this},le.prototype.min=function(t){return t.pos<this.pos?t:this},le.prototype.toString=function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset},le.resolve=function(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");for(var n=[],o=0,i=e,r=t;;){var s=r.content.findIndex(i),a=s.index,l=s.offset,c=i-l;if(n.push(r,a,o+l),!c)break;if((r=r.child(a)).isText)break;i=c-1,o+=l+1}return new le(e,n,i)},le.resolveCached=function(t,e){for(var n=0;n<ue.length;n++){var o=ue[n];if(o.pos==e&&o.doc==t)return o}var i=ue[pe]=le.resolve(t,e);return pe=(pe+1)%he,i},Object.defineProperties(le.prototype,ce);var ue=[],pe=0,he=12,de=function(t,e,n){this.$from=t,this.$to=e,this.depth=n},fe={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};fe.start.get=function(){return this.$from.before(this.depth+1)},fe.end.get=function(){return this.$to.after(this.depth+1)},fe.parent.get=function(){return this.$from.node(this.depth)},fe.startIndex.get=function(){return this.$from.index(this.depth)},fe.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(de.prototype,fe);var me=Object.create(null),ve=function(t,e,n,o){this.type=t,this.attrs=e,this.content=n||Zt.empty,this.marks=o||qt.none},ge={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};ge.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},ge.childCount.get=function(){return this.content.childCount},ve.prototype.child=function(t){return this.content.child(t)},ve.prototype.maybeChild=function(t){return this.content.maybeChild(t)},ve.prototype.forEach=function(t){this.content.forEach(t)},ve.prototype.nodesBetween=function(t,e,n,o){void 0===o&&(o=0),this.content.nodesBetween(t,e,n,o,this)},ve.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)},ge.textContent.get=function(){return this.textBetween(0,this.content.size,"")},ve.prototype.textBetween=function(t,e,n,o){return this.content.textBetween(t,e,n,o)},ge.firstChild.get=function(){return this.content.firstChild},ge.lastChild.get=function(){return this.content.lastChild},ve.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)},ve.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)},ve.prototype.hasMarkup=function(t,e,n){return this.type==t&&Ut(this.attrs,e||t.defaultAttrs||me)&&qt.sameSet(this.marks,n||qt.none)},ve.prototype.copy=function(t){return void 0===t&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)},ve.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)},ve.prototype.cut=function(t,e){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))},ve.prototype.slice=function(t,e,n){if(void 0===e&&(e=this.content.size),void 0===n&&(n=!1),t==e)return Kt.empty;var o=this.resolve(t),i=this.resolve(e),r=n?0:o.sharedDepth(e),s=o.start(r),a=o.node(r).content.cut(o.pos-s,i.pos-s);return new Kt(a,o.depth-r,i.depth-r)},ve.prototype.replace=function(t,e,n){return Qt(this.resolve(t),this.resolve(e),n)},ve.prototype.nodeAt=function(t){for(var e=this;;){var n=e.content.findIndex(t),o=n.index,i=n.offset;if(!(e=e.maybeChild(o)))return null;if(i==t||e.isText)return e;t-=i+1}},ve.prototype.childAfter=function(t){var e=this.content.findIndex(t),n=e.index,o=e.offset;return{node:this.content.maybeChild(n),index:n,offset:o}},ve.prototype.childBefore=function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),n=e.index,o=e.offset;if(o<t)return{node:this.content.child(n),index:n,offset:o};var i=this.content.child(n-1);return{node:i,index:n-1,offset:o-i.nodeSize}},ve.prototype.resolve=function(t){return le.resolveCached(this,t)},ve.prototype.resolveNoCache=function(t){return le.resolve(this,t)},ve.prototype.rangeHasMark=function(t,e,n){var o=!1;return e>t&&this.nodesBetween(t,e,(function(t){return n.isInSet(t.marks)&&(o=!0),!o})),o},ge.isBlock.get=function(){return this.type.isBlock},ge.isTextblock.get=function(){return this.type.isTextblock},ge.inlineContent.get=function(){return this.type.inlineContent},ge.isInline.get=function(){return this.type.isInline},ge.isText.get=function(){return this.type.isText},ge.isLeaf.get=function(){return this.type.isLeaf},ge.isAtom.get=function(){return this.type.isAtom},ve.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),be(this.marks,t)},ve.prototype.contentMatchAt=function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e},ve.prototype.canReplace=function(t,e,n,o,i){void 0===n&&(n=Zt.empty),void 0===o&&(o=0),void 0===i&&(i=n.childCount);var r=this.contentMatchAt(t).matchFragment(n,o,i),s=r&&r.matchFragment(this.content,e);if(!s||!s.validEnd)return!1;for(var a=o;a<i;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0},ve.prototype.canReplaceWith=function(t,e,n,o){if(o&&!this.type.allowsMarks(o))return!1;var i=this.contentMatchAt(t).matchType(n),r=i&&i.matchFragment(this.content,e);return!!r&&r.validEnd},ve.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)},ve.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var t=qt.none,e=0;e<this.marks.length;e++)t=this.marks[e].addToSet(t);if(!qt.sameSet(t,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map((function(t){return t.type.name})));this.content.forEach((function(t){return t.check()}))},ve.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((function(t){return t.toJSON()}))),t},ve.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}var o=Zt.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,o,n)},Object.defineProperties(ve.prototype,ge);var ye=function(t){function e(e,n,o,i){if(t.call(this,e,n,null,i),!o)throw new RangeError("Empty text nodes are not allowed");this.text=o}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return e.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):be(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},e.prototype.textBetween=function(t,e){return this.text.slice(t,e)},n.nodeSize.get=function(){return this.text.length},e.prototype.mark=function(t){return t==this.marks?this:new e(this.type,this.attrs,this.text,t)},e.prototype.withText=function(t){return t==this.text?this:new e(this.type,this.attrs,t,this.marks)},e.prototype.cut=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.text.length),0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))},e.prototype.eq=function(t){return this.sameMarkup(t)&&this.text==t.text},e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.text=this.text,e},Object.defineProperties(e.prototype,n),e}(ve);function be(t,e){for(var n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}var _e=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]},we={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};_e.parse=function(t,e){var n=new xe(t,e);if(null==n.next)return _e.empty;var o=ke(n);n.next&&n.err("Unexpected trailing text");var i=function(t){var e=Object.create(null);return n(Ae(t,0));function n(o){var i=[];o.forEach((function(e){t[e].forEach((function(e){var n=e.term,o=e.to;if(n){var r=i.indexOf(n),s=r>-1&&i[r+1];Ae(t,o).forEach((function(t){s||i.push(n,s=[]),-1==s.indexOf(t)&&s.push(t)}))}}))}));for(var r=e[o.join(",")]=new _e(o.indexOf(t.length-1)>-1),s=0;s<i.length;s+=2){var a=i[s+1].sort(Ee);r.next.push(i[s],e[a.join(",")]||n(a))}return r}}(function(t){var e=[[]];return i(r(t,0),n()),e;function n(){return e.push([])-1}function o(t,n,o){var i={term:o,to:n};return e[t].push(i),i}function i(t,e){t.forEach((function(t){return t.to=e}))}function r(t,e){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(r(n,e))}),[]);if("seq"==t.type)for(var s=0;;s++){var a=r(t.exprs[s],e);if(s==t.exprs.length-1)return a;i(a,e=n())}else{if("star"==t.type){var l=n();return o(e,l),i(r(t.expr,l),l),[o(l)]}if("plus"==t.type){var c=n();return i(r(t.expr,e),c),i(r(t.expr,c),c),[o(c)]}if("opt"==t.type)return[o(e)].concat(r(t.expr,e));if("range"==t.type){for(var u=e,p=0;p<t.min;p++){var h=n();i(r(t.expr,u),h),u=h}if(-1==t.max)i(r(t.expr,u),u);else for(var d=t.min;d<t.max;d++){var f=n();o(u,f),i(r(t.expr,u),f),u=f}return[o(u)]}if("name"==t.type)return[o(e,null,t.value)]}}}(o));return function(t,e){for(var n=0,o=[t];n<o.length;n++){for(var i=o[n],r=!i.validEnd,s=[],a=0;a<i.next.length;a+=2){var l=i.next[a],c=i.next[a+1];s.push(l.name),!r||l.isText||l.hasRequiredAttrs()||(r=!1),-1==o.indexOf(c)&&o.push(c)}r&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(i,n),i},_e.prototype.matchType=function(t){for(var e=0;e<this.next.length;e+=2)if(this.next[e]==t)return this.next[e+1];return null},_e.prototype.matchFragment=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.childCount);for(var o=this,i=e;o&&i<n;i++)o=o.matchType(t.child(i).type);return o},we.inlineContent.get=function(){var t=this.next[0];return!!t&&t.isInline},we.defaultType.get=function(){for(var t=0;t<this.next.length;t+=2){var e=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}},_e.prototype.compatible=function(t){for(var e=0;e<this.next.length;e+=2)for(var n=0;n<t.next.length;n+=2)if(this.next[e]==t.next[n])return!0;return!1},_e.prototype.fillBefore=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=0);var o=[this];return function i(r,s){var a=r.matchFragment(t,n);if(a&&(!e||a.validEnd))return Zt.from(s.map((function(t){return t.createAndFill()})));for(var l=0;l<r.next.length;l+=2){var c=r.next[l],u=r.next[l+1];if(!c.isText&&!c.hasRequiredAttrs()&&-1==o.indexOf(u)){o.push(u);var p=i(u,s.concat(c));if(p)return p}}}(this,[])},_e.prototype.findWrapping=function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var n=this.computeWrapping(t);return this.wrapCache.push(t,n),n},_e.prototype.computeWrapping=function(t){for(var e=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var o=n.shift(),i=o.match;if(i.matchType(t)){for(var r=[],s=o;s.type;s=s.via)r.push(s.type);return r.reverse()}for(var a=0;a<i.next.length;a+=2){var l=i.next[a];l.isLeaf||l.hasRequiredAttrs()||l.name in e||o.type&&!i.next[a+1].validEnd||(n.push({match:l.contentMatch,type:l,via:o}),e[l.name]=!0)}}},we.edgeCount.get=function(){return this.next.length>>1},_e.prototype.edge=function(t){var e=t<<1;if(e>=this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[e],next:this.next[e+1]}},_e.prototype.toString=function(){var t=[];return function e(n){t.push(n);for(var o=1;o<n.next.length;o+=2)-1==t.indexOf(n.next[o])&&e(n.next[o])}(this),t.map((function(e,n){for(var o=n+(e.validEnd?"*":" ")+" ",i=0;i<e.next.length;i+=2)o+=(i?", ":"")+e.next[i].name+"->"+t.indexOf(e.next[i+1]);return o})).join("\n")},Object.defineProperties(_e.prototype,we),_e.empty=new _e(!0);var xe=function(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()},Se={next:{configurable:!0}};function ke(t){var e=[];do{e.push(Ce(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function Ce(t){var e=[];do{e.push(Oe(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function Oe(t){for(var e=function(t){if(t.eat("(")){var e=ke(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var n=function(t,e){var n=t.nodeTypes,o=n[e];if(o)return[o];var i=[];for(var r in n){var s=n[r];s.groups.indexOf(e)>-1&&i.push(s)}0==i.length&&t.err("No node type or group '"+e+"' found");return i}(t,t.next).map((function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}}));return t.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}t.err("Unexpected token '"+t.next+"'")}(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=Me(t,e)}return e}function Te(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function Me(t,e){var n=Te(t),o=n;return t.eat(",")&&(o="}"!=t.next?Te(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:o,expr:e}}function Ee(t,e){return e-t}function Ae(t,e){var n=[];return function e(o){var i=t[o];if(1==i.length&&!i[0].term)return e(i[0].to);n.push(o);for(var r=0;r<i.length;r++){var s=i[r],a=s.term,l=s.to;a||-1!=n.indexOf(l)||e(l)}}(e),n.sort(Ee)}function Ne(t){var e=Object.create(null);for(var n in t){var o=t[n];if(!o.hasDefault)return null;e[n]=o.default}return e}function Pe(t,e){var n=Object.create(null);for(var o in t){var i=e&&e[o];if(void 0===i){var r=t[o];if(!r.hasDefault)throw new RangeError("No value supplied for attribute "+o);i=r.default}n[o]=i}return n}function Le(t){var e=Object.create(null);if(t)for(var n in t)e[n]=new Re(t[n]);return e}Se.next.get=function(){return this.tokens[this.pos]},xe.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)},xe.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")},Object.defineProperties(xe.prototype,Se);var Ie=function(t,e,n){this.name=t,this.schema=e,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=Le(n.attrs),this.defaultAttrs=Ne(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t},De={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};De.isInline.get=function(){return!this.isBlock},De.isTextblock.get=function(){return this.isBlock&&this.inlineContent},De.isLeaf.get=function(){return this.contentMatch==_e.empty},De.isAtom.get=function(){return this.isLeaf||this.spec.atom},Ie.prototype.hasRequiredAttrs=function(){for(var t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1},Ie.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)},Ie.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:Pe(this.attrs,t)},Ie.prototype.create=function(t,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ve(this,this.computeAttrs(t),Zt.from(e),qt.setFrom(n))},Ie.prototype.createChecked=function(t,e,n){if(e=Zt.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new ve(this,this.computeAttrs(t),e,qt.setFrom(n))},Ie.prototype.createAndFill=function(t,e,n){if(t=this.computeAttrs(t),(e=Zt.from(e)).size){var o=this.contentMatch.fillBefore(e);if(!o)return null;e=o.append(e)}var i=this.contentMatch.matchFragment(e).fillBefore(Zt.empty,!0);return i?new ve(this,t,e.append(i),qt.setFrom(n)):null},Ie.prototype.validContent=function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0},Ie.prototype.allowsMarkType=function(t){return null==this.markSet||this.markSet.indexOf(t)>-1},Ie.prototype.allowsMarks=function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0},Ie.prototype.allowedMarks=function(t){if(null==this.markSet)return t;for(var e,n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:qt.empty:t},Ie.compile=function(t,e){var n=Object.create(null);t.forEach((function(t,o){return n[t]=new Ie(t,e,o)}));var o=e.spec.topNode||"doc";if(!n[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var i in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(Ie.prototype,De);var Re=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},ze={isRequired:{configurable:!0}};ze.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(Re.prototype,ze);var Be=function(t,e,n,o){this.name=t,this.schema=n,this.spec=o,this.attrs=Le(o.attrs),this.rank=e,this.excluded=null;var i=Ne(this.attrs);this.instance=i&&new qt(this,i)};Be.prototype.create=function(t){return!t&&this.instance?this.instance:new qt(this,Pe(this.attrs,t))},Be.compile=function(t,e){var n=Object.create(null),o=0;return t.forEach((function(t,i){return n[t]=new Be(t,o++,e,i)})),n},Be.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t},Be.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]},Be.prototype.excludes=function(t){return this.excluded.indexOf(t)>-1};var $e=function(t){for(var e in this.spec={},t)this.spec[e]=t[e];this.spec.nodes=$t.from(t.nodes),this.spec.marks=$t.from(t.marks),this.nodes=Ie.compile(this.spec.nodes,this),this.marks=Be.compile(this.spec.marks,this);var n=Object.create(null);for(var o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");var i=this.nodes[o],r=i.spec.content||"",s=i.spec.marks;i.contentMatch=n[r]||(n[r]=_e.parse(r,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.markSet="_"==s?null:s?je(this,s.split(" ")):""!=s&&i.inlineContent?null:[]}for(var a in this.marks){var l=this.marks[a],c=l.spec.excludes;l.excluded=null==c?[l]:""==c?[]:je(this,c.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function je(t,e){for(var n=[],o=0;o<e.length;o++){var i=e[o],r=t.marks[i],s=r;if(r)n.push(r);else for(var a in t.marks){var l=t.marks[a];("_"==i||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[o]+"'")}return n}$e.prototype.node=function(t,e,n,o){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof Ie))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,o)},$e.prototype.text=function(t,e){var n=this.nodes.text;return new ye(n,n.defaultAttrs,t,qt.setFrom(e))},$e.prototype.mark=function(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)},$e.prototype.nodeFromJSON=function(t){return ve.fromJSON(this,t)},$e.prototype.markFromJSON=function(t){return qt.fromJSON(this,t)},$e.prototype.nodeType=function(t){var e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e};var Ve=function(t,e){var n=this;this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach((function(t){t.tag?n.tags.push(t):t.style&&n.styles.push(t)})),this.normalizeLists=!this.tags.some((function(e){if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;var n=t.nodes[e.node];return n.contentMatch.matchType(n)}))};Ve.prototype.parse=function(t,e){void 0===e&&(e={});var n=new qe(this,e,!1);return n.addAll(t,null,e.from,e.to),n.finish()},Ve.prototype.parseSlice=function(t,e){void 0===e&&(e={});var n=new qe(this,e,!0);return n.addAll(t,null,e.from,e.to),Kt.maxOpen(n.finish())},Ve.prototype.matchTag=function(t,e,n){for(var o=n?this.tags.indexOf(n)+1:0;o<this.tags.length;o++){var i=this.tags[o];if(Ke(t,i.tag)&&(void 0===i.namespace||t.namespaceURI==i.namespace)&&(!i.context||e.matchesContext(i.context))){if(i.getAttrs){var r=i.getAttrs(t);if(!1===r)continue;i.attrs=r}return i}}},Ve.prototype.matchStyle=function(t,e,n,o){for(var i=o?this.styles.indexOf(o)+1:0;i<this.styles.length;i++){var r=this.styles[i];if(!(0!=r.style.indexOf(t)||r.context&&!n.matchesContext(r.context)||r.style.length>t.length&&(61!=r.style.charCodeAt(t.length)||r.style.slice(t.length+1)!=e))){if(r.getAttrs){var s=r.getAttrs(e);if(!1===s)continue;r.attrs=s}return r}}},Ve.schemaRules=function(t){var e=[];function n(t){for(var n=null==t.priority?50:t.priority,o=0;o<e.length;o++){var i=e[o];if((null==i.priority?50:i.priority)<n)break}e.splice(o,0,t)}var o=function(e){var o=t.marks[e].spec.parseDOM;o&&o.forEach((function(t){n(t=Ge(t)),t.mark=e}))};for(var i in t.marks)o(i);var r;for(var s in t.nodes)r=void 0,(r=t.nodes[s].spec.parseDOM)&&r.forEach((function(t){n(t=Ge(t)),t.node=s}));return e},Ve.fromSchema=function(t){return t.cached.domParser||(t.cached.domParser=new Ve(t,Ve.schemaRules(t)))};var Ze={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Fe={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},He={ol:!0,ul:!0};function We(t){return(t?1:0)|("full"===t?2:0)}var Ue=function(t,e,n,o,i,r,s){this.type=t,this.attrs=e,this.solid=i,this.match=r||(4&s?null:t.contentMatch),this.options=s,this.content=[],this.marks=n,this.activeMarks=qt.none,this.pendingMarks=o,this.stashMarks=[]};Ue.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(Zt.from(t));if(!e){var n,o=this.type.contentMatch;return(n=o.findWrapping(t.type))?(this.match=o,n):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)},Ue.prototype.finish=function(t){if(!(1&this.options)){var e,n=this.content[this.content.length-1];n&&n.isText&&(e=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length)))}var o=Zt.from(this.content);return!t&&this.match&&(o=o.append(this.match.fillBefore(Zt.empty,!0))),this.type?this.type.create(this.attrs,o,this.marks):o},Ue.prototype.popFromStashMark=function(t){for(var e=this.stashMarks.length-1;e>=0;e--)if(t.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]},Ue.prototype.applyPending=function(t){for(var e=0,n=this.pendingMarks;e<n.length;e++){var o=n[e];(this.type?this.type.allowsMarkType(o.type):Xe(o.type,t))&&!o.isInSet(this.activeMarks)&&(this.activeMarks=o.addToSet(this.activeMarks),this.pendingMarks=o.removeFromSet(this.pendingMarks))}},Ue.prototype.inlineContext=function(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!Ze.hasOwnProperty(t.parentNode.nodeName.toLowerCase())};var qe=function(t,e,n){this.parser=t,this.options=e,this.isOpen=n;var o,i=e.topNode,r=We(e.preserveWhitespace)|(n?4:0);o=i?new Ue(i.type,i.attrs,qt.none,qt.none,!0,e.topMatch||i.type.contentMatch,r):new Ue(n?null:t.schema.topNodeType,null,qt.none,qt.none,!0,null,r),this.nodes=[o],this.open=0,this.find=e.findPositions,this.needsBlock=!1},Je={top:{configurable:!0},currentPos:{configurable:!0}};function Ke(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Ge(t){var e={};for(var n in t)e[n]=t[n];return e}function Xe(t,e){var n=e.schema.nodes,o=function(o){var i=n[o];if(i.allowsMarkType(t)){var r=[],s=function(t){r.push(t);for(var n=0;n<t.edgeCount;n++){var o=t.edge(n),i=o.type,a=o.next;if(i==e)return!0;if(r.indexOf(a)<0&&s(a))return!0}};return s(i.contentMatch)?{v:!0}:void 0}};for(var i in n){var r=o(i);if(r)return r.v}}Je.top.get=function(){return this.nodes[this.open]},qe.prototype.addDOM=function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style"),n=e?this.readStyles(function(t){var e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,o=[];for(;e=n.exec(t);)o.push(e[1],e[2].trim());return o}(e)):null,o=this.top;if(null!=n)for(var i=0;i<n.length;i++)this.addPendingMark(n[i]);if(this.addElement(t),null!=n)for(var r=0;r<n.length;r++)this.removePendingMark(n[r],o)}},qe.prototype.addTextNode=function(t){var e=t.nodeValue,n=this.top;if(2&n.options||n.inlineContext(t)||/[^ \t\r\n\u000c]/.test(e)){if(1&n.options)e=2&n.options?e.replace(/\r\n?/g,"\n"):e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var o=n.content[n.content.length-1],i=t.previousSibling;(!o||i&&"BR"==i.nodeName||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)},qe.prototype.addElement=function(t,e){var n,o=t.nodeName.toLowerCase();He.hasOwnProperty(o)&&this.parser.normalizeLists&&function(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var o=1==e.nodeType?e.nodeName.toLowerCase():null;o&&He.hasOwnProperty(o)&&n?(n.appendChild(e),e=n):"li"==o?n=e:o&&(n=null)}}(t);var i=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(n=this.parser.matchTag(t,this,e));if(i?i.ignore:Fe.hasOwnProperty(o))this.findInside(t),this.ignoreFallback(t);else if(!i||i.skip||i.closeParent){i&&i.closeParent?this.open=Math.max(0,this.open-1):i&&i.skip.nodeType&&(t=i.skip);var r,s=this.top,a=this.needsBlock;if(Ze.hasOwnProperty(o))r=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),r&&this.sync(s),this.needsBlock=a}else this.addElementByRule(t,i,!1===i.consuming?n:null)},qe.prototype.leafFallback=function(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))},qe.prototype.ignoreFallback=function(t){"BR"!=t.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))},qe.prototype.readStyles=function(t){var e=qt.none;t:for(var n=0;n<t.length;n+=2)for(var o=null;;){var i=this.parser.matchStyle(t[n],t[n+1],this,o);if(!i)continue t;if(i.ignore)return null;if(e=this.parser.schema.marks[i.mark].create(i.attrs).addToSet(e),!1!==i.consuming)break;o=i}return e},qe.prototype.addElementByRule=function(t,e,n){var o,i,r,s=this;e.node?(i=this.parser.schema.nodes[e.node]).isLeaf?this.insertNode(i.create(e.attrs))||this.leafFallback(t):o=this.enter(i,e.attrs,e.preserveWhitespace):(r=this.parser.schema.marks[e.mark].create(e.attrs),this.addPendingMark(r));var a=this.top;if(i&&i.isLeaf)this.findInside(t);else if(n)this.addElement(t,n);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((function(t){return s.insertNode(t)}));else{var l=e.contentElement;"string"==typeof l?l=t.querySelector(l):"function"==typeof l&&(l=l(t)),l||(l=t),this.findAround(t,l,!0),this.addAll(l,o)}o&&(this.sync(a),this.open--),r&&this.removePendingMark(r,a)},qe.prototype.addAll=function(t,e,n,o){for(var i=n||0,r=n?t.childNodes[n]:t.firstChild,s=null==o?null:t.childNodes[o];r!=s;r=r.nextSibling,++i)this.findAtPoint(t,i),this.addDOM(r),e&&Ze.hasOwnProperty(r.nodeName.toLowerCase())&&this.sync(e);this.findAtPoint(t,i)},qe.prototype.findPlace=function(t){for(var e,n,o=this.open;o>=0;o--){var i=this.nodes[o],r=i.findWrapping(t);if(r&&(!e||e.length>r.length)&&(e=r,n=i,!r.length))break;if(i.solid)break}if(!e)return!1;this.sync(n);for(var s=0;s<e.length;s++)this.enterInner(e[s],null,!1);return!0},qe.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var n=this.top;n.applyPending(t.type),n.match&&(n.match=n.match.matchType(t.type));for(var o=n.activeMarks,i=0;i<t.marks.length;i++)n.type&&!n.type.allowsMarkType(t.marks[i].type)||(o=t.marks[i].addToSet(o));return n.content.push(t.mark(o)),!0}return!1},qe.prototype.enter=function(t,e,n){var o=this.findPlace(t.create(e));return o&&this.enterInner(t,e,!0,n),o},qe.prototype.enterInner=function(t,e,n,o){this.closeExtra();var i=this.top;i.applyPending(t),i.match=i.match&&i.match.matchType(t,e);var r=null==o?-5&i.options:We(o);4&i.options&&0==i.content.length&&(r|=4),this.nodes.push(new Ue(t,e,i.activeMarks,i.pendingMarks,n,null,r)),this.open++},qe.prototype.closeExtra=function(t){var e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}},qe.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},qe.prototype.sync=function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return void(this.open=e)},Je.currentPos.get=function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var n=this.nodes[e].content,o=n.length-1;o>=0;o--)t+=n[o].nodeSize;e&&t++}return t},qe.prototype.findAtPoint=function(t,e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)},qe.prototype.findInside=function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)},qe.prototype.findAround=function(t,e,n){if(t!=e&&this.find)for(var o=0;o<this.find.length;o++){if(null==this.find[o].pos&&1==t.nodeType&&t.contains(this.find[o].node))e.compareDocumentPosition(this.find[o].node)&(n?2:4)&&(this.find[o].pos=this.currentPos)}},qe.prototype.findInText=function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))},qe.prototype.matchesContext=function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var n=t.split("/"),o=this.options.context,i=!(this.isOpen||o&&o.parent.type!=this.nodes[0].type),r=-(o?o.depth+1:0)+(i?0:1),s=function(t,a){for(;t>=0;t--){var l=n[t];if(""==l){if(t==n.length-1||0==t)continue;for(;a>=r;a--)if(s(t-1,a))return!0;return!1}var c=a>0||0==a&&i?e.nodes[a].type:o&&a>=r?o.node(a-r).type:null;if(!c||c.name!=l&&-1==c.groups.indexOf(l))return!1;a--}return!0};return s(n.length-1,this.open)},qe.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var o in this.parser.schema.nodes){var i=this.parser.schema.nodes[o];if(i.isTextblock&&i.defaultAttrs)return i}},qe.prototype.addPendingMark=function(t){var e=function(t,e){for(var n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)},qe.prototype.removePendingMark=function(t,e){for(var n=this.open;n>=0;n--){var o=this.nodes[n];if(o.pendingMarks.lastIndexOf(t)>-1)o.pendingMarks=t.removeFromSet(o.pendingMarks);else{o.activeMarks=t.removeFromSet(o.activeMarks);var i=o.popFromStashMark(t);i&&o.type&&o.type.allowsMarkType(i.type)&&(o.activeMarks=i.addToSet(o.activeMarks))}if(o==e)break}},Object.defineProperties(qe.prototype,Je);var Ye=function(t,e){this.nodes=t||{},this.marks=e||{}};function Qe(t){var e={};for(var n in t){var o=t[n].spec.toDOM;o&&(e[n]=o)}return e}function tn(t){return t.document||window.document}Ye.prototype.serializeFragment=function(t,e,n){var o=this;void 0===e&&(e={}),n||(n=tn(e).createDocumentFragment());var i=n,r=null;return t.forEach((function(t){if(r||t.marks.length){r||(r=[]);for(var n=0,s=0;n<r.length&&s<t.marks.length;){var a=t.marks[s];if(o.marks[a.type.name]){if(!a.eq(r[n])||!1===a.type.spec.spanning)break;n+=2,s++}else s++}for(;n<r.length;)i=r.pop(),r.pop();for(;s<t.marks.length;){var l=t.marks[s++],c=o.serializeMark(l,t.isInline,e);c&&(r.push(l,i),i.appendChild(c.dom),i=c.contentDOM||c.dom)}}i.appendChild(o.serializeNodeInner(t,e))})),n},Ye.prototype.serializeNodeInner=function(t,e){void 0===e&&(e={});var n=Ye.renderSpec(tn(e),this.nodes[t.type.name](t)),o=n.dom,i=n.contentDOM;if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");e.onContent?e.onContent(t,i,e):this.serializeFragment(t.content,e,i)}return o},Ye.prototype.serializeNode=function(t,e){void 0===e&&(e={});for(var n=this.serializeNodeInner(t,e),o=t.marks.length-1;o>=0;o--){var i=this.serializeMark(t.marks[o],t.isInline,e);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n},Ye.prototype.serializeMark=function(t,e,n){void 0===n&&(n={});var o=this.marks[t.type.name];return o&&Ye.renderSpec(tn(n),o(t,e))},Ye.renderSpec=function(t,e,n){if(void 0===n&&(n=null),"string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};if(e.dom&&null!=e.dom.nodeType)return e;var o=e[0],i=o.indexOf(" ");i>0&&(n=o.slice(0,i),o=o.slice(i+1));var r=null,s=n?t.createElementNS(n,o):t.createElement(o),a=e[1],l=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a))for(var c in l=2,a)if(null!=a[c]){var u=c.indexOf(" ");u>0?s.setAttributeNS(c.slice(0,u),c.slice(u+1),a[c]):s.setAttribute(c,a[c])}for(var p=l;p<e.length;p++){var h=e[p];if(0===h){if(p<e.length-1||p>l)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}var d=Ye.renderSpec(t,h,n),f=d.dom,m=d.contentDOM;if(s.appendChild(f),m){if(r)throw new RangeError("Multiple content holes");r=m}}return{dom:s,contentDOM:r}},Ye.fromSchema=function(t){return t.cached.domSerializer||(t.cached.domSerializer=new Ye(this.nodesFromSchema(t),this.marksFromSchema(t)))},Ye.nodesFromSchema=function(t){var e=Qe(t.nodes);return e.text||(e.text=function(t){return t.text}),e},Ye.marksFromSchema=function(t){return Qe(t.marks)};var en=Math.pow(2,16);function nn(t){return 65535&t}var on=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=null),this.pos=t,this.deleted=e,this.recover=n},rn=function(t,e){void 0===e&&(e=!1),this.ranges=t,this.inverted=e};rn.prototype.recover=function(t){var e=0,n=nn(t);if(!this.inverted)for(var o=0;o<n;o++)e+=this.ranges[3*o+2]-this.ranges[3*o+1];return this.ranges[3*n]+e+function(t){return(t-(65535&t))/en}(t)},rn.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},rn.prototype.map=function(t,e){return void 0===e&&(e=1),this._map(t,e,!0)},rn.prototype._map=function(t,e,n){for(var o=0,i=this.inverted?2:1,r=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?o:0);if(a>t)break;var l=this.ranges[s+i],c=this.ranges[s+r],u=a+l;if(t<=u){var p=a+o+((l?t==a?-1:t==u?1:e:e)<0?0:c);if(n)return p;var h=t==(e<0?a:u)?null:s/3+(t-a)*en;return new on(p,e<0?t!=a:t!=u,h)}o+=c-l}return n?t+o:new on(t+o)},rn.prototype.touches=function(t,e){for(var n=0,o=nn(e),i=this.inverted?2:1,r=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?n:0);if(a>t)break;var l=this.ranges[s+i];if(t<=a+l&&s==3*o)return!0;n+=this.ranges[s+r]-l}return!1},rn.prototype.forEach=function(t){for(var e=this.inverted?2:1,n=this.inverted?1:2,o=0,i=0;o<this.ranges.length;o+=3){var r=this.ranges[o],s=r-(this.inverted?i:0),a=r+(this.inverted?0:i),l=this.ranges[o+e],c=this.ranges[o+n];t(s,s+l,a,a+c),i+=c-l}},rn.prototype.invert=function(){return new rn(this.ranges,!this.inverted)},rn.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},rn.offset=function(t){return 0==t?rn.empty:new rn(t<0?[0,-t,0]:[0,0,t])},rn.empty=new rn([]);var sn=function(t,e,n,o){this.maps=t||[],this.from=n||0,this.to=null==o?this.maps.length:o,this.mirror=e};function an(t){var e=Error.call(this,t);return e.__proto__=an.prototype,e}sn.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.maps.length),new sn(this.maps,this.mirror,t,e)},sn.prototype.copy=function(){return new sn(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},sn.prototype.appendMap=function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)},sn.prototype.appendMapping=function(t){for(var e=0,n=this.maps.length;e<t.maps.length;e++){var o=t.getMirror(e);this.appendMap(t.maps[e],null!=o&&o<e?n+o:null)}},sn.prototype.getMirror=function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]},sn.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)},sn.prototype.appendMappingInverted=function(t){for(var e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){var o=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=o&&o>e?n-o-1:null)}},sn.prototype.invert=function(){var t=new sn;return t.appendMappingInverted(this),t},sn.prototype.map=function(t,e){if(void 0===e&&(e=1),this.mirror)return this._map(t,e,!0);for(var n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t},sn.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},sn.prototype._map=function(t,e,n){for(var o=!1,i=this.from;i<this.to;i++){var r=this.maps[i].mapResult(t,e);if(null!=r.recover){var s=this.getMirror(i);if(null!=s&&s>i&&s<this.to){i=s,t=this.maps[s].recover(r.recover);continue}}r.deleted&&(o=!0),t=r.pos}return n?t:new on(t,o)},an.prototype=Object.create(Error.prototype),an.prototype.constructor=an,an.prototype.name="TransformError";var ln=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new sn},cn={before:{configurable:!0},docChanged:{configurable:!0}};function un(){throw new Error("Override me")}cn.before.get=function(){return this.docs.length?this.docs[0]:this.doc},ln.prototype.step=function(t){var e=this.maybeStep(t);if(e.failed)throw new an(e.failed);return this},ln.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e},cn.docChanged.get=function(){return this.steps.length>0},ln.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e},Object.defineProperties(ln.prototype,cn);var pn=Object.create(null),hn=function(){};hn.prototype.apply=function(t){return un()},hn.prototype.getMap=function(){return rn.empty},hn.prototype.invert=function(t){return un()},hn.prototype.map=function(t){return un()},hn.prototype.merge=function(t){return null},hn.prototype.toJSON=function(){return un()},hn.fromJSON=function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=pn[e.stepType];if(!n)throw new RangeError("No step type "+e.stepType+" defined");return n.fromJSON(t,e)},hn.jsonID=function(t,e){if(t in pn)throw new RangeError("Duplicate use of step JSON ID "+t);return pn[t]=e,e.prototype.jsonID=t,e};var dn=function(t,e){this.doc=t,this.failed=e};dn.ok=function(t){return new dn(t,null)},dn.fail=function(t){return new dn(null,t)},dn.fromReplace=function(t,e,n,o){try{return dn.ok(t.replace(e,n,o))}catch(t){if(t instanceof Jt)return dn.fail(t.message);throw t}};var fn=function(t){function e(e,n,o,i){t.call(this),this.from=e,this.to=n,this.slice=o,this.structure=!!i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){return this.structure&&vn(t,this.from,this.to)?dn.fail("Structure replace would overwrite content"):dn.fromReplace(t,this.from,this.to,this.slice)},e.prototype.getMap=function(){return new rn([this.from,this.to-this.from,this.slice.size])},e.prototype.invert=function(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))},e.prototype.map=function(t){var n=t.mapResult(this.from,1),o=t.mapResult(this.to,-1);return n.deleted&&o.deleted?null:new e(n.pos,Math.max(n.pos,o.pos),this.slice)},e.prototype.merge=function(t){if(!(t instanceof e)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;var n=this.slice.size+t.slice.size==0?Kt.empty:new Kt(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,n,this.structure)}var o=this.slice.size+t.slice.size==0?Kt.empty:new Kt(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),o,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(n.from,n.to,Kt.fromJSON(t,n.slice),!!n.structure)},e}(hn);hn.jsonID("replace",fn);var mn=function(t){function e(e,n,o,i,r,s,a){t.call(this),this.from=e,this.to=n,this.gapFrom=o,this.gapTo=i,this.slice=r,this.insert=s,this.structure=!!a}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){if(this.structure&&(vn(t,this.from,this.gapFrom)||vn(t,this.gapTo,this.to)))return dn.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return dn.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,e.content);return n?dn.fromReplace(t,this.from,this.to,n):dn.fail("Content does not fit in gap")},e.prototype.getMap=function(){return new rn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},e.prototype.invert=function(t){var n=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),o=t.mapResult(this.to,-1),i=t.map(this.gapFrom,-1),r=t.map(this.gapTo,1);return n.deleted&&o.deleted||i<n.pos||r>o.pos?null:new e(n.pos,o.pos,i,r,this.slice,this.insert,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(n.from,n.to,n.gapFrom,n.gapTo,Kt.fromJSON(t,n.slice),n.insert,!!n.structure)},e}(hn);function vn(t,e,n){for(var o=t.resolve(e),i=n-e,r=o.depth;i>0&&r>0&&o.indexAfter(r)==o.node(r).childCount;)r--,i--;if(i>0)for(var s=o.node(r).maybeChild(o.indexAfter(r));i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}return!1}function gn(t,e,n){return(0==e||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function yn(t){for(var e=t.parent.content.cutByIndex(t.startIndex,t.endIndex),n=t.depth;;--n){var o=t.$from.node(n),i=t.$from.index(n),r=t.$to.indexAfter(n);if(n<t.depth&&o.canReplace(i,r,e))return n;if(0==n||o.type.spec.isolating||!gn(o,i,r))break}}function bn(t,e,n,o){void 0===o&&(o=t);var i=function(t,e){var n=t.parent,o=t.startIndex,i=t.endIndex,r=n.contentMatchAt(o).findWrapping(e);if(!r)return null;var s=r.length?r[0]:e;return n.canReplaceWith(o,i,s)?r:null}(t,e),r=i&&function(t,e){var n=t.parent,o=t.startIndex,i=t.endIndex,r=n.child(o),s=e.contentMatch.findWrapping(r.type);if(!s)return null;for(var a=(s.length?s[s.length-1]:e).contentMatch,l=o;a&&l<i;l++)a=a.matchType(n.child(l).type);if(!a||!a.validEnd)return null;return s}(o,e);return r?i.map(_n).concat({type:e,attrs:n}).concat(r.map(_n)):null}function _n(t){return{type:t,attrs:null}}function wn(t,e,n,o){void 0===n&&(n=1);var i=t.resolve(e),r=i.depth-n,s=o&&o[o.length-1]||i.parent;if(r<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(var a=i.depth-1,l=n-2;a>r;a--,l--){var c=i.node(a),u=i.index(a);if(c.type.spec.isolating)return!1;var p=c.content.cutByIndex(u,c.childCount),h=o&&o[l]||c;if(h!=c&&(p=p.replaceChild(0,h.type.create(h.attrs))),!c.canReplace(u+1,c.childCount)||!h.type.validContent(p))return!1}var d=i.indexAfter(r),f=o&&o[0];return i.node(r).canReplaceWith(d,d,f?f.type:i.node(r+1).type)}function xn(t,e){var n=t.resolve(e),o=n.index();return Sn(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(o,o+1)}function Sn(t,e){return t&&e&&!t.isLeaf&&t.canAppend(e)}function kn(t,e,n){var o=t.resolve(e);if(!n.content.size)return e;for(var i=n.content,r=0;r<n.openStart;r++)i=i.firstChild.content;for(var s=1;s<=(0==n.openStart&&n.size?2:1);s++)for(var a=o.depth;a>=0;a--){var l=a==o.depth?0:o.pos<=(o.start(a+1)+o.end(a+1))/2?-1:1,c=o.index(a)+(l>0?1:0),u=o.node(a),p=!1;if(1==s)p=u.canReplace(c,c,i);else{var h=u.contentMatchAt(c).findWrapping(i.firstChild.type);p=h&&u.canReplaceWith(c,c,h[0])}if(p)return 0==l?o.pos:l<0?o.before(a+1):o.after(a+1)}return null}function Cn(t,e,n){for(var o=[],i=0;i<t.childCount;i++){var r=t.child(i);r.content.size&&(r=r.copy(Cn(r.content,e,r))),r.isInline&&(r=e(r,n,i)),o.push(r)}return Zt.fromArray(o)}hn.jsonID("replaceAround",mn),ln.prototype.lift=function(t,e){for(var n=t.$from,o=t.$to,i=t.depth,r=n.before(i+1),s=o.after(i+1),a=r,l=s,c=Zt.empty,u=0,p=i,h=!1;p>e;p--)h||n.index(p)>0?(h=!0,c=Zt.from(n.node(p).copy(c)),u++):a--;for(var d=Zt.empty,f=0,m=i,v=!1;m>e;m--)v||o.after(m+1)<o.end(m)?(v=!0,d=Zt.from(o.node(m).copy(d)),f++):l++;return this.step(new mn(a,l,r,s,new Kt(c.append(d),u,f),c.size-u,!0))},ln.prototype.wrap=function(t,e){for(var n=Zt.empty,o=e.length-1;o>=0;o--)n=Zt.from(e[o].type.create(e[o].attrs,n));var i=t.start,r=t.end;return this.step(new mn(i,r,i,r,new Kt(n,0,0),e.length,!0))},ln.prototype.setBlockType=function(t,e,n,o){var i=this;if(void 0===e&&(e=t),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var r=this.steps.length;return this.doc.nodesBetween(t,e,(function(t,e){if(t.isTextblock&&!t.hasMarkup(n,o)&&function(t,e,n){var o=t.resolve(e),i=o.index();return o.parent.canReplaceWith(i,i+1,n)}(i.doc,i.mapping.slice(r).map(e),n)){i.clearIncompatible(i.mapping.slice(r).map(e,1),n);var s=i.mapping.slice(r),a=s.map(e,1),l=s.map(e+t.nodeSize,1);return i.step(new mn(a,l,a+1,l-1,new Kt(Zt.from(n.create(o,null,t.marks)),0,0),1,!0)),!1}})),this},ln.prototype.setNodeMarkup=function(t,e,n,o){var i=this.doc.nodeAt(t);if(!i)throw new RangeError("No node at given position");e||(e=i.type);var r=e.create(n,null,o||i.marks);if(i.isLeaf)return this.replaceWith(t,t+i.nodeSize,r);if(!e.validContent(i.content))throw new RangeError("Invalid content for node type "+e.name);return this.step(new mn(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new Kt(Zt.from(r),0,0),1,!0))},ln.prototype.split=function(t,e,n){void 0===e&&(e=1);for(var o=this.doc.resolve(t),i=Zt.empty,r=Zt.empty,s=o.depth,a=o.depth-e,l=e-1;s>a;s--,l--){i=Zt.from(o.node(s).copy(i));var c=n&&n[l];r=Zt.from(c?c.type.create(c.attrs,r):o.node(s).copy(r))}return this.step(new fn(t,t,new Kt(i.append(r),e,e),!0))},ln.prototype.join=function(t,e){void 0===e&&(e=1);var n=new fn(t-e,t+e,Kt.empty,!0);return this.step(n)};var On=function(t){function e(e,n,o){t.call(this),this.from=e,this.to=n,this.mark=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),o=t.resolve(this.from),i=o.node(o.sharedDepth(this.to)),r=new Kt(Cn(n.content,(function(t,n){return t.isAtom&&n.type.allowsMarkType(e.mark.type)?t.mark(e.mark.addToSet(t.marks)):t}),i),n.openStart,n.openEnd);return dn.fromReplace(t,this.from,this.to,r)},e.prototype.invert=function(){return new Tn(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),o=t.mapResult(this.to,-1);return n.deleted&&o.deleted||n.pos>=o.pos?null:new e(n.pos,o.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(hn);hn.jsonID("addMark",On);var Tn=function(t){function e(e,n,o){t.call(this),this.from=e,this.to=n,this.mark=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),o=new Kt(Cn(n.content,(function(t){return t.mark(e.mark.removeFromSet(t.marks))})),n.openStart,n.openEnd);return dn.fromReplace(t,this.from,this.to,o)},e.prototype.invert=function(){return new On(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),o=t.mapResult(this.to,-1);return n.deleted&&o.deleted||n.pos>=o.pos?null:new e(n.pos,o.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(hn);function Mn(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}hn.jsonID("removeMark",Tn),ln.prototype.addMark=function(t,e,n){var o=this,i=[],r=[],s=null,a=null;return this.doc.nodesBetween(t,e,(function(o,l,c){if(o.isInline){var u=o.marks;if(!n.isInSet(u)&&c.type.allowsMarkType(n.type)){for(var p=Math.max(l,t),h=Math.min(l+o.nodeSize,e),d=n.addToSet(u),f=0;f<u.length;f++)u[f].isInSet(d)||(s&&s.to==p&&s.mark.eq(u[f])?s.to=h:i.push(s=new Tn(p,h,u[f])));a&&a.to==p?a.to=h:r.push(a=new On(p,h,n))}}})),i.forEach((function(t){return o.step(t)})),r.forEach((function(t){return o.step(t)})),this},ln.prototype.removeMark=function(t,e,n){var o=this;void 0===n&&(n=null);var i=[],r=0;return this.doc.nodesBetween(t,e,(function(o,s){if(o.isInline){r++;var a=null;if(n instanceof Be)for(var l,c=o.marks;l=n.isInSet(c);)(a||(a=[])).push(l),c=l.removeFromSet(c);else n?n.isInSet(o.marks)&&(a=[n]):a=o.marks;if(a&&a.length)for(var u=Math.min(s+o.nodeSize,e),p=0;p<a.length;p++){for(var h=a[p],d=void 0,f=0;f<i.length;f++){var m=i[f];m.step==r-1&&h.eq(i[f].style)&&(d=m)}d?(d.to=u,d.step=r):i.push({style:h,from:Math.max(s,t),to:u,step:r})}}})),i.forEach((function(t){return o.step(new Tn(t.from,t.to,t.style))})),this},ln.prototype.clearIncompatible=function(t,e,n){void 0===n&&(n=e.contentMatch);for(var o=this.doc.nodeAt(t),i=[],r=t+1,s=0;s<o.childCount;s++){var a=o.child(s),l=r+a.nodeSize,c=n.matchType(a.type,a.attrs);if(c){n=c;for(var u=0;u<a.marks.length;u++)e.allowsMarkType(a.marks[u].type)||this.step(new Tn(r,l,a.marks[u]))}else i.push(new fn(r,l,Kt.empty));r=l}if(!n.validEnd){var p=n.fillBefore(Zt.empty,!0);this.replace(r,r,new Kt(p,0,0))}for(var h=i.length-1;h>=0;h--)this.step(i[h]);return this},ln.prototype.replace=function(t,e,n){void 0===e&&(e=t),void 0===n&&(n=Kt.empty);var o=function(t,e,n,o){if(void 0===n&&(n=e),void 0===o&&(o=Kt.empty),e==n&&!o.size)return null;var i=t.resolve(e),r=t.resolve(n);return Mn(i,r,o)?new fn(e,n,o):new En(i,r,o).fit()}(this.doc,t,e,n);return o&&this.step(o),this},ln.prototype.replaceWith=function(t,e,n){return this.replace(t,e,new Kt(Zt.from(n),0,0))},ln.prototype.delete=function(t,e){return this.replace(t,e,Kt.empty)},ln.prototype.insert=function(t,e){return this.replaceWith(t,t,e)};var En=function(t,e,n){this.$to=e,this.$from=t,this.unplaced=n,this.frontier=[];for(var o=0;o<=t.depth;o++){var i=t.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(t.indexAfter(o))})}this.placed=Zt.empty;for(var r=t.depth;r>0;r--)this.placed=Zt.from(t.node(r).copy(this.placed))},An={depth:{configurable:!0}};function Nn(t,e,n){return 0==e?t.cutByIndex(n):t.replaceChild(0,t.firstChild.copy(Nn(t.firstChild.content,e-1,n)))}function Pn(t,e,n){return 0==e?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Pn(t.lastChild.content,e-1,n)))}function Ln(t,e){for(var n=0;n<e;n++)t=t.firstChild.content;return t}function In(t,e,n){if(e<=0)return t;var o=t.content;return e>1&&(o=o.replaceChild(0,In(o.firstChild,e-1,1==o.childCount?n-1:0))),e>0&&(o=t.type.contentMatch.fillBefore(o).append(o),n<=0&&(o=o.append(t.type.contentMatch.matchFragment(o).fillBefore(Zt.empty,!0)))),t.copy(o)}function Dn(t,e,n,o,i){var r=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==r.childCount&&!n.compatibleContent(r.type))return null;var a=o.fillBefore(r.content,!0,s);return a&&!function(t,e,n){for(var o=n;o<e.childCount;o++)if(!t.allowsMarks(e.child(o).marks))return!0;return!1}(n,r.content,s)?a:null}function Rn(t,e,n,o,i){if(e<n){var r=t.firstChild;t=t.replaceChild(0,r.copy(Rn(r.content,e+1,n,o,r)))}if(e>o){var s=i.contentMatchAt(0),a=s.fillBefore(t).append(t);t=a.append(s.matchFragment(a).fillBefore(Zt.empty,!0))}return t}function zn(t,e){for(var n=[],o=Math.min(t.depth,e.depth);o>=0;o--){var i=t.start(o);if(i<t.pos-(t.depth-o)||e.end(o)>e.pos+(e.depth-o)||t.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(i==e.start(o)||o==t.depth&&o==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==i-1)&&n.push(o)}return n}An.depth.get=function(){return this.frontier.length-1},En.prototype.fit=function(){for(;this.unplaced.size;){var t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}var e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,o=this.$from,i=this.close(e<0?this.$to:o.doc.resolve(e));if(!i)return null;for(var r=this.placed,s=o.depth,a=i.depth;s&&a&&1==r.childCount;)r=r.firstChild.content,s--,a--;var l=new Kt(r,s,a);return e>-1?new mn(o.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||o.pos!=this.$to.pos?new fn(o.pos,i.pos,l):void 0},En.prototype.findFittable=function(){for(var t=1;t<=2;t++)for(var e=this.unplaced.openStart;e>=0;e--)for(var n=void 0,o=(e?(n=Ln(this.unplaced.content,e-1).firstChild).content:this.unplaced.content).firstChild,i=this.depth;i>=0;i--){var r=this.frontier[i],s=r.type,a=r.match,l=void 0,c=void 0;if(1==t&&(o?a.matchType(o.type)||(c=a.fillBefore(Zt.from(o),!1)):s.compatibleContent(n.type)))return{sliceDepth:e,frontierDepth:i,parent:n,inject:c};if(2==t&&o&&(l=a.findWrapping(o.type)))return{sliceDepth:e,frontierDepth:i,parent:n,wrap:l};if(n&&a.matchType(n.type))break}},En.prototype.openMore=function(){var t=this.unplaced,e=t.content,n=t.openStart,o=t.openEnd,i=Ln(e,n);return!(!i.childCount||i.firstChild.isLeaf)&&(this.unplaced=new Kt(e,n+1,Math.max(o,i.size+n>=e.size-o?n+1:0)),!0)},En.prototype.dropNode=function(){var t=this.unplaced,e=t.content,n=t.openStart,o=t.openEnd,i=Ln(e,n);if(i.childCount<=1&&n>0){var r=e.size-n<=n+i.size;this.unplaced=new Kt(Nn(e,n-1,1),n-1,r?n-1:o)}else this.unplaced=new Kt(Nn(e,n,1),n,o)},En.prototype.placeNodes=function(t){for(var e=t.sliceDepth,n=t.frontierDepth,o=t.parent,i=t.inject,r=t.wrap;this.depth>n;)this.closeFrontierNode();if(r)for(var s=0;s<r.length;s++)this.openFrontierNode(r[s]);var a=this.unplaced,l=o?o.content:a.content,c=a.openStart-e,u=0,p=[],h=this.frontier[n],d=h.match,f=h.type;if(i){for(var m=0;m<i.childCount;m++)p.push(i.child(m));d=d.matchFragment(i)}for(var v=l.size+e-(a.content.size-a.openEnd);u<l.childCount;){var g=l.child(u),y=d.matchType(g.type);if(!y)break;(++u>1||0==c||g.content.size)&&(d=y,p.push(In(g.mark(f.allowedMarks(g.marks)),1==u?c:0,u==l.childCount?v:-1)))}var b=u==l.childCount;b||(v=-1),this.placed=Pn(this.placed,n,Zt.from(p)),this.frontier[n].match=d,b&&v<0&&o&&o.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var _=0,w=l;_<v;_++){var x=w.lastChild;this.frontier.push({type:x.type,match:x.contentMatchAt(x.childCount)}),w=x.content}this.unplaced=b?0==e?Kt.empty:new Kt(Nn(a.content,e-1,1),e-1,v<0?a.openEnd:e-1):new Kt(Nn(a.content,e,u),a.openStart,a.openEnd)},En.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var t,e=this.frontier[this.depth];if(!e.type.isTextblock||!Dn(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;for(var n=this.$to.depth,o=this.$to.after(n);n>1&&o==this.$to.end(--n);)++o;return o},En.prototype.findCloseLevel=function(t){t:for(var e=Math.min(this.depth,t.depth);e>=0;e--){var n=this.frontier[e],o=n.match,i=n.type,r=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),s=Dn(t,e,i,o,r);if(s){for(var a=e-1;a>=0;a--){var l=this.frontier[a],c=l.match,u=Dn(t,a,l.type,c,!0);if(!u||u.childCount)continue t}return{depth:e,fit:s,move:r?t.doc.resolve(t.after(e+1)):t}}}},En.prototype.close=function(t){var e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=Pn(this.placed,e.depth,e.fit)),t=e.move;for(var n=e.depth+1;n<=t.depth;n++){var o=t.node(n),i=o.type.contentMatch.fillBefore(o.content,!0,t.index(n));this.openFrontierNode(o.type,o.attrs,i)}return t},En.prototype.openFrontierNode=function(t,e,n){var o=this.frontier[this.depth];o.match=o.match.matchType(t),this.placed=Pn(this.placed,this.depth,Zt.from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})},En.prototype.closeFrontierNode=function(){var t=this.frontier.pop().match.fillBefore(Zt.empty,!0);t.childCount&&(this.placed=Pn(this.placed,this.frontier.length,t))},Object.defineProperties(En.prototype,An),ln.prototype.replaceRange=function(t,e,n){if(!n.size)return this.deleteRange(t,e);var o=this.doc.resolve(t),i=this.doc.resolve(e);if(Mn(o,i,n))return this.step(new fn(t,e,n));var r=zn(o,this.doc.resolve(e));0==r[r.length-1]&&r.pop();var s=-(o.depth+1);r.unshift(s);for(var a=o.depth,l=o.pos-1;a>0;a--,l--){var c=o.node(a).type.spec;if(c.defining||c.isolating)break;r.indexOf(a)>-1?s=a:o.before(a)==l&&r.splice(1,0,-a)}for(var u=r.indexOf(s),p=[],h=n.openStart,d=n.content,f=0;;f++){var m=d.firstChild;if(p.push(m),f==n.openStart)break;d=m.content}h>0&&p[h-1].type.spec.defining&&o.node(u).type!=p[h-1].type?h-=1:h>=2&&p[h-1].isTextblock&&p[h-2].type.spec.defining&&o.node(u).type!=p[h-2].type&&(h-=2);for(var v=n.openStart;v>=0;v--){var g=(v+h+1)%(n.openStart+1),y=p[g];if(y)for(var b=0;b<r.length;b++){var _=r[(b+u)%r.length],w=!0;_<0&&(w=!1,_=-_);var x=o.node(_-1),S=o.index(_-1);if(x.canReplaceWith(S,S,y.type,y.marks))return this.replace(o.before(_),w?i.after(_):e,new Kt(Rn(n.content,0,n.openStart,g),g,n.openEnd))}}for(var k=this.steps.length,C=r.length-1;C>=0&&(this.replace(t,e,n),!(this.steps.length>k));C--){var O=r[C];O<0||(t=o.before(O),e=i.after(O))}return this},ln.prototype.replaceRangeWith=function(t,e,n){if(!n.isInline&&t==e&&this.doc.resolve(t).parent.content.size){var o=function(t,e,n){var o=t.resolve(e);if(o.parent.canReplaceWith(o.index(),o.index(),n))return e;if(0==o.parentOffset)for(var i=o.depth-1;i>=0;i--){var r=o.index(i);if(o.node(i).canReplaceWith(r,r,n))return o.before(i+1);if(r>0)return null}if(o.parentOffset==o.parent.content.size)for(var s=o.depth-1;s>=0;s--){var a=o.indexAfter(s);if(o.node(s).canReplaceWith(a,a,n))return o.after(s+1);if(a<o.node(s).childCount)return null}}(this.doc,t,n.type);null!=o&&(t=e=o)}return this.replaceRange(t,e,new Kt(Zt.from(n),0,0))},ln.prototype.deleteRange=function(t,e){for(var n=this.doc.resolve(t),o=this.doc.resolve(e),i=zn(n,o),r=0;r<i.length;r++){var s=i[r],a=r==i.length-1;if(a&&0==s||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),o.end(s));if(s>0&&(a||n.node(s-1).canReplace(n.index(s-1),o.indexAfter(s-1))))return this.delete(n.before(s),o.after(s))}for(var l=1;l<=n.depth&&l<=o.depth;l++)if(t-n.start(l)==n.depth-l&&e>n.end(l)&&o.end(l)-e!=o.depth-l)return this.delete(n.before(l),e);return this.delete(t,e)};var Bn=Object.create(null),$n=function(t,e,n){this.ranges=n||[new Vn(t.min(e),t.max(e))],this.$anchor=t,this.$head=e},jn={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};jn.anchor.get=function(){return this.$anchor.pos},jn.head.get=function(){return this.$head.pos},jn.from.get=function(){return this.$from.pos},jn.to.get=function(){return this.$to.pos},jn.$from.get=function(){return this.ranges[0].$from},jn.$to.get=function(){return this.ranges[0].$to},jn.empty.get=function(){for(var t=this.ranges,e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0},$n.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},$n.prototype.replace=function(t,e){void 0===e&&(e=Kt.empty);for(var n=e.content.lastChild,o=null,i=0;i<e.openEnd;i++)o=n,n=n.lastChild;for(var r=t.steps.length,s=this.ranges,a=0;a<s.length;a++){var l=s[a],c=l.$from,u=l.$to,p=t.mapping.slice(r);t.replaceRange(p.map(c.pos),p.map(u.pos),a?Kt.empty:e),0==a&&Kn(t,r,(n?n.isInline:o&&o.isTextblock)?-1:1)}},$n.prototype.replaceWith=function(t,e){for(var n=t.steps.length,o=this.ranges,i=0;i<o.length;i++){var r=o[i],s=r.$from,a=r.$to,l=t.mapping.slice(n),c=l.map(s.pos),u=l.map(a.pos);i?t.deleteRange(c,u):(t.replaceRangeWith(c,u,e),Kn(t,n,e.isInline?-1:1))}},$n.findFrom=function(t,e,n){var o=t.parent.inlineContent?new Zn(t):Jn(t.node(0),t.parent,t.pos,t.index(),e,n);if(o)return o;for(var i=t.depth-1;i>=0;i--){var r=e<0?Jn(t.node(0),t.node(i),t.before(i+1),t.index(i),e,n):Jn(t.node(0),t.node(i),t.after(i+1),t.index(i)+1,e,n);if(r)return r}},$n.near=function(t,e){return void 0===e&&(e=1),this.findFrom(t,e)||this.findFrom(t,-e)||new Un(t.node(0))},$n.atStart=function(t){return Jn(t,t,0,0,1)||new Un(t)},$n.atEnd=function(t){return Jn(t,t,t.content.size,t.childCount,-1)||new Un(t)},$n.fromJSON=function(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=Bn[e.type];if(!n)throw new RangeError("No selection type "+e.type+" defined");return n.fromJSON(t,e)},$n.jsonID=function(t,e){if(t in Bn)throw new RangeError("Duplicate use of selection JSON ID "+t);return Bn[t]=e,e.prototype.jsonID=t,e},$n.prototype.getBookmark=function(){return Zn.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties($n.prototype,jn),$n.prototype.visible=!0;var Vn=function(t,e){this.$from=t,this.$to=e},Zn=function(t){function e(e,n){void 0===n&&(n=e),t.call(this,e,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={$cursor:{configurable:!0}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},e.prototype.map=function(n,o){var i=n.resolve(o.map(this.head));if(!i.parent.inlineContent)return t.near(i);var r=n.resolve(o.map(this.anchor));return new e(r.parent.inlineContent?r:i,i)},e.prototype.replace=function(e,n){if(void 0===n&&(n=Kt.empty),t.prototype.replace.call(this,e,n),n==Kt.empty){var o=this.$from.marksAcross(this.$to);o&&e.ensureMarks(o)}},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor&&t.head==this.head},e.prototype.getBookmark=function(){return new Fn(this.anchor,this.head)},e.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},e.fromJSON=function(t,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new e(t.resolve(n.anchor),t.resolve(n.head))},e.create=function(t,e,n){void 0===n&&(n=e);var o=t.resolve(e);return new this(o,n==e?o:t.resolve(n))},e.between=function(n,o,i){var r=n.pos-o.pos;if(i&&!r||(i=r>=0?1:-1),!o.parent.inlineContent){var s=t.findFrom(o,i,!0)||t.findFrom(o,-i,!0);if(!s)return t.near(o,i);o=s.$head}return n.parent.inlineContent||(0==r||(n=(t.findFrom(n,-i,!0)||t.findFrom(n,i,!0)).$anchor).pos<o.pos!=r<0)&&(n=o),new e(n,o)},Object.defineProperties(e.prototype,n),e}($n);$n.jsonID("text",Zn);var Fn=function(t,e){this.anchor=t,this.head=e};Fn.prototype.map=function(t){return new Fn(t.map(this.anchor),t.map(this.head))},Fn.prototype.resolve=function(t){return Zn.between(t.resolve(this.anchor),t.resolve(this.head))};var Hn=function(t){function e(e){var n=e.nodeAfter,o=e.node(0).resolve(e.pos+n.nodeSize);t.call(this,e,o),this.node=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(n,o){var i=o.mapResult(this.anchor),r=i.deleted,s=i.pos,a=n.resolve(s);return r?t.near(a):new e(a)},e.prototype.content=function(){return new Kt(Zt.from(this.node),0,0)},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor},e.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},e.prototype.getBookmark=function(){return new Wn(this.anchor)},e.fromJSON=function(t,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new e(t.resolve(n.anchor))},e.create=function(t,e){return new this(t.resolve(e))},e.isSelectable=function(t){return!t.isText&&!1!==t.type.spec.selectable},e}($n);Hn.prototype.visible=!1,$n.jsonID("node",Hn);var Wn=function(t){this.anchor=t};Wn.prototype.map=function(t){var e=t.mapResult(this.anchor),n=e.deleted,o=e.pos;return n?new Fn(o,o):new Wn(o)},Wn.prototype.resolve=function(t){var e=t.resolve(this.anchor),n=e.nodeAfter;return n&&Hn.isSelectable(n)?new Hn(e):$n.near(e)};var Un=function(t){function e(e){t.call(this,e.resolve(0),e.resolve(e.content.size))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.replace=function(e,n){if(void 0===n&&(n=Kt.empty),n==Kt.empty){e.delete(0,e.doc.content.size);var o=t.atStart(e.doc);o.eq(e.selection)||e.setSelection(o)}else t.prototype.replace.call(this,e,n)},e.prototype.toJSON=function(){return{type:"all"}},e.fromJSON=function(t){return new e(t)},e.prototype.map=function(t){return new e(t)},e.prototype.eq=function(t){return t instanceof e},e.prototype.getBookmark=function(){return qn},e}($n);$n.jsonID("all",Un);var qn={map:function(){return this},resolve:function(t){return new Un(t)}};function Jn(t,e,n,o,i,r){if(e.inlineContent)return Zn.create(t,n);for(var s=o-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){var a=e.child(s);if(a.isAtom){if(!r&&Hn.isSelectable(a))return Hn.create(t,n-(i<0?a.nodeSize:0))}else{var l=Jn(t,a,n+i,i<0?a.childCount:0,i,r);if(l)return l}n+=a.nodeSize*i}}function Kn(t,e,n){var o=t.steps.length-1;if(!(o<e)){var i,r=t.steps[o];if(r instanceof fn||r instanceof mn)t.mapping.maps[o].forEach((function(t,e,n,o){null==i&&(i=o)})),t.setSelection($n.near(t.doc.resolve(i),n))}}var Gn=function(t){function e(e){t.call(this,e.doc),this.time=Date.now(),this.curSelection=e.selection,this.curSelectionFor=0,this.storedMarks=e.storedMarks,this.updated=0,this.meta=Object.create(null)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},e.prototype.setSelection=function(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},n.selectionSet.get=function(){return(1&this.updated)>0},e.prototype.setStoredMarks=function(t){return this.storedMarks=t,this.updated|=2,this},e.prototype.ensureMarks=function(t){return qt.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this},e.prototype.addStoredMark=function(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))},e.prototype.removeStoredMark=function(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(2&this.updated)>0},e.prototype.addStep=function(e,n){t.prototype.addStep.call(this,e,n),this.updated=-3&this.updated,this.storedMarks=null},e.prototype.setTime=function(t){return this.time=t,this},e.prototype.replaceSelection=function(t){return this.selection.replace(this,t),this},e.prototype.replaceSelectionWith=function(t,e){var n=this.selection;return!1!==e&&(t=t.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||qt.none))),n.replaceWith(this,t),this},e.prototype.deleteSelection=function(){return this.selection.replace(this),this},e.prototype.insertText=function(t,e,n){void 0===n&&(n=e);var o=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(o.text(t),!0):this.deleteSelection();if(!t)return this.deleteRange(e,n);var i=this.storedMarks;if(!i){var r=this.doc.resolve(e);i=n==e?r.marks():r.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(e,n,o.text(t,i)),this.selection.empty||this.setSelection($n.near(this.selection.$to)),this},e.prototype.setMeta=function(t,e){return this.meta["string"==typeof t?t:t.key]=e,this},e.prototype.getMeta=function(t){return this.meta["string"==typeof t?t:t.key]},n.isGeneric.get=function(){for(var t in this.meta)return!1;return!0},e.prototype.scrollIntoView=function(){return this.updated|=4,this},n.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(e.prototype,n),e}(ln);function Xn(t,e){return e&&t?t.bind(e):t}var Yn=function(t,e,n){this.name=t,this.init=Xn(e.init,n),this.apply=Xn(e.apply,n)},Qn=[new Yn("doc",{init:function(t){return t.doc||t.schema.topNodeType.createAndFill()},apply:function(t){return t.doc}}),new Yn("selection",{init:function(t,e){return t.selection||$n.atStart(e.doc)},apply:function(t){return t.selection}}),new Yn("storedMarks",{init:function(t){return t.storedMarks||null},apply:function(t,e,n,o){return o.selection.$cursor?t.storedMarks:null}}),new Yn("scrollToSelection",{init:function(){return 0},apply:function(t,e){return t.scrolledIntoView?e+1:e}})],to=function(t,e){var n=this;this.schema=t,this.fields=Qn.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),e&&e.forEach((function(t){if(n.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");n.plugins.push(t),n.pluginsByKey[t.key]=t,t.spec.state&&n.fields.push(new Yn(t.key,t.spec.state,t))}))},eo=function(t){this.config=t},no={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};no.schema.get=function(){return this.config.schema},no.plugins.get=function(){return this.config.plugins},eo.prototype.apply=function(t){return this.applyTransaction(t).state},eo.prototype.filterTransaction=function(t,e){void 0===e&&(e=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=e){var o=this.config.plugins[n];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,t,this))return!1}return!0},eo.prototype.applyTransaction=function(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};for(var e=[t],n=this.applyInner(t),o=null;;){for(var i=!1,r=0;r<this.config.plugins.length;r++){var s=this.config.plugins[r];if(s.spec.appendTransaction){var a=o?o[r].n:0,l=o?o[r].state:this,c=a<e.length&&s.spec.appendTransaction.call(s,a?e.slice(a):e,l,n);if(c&&n.filterTransaction(c,r)){if(c.setMeta("appendedTransaction",t),!o){o=[];for(var u=0;u<this.config.plugins.length;u++)o.push(u<r?{state:n,n:e.length}:{state:this,n:0})}e.push(c),n=n.applyInner(c),i=!0}o&&(o[r]={state:n,n:e.length})}}if(!i)return{state:n,transactions:e}}},eo.prototype.applyInner=function(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var e=new eo(this.config),n=this.config.fields,o=0;o<n.length;o++){var i=n[o];e[i.name]=i.apply(t,this[i.name],this,e)}for(var r=0;r<oo.length;r++)oo[r](this,t,e);return e},no.tr.get=function(){return new Gn(this)},eo.create=function(t){for(var e=new to(t.doc?t.doc.type.schema:t.schema,t.plugins),n=new eo(e),o=0;o<e.fields.length;o++)n[e.fields[o].name]=e.fields[o].init(t,n);return n},eo.prototype.reconfigure=function(t){for(var e=new to(this.schema,t.plugins),n=e.fields,o=new eo(e),i=0;i<n.length;i++){var r=n[i].name;o[r]=this.hasOwnProperty(r)?this[r]:n[i].init(t,o)}return o},eo.prototype.toJSON=function(t){var e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map((function(t){return t.toJSON()}))),t&&"object"==typeof t)for(var n in t){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var o=t[n],i=o.spec.state;i&&i.toJSON&&(e[n]=i.toJSON.call(o,this[o.key]))}return e},eo.fromJSON=function(t,e,n){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");var o=new to(t.schema,t.plugins),i=new eo(o);return o.fields.forEach((function(o){if("doc"==o.name)i.doc=ve.fromJSON(t.schema,e.doc);else if("selection"==o.name)i.selection=$n.fromJSON(i.doc,e.selection);else if("storedMarks"==o.name)e.storedMarks&&(i.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(n)for(var r in n){var s=n[r],a=s.spec.state;if(s.key==o.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(e,r))return void(i[o.name]=a.fromJSON.call(s,t,e[r],i))}i[o.name]=o.init(t,i)}})),i},eo.addApplyListener=function(t){oo.push(t)},eo.removeApplyListener=function(t){var e=oo.indexOf(t);e>-1&&oo.splice(e,1)},Object.defineProperties(eo.prototype,no);var oo=[];function io(t,e,n){for(var o in t){var i=t[o];i instanceof Function?i=i.bind(e):"handleDOMEvents"==o&&(i=io(i,e,{})),n[o]=i}return n}var ro=function(t){this.props={},t.props&&io(t.props,this,this.props),this.spec=t,this.key=t.key?t.key.key:ao("plugin")};ro.prototype.getState=function(t){return t[this.key]};var so=Object.create(null);function ao(t){return t in so?t+"$"+ ++so[t]:(so[t]=0,t+"$")}var lo=function(t){void 0===t&&(t="key"),this.key=ao(t)};lo.prototype.get=function(t){return t.config.pluginsByKey[this.key]},lo.prototype.getState=function(t){return t[this.key]};var co={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var uo=/Edge\/(\d+)/.exec(navigator.userAgent),po=/MSIE \d/.test(navigator.userAgent),ho=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),fo=co.ie=!!(po||ho||uo);co.ie_version=po?document.documentMode||6:ho?+ho[1]:uo?+uo[1]:null,co.gecko=!fo&&/gecko\/(\d+)/i.test(navigator.userAgent),co.gecko_version=co.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var mo=!fo&&/Chrome\/(\d+)/.exec(navigator.userAgent);co.chrome=!!mo,co.chrome_version=mo&&+mo[1],co.safari=!fo&&/Apple Computer/.test(navigator.vendor),co.ios=co.safari&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),co.mac=co.ios||/Mac/.test(navigator.platform),co.android=/Android \d/.test(navigator.userAgent),co.webkit="webkitFontSmoothing"in document.documentElement.style,co.webkit_version=co.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var vo=function(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e},go=function(t){var e=t.assignedSlot||t.parentNode;return e&&11==e.nodeType?e.host:e},yo=null,bo=function(t,e,n){var o=yo||(yo=document.createRange());return o.setEnd(t,null==n?t.nodeValue.length:n),o.setStart(t,e||0),o},_o=function(t,e,n,o){return n&&(xo(t,e,n,o,-1)||xo(t,e,n,o,1))},wo=/^(img|br|input|textarea|hr)$/i;function xo(t,e,n,o,i){for(;;){if(t==n&&e==o)return!0;if(e==(i<0?0:So(t))){var r=t.parentNode;if(1!=r.nodeType||ko(t)||wo.test(t.nodeName)||"false"==t.contentEditable)return!1;e=vo(t)+(i<0?0:1),t=r}else{if(1!=t.nodeType)return!1;if("false"==(t=t.childNodes[e+(i<0?-1:0)]).contentEditable)return!1;e=i<0?So(t):0}}}function So(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function ko(t){for(var e,n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}var Co=function(t){var e=t.isCollapsed;return e&&co.chrome&&t.rangeCount&&!t.getRangeAt(0).collapsed&&(e=!1),e};function Oo(t,e){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function To(t){return{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Mo(t,e){return"number"==typeof t?t:t[e]}function Eo(t){var e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,o=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*o}}function Ao(t,e,n){for(var o=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,r=t.dom.ownerDocument,s=n||t.dom;s;s=go(s))if(1==s.nodeType){var a=s==r.body||1!=s.nodeType,l=a?To(r):Eo(s),c=0,u=0;if(e.top<l.top+Mo(o,"top")?u=-(l.top-e.top+Mo(i,"top")):e.bottom>l.bottom-Mo(o,"bottom")&&(u=e.bottom-l.bottom+Mo(i,"bottom")),e.left<l.left+Mo(o,"left")?c=-(l.left-e.left+Mo(i,"left")):e.right>l.right-Mo(o,"right")&&(c=e.right-l.right+Mo(i,"right")),c||u)if(a)r.defaultView.scrollBy(c,u);else{var p=s.scrollLeft,h=s.scrollTop;u&&(s.scrollTop+=u),c&&(s.scrollLeft+=c);var d=s.scrollLeft-p,f=s.scrollTop-h;e={left:e.left-d,top:e.top-f,right:e.right-d,bottom:e.bottom-f}}if(a)break}}function No(t){for(var e=[],n=t.ownerDocument;t&&(e.push({dom:t,top:t.scrollTop,left:t.scrollLeft}),t!=n);t=go(t));return e}function Po(t,e){for(var n=0;n<t.length;n++){var o=t[n],i=o.dom,r=o.top,s=o.left;i.scrollTop!=r+e&&(i.scrollTop=r+e),i.scrollLeft!=s&&(i.scrollLeft=s)}}var Lo=null;function Io(t,e){for(var n,o,i=2e8,r=0,s=e.top,a=e.top,l=t.firstChild,c=0;l;l=l.nextSibling,c++){var u=void 0;if(1==l.nodeType)u=l.getClientRects();else{if(3!=l.nodeType)continue;u=bo(l).getClientRects()}for(var p=0;p<u.length;p++){var h=u[p];if(h.top<=s&&h.bottom>=a){s=Math.max(h.bottom,s),a=Math.min(h.top,a);var d=h.left>e.left?h.left-e.left:h.right<e.left?e.left-h.right:0;if(d<i){n=l,i=d,o=d&&3==n.nodeType?{left:h.right<e.left?h.right:h.left,top:e.top}:e,1==l.nodeType&&d&&(r=c+(e.left>=(h.left+h.right)/2?1:0));continue}}!n&&(e.left>=h.right&&e.top>=h.top||e.left>=h.left&&e.top>=h.bottom)&&(r=c+1)}}return n&&3==n.nodeType?function(t,e){for(var n=t.nodeValue.length,o=document.createRange(),i=0;i<n;i++){o.setEnd(t,i+1),o.setStart(t,i);var r=Bo(o,1);if(r.top!=r.bottom&&Do(e,r))return{node:t,offset:i+(e.left>=(r.left+r.right)/2?1:0)}}return{node:t,offset:0}}(n,o):!n||i&&1==n.nodeType?{node:t,offset:r}:Io(n,o)}function Do(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function Ro(t,e,n){var o=t.childNodes.length;if(o&&n.top<n.bottom)for(var i=Math.max(0,Math.min(o-1,Math.floor(o*(e.top-n.top)/(n.bottom-n.top))-2)),r=i;;){var s=t.childNodes[r];if(1==s.nodeType)for(var a=s.getClientRects(),l=0;l<a.length;l++){var c=a[l];if(Do(e,c))return Ro(s,e,c)}if((r=(r+1)%o)==i)break}return t}function zo(t,e){var n,o,i,r,s=t.dom.ownerDocument;if(s.caretPositionFromPoint)try{var a=s.caretPositionFromPoint(e.left,e.top);a&&(i=(n=a).offsetNode,r=n.offset)}catch(t){}if(!i&&s.caretRangeFromPoint){var l=s.caretRangeFromPoint(e.left,e.top);l&&(i=(o=l).startContainer,r=o.startOffset)}var c,u=(t.root.elementFromPoint?t.root:s).elementFromPoint(e.left,e.top+1);if(!u||!t.dom.contains(1!=u.nodeType?u.parentNode:u)){var p=t.dom.getBoundingClientRect();if(!Do(e,p))return null;if(!(u=Ro(t.dom,e,p)))return null}if(co.safari)for(var h=u;i&&h;h=go(h))h.draggable&&(i=r=null);if(u=function(t,e){var n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}(u,e),i){if(co.gecko&&1==i.nodeType&&(r=Math.min(r,i.childNodes.length))<i.childNodes.length){var d,f=i.childNodes[r];"IMG"==f.nodeName&&(d=f.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&r++}i==t.dom&&r==i.childNodes.length-1&&1==i.lastChild.nodeType&&e.top>i.lastChild.getBoundingClientRect().bottom?c=t.state.doc.content.size:0!=r&&1==i.nodeType&&"BR"==i.childNodes[r-1].nodeName||(c=function(t,e,n,o){for(var i=-1,r=e;r!=t.dom;){var s=t.docView.nearestDesc(r,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>o.left||a.top>o.top)i=s.posBefore;else{if(!(a.right<o.left||a.bottom<o.top))break;i=s.posAfter}}r=s.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n)}(t,i,r,e))}null==c&&(c=function(t,e,n){var o=Io(e,n),i=o.node,r=o.offset,s=-1;if(1==i.nodeType&&!i.firstChild){var a=i.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return t.docView.posFromDOM(i,r,s)}(t,u,e));var m=t.docView.nearestDesc(u,!0);return{pos:c,inside:m?m.posAtStart-m.border:-1}}function Bo(t,e){var n=t.getClientRects();return n.length?n[e<0?0:n.length-1]:t.getBoundingClientRect()}var $o=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function jo(t,e,n){var o=t.docView.domFromPos(e,n<0?-1:1),i=o.node,r=o.offset,s=co.webkit||co.gecko;if(3==i.nodeType){if(!s||!$o.test(i.nodeValue)&&(n<0?r:r!=i.nodeValue.length)){var a=r,l=r,c=n<0?1:-1;return n<0&&!r?(l++,c=-1):n>=0&&r==i.nodeValue.length?(a--,c=1):n<0?a--:l++,Vo(Bo(bo(i,a,l),c),c<0)}var u=Bo(bo(i,r,r),n);if(co.gecko&&r&&/\s/.test(i.nodeValue[r-1])&&r<i.nodeValue.length){var p=Bo(bo(i,r-1,r-1),-1);if(p.top==u.top){var h=Bo(bo(i,r,r+1),-1);if(h.top!=u.top)return Vo(h,h.left<p.left)}}return u}if(!t.state.doc.resolve(e).parent.inlineContent){if(r&&(n<0||r==So(i))){var d=i.childNodes[r-1];if(1==d.nodeType)return Zo(d.getBoundingClientRect(),!1)}if(r<So(i)){var f=i.childNodes[r];if(1==f.nodeType)return Zo(f.getBoundingClientRect(),!0)}return Zo(i.getBoundingClientRect(),n>=0)}if(r&&(n<0||r==So(i))){var m=i.childNodes[r-1],v=3==m.nodeType?bo(m,So(m)-(s?0:1)):1!=m.nodeType||"BR"==m.nodeName&&m.nextSibling?null:m;if(v)return Vo(Bo(v,1),!1)}if(r<So(i)){for(var g=i.childNodes[r];g.pmViewDesc&&g.pmViewDesc.ignoreForCoords;)g=g.nextSibling;var y=g?3==g.nodeType?bo(g,0,s?0:1):1==g.nodeType?g:null:null;if(y)return Vo(Bo(y,-1),!0)}return Vo(Bo(3==i.nodeType?bo(i):i,-n),n>=0)}function Vo(t,e){if(0==t.width)return t;var n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Zo(t,e){if(0==t.height)return t;var n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function Fo(t,e,n){var o=t.state,i=t.root.activeElement;o!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{o!=e&&t.updateState(o),i!=t.dom&&i&&i.focus()}}var Ho=/[\u0590-\u08ac]/;var Wo=null,Uo=null,qo=!1;function Jo(t,e,n){return Wo==e&&Uo==n?qo:(Wo=e,Uo=n,qo="up"==n||"down"==n?function(t,e,n){var o=e.selection,i="up"==n?o.$from:o.$to;return Fo(t,e,(function(){for(var e=t.docView.domFromPos(i.pos,"up"==n?-1:1).node;;){var o=t.docView.nearestDesc(e,!0);if(!o)break;if(o.node.isBlock){e=o.dom;break}e=o.dom.parentNode}for(var r=jo(t,i.pos,1),s=e.firstChild;s;s=s.nextSibling){var a=void 0;if(1==s.nodeType)a=s.getClientRects();else{if(3!=s.nodeType)continue;a=bo(s,0,s.nodeValue.length).getClientRects()}for(var l=0;l<a.length;l++){var c=a[l];if(c.bottom>c.top+1&&("up"==n?r.top-c.top>2*(c.bottom-r.top):c.bottom-r.bottom>2*(r.bottom-c.top)))return!1}}return!0}))}(t,e,n):function(t,e,n){var o=e.selection.$head;if(!o.parent.isTextblock)return!1;var i=o.parentOffset,r=!i,s=i==o.parent.content.size,a=t.root.getSelection();return Ho.test(o.parent.textContent)&&a.modify?Fo(t,e,(function(){var e=a.getRangeAt(0),i=a.focusNode,r=a.focusOffset,s=a.caretBidiLevel;a.modify("move",n,"character");var l=!(o.depth?t.docView.domAfterPos(o.before()):t.dom).contains(1==a.focusNode.nodeType?a.focusNode:a.focusNode.parentNode)||i==a.focusNode&&r==a.focusOffset;return a.removeAllRanges(),a.addRange(e),null!=s&&(a.caretBidiLevel=s),l})):"left"==n||"backward"==n?r:s}(t,e,n))}var Ko=function(t,e,n,o){this.parent=t,this.children=e,this.dom=n,n.pmViewDesc=this,this.contentDOM=o,this.dirty=0},Go={size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0},domAtom:{configurable:!0},ignoreForCoords:{configurable:!0}};Ko.prototype.matchesWidget=function(){return!1},Ko.prototype.matchesMark=function(){return!1},Ko.prototype.matchesNode=function(){return!1},Ko.prototype.matchesHack=function(t){return!1},Ko.prototype.parseRule=function(){return null},Ko.prototype.stopEvent=function(){return!1},Go.size.get=function(){for(var t=0,e=0;e<this.children.length;e++)t+=this.children[e].size;return t},Go.border.get=function(){return 0},Ko.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var t=0;t<this.children.length;t++)this.children[t].destroy()},Ko.prototype.posBeforeChild=function(t){for(var e=0,n=this.posAtStart;e<this.children.length;e++){var o=this.children[e];if(o==t)return n;n+=o.size}},Go.posBefore.get=function(){return this.parent.posBeforeChild(this)},Go.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},Go.posAfter.get=function(){return this.posBefore+this.size},Go.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},Ko.prototype.localPosFromDOM=function(t,e,n){if(this.contentDOM&&this.contentDOM.contains(1==t.nodeType?t:t.parentNode)){if(n<0){var o,i;if(t==this.contentDOM)o=t.childNodes[e-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;o=t.previousSibling}for(;o&&(!(i=o.pmViewDesc)||i.parent!=this);)o=o.previousSibling;return o?this.posBeforeChild(i)+i.size:this.posAtStart}var r,s;if(t==this.contentDOM)r=t.childNodes[e];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;r=t.nextSibling}for(;r&&(!(s=r.pmViewDesc)||s.parent!=this);)r=r.nextSibling;return r?this.posBeforeChild(s):this.posAtEnd}var a;if(t==this.dom&&this.contentDOM)a=e>vo(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=2&t.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==e)for(var l=t;;l=l.parentNode){if(l==this.dom){a=!1;break}if(l.parentNode.firstChild!=l)break}if(null==a&&e==t.childNodes.length)for(var c=t;;c=c.parentNode){if(c==this.dom){a=!0;break}if(c.parentNode.lastChild!=c)break}}return(null==a?n>0:a)?this.posAtEnd:this.posAtStart},Ko.prototype.nearestDesc=function(t,e){for(var n=!0,o=t;o;o=o.parentNode){var i=this.getDesc(o);if(i&&(!e||i.node)){if(!n||!i.nodeDOM||(1==i.nodeDOM.nodeType?i.nodeDOM.contains(1==t.nodeType?t:t.parentNode):i.nodeDOM==t))return i;n=!1}}},Ko.prototype.getDesc=function(t){for(var e=t.pmViewDesc,n=e;n;n=n.parent)if(n==this)return e},Ko.prototype.posFromDOM=function(t,e,n){for(var o=t;o;o=o.parentNode){var i=this.getDesc(o);if(i)return i.localPosFromDOM(t,e,n)}return-1},Ko.prototype.descAt=function(t){for(var e=0,n=0;e<this.children.length;e++){var o=this.children[e],i=n+o.size;if(n==t&&i!=n){for(;!o.border&&o.children.length;)o=o.children[0];return o}if(t<i)return o.descAt(t-n-o.border);n=i}},Ko.prototype.domFromPos=function(t,e){if(!this.contentDOM)return{node:this.dom,offset:0};for(var n=0,o=0,i=0;n<this.children.length;n++){var r=this.children[n],s=i+r.size;if(s>t||r instanceof ii){o=t-i;break}i=s}if(o)return this.children[n].domFromPos(o-this.children[n].border,e);for(var a=void 0;n&&!(a=this.children[n-1]).size&&a instanceof Yo&&a.widget.type.side>=0;n--);if(e<=0){for(var l,c=!0;(l=n?this.children[n-1]:null)&&l.dom.parentNode!=this.contentDOM;n--,c=!1);return l&&e&&c&&!l.border&&!l.domAtom?l.domFromPos(l.size,e):{node:this.contentDOM,offset:l?vo(l.dom)+1:0}}for(var u,p=!0;(u=n<this.children.length?this.children[n]:null)&&u.dom.parentNode!=this.contentDOM;n++,p=!1);return u&&p&&!u.border&&!u.domAtom?u.domFromPos(0,e):{node:this.contentDOM,offset:u?vo(u.dom):this.contentDOM.childNodes.length}},Ko.prototype.parseRange=function(t,e,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var o=-1,i=-1,r=n,s=0;;s++){var a=this.children[s],l=r+a.size;if(-1==o&&t<=l){var c=r+a.border;if(t>=c&&e<=l-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(t,e,c);t=r;for(var u=s;u>0;u--){var p=this.children[u-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){o=vo(p.dom)+1;break}t-=p.size}-1==o&&(o=0)}if(o>-1&&(l>e||s==this.children.length-1)){e=l;for(var h=s+1;h<this.children.length;h++){var d=this.children[h];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){i=vo(d.dom);break}e+=d.size}-1==i&&(i=this.contentDOM.childNodes.length);break}r=l}return{node:this.contentDOM,from:t,to:e,fromOffset:o,toOffset:i}},Ko.prototype.emptyChildAt=function(t){if(this.border||!this.contentDOM||!this.children.length)return!1;var e=this.children[t<0?0:this.children.length-1];return 0==e.size||e.emptyChildAt(t)},Ko.prototype.domAfterPos=function(t){var e=this.domFromPos(t,0),n=e.node,o=e.offset;if(1!=n.nodeType||o==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[o]},Ko.prototype.setSelection=function(t,e,n,o){for(var i=Math.min(t,e),r=Math.max(t,e),s=0,a=0;s<this.children.length;s++){var l=this.children[s],c=a+l.size;if(i>a&&r<c)return l.setSelection(t-a-l.border,e-a-l.border,n,o);a=c}var u=this.domFromPos(t,t?-1:1),p=e==t?u:this.domFromPos(e,e?-1:1),h=n.getSelection(),d=!1;if((co.gecko||co.safari)&&t==e){var f=u.node,m=u.offset;if(3==f.nodeType){if((d=m&&"\n"==f.nodeValue[m-1])&&m==f.nodeValue.length)for(var v=f,g=void 0;v;v=v.parentNode){if(g=v.nextSibling){"BR"==g.nodeName&&(u=p={node:g.parentNode,offset:vo(g)+1});break}var y=v.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{var b=f.childNodes[m-1];d=b&&("BR"==b.nodeName||"false"==b.contentEditable)}}if(co.gecko&&h.focusNode&&h.focusNode!=p.node&&1==h.focusNode.nodeType){var _=h.focusNode.childNodes[h.focusOffset];_&&"false"==_.contentEditable&&(o=!0)}if(o||d&&co.safari||!_o(u.node,u.offset,h.anchorNode,h.anchorOffset)||!_o(p.node,p.offset,h.focusNode,h.focusOffset)){var w=!1;if((h.extend||t==e)&&!d){h.collapse(u.node,u.offset);try{t!=e&&h.extend(p.node,p.offset),w=!0}catch(t){if(!(t instanceof DOMException))throw t}}if(!w){if(t>e){var x=u;u=p,p=x}var S=document.createRange();S.setEnd(p.node,p.offset),S.setStart(u.node,u.offset),h.removeAllRanges(),h.addRange(S)}}},Ko.prototype.ignoreMutation=function(t){return!this.contentDOM&&"selection"!=t.type},Go.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},Ko.prototype.markDirty=function(t,e){for(var n=0,o=0;o<this.children.length;o++){var i=this.children[o],r=n+i.size;if(n==r?t<=r&&e>=n:t<r&&e>n){var s=n+i.border,a=r-i.border;if(t>=s&&e<=a)return this.dirty=t==n||e==r?2:1,void(t!=s||e!=a||!i.contentLost&&i.dom.parentNode==this.contentDOM?i.markDirty(t-s,e-s):i.dirty=3);i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM?2:3}n=r}this.dirty=2},Ko.prototype.markParentsDirty=function(){for(var t=1,e=this.parent;e;e=e.parent,t++){var n=1==t?2:1;e.dirty<n&&(e.dirty=n)}},Go.domAtom.get=function(){return!1},Go.ignoreForCoords.get=function(){return!1},Object.defineProperties(Ko.prototype,Go);var Xo=[],Yo=function(t){function e(e,n,o,i){var r,s=n.type.toDOM;if("function"==typeof s&&(s=s(o,(function(){return r?r.parent?r.parent.posBeforeChild(r):void 0:i}))),!n.type.spec.raw){if(1!=s.nodeType){var a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}t.call(this,e,Xo,s,null),this.widget=n,r=this}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={domAtom:{configurable:!0}};return e.prototype.matchesWidget=function(t){return 0==this.dirty&&t.type.eq(this.widget.type)},e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.stopEvent=function(t){var e=this.widget.spec.stopEvent;return!!e&&e(t)},e.prototype.ignoreMutation=function(t){return"selection"!=t.type||this.widget.spec.ignoreSelection},e.prototype.destroy=function(){this.widget.type.destroy(this.dom),t.prototype.destroy.call(this)},n.domAtom.get=function(){return!0},Object.defineProperties(e.prototype,n),e}(Ko),Qo=function(t){function e(e,n,o,i){t.call(this,e,Xo,n,null),this.textDOM=o,this.text=i}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={size:{configurable:!0}};return n.size.get=function(){return this.text.length},e.prototype.localPosFromDOM=function(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e},e.prototype.domFromPos=function(t){return{node:this.textDOM,offset:t}},e.prototype.ignoreMutation=function(t){return"characterData"===t.type&&t.target.nodeValue==t.oldValue},Object.defineProperties(e.prototype,n),e}(Ko),ti=function(t){function e(e,n,o,i){t.call(this,e,[],o,i),this.mark=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.create=function(t,n,o,i){var r=i.nodeViews[n.type.name],s=r&&r(n,i,o);return s&&s.dom||(s=Ye.renderSpec(document,n.type.spec.toDOM(n,o))),new e(t,n,s.dom,s.contentDOM||s.dom)},e.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},e.prototype.matchesMark=function(t){return 3!=this.dirty&&this.mark.eq(t)},e.prototype.markDirty=function(e,n){if(t.prototype.markDirty.call(this,e,n),0!=this.dirty){for(var o=this.parent;!o.node;)o=o.parent;o.dirty<this.dirty&&(o.dirty=this.dirty),this.dirty=0}},e.prototype.slice=function(t,n,o){var i=e.create(this.parent,this.mark,!0,o),r=this.children,s=this.size;n<s&&(r=gi(r,n,s,o)),t>0&&(r=gi(r,0,t,o));for(var a=0;a<r.length;a++)r[a].parent=i;return i.children=r,i},e}(Ko),ei=function(t){function e(e,n,o,i,r,s,a,l,c){t.call(this,e,n.isLeaf?Xo:[],r,s),this.nodeDOM=a,this.node=n,this.outerDeco=o,this.innerDeco=i,s&&this.updateChildren(l,c)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={size:{configurable:!0},border:{configurable:!0},domAtom:{configurable:!0}};return e.create=function(t,n,o,i,r,s){var a,l,c=r.nodeViews[n.type.name],u=c&&c(n,r,(function(){return l?l.parent?l.parent.posBeforeChild(l):void 0:s}),o,i),p=u&&u.dom,h=u&&u.contentDOM;if(n.isText)if(p){if(3!=p.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else p=document.createTextNode(n.text);else p||(p=(a=Ye.renderSpec(document,n.type.spec.toDOM(n))).dom,h=a.contentDOM);h||n.isText||"BR"==p.nodeName||(p.hasAttribute("contenteditable")||(p.contentEditable=!1),n.type.spec.draggable&&(p.draggable=!0));var d=p;return p=hi(p,o,n),u?l=new ri(t,n,o,i,p,h,d,u,r,s+1):n.isText?new oi(t,n,o,i,p,d,r):new e(t,n,o,i,p,h,d,r,s+1)},e.prototype.parseRule=function(){var t=this;if(this.node.type.spec.reparseInView)return null;var e={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(e.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?e.contentElement=this.contentDOM:e.getContent=function(){return t.contentDOM?Zt.empty:t.node.content},e},e.prototype.matchesNode=function(t,e,n){return 0==this.dirty&&t.eq(this.node)&&di(e,this.outerDeco)&&n.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},e.prototype.updateChildren=function(t,e){var n=this,o=this.node.inlineContent,i=e,r=t.composing&&this.localCompositionInfo(t,e),s=r&&r.pos>-1?r:null,a=r&&r.pos<0,l=new mi(this,s&&s.node);!function(t,e,n,o){var i=e.locals(t),r=0;if(0==i.length){for(var s=0;s<t.childCount;s++){var a=t.child(s);o(a,i,e.forChild(r,a),s),r+=a.nodeSize}return}for(var l=0,c=[],u=null,p=0;;){if(l<i.length&&i[l].to==r){for(var h=i[l++],d=void 0;l<i.length&&i[l].to==r;)(d||(d=[h])).push(i[l++]);if(d){d.sort(vi);for(var f=0;f<d.length;f++)n(d[f],p,!!u)}else n(h,p,!!u)}var m=void 0,v=void 0;if(u)v=-1,m=u,u=null;else{if(!(p<t.childCount))break;v=p,m=t.child(p++)}for(var g=0;g<c.length;g++)c[g].to<=r&&c.splice(g--,1);for(;l<i.length&&i[l].from<=r&&i[l].to>r;)c.push(i[l++]);var y=r+m.nodeSize;if(m.isText){var b=y;l<i.length&&i[l].from<b&&(b=i[l].from);for(var _=0;_<c.length;_++)c[_].to<b&&(b=c[_].to);b<y&&(u=m.cut(b-r),m=m.cut(0,b-r),y=b,v=-1)}o(m,c.length?m.isInline&&!m.isLeaf?c.filter((function(t){return!t.inline})):c.slice():Xo,e.forChild(r,m),v),r=y}}(this.node,this.innerDeco,(function(e,r,s){e.spec.marks?l.syncToMarks(e.spec.marks,o,t):e.type.side>=0&&!s&&l.syncToMarks(r==n.node.childCount?qt.none:n.node.child(r).marks,o,t),l.placeWidget(e,t,i)}),(function(e,n,s,c){var u;l.syncToMarks(e.marks,o,t),l.findNodeMatch(e,n,s,c)||a&&t.state.selection.from>i&&t.state.selection.to<i+e.nodeSize&&(u=l.findIndexWithChild(r.node))>-1&&l.updateNodeAt(e,n,s,u,t)||l.updateNextNode(e,n,s,t,c)||l.addNode(e,n,s,t,i),i+=e.nodeSize})),l.syncToMarks(Xo,o,t),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||2==this.dirty)&&(s&&this.protectLocalComposition(t,s),si(this.contentDOM,this.children,t),co.ios&&function(t){if("UL"==t.nodeName||"OL"==t.nodeName){var e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}(this.dom))},e.prototype.localCompositionInfo=function(t,e){var n=t.state.selection,o=n.from,i=n.to;if(!(!(t.state.selection instanceof Zn)||o<e||i>e+this.node.content.size)){var r=t.root.getSelection(),s=function(t,e){for(;;){if(3==t.nodeType)return t;if(1==t.nodeType&&e>0){if(t.childNodes.length>e&&3==t.childNodes[e].nodeType)return t.childNodes[e];e=So(t=t.childNodes[e-1])}else{if(!(1==t.nodeType&&e<t.childNodes.length))return null;t=t.childNodes[e],e=0}}}(r.focusNode,r.focusOffset);if(s&&this.dom.contains(s.parentNode)){if(this.node.inlineContent){var a=s.nodeValue,l=function(t,e,n,o){for(var i=0,r=0;i<t.childCount&&r<=o;){var s=t.child(i++),a=r;if(r+=s.nodeSize,s.isText){for(var l=s.text;i<t.childCount;){var c=t.child(i++);if(r+=c.nodeSize,!c.isText)break;l+=c.text}if(r>=n){var u=l.lastIndexOf(e,o-a);if(u>=0&&u+e.length+a>=n)return a+u}}}return-1}(this.node.content,a,o-e,i-e);return l<0?null:{node:s,pos:l,text:a}}return{node:s,pos:-1}}}},e.prototype.protectLocalComposition=function(t,e){var n=e.node,o=e.pos,i=e.text;if(!this.getDesc(n)){for(var r=n;r.parentNode!=this.contentDOM;r=r.parentNode){for(;r.previousSibling;)r.parentNode.removeChild(r.previousSibling);for(;r.nextSibling;)r.parentNode.removeChild(r.nextSibling);r.pmViewDesc&&(r.pmViewDesc=null)}var s=new Qo(this,r,n,i);t.compositionNodes.push(s),this.children=gi(this.children,o,o+i.length,t,s)}},e.prototype.update=function(t,e,n,o){return!(3==this.dirty||!t.sameMarkup(this.node))&&(this.updateInner(t,e,n,o),!0)},e.prototype.updateInner=function(t,e,n,o){this.updateOuterDeco(e),this.node=t,this.innerDeco=n,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=0},e.prototype.updateOuterDeco=function(t){if(!di(t,this.outerDeco)){var e=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=ui(this.dom,this.nodeDOM,ci(this.outerDeco,this.node,e),ci(t,this.node,e)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=t}},e.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},e.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},n.domAtom.get=function(){return this.node.isAtom},Object.defineProperties(e.prototype,n),e}(Ko);function ni(t,e,n,o,i){return hi(o,e,t),new ei(null,t,e,n,o,o,o,i,0)}var oi=function(t){function e(e,n,o,i,r,s,a){t.call(this,e,n,o,i,r,null,s,a)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={domAtom:{configurable:!0}};return e.prototype.parseRule=function(){for(var t=this.nodeDOM.parentNode;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}},e.prototype.update=function(t,e,n,o){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!t.sameMarkup(this.node))&&(this.updateOuterDeco(e),0==this.dirty&&t.text==this.node.text||t.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=t.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=t,this.dirty=0,!0)},e.prototype.inParent=function(){for(var t=this.parent.contentDOM,e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1},e.prototype.domFromPos=function(t){return{node:this.nodeDOM,offset:t}},e.prototype.localPosFromDOM=function(e,n,o){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):t.prototype.localPosFromDOM.call(this,e,n,o)},e.prototype.ignoreMutation=function(t){return"characterData"!=t.type&&"selection"!=t.type},e.prototype.slice=function(t,n,o){var i=this.node.cut(t,n),r=document.createTextNode(i.text);return new e(this.parent,i,this.outerDeco,this.innerDeco,r,r,o)},e.prototype.markDirty=function(e,n){t.prototype.markDirty.call(this,e,n),this.dom==this.nodeDOM||0!=e&&n!=this.nodeDOM.nodeValue.length||(this.dirty=3)},n.domAtom.get=function(){return!1},Object.defineProperties(e.prototype,n),e}(ei),ii=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={domAtom:{configurable:!0},ignoreForCoords:{configurable:!0}};return e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.matchesHack=function(t){return 0==this.dirty&&this.dom.nodeName==t},n.domAtom.get=function(){return!0},n.ignoreForCoords.get=function(){return"IMG"==this.dom.nodeName},Object.defineProperties(e.prototype,n),e}(Ko),ri=function(t){function e(e,n,o,i,r,s,a,l,c,u){t.call(this,e,n,o,i,r,s,a,c,u),this.spec=l}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.update=function(e,n,o,i){if(3==this.dirty)return!1;if(this.spec.update){var r=this.spec.update(e,n,o);return r&&this.updateInner(e,n,o,i),r}return!(!this.contentDOM&&!e.isLeaf)&&t.prototype.update.call(this,e,n,o,i)},e.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():t.prototype.selectNode.call(this)},e.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():t.prototype.deselectNode.call(this)},e.prototype.setSelection=function(e,n,o,i){this.spec.setSelection?this.spec.setSelection(e,n,o):t.prototype.setSelection.call(this,e,n,o,i)},e.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),t.prototype.destroy.call(this)},e.prototype.stopEvent=function(t){return!!this.spec.stopEvent&&this.spec.stopEvent(t)},e.prototype.ignoreMutation=function(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):t.prototype.ignoreMutation.call(this,e)},e}(ei);function si(t,e,n){for(var o=t.firstChild,i=!1,r=0;r<e.length;r++){var s=e[r],a=s.dom;if(a.parentNode==t){for(;a!=o;)o=fi(o),i=!0;o=o.nextSibling}else i=!0,t.insertBefore(a,o);if(s instanceof ti){var l=o?o.previousSibling:t.lastChild;si(s.contentDOM,s.children,n),o=l?l.nextSibling:t.firstChild}}for(;o;)o=fi(o),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}function ai(t){t&&(this.nodeName=t)}ai.prototype=Object.create(null);var li=[new ai];function ci(t,e,n){if(0==t.length)return li;for(var o=n?li[0]:new ai,i=[o],r=0;r<t.length;r++){var s=t[r].type.attrs;if(s)for(var a in s.nodeName&&i.push(o=new ai(s.nodeName)),s){var l=s[a];null!=l&&(n&&1==i.length&&i.push(o=new ai(e.isInline?"span":"div")),"class"==a?o.class=(o.class?o.class+" ":"")+l:"style"==a?o.style=(o.style?o.style+";":"")+l:"nodeName"!=a&&(o[a]=l))}}return i}function ui(t,e,n,o){if(n==li&&o==li)return e;for(var i=e,r=0;r<o.length;r++){var s=o[r],a=n[r];if(r){var l=void 0;a&&a.nodeName==s.nodeName&&i!=t&&(l=i.parentNode)&&l.tagName.toLowerCase()==s.nodeName||((l=document.createElement(s.nodeName)).pmIsDeco=!0,l.appendChild(i),a=li[0]),i=l}pi(i,a||li[0],s)}return i}function pi(t,e,n){for(var o in e)"class"==o||"style"==o||"nodeName"==o||o in n||t.removeAttribute(o);for(var i in n)"class"!=i&&"style"!=i&&"nodeName"!=i&&n[i]!=e[i]&&t.setAttribute(i,n[i]);if(e.class!=n.class){for(var r=e.class?e.class.split(" ").filter(Boolean):Xo,s=n.class?n.class.split(" ").filter(Boolean):Xo,a=0;a<r.length;a++)-1==s.indexOf(r[a])&&t.classList.remove(r[a]);for(var l=0;l<s.length;l++)-1==r.indexOf(s[l])&&t.classList.add(s[l]);0==t.classList.length&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style)for(var c,u=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;c=u.exec(e.style);)t.style.removeProperty(c[1]);n.style&&(t.style.cssText+=n.style)}}function hi(t,e,n){return ui(t,t,li,ci(e,n,1!=t.nodeType))}function di(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function fi(t){var e=t.nextSibling;return t.parentNode.removeChild(t),e}var mi=function(t,e){this.top=t,this.lock=e,this.index=0,this.stack=[],this.changed=!1,this.preMatch=function(t,e){var n=e,o=n.children.length,i=t.childCount,r=new Map,s=[];t:for(;i>0;){for(var a=void 0;;)if(o){var l=n.children[o-1];if(!(l instanceof ti)){a=l,o--;break}n=l,o=l.children.length}else{if(n==e)break t;o=n.parent.children.indexOf(n),n=n.parent}var c=a.node;if(c){if(c!=t.child(i-1))break;--i,r.set(a,i),s.push(a)}}return{index:i,matched:r,matches:s.reverse()}}(t.node.content,t)};function vi(t,e){return t.type.side-e.type.side}function gi(t,e,n,o,i){for(var r=[],s=0,a=0;s<t.length;s++){var l=t[s],c=a,u=a+=l.size;c>=n||u<=e?r.push(l):(c<e&&r.push(l.slice(0,e-c,o)),i&&(r.push(i),i=null),u>n&&r.push(l.slice(n-c,l.size,o)))}return r}function yi(t,e){var n=t.root.getSelection(),o=t.state.doc;if(!n.focusNode)return null;var i=t.docView.nearestDesc(n.focusNode),r=i&&0==i.size,s=t.docView.posFromDOM(n.focusNode,n.focusOffset);if(s<0)return null;var a,l,c=o.resolve(s);if(Co(n)){for(a=c;i&&!i.node;)i=i.parent;if(i&&i.node.isAtom&&Hn.isSelectable(i.node)&&i.parent&&(!i.node.isInline||!function(t,e,n){for(var o=0==e,i=e==So(t);o||i;){if(t==n)return!0;var r=vo(t);if(!(t=t.parentNode))return!1;o=o&&0==r,i=i&&r==So(t)}}(n.focusNode,n.focusOffset,i.dom))){var u=i.posBefore;l=new Hn(s==u?c:o.resolve(u))}}else{var p=t.docView.posFromDOM(n.anchorNode,n.anchorOffset);if(p<0)return null;a=o.resolve(p)}l||(l=Ti(t,a,c,"pointer"==e||t.state.selection.head<c.pos&&!r?1:-1));return l}function bi(t){return t.editable?t.hasFocus():Mi(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function _i(t,e){var n=t.state.selection;if(Ci(t,n),bi(t)){if(!e&&t.mouseDown&&t.mouseDown.allowDefault)return t.mouseDown.delayedSelectionSync=!0,void t.domObserver.setCurSelection();if(t.domObserver.disconnectSelection(),t.cursorWrapper)!function(t){var e=t.root.getSelection(),n=document.createRange(),o=t.cursorWrapper.dom,i="IMG"==o.nodeName;i?n.setEnd(o.parentNode,vo(o)+1):n.setEnd(o,0);n.collapse(!1),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&co.ie&&co.ie_version<=11&&(o.disabled=!0,o.disabled=!1)}(t);else{var o,i,r=n.anchor,s=n.head;!wi||n instanceof Zn||(n.$from.parent.inlineContent||(o=xi(t,n.from)),n.empty||n.$from.parent.inlineContent||(i=xi(t,n.to))),t.docView.setSelection(r,s,t.root,e),wi&&(o&&ki(o),i&&ki(i)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(t){var e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.hideSelectionGuard);var n=t.root.getSelection(),o=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.hideSelectionGuard=function(){n.anchorNode==o&&n.anchorOffset==i||(e.removeEventListener("selectionchange",t.hideSelectionGuard),setTimeout((function(){bi(t)&&!t.state.selection.visible||t.dom.classList.remove("ProseMirror-hideselection")}),20))})}(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}mi.prototype.destroyBetween=function(t,e){if(t!=e){for(var n=t;n<e;n++)this.top.children[n].destroy();this.top.children.splice(t,e-t),this.changed=!0}},mi.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},mi.prototype.syncToMarks=function(t,e,n){for(var o=0,i=this.stack.length>>1,r=Math.min(i,t.length);o<r&&(o==i-1?this.top:this.stack[o+1<<1]).matchesMark(t[o])&&!1!==t[o].type.spec.spanning;)o++;for(;o<i;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<t.length;){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(t[i])){s=a;break}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{var l=ti.create(this.top,t[i],e,n);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,i++}},mi.prototype.findNodeMatch=function(t,e,n,o){var i,r=-1;if(o>=this.preMatch.index&&(i=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&i.matchesNode(t,e,n))r=this.top.children.indexOf(i,this.index);else for(var s=this.index,a=Math.min(this.top.children.length,s+5);s<a;s++){var l=this.top.children[s];if(l.matchesNode(t,e,n)&&!this.preMatch.matched.has(l)){r=s;break}}return!(r<0)&&(this.destroyBetween(this.index,r),this.index++,!0)},mi.prototype.updateNodeAt=function(t,e,n,o,i){return!!this.top.children[o].update(t,e,n,i)&&(this.destroyBetween(this.index,o),this.index=o+1,!0)},mi.prototype.findIndexWithChild=function(t){for(;;){var e=t.parentNode;if(!e)return-1;if(e==this.top.contentDOM){var n=t.pmViewDesc;if(n)for(var o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==n)return o;return-1}t=e}},mi.prototype.updateNextNode=function(t,e,n,o,i){for(var r=this.index;r<this.top.children.length;r++){var s=this.top.children[r];if(s instanceof ei){var a=this.preMatch.matched.get(s);if(null!=a&&a!=i)return!1;var l=s.dom;if(!(this.lock&&(l==this.lock||1==l.nodeType&&l.contains(this.lock.parentNode))&&!(t.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==t.text&&3!=s.dirty&&di(e,s.outerDeco)))&&s.update(t,e,n,o))return this.destroyBetween(this.index,r),s.dom!=l&&(this.changed=!0),this.index++,!0;break}}return!1},mi.prototype.addNode=function(t,e,n,o,i){this.top.children.splice(this.index++,0,ei.create(this.top,t,e,n,o,i)),this.changed=!0},mi.prototype.placeWidget=function(t,e,n){var o=this.index<this.top.children.length?this.top.children[this.index]:null;if(!o||!o.matchesWidget(t)||t!=o.widget&&o.widget.type.toDOM.parentNode){var i=new Yo(this.top,t,e,n);this.top.children.splice(this.index++,0,i),this.changed=!0}else this.index++},mi.prototype.addTextblockHacks=function(){for(var t=this.top.children[this.index-1];t instanceof ti;)t=t.children[t.children.length-1];t&&t instanceof oi&&!/\n$/.test(t.node.text)||((co.safari||co.chrome)&&t&&"false"==t.dom.contentEditable&&this.addHackNode("IMG"),this.addHackNode("BR"))},mi.prototype.addHackNode=function(t){if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack(t))this.index++;else{var e=document.createElement(t);"IMG"==t&&(e.className="ProseMirror-separator"),"BR"==t&&(e.className="ProseMirror-trailingBreak"),this.top.children.splice(this.index++,0,new ii(this.top,Xo,e,null)),this.changed=!0}};var wi=co.safari||co.chrome&&co.chrome_version<63;function xi(t,e){var n=t.docView.domFromPos(e,0),o=n.node,i=n.offset,r=i<o.childNodes.length?o.childNodes[i]:null,s=i?o.childNodes[i-1]:null;if(co.safari&&r&&"false"==r.contentEditable)return Si(r);if(!(r&&"false"!=r.contentEditable||s&&"false"!=s.contentEditable)){if(r)return Si(r);if(s)return Si(s)}}function Si(t){return t.contentEditable="true",co.safari&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function ki(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function Ci(t,e){if(e instanceof Hn){var n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(Oi(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else Oi(t)}function Oi(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=null)}function Ti(t,e,n,o){return t.someProp("createSelectionBetween",(function(o){return o(t,e,n)}))||Zn.between(e,n,o)}function Mi(t){var e=t.root.getSelection();if(!e.anchorNode)return!1;try{return t.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch(t){return!1}}function Ei(t,e){var n=t.selection,o=n.$anchor,i=n.$head,r=e>0?o.max(i):o.min(i),s=r.parent.inlineContent?r.depth?t.doc.resolve(e>0?r.after():r.before()):null:r;return s&&$n.findFrom(s,e)}function Ai(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Ni(t,e,n){var o=t.state.selection;if(!(o instanceof Zn)){if(o instanceof Hn&&o.node.isInline)return Ai(t,new Zn(e>0?o.$to:o.$from));var i=Ei(t.state,e);return!!i&&Ai(t,i)}if(!o.empty||n.indexOf("s")>-1)return!1;if(t.endOfTextblock(e>0?"right":"left")){var r=Ei(t.state,e);return!!(r&&r instanceof Hn)&&Ai(t,r)}if(!(co.mac&&n.indexOf("m")>-1)){var s,a=o.$head,l=a.textOffset?null:e<0?a.nodeBefore:a.nodeAfter;if(!l||l.isText)return!1;var c=e<0?a.pos-l.nodeSize:a.pos;return!!(l.isAtom||(s=t.docView.descAt(c))&&!s.contentDOM)&&(Hn.isSelectable(l)?Ai(t,new Hn(e<0?t.state.doc.resolve(a.pos-l.nodeSize):a)):!!co.webkit&&Ai(t,new Zn(t.state.doc.resolve(e<0?c:c+l.nodeSize))))}}function Pi(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function Li(t){var e=t.pmViewDesc;return e&&0==e.size&&(t.nextSibling||"BR"!=t.nodeName)}function Ii(t){var e=t.root.getSelection(),n=e.focusNode,o=e.focusOffset;if(n){var i,r,s=!1;for(co.gecko&&1==n.nodeType&&o<Pi(n)&&Li(n.childNodes[o])&&(s=!0);;)if(o>0){if(1!=n.nodeType)break;var a=n.childNodes[o-1];if(Li(a))i=n,r=--o;else{if(3!=a.nodeType)break;o=(n=a).nodeValue.length}}else{if(Ri(n))break;for(var l=n.previousSibling;l&&Li(l);)i=n.parentNode,r=vo(l),l=l.previousSibling;if(l)o=Pi(n=l);else{if((n=n.parentNode)==t.dom)break;o=0}}s?zi(t,e,n,o):i&&zi(t,e,i,r)}}function Di(t){var e=t.root.getSelection(),n=e.focusNode,o=e.focusOffset;if(n){for(var i,r,s=Pi(n);;)if(o<s){if(1!=n.nodeType)break;if(!Li(n.childNodes[o]))break;i=n,r=++o}else{if(Ri(n))break;for(var a=n.nextSibling;a&&Li(a);)i=a.parentNode,r=vo(a)+1,a=a.nextSibling;if(a)o=0,s=Pi(n=a);else{if((n=n.parentNode)==t.dom)break;o=s=0}}i&&zi(t,e,i,r)}}function Ri(t){var e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function zi(t,e,n,o){if(Co(e)){var i=document.createRange();i.setEnd(n,o),i.setStart(n,o),e.removeAllRanges(),e.addRange(i)}else e.extend&&e.extend(n,o);t.domObserver.setCurSelection();var r=t.state;setTimeout((function(){t.state==r&&_i(t)}),50)}function Bi(t,e,n){var o=t.state.selection;if(o instanceof Zn&&!o.empty||n.indexOf("s")>-1)return!1;if(co.mac&&n.indexOf("m")>-1)return!1;var i=o.$from,r=o.$to;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){var s=Ei(t.state,e);if(s&&s instanceof Hn)return Ai(t,s)}if(!i.parent.inlineContent){var a=e<0?i:r,l=o instanceof Un?$n.near(a,e):$n.findFrom(a,e);return!!l&&Ai(t,l)}return!1}function $i(t,e){if(!(t.state.selection instanceof Zn))return!0;var n=t.state.selection,o=n.$head,i=n.$anchor,r=n.empty;if(!o.sameParent(i))return!0;if(!r)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;var s=!o.textOffset&&(e<0?o.nodeBefore:o.nodeAfter);if(s&&!s.isText){var a=t.state.tr;return e<0?a.delete(o.pos-s.nodeSize,o.pos):a.delete(o.pos,o.pos+s.nodeSize),t.dispatch(a),!0}return!1}function ji(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function Vi(t,e){var n=e.keyCode,o=function(t){var e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}(e);return 8==n||co.mac&&72==n&&"c"==o?$i(t,-1)||Ii(t):46==n||co.mac&&68==n&&"c"==o?$i(t,1)||Di(t):13==n||27==n||(37==n?Ni(t,-1,o)||Ii(t):39==n?Ni(t,1,o)||Di(t):38==n?Bi(t,-1,o)||Ii(t):40==n?function(t){if(co.safari&&!(t.state.selection.$head.parentOffset>0)){var e=t.root.getSelection(),n=e.focusNode,o=e.focusOffset;if(n&&1==n.nodeType&&0==o&&n.firstChild&&"false"==n.firstChild.contentEditable){var i=n.firstChild;ji(t,i,!0),setTimeout((function(){return ji(t,i,!1)}),20)}}}(t)||Bi(t,1,o)||Di(t):o==(co.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}function Zi(t){var e=t.pmViewDesc;if(e)return e.parseRule();if("BR"==t.nodeName&&t.parentNode){if(co.safari&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(t.parentNode.lastChild==t||co.safari&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if("IMG"==t.nodeName&&t.getAttribute("mark-placeholder"))return{ignore:!0}}function Fi(t,e,n,o,i){if(e<0){var r=t.lastSelectionTime>Date.now()-50?t.lastSelectionOrigin:null,s=yi(t,r);if(s&&!t.state.selection.eq(s)){var a=t.state.tr.setSelection(s);"pointer"==r?a.setMeta("pointer",!0):"key"==r&&a.scrollIntoView(),t.dispatch(a)}}else{var l=t.state.doc.resolve(e),c=l.sharedDepth(n);e=l.before(c+1),n=t.state.doc.resolve(n).after(c+1);var u=t.state.selection,p=function(t,e,n){var o=t.docView.parseRange(e,n),i=o.node,r=o.fromOffset,s=o.toOffset,a=o.from,l=o.to,c=t.root.getSelection(),u=null,p=c.anchorNode;if(p&&t.dom.contains(1==p.nodeType?p:p.parentNode)&&(u=[{node:p,offset:c.anchorOffset}],Co(c)||u.push({node:c.focusNode,offset:c.focusOffset})),co.chrome&&8===t.lastKeyCode)for(var h=s;h>r;h--){var d=i.childNodes[h-1],f=d.pmViewDesc;if("BR"==d.nodeName&&!f){s=h;break}if(!f||f.size)break}var m=t.state.doc,v=t.someProp("domParser")||Ve.fromSchema(t.state.schema),g=m.resolve(a),y=null,b=v.parse(i,{topNode:g.parent,topMatch:g.parent.contentMatchAt(g.index()),topOpen:!0,from:r,to:s,preserveWhitespace:!g.parent.type.spec.code||"full",editableContent:!0,findPositions:u,ruleFromNode:Zi,context:g});if(u&&null!=u[0].pos){var _=u[0].pos,w=u[1]&&u[1].pos;null==w&&(w=_),y={anchor:_+a,head:w+a}}return{doc:b,sel:y,from:a,to:l}}(t,e,n);if(co.chrome&&t.cursorWrapper&&p.sel&&p.sel.anchor==t.cursorWrapper.deco.from){var h=t.cursorWrapper.deco.type.toDOM.nextSibling,d=h&&h.nodeValue?h.nodeValue.length:1;p.sel={anchor:p.sel.anchor+d,head:p.sel.anchor+d}}var f,m,v=t.state.doc,g=v.slice(p.from,p.to);8===t.lastKeyCode&&Date.now()-100<t.lastKeyCodeTime?(f=t.state.selection.to,m="end"):(f=t.state.selection.from,m="start"),t.lastKeyCode=null;var y=function(t,e,n,o,i){var r=t.findDiffStart(e,n);if(null==r)return null;var s=t.findDiffEnd(e,n+t.size,n+e.size),a=s.a,l=s.b;if("end"==i){o-=a+Math.max(0,r-Math.min(a,l))-r}if(a<r&&t.size<e.size){l=(r-=o<=r&&o>=a?r-o:0)+(l-a),a=r}else if(l<r){a=(r-=o<=r&&o>=l?r-o:0)+(a-l),l=r}return{start:r,endA:a,endB:l}}(g.content,p.doc.content,p.from,f,m);if(!y){if(!(o&&u instanceof Zn&&!u.empty&&u.$head.sameParent(u.$anchor))||t.composing||p.sel&&p.sel.anchor!=p.sel.head){if((co.ios&&t.lastIOSEnter>Date.now()-225||co.android)&&i.some((function(t){return"DIV"==t.nodeName||"P"==t.nodeName}))&&t.someProp("handleKeyDown",(function(e){return e(t,Oo(13,"Enter"))})))return void(t.lastIOSEnter=0);if(p.sel){var b=Hi(t,t.state.doc,p.sel);b&&!b.eq(t.state.selection)&&t.dispatch(t.state.tr.setSelection(b))}return}y={start:u.from,endA:u.to,endB:u.to}}t.domChangeCount++,t.state.selection.from<t.state.selection.to&&y.start==y.endB&&t.state.selection instanceof Zn&&(y.start>t.state.selection.from&&y.start<=t.state.selection.from+2?y.start=t.state.selection.from:y.endA<t.state.selection.to&&y.endA>=t.state.selection.to-2&&(y.endB+=t.state.selection.to-y.endA,y.endA=t.state.selection.to)),co.ie&&co.ie_version<=11&&y.endB==y.start+1&&y.endA==y.start&&y.start>p.from&&"  "==p.doc.textBetween(y.start-p.from-1,y.start-p.from+1)&&(y.start--,y.endA--,y.endB--);var _,w=p.doc.resolveNoCache(y.start-p.from),x=p.doc.resolveNoCache(y.endB-p.from),S=w.sameParent(x)&&w.parent.inlineContent;if((co.ios&&t.lastIOSEnter>Date.now()-225&&(!S||i.some((function(t){return"DIV"==t.nodeName||"P"==t.nodeName})))||!S&&w.pos<p.doc.content.size&&(_=$n.findFrom(p.doc.resolve(w.pos+1),1,!0))&&_.head==x.pos)&&t.someProp("handleKeyDown",(function(e){return e(t,Oo(13,"Enter"))})))t.lastIOSEnter=0;else if(t.state.selection.anchor>y.start&&function(t,e,n,o,i){if(!o.parent.isTextblock||n-e<=i.pos-o.pos||Wi(o,!0,!1)<i.pos)return!1;var r=t.resolve(e);if(r.parentOffset<r.parent.content.size||!r.parent.isTextblock)return!1;var s=t.resolve(Wi(r,!0,!0));if(!s.parent.isTextblock||s.pos>n||Wi(s,!0,!1)<n)return!1;return o.parent.content.cut(o.parentOffset).eq(s.parent.content)}(v,y.start,y.endA,w,x)&&t.someProp("handleKeyDown",(function(e){return e(t,Oo(8,"Backspace"))})))co.android&&co.chrome&&t.domObserver.suppressSelectionUpdates();else{co.chrome&&co.android&&y.toB==y.from&&(t.lastAndroidDelete=Date.now()),co.android&&!S&&w.start()!=x.start()&&0==x.parentOffset&&w.depth==x.depth&&p.sel&&p.sel.anchor==p.sel.head&&p.sel.head==y.endA&&(y.endB-=2,x=p.doc.resolveNoCache(y.endB-p.from),setTimeout((function(){t.someProp("handleKeyDown",(function(e){return e(t,Oo(13,"Enter"))}))}),20));var k,C,O,T,M=y.start,E=y.endA;if(S)if(w.pos==x.pos)co.ie&&co.ie_version<=11&&0==w.parentOffset&&(t.domObserver.suppressSelectionUpdates(),setTimeout((function(){return _i(t)}),20)),k=t.state.tr.delete(M,E),C=v.resolve(y.start).marksAcross(v.resolve(y.endA));else if(y.endA==y.endB&&(T=v.resolve(y.start))&&(O=function(t,e){for(var n,o,i,r=t.firstChild.marks,s=e.firstChild.marks,a=r,l=s,c=0;c<s.length;c++)a=s[c].removeFromSet(a);for(var u=0;u<r.length;u++)l=r[u].removeFromSet(l);if(1==a.length&&0==l.length)o=a[0],n="add",i=function(t){return t.mark(o.addToSet(t.marks))};else{if(0!=a.length||1!=l.length)return null;o=l[0],n="remove",i=function(t){return t.mark(o.removeFromSet(t.marks))}}for(var p=[],h=0;h<e.childCount;h++)p.push(i(e.child(h)));if(Zt.from(p).eq(t))return{mark:o,type:n}}(w.parent.content.cut(w.parentOffset,x.parentOffset),T.parent.content.cut(T.parentOffset,y.endA-T.start()))))k=t.state.tr,"add"==O.type?k.addMark(M,E,O.mark):k.removeMark(M,E,O.mark);else if(w.parent.child(w.index()).isText&&w.index()==x.index()-(x.textOffset?0:1)){var A=w.parent.textBetween(w.parentOffset,x.parentOffset);if(t.someProp("handleTextInput",(function(e){return e(t,M,E,A)})))return;k=t.state.tr.insertText(A,M,E)}if(k||(k=t.state.tr.replace(M,E,p.doc.slice(y.start-p.from,y.endB-p.from))),p.sel){var N=Hi(t,k.doc,p.sel);N&&!(co.chrome&&co.android&&t.composing&&N.empty&&(y.start!=y.endB||t.lastAndroidDelete<Date.now()-100)&&(N.head==M||N.head==k.mapping.map(E)-1)||co.ie&&N.empty&&N.head==M)&&k.setSelection(N)}C&&k.ensureMarks(C),t.dispatch(k.scrollIntoView())}}}function Hi(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Ti(t,e.resolve(n.anchor),e.resolve(n.head))}function Wi(t,e,n){for(var o=t.depth,i=e?t.end():t.pos;o>0&&(e||t.indexAfter(o)==t.node(o).childCount);)o--,i++,e=!1;if(n)for(var r=t.node(o).maybeChild(t.indexAfter(o));r&&!r.isLeaf;)r=r.firstChild,i++;return i}function Ui(t,e){for(var n=[],o=e.content,i=e.openStart,r=e.openEnd;i>1&&r>1&&1==o.childCount&&1==o.firstChild.childCount;){i--,r--;var s=o.firstChild;n.push(s.type.name,s.attrs!=s.type.defaultAttrs?s.attrs:null),o=s.content}var a=t.someProp("clipboardSerializer")||Ye.fromSchema(t.state.schema),l=nr(),c=l.createElement("div");c.appendChild(a.serializeFragment(o,{document:l}));for(var u,p=c.firstChild;p&&1==p.nodeType&&(u=tr[p.nodeName.toLowerCase()]);){for(var h=u.length-1;h>=0;h--){for(var d=l.createElement(u[h]);c.firstChild;)d.appendChild(c.firstChild);c.appendChild(d),"tbody"!=u[h]&&(i++,r++)}p=c.firstChild}return p&&1==p.nodeType&&p.setAttribute("data-pm-slice",i+" "+r+" "+JSON.stringify(n)),{dom:c,text:t.someProp("clipboardTextSerializer",(function(t){return t(e)}))||e.content.textBetween(0,e.content.size,"\n\n")}}function qi(t,e,n,o,i){var r,s,a=i.parent.type.spec.code;if(!n&&!e)return null;var l=e&&(o||a||!n);if(l){if(t.someProp("transformPastedText",(function(t){e=t(e,a||o)})),a)return e?new Kt(Zt.from(t.state.schema.text(e.replace(/\r\n?/g,"\n"))),0,0):Kt.empty;var c=t.someProp("clipboardTextParser",(function(t){return t(e,i,o)}));if(c)s=c;else{var u=i.marks(),p=t.state.schema,h=Ye.fromSchema(p);r=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach((function(t){var e=r.appendChild(document.createElement("p"));t&&e.appendChild(h.serializeNode(p.text(t,u)))}))}}else t.someProp("transformPastedHTML",(function(t){n=t(n)})),r=function(t){var e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));var n,o=nr().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(t);(n=i&&tr[i[1].toLowerCase()])&&(t=n.map((function(t){return"<"+t+">"})).join("")+t+n.map((function(t){return"</"+t+">"})).reverse().join(""));if(o.innerHTML=t,n)for(var r=0;r<n.length;r++)o=o.querySelector(n[r])||o;return o}(n),co.webkit&&function(t){for(var e=t.querySelectorAll(co.chrome?"span:not([class]):not([style])":"span.Apple-converted-space"),n=0;n<e.length;n++){var o=e[n];1==o.childNodes.length&&" "==o.textContent&&o.parentNode&&o.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),o)}}(r);var d=r&&r.querySelector("[data-pm-slice]"),f=d&&/^(\d+) (\d+) (.*)/.exec(d.getAttribute("data-pm-slice"));if(!s){var m=t.someProp("clipboardParser")||t.someProp("domParser")||Ve.fromSchema(t.state.schema);s=m.parseSlice(r,{preserveWhitespace:!(!l&&!f),context:i,ruleFromNode:function(t){if("BR"==t.nodeName&&!t.nextSibling&&t.parentNode&&!Ji.test(t.parentNode.nodeName))return{ignore:!0}}})}if(f)s=function(t,e){if(!t.size)return t;var n,o=t.content.firstChild.type.schema;try{n=JSON.parse(e)}catch(e){return t}for(var i=t.content,r=t.openStart,s=t.openEnd,a=n.length-2;a>=0;a-=2){var l=o.nodes[n[a]];if(!l||l.hasRequiredAttrs())break;i=Zt.from(l.create(n[a+1],i)),r++,s++}return new Kt(i,r,s)}(Qi(s,+f[1],+f[2]),f[3]);else if(s=Kt.maxOpen(function(t,e){if(t.childCount<2)return t;for(var n=function(n){var o=e.node(n).contentMatchAt(e.index(n)),i=void 0,r=[];if(t.forEach((function(t){if(r){var e,n=o.findWrapping(t.type);if(!n)return r=null;if(e=r.length&&i.length&&Gi(n,i,t,r[r.length-1],0))r[r.length-1]=e;else{r.length&&(r[r.length-1]=Xi(r[r.length-1],i.length));var s=Ki(t,n);r.push(s),o=o.matchType(s.type,s.attrs),i=n}}})),r)return{v:Zt.from(r)}},o=e.depth;o>=0;o--){var i=n(o);if(i)return i.v}return t}(s.content,i),!0),s.openStart||s.openEnd){for(var v=0,g=0,y=s.content.firstChild;v<s.openStart&&!y.type.spec.isolating;v++,y=y.firstChild);for(var b=s.content.lastChild;g<s.openEnd&&!b.type.spec.isolating;g++,b=b.lastChild);s=Qi(s,v,g)}return t.someProp("transformPasted",(function(t){s=t(s)})),s}var Ji=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Ki(t,e,n){void 0===n&&(n=0);for(var o=e.length-1;o>=n;o--)t=e[o].create(null,Zt.from(t));return t}function Gi(t,e,n,o,i){if(i<t.length&&i<e.length&&t[i]==e[i]){var r=Gi(t,e,n,o.lastChild,i+1);if(r)return o.copy(o.content.replaceChild(o.childCount-1,r));if(o.contentMatchAt(o.childCount).matchType(i==t.length-1?n.type:t[i+1]))return o.copy(o.content.append(Zt.from(Ki(n,t,i+1))))}}function Xi(t,e){if(0==e)return t;var n=t.content.replaceChild(t.childCount-1,Xi(t.lastChild,e-1)),o=t.contentMatchAt(t.childCount).fillBefore(Zt.empty,!0);return t.copy(n.append(o))}function Yi(t,e,n,o,i,r){var s=e<0?t.firstChild:t.lastChild,a=s.content;return i<o-1&&(a=Yi(a,e,n,o,i+1,r)),i>=n&&(a=e<0?s.contentMatchAt(0).fillBefore(a,t.childCount>1||r<=i).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(Zt.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(a))}function Qi(t,e,n){return e<t.openStart&&(t=new Kt(Yi(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new Kt(Yi(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}var tr={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},er=null;function nr(){return er||(er=document.implementation.createHTMLDocument("title"))}var or={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},ir=co.ie&&co.ie_version<=11,rr=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};rr.prototype.set=function(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset},rr.prototype.eq=function(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset};var sr=function(t,e){var n=this;this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(t){for(var e=0;e<t.length;e++)n.queue.push(t[e]);co.ie&&co.ie_version<=11&&t.some((function(t){return"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length}))?n.flushSoon():n.flush()})),this.currentSelection=new rr,ir&&(this.onCharData=function(t){n.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),n.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};sr.prototype.flushSoon=function(){var t=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){t.flushingSoon=-1,t.flush()}),20))},sr.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},sr.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,or),ir&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},sr.prototype.stop=function(){var t=this;if(this.observer){var e=this.observer.takeRecords();if(e.length){for(var n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout((function(){return t.flush()}),20)}this.observer.disconnect()}ir&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},sr.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},sr.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},sr.prototype.suppressSelectionUpdates=function(){var t=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return t.suppressingSelectionUpdates=!1}),50)},sr.prototype.onSelectionChange=function(){if((!(t=this.view).editable||t.root.activeElement==t.dom)&&Mi(t)){var t;if(this.suppressingSelectionUpdates)return _i(this.view);if(co.ie&&co.ie_version<=11&&!this.view.state.selection.empty){var e=this.view.root.getSelection();if(e.focusNode&&_o(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}},sr.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},sr.prototype.ignoreSelectionChange=function(t){if(0==t.rangeCount)return!0;var e=t.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(e);return n&&n.ignoreMutation({type:"selection",target:3==e.nodeType?e.parentNode:e})?(this.setCurSelection(),!0):void 0},sr.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var t=this.observer?this.observer.takeRecords():[];this.queue.length&&(t=this.queue.concat(t),this.queue.length=0);var e=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(e)&&Mi(this.view)&&!this.ignoreSelectionChange(e),o=-1,i=-1,r=!1,s=[];if(this.view.editable)for(var a=0;a<t.length;a++){var l=this.registerMutation(t[a],s);l&&(o=o<0?l.from:Math.min(l.from,o),i=i<0?l.to:Math.max(l.to,i),l.typeOver&&(r=!0))}if(co.gecko&&s.length>1){var c=s.filter((function(t){return"BR"==t.nodeName}));if(2==c.length){var u=c[0],p=c[1];u.parentNode&&u.parentNode.parentNode==p.parentNode?p.remove():u.remove()}}(o>-1||n)&&(o>-1&&(this.view.docView.markDirty(o,i),function(t){if(ar)return;ar=!0,"normal"==getComputedStyle(t.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package.")}(this.view)),this.handleDOMChange(o,i,r,s),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(e)||_i(this.view),this.currentSelection.set(e))}},sr.prototype.registerMutation=function(t,e){if(e.indexOf(t.target)>-1)return null;var n=this.view.docView.nearestDesc(t.target);if("attributes"==t.type&&(n==this.view.docView||"contenteditable"==t.attributeName||"style"==t.attributeName&&!t.oldValue&&!t.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(t))return null;if("childList"==t.type){for(var o=0;o<t.addedNodes.length;o++)e.push(t.addedNodes[o]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(t.target))return{from:n.posBefore,to:n.posAfter};var i=t.previousSibling,r=t.nextSibling;if(co.ie&&co.ie_version<=11&&t.addedNodes.length)for(var s=0;s<t.addedNodes.length;s++){var a=t.addedNodes[s],l=a.previousSibling,c=a.nextSibling;(!l||Array.prototype.indexOf.call(t.addedNodes,l)<0)&&(i=l),(!c||Array.prototype.indexOf.call(t.addedNodes,c)<0)&&(r=c)}var u=i&&i.parentNode==t.target?vo(i)+1:0,p=n.localPosFromDOM(t.target,u,-1),h=r&&r.parentNode==t.target?vo(r):t.target.childNodes.length;return{from:p,to:n.localPosFromDOM(t.target,h,1)}}return"attributes"==t.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}};var ar=!1;var lr={},cr={};function ur(t,e){t.lastSelectionOrigin=e,t.lastSelectionTime=Date.now()}function pr(t){t.someProp("handleDOMEvents",(function(e){for(var n in e)t.eventHandlers[n]||t.dom.addEventListener(n,t.eventHandlers[n]=function(e){return hr(t,e)})}))}function hr(t,e){return t.someProp("handleDOMEvents",(function(n){var o=n[e.type];return!!o&&(o(t,e)||e.defaultPrevented)}))}function dr(t){return{left:t.clientX,top:t.clientY}}function fr(t,e,n,o,i){if(-1==o)return!1;for(var r=t.state.doc.resolve(o),s=function(o){if(t.someProp(e,(function(e){return o>r.depth?e(t,n,r.nodeAfter,r.before(o),i,!0):e(t,n,r.node(o),r.before(o),i,!1)})))return{v:!0}},a=r.depth+1;a>0;a--){var l=s(a);if(l)return l.v}return!1}function mr(t,e,n){t.focused||t.focus();var o=t.state.tr.setSelection(e);"pointer"==n&&o.setMeta("pointer",!0),t.dispatch(o)}function vr(t,e,n,o,i){return fr(t,"handleClickOn",e,n,o)||t.someProp("handleClick",(function(n){return n(t,e,o)}))||(i?function(t,e){if(-1==e)return!1;var n,o,i=t.state.selection;i instanceof Hn&&(n=i.node);for(var r=t.state.doc.resolve(e),s=r.depth+1;s>0;s--){var a=s>r.depth?r.nodeAfter:r.node(s);if(Hn.isSelectable(a)){o=n&&i.$from.depth>0&&s>=i.$from.depth&&r.before(i.$from.depth+1)==i.$from.pos?r.before(i.$from.depth):r.before(s);break}}return null!=o&&(mr(t,Hn.create(t.state.doc,o),"pointer"),!0)}(t,n):function(t,e){if(-1==e)return!1;var n=t.state.doc.resolve(e),o=n.nodeAfter;return!!(o&&o.isAtom&&Hn.isSelectable(o))&&(mr(t,new Hn(n),"pointer"),!0)}(t,n))}function gr(t,e,n,o){return fr(t,"handleDoubleClickOn",e,n,o)||t.someProp("handleDoubleClick",(function(n){return n(t,e,o)}))}function yr(t,e,n,o){return fr(t,"handleTripleClickOn",e,n,o)||t.someProp("handleTripleClick",(function(n){return n(t,e,o)}))||function(t,e,n){if(0!=n.button)return!1;var o=t.state.doc;if(-1==e)return!!o.inlineContent&&(mr(t,Zn.create(o,0,o.content.size),"pointer"),!0);for(var i=o.resolve(e),r=i.depth+1;r>0;r--){var s=r>i.depth?i.nodeAfter:i.node(r),a=i.before(r);if(s.inlineContent)mr(t,Zn.create(o,a+1,a+1+s.content.size),"pointer");else{if(!Hn.isSelectable(s))continue;mr(t,Hn.create(o,a),"pointer")}return!0}}(t,n,o)}function br(t){return Or(t)}cr.keydown=function(t,e){if(t.shiftKey=16==e.keyCode||e.shiftKey,!xr(t,e))if(229!=e.keyCode&&t.domObserver.forceFlush(),t.lastKeyCode=e.keyCode,t.lastKeyCodeTime=Date.now(),!co.ios||13!=e.keyCode||e.ctrlKey||e.altKey||e.metaKey)t.someProp("handleKeyDown",(function(n){return n(t,e)}))||Vi(t,e)?e.preventDefault():ur(t,"key");else{var n=Date.now();t.lastIOSEnter=n,t.lastIOSEnterFallbackTimeout=setTimeout((function(){t.lastIOSEnter==n&&(t.someProp("handleKeyDown",(function(e){return e(t,Oo(13,"Enter"))})),t.lastIOSEnter=0)}),200)}},cr.keyup=function(t,e){16==e.keyCode&&(t.shiftKey=!1)},cr.keypress=function(t,e){if(!(xr(t,e)||!e.charCode||e.ctrlKey&&!e.altKey||co.mac&&e.metaKey))if(t.someProp("handleKeyPress",(function(n){return n(t,e)})))e.preventDefault();else{var n=t.state.selection;if(!(n instanceof Zn&&n.$from.sameParent(n.$to))){var o=String.fromCharCode(e.charCode);t.someProp("handleTextInput",(function(e){return e(t,n.$from.pos,n.$to.pos,o)}))||t.dispatch(t.state.tr.insertText(o).scrollIntoView()),e.preventDefault()}}};var _r=co.mac?"metaKey":"ctrlKey";lr.mousedown=function(t,e){t.shiftKey=e.shiftKey;var n=br(t),o=Date.now(),i="singleClick";o-t.lastClick.time<500&&function(t,e){var n=e.x-t.clientX,o=e.y-t.clientY;return n*n+o*o<100}(e,t.lastClick)&&!e[_r]&&("singleClick"==t.lastClick.type?i="doubleClick":"doubleClick"==t.lastClick.type&&(i="tripleClick")),t.lastClick={time:o,x:e.clientX,y:e.clientY,type:i};var r=t.posAtCoords(dr(e));r&&("singleClick"==i?(t.mouseDown&&t.mouseDown.done(),t.mouseDown=new wr(t,r,e,n)):("doubleClick"==i?gr:yr)(t,r.pos,r.inside,e)?e.preventDefault():ur(t,"pointer"))};var wr=function(t,e,n,o){var i,r,s=this;if(this.view=t,this.startDoc=t.state.doc,this.pos=e,this.event=n,this.flushed=o,this.selectNode=n[_r],this.allowDefault=n.shiftKey,this.delayedSelectionSync=!1,e.inside>-1)i=t.state.doc.nodeAt(e.inside),r=e.inside;else{var a=t.state.doc.resolve(e.pos);i=a.parent,r=a.depth?a.before():0}this.mightDrag=null;var l=o?null:n.target,c=l?t.docView.nearestDesc(l,!0):null;this.target=c?c.dom:null;var u=t.state.selection;(0==n.button&&i.type.spec.draggable&&!1!==i.type.spec.selectable||u instanceof Hn&&u.from<=r&&u.to>r)&&(this.mightDrag={node:i,pos:r,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&co.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){s.view.mouseDown==s&&s.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),ur(t,"pointer")};function xr(t,e){return!!t.composing||!!(co.safari&&Math.abs(e.timeStamp-t.compositionEndedAt)<500)&&(t.compositionEndedAt=-2e8,!0)}wr.prototype.done=function(){var t=this;this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((function(){return _i(t.view)})),this.view.mouseDown=null},wr.prototype.up=function(t){if(this.done(),this.view.dom.contains(3==t.target.nodeType?t.target.parentNode:t.target)){var e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(dr(t))),this.allowDefault||!e?ur(this.view,"pointer"):vr(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():0==t.button&&(this.flushed||co.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||co.chrome&&!(this.view.state.selection instanceof Zn)&&Math.min(Math.abs(e.pos-this.view.state.selection.from),Math.abs(e.pos-this.view.state.selection.to))<=2)?(mr(this.view,$n.near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault()):ur(this.view,"pointer")}},wr.prototype.move=function(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0),ur(this.view,"pointer"),0==t.buttons&&this.done()},lr.touchdown=function(t){br(t),ur(t,"pointer")},lr.contextmenu=function(t){return br(t)};var Sr=co.android?5e3:-1;function kr(t,e){clearTimeout(t.composingTimeout),e>-1&&(t.composingTimeout=setTimeout((function(){return Or(t)}),e))}function Cr(t){var e;for(t.composing&&(t.composing=!1,t.compositionEndedAt=((e=document.createEvent("Event")).initEvent("event",!0,!0),e.timeStamp));t.compositionNodes.length>0;)t.compositionNodes.pop().markParentsDirty()}function Or(t,e){if(t.domObserver.forceFlush(),Cr(t),e||t.docView.dirty){var n=yi(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}cr.compositionstart=cr.compositionupdate=function(t){if(!t.composing){t.domObserver.flush();var e=t.state,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(t){return!1===t.type.spec.inclusive}))))t.markCursor=t.state.storedMarks||n.marks(),Or(t,!0),t.markCursor=null;else if(Or(t),co.gecko&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var o=t.root.getSelection(),i=o.focusNode,r=o.focusOffset;i&&1==i.nodeType&&0!=r;){var s=r<0?i.lastChild:i.childNodes[r-1];if(!s)break;if(3==s.nodeType){o.collapse(s,s.nodeValue.length);break}i=s,r=-1}t.composing=!0}kr(t,Sr)},cr.compositionend=function(t,e){t.composing&&(t.composing=!1,t.compositionEndedAt=e.timeStamp,kr(t,20))};var Tr=co.ie&&co.ie_version<15||co.ios&&co.webkit_version<604;function Mr(t,e,n,o){var i=qi(t,e,n,t.shiftKey,t.state.selection.$from);if(t.someProp("handlePaste",(function(e){return e(t,o,i||Kt.empty)})))return!0;if(!i)return!1;var r=function(t){return 0==t.openStart&&0==t.openEnd&&1==t.content.childCount?t.content.firstChild:null}(i),s=r?t.state.tr.replaceSelectionWith(r,t.shiftKey):t.state.tr.replaceSelection(i);return t.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}lr.copy=cr.cut=function(t,e){var n=t.state.selection,o="cut"==e.type;if(!n.empty){var i=Tr?null:e.clipboardData,r=Ui(t,n.content()),s=r.dom,a=r.text;i?(e.preventDefault(),i.clearData(),i.setData("text/html",s.innerHTML),i.setData("text/plain",a)):function(t,e){if(t.dom.parentNode){var n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";var o=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),o.removeAllRanges(),o.addRange(i),setTimeout((function(){n.parentNode&&n.parentNode.removeChild(n),t.focus()}),50)}}(t,s),o&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},cr.paste=function(t,e){var n=Tr?null:e.clipboardData;n&&Mr(t,n.getData("text/plain"),n.getData("text/html"),e)?e.preventDefault():function(t,e){if(t.dom.parentNode){var n=t.shiftKey||t.state.selection.$from.parent.type.spec.code,o=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(o.contentEditable="true"),o.style.cssText="position: fixed; left: -10000px; top: 10px",o.focus(),setTimeout((function(){t.focus(),o.parentNode&&o.parentNode.removeChild(o),n?Mr(t,o.value,null,e):Mr(t,o.textContent,o.innerHTML,e)}),50)}}(t,e)};var Er=function(t,e){this.slice=t,this.move=e},Ar=co.mac?"altKey":"ctrlKey";for(var Nr in lr.dragstart=function(t,e){var n=t.mouseDown;if(n&&n.done(),e.dataTransfer){var o=t.state.selection,i=o.empty?null:t.posAtCoords(dr(e));if(i&&i.pos>=o.from&&i.pos<=(o instanceof Hn?o.to-1:o.to));else if(n&&n.mightDrag)t.dispatch(t.state.tr.setSelection(Hn.create(t.state.doc,n.mightDrag.pos)));else if(e.target&&1==e.target.nodeType){var r=t.docView.nearestDesc(e.target,!0);r&&r.node.type.spec.draggable&&r!=t.docView&&t.dispatch(t.state.tr.setSelection(Hn.create(t.state.doc,r.posBefore)))}var s=t.state.selection.content(),a=Ui(t,s),l=a.dom,c=a.text;e.dataTransfer.clearData(),e.dataTransfer.setData(Tr?"Text":"text/html",l.innerHTML),e.dataTransfer.effectAllowed="copyMove",Tr||e.dataTransfer.setData("text/plain",c),t.dragging=new Er(s,!e[Ar])}},lr.dragend=function(t){var e=t.dragging;window.setTimeout((function(){t.dragging==e&&(t.dragging=null)}),50)},cr.dragover=cr.dragenter=function(t,e){return e.preventDefault()},cr.drop=function(t,e){var n=t.dragging;if(t.dragging=null,e.dataTransfer){var o=t.posAtCoords(dr(e));if(o){var i=t.state.doc.resolve(o.pos);if(i){var r=n&&n.slice;r?t.someProp("transformPasted",(function(t){r=t(r)})):r=qi(t,e.dataTransfer.getData(Tr?"Text":"text/plain"),Tr?null:e.dataTransfer.getData("text/html"),!1,i);var s=n&&!e[Ar];if(t.someProp("handleDrop",(function(n){return n(t,e,r||Kt.empty,s)})))e.preventDefault();else if(r){e.preventDefault();var a=r?kn(t.state.doc,i.pos,r):i.pos;null==a&&(a=i.pos);var l=t.state.tr;s&&l.deleteSelection();var c=l.mapping.map(a),u=0==r.openStart&&0==r.openEnd&&1==r.content.childCount,p=l.doc;if(u?l.replaceRangeWith(c,c,r.content.firstChild):l.replaceRange(c,c,r),!l.doc.eq(p)){var h=l.doc.resolve(c);if(u&&Hn.isSelectable(r.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(r.content.firstChild))l.setSelection(new Hn(h));else{var d=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((function(t,e,n,o){return d=o})),l.setSelection(Ti(t,h,l.doc.resolve(d)))}t.focus(),t.dispatch(l.setMeta("uiEvent","drop"))}}}}}},lr.focus=function(t){t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout((function(){t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.root.getSelection())&&_i(t)}),20))},lr.blur=function(t,e){t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),e.relatedTarget&&t.dom.contains(e.relatedTarget)&&t.domObserver.currentSelection.set({}),t.focused=!1)},lr.beforeinput=function(t,e){if(co.chrome&&co.android&&"deleteContentBackward"==e.inputType){var n=t.domChangeCount;setTimeout((function(){if(t.domChangeCount==n&&(t.dom.blur(),t.focus(),!t.someProp("handleKeyDown",(function(e){return e(t,Oo(8,"Backspace"))})))){var e=t.state.selection.$cursor;e&&e.pos>0&&t.dispatch(t.state.tr.delete(e.pos-1,e.pos).scrollIntoView())}}),50)}},cr)lr[Nr]=cr[Nr];function Pr(t,e){if(t==e)return!0;for(var n in t)if(t[n]!==e[n])return!1;for(var o in e)if(!(o in t))return!1;return!0}var Lr=function(t,e){this.spec=e||$r,this.side=this.spec.side||0,this.toDOM=t};Lr.prototype.map=function(t,e,n,o){var i=t.mapResult(e.from+o,this.side<0?-1:1),r=i.pos;return i.deleted?null:new Rr(r-n,r-n,this)},Lr.prototype.valid=function(){return!0},Lr.prototype.eq=function(t){return this==t||t instanceof Lr&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Pr(this.spec,t.spec))},Lr.prototype.destroy=function(t){this.spec.destroy&&this.spec.destroy(t)};var Ir=function(t,e){this.spec=e||$r,this.attrs=t};Ir.prototype.map=function(t,e,n,o){var i=t.map(e.from+o,this.spec.inclusiveStart?-1:1)-n,r=t.map(e.to+o,this.spec.inclusiveEnd?1:-1)-n;return i>=r?null:new Rr(i,r,this)},Ir.prototype.valid=function(t,e){return e.from<e.to},Ir.prototype.eq=function(t){return this==t||t instanceof Ir&&Pr(this.attrs,t.attrs)&&Pr(this.spec,t.spec)},Ir.is=function(t){return t.type instanceof Ir};var Dr=function(t,e){this.spec=e||$r,this.attrs=t};Dr.prototype.map=function(t,e,n,o){var i=t.mapResult(e.from+o,1);if(i.deleted)return null;var r=t.mapResult(e.to+o,-1);return r.deleted||r.pos<=i.pos?null:new Rr(i.pos-n,r.pos-n,this)},Dr.prototype.valid=function(t,e){var n,o=t.content.findIndex(e.from),i=o.index,r=o.offset;return r==e.from&&!(n=t.child(i)).isText&&r+n.nodeSize==e.to},Dr.prototype.eq=function(t){return this==t||t instanceof Dr&&Pr(this.attrs,t.attrs)&&Pr(this.spec,t.spec)};var Rr=function(t,e,n){this.from=t,this.to=e,this.type=n},zr={spec:{configurable:!0},inline:{configurable:!0}};Rr.prototype.copy=function(t,e){return new Rr(t,e,this.type)},Rr.prototype.eq=function(t,e){return void 0===e&&(e=0),this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to},Rr.prototype.map=function(t,e,n){return this.type.map(t,this,e,n)},Rr.widget=function(t,e,n){return new Rr(t,t,new Lr(e,n))},Rr.inline=function(t,e,n,o){return new Rr(t,e,new Ir(n,o))},Rr.node=function(t,e,n,o){return new Rr(t,e,new Dr(n,o))},zr.spec.get=function(){return this.type.spec},zr.inline.get=function(){return this.type instanceof Ir},Object.defineProperties(Rr.prototype,zr);var Br=[],$r={},jr=function(t,e){this.local=t&&t.length?t:Br,this.children=e&&e.length?e:Br};jr.create=function(t,e){return e.length?Ur(e,t,0,$r):Vr},jr.prototype.find=function(t,e,n){var o=[];return this.findInner(null==t?0:t,null==e?1e9:e,o,0,n),o},jr.prototype.findInner=function(t,e,n,o,i){for(var r=0;r<this.local.length;r++){var s=this.local[r];s.from<=e&&s.to>=t&&(!i||i(s.spec))&&n.push(s.copy(s.from+o,s.to+o))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<e&&this.children[a+1]>t){var l=this.children[a]+1;this.children[a+2].findInner(t-l,e-l,n,o+l,i)}},jr.prototype.map=function(t,e,n){return this==Vr||0==t.maps.length?this:this.mapInner(t,e,0,0,n||$r)},jr.prototype.mapInner=function(t,e,n,o,i){for(var r,s=0;s<this.local.length;s++){var a=this.local[s].map(t,n,o);a&&a.type.valid(e,a)?(r||(r=[])).push(a):i.onRemove&&i.onRemove(this.local[s].spec)}return this.children.length?function(t,e,n,o,i,r,s){for(var a=t.slice(),l=function(t,e,n,o){for(var s=0;s<a.length;s+=3){var l=a[s+1],c=void 0;-1==l||t>l+r||(e>=a[s]+r?a[s+1]=-1:n>=i&&(c=o-n-(e-t))&&(a[s]+=c,a[s+1]+=c))}},c=0;c<n.maps.length;c++)n.maps[c].forEach(l);for(var u=!1,p=0;p<a.length;p+=3)if(-1==a[p+1]){var h=n.map(t[p]+r),d=h-i;if(d<0||d>=o.content.size){u=!0;continue}var f=n.map(t[p+1]+r,-1)-i,m=o.content.findIndex(d),v=m.index,g=m.offset,y=o.maybeChild(v);if(y&&g==d&&g+y.nodeSize==f){var b=a[p+2].mapInner(n,y,h+1,t[p]+r+1,s);b!=Vr?(a[p]=d,a[p+1]=f,a[p+2]=b):(a[p+1]=-2,u=!0)}else u=!0}if(u){var _=function(t,e,n,o,i,r,s){function a(t,e){for(var r=0;r<t.local.length;r++){var l=t.local[r].map(o,i,e);l?n.push(l):s.onRemove&&s.onRemove(t.local[r].spec)}for(var c=0;c<t.children.length;c+=3)a(t.children[c+2],t.children[c]+e+1)}for(var l=0;l<t.length;l+=3)-1==t[l+1]&&a(t[l+2],e[l]+r+1);return n}(a,t,e||[],n,i,r,s),w=Ur(_,o,0,s);e=w.local;for(var x=0;x<a.length;x+=3)a[x+1]<0&&(a.splice(x,3),x-=3);for(var S=0,k=0;S<w.children.length;S+=3){for(var C=w.children[S];k<a.length&&a[k]<C;)k+=3;a.splice(k,0,w.children[S],w.children[S+1],w.children[S+2])}}return new jr(e&&e.sort(qr),a)}(this.children,r,t,e,n,o,i):r?new jr(r.sort(qr)):Vr},jr.prototype.add=function(t,e){return e.length?this==Vr?jr.create(t,e):this.addInner(t,e,0):this},jr.prototype.addInner=function(t,e,n){var o,i=this,r=0;t.forEach((function(t,s){var a,l=s+n;if(a=Hr(e,t,l)){for(o||(o=i.children.slice());r<o.length&&o[r]<s;)r+=3;o[r]==s?o[r+2]=o[r+2].addInner(t,a,l+1):o.splice(r,0,s,s+t.nodeSize,Ur(a,t,l+1,$r)),r+=3}}));for(var s=Fr(r?Wr(e):e,-n),a=0;a<s.length;a++)s[a].type.valid(t,s[a])||s.splice(a--,1);return new jr(s.length?this.local.concat(s).sort(qr):this.local,o||this.children)},jr.prototype.remove=function(t){return 0==t.length||this==Vr?this:this.removeInner(t,0)},jr.prototype.removeInner=function(t,e){for(var n=this.children,o=this.local,i=0;i<n.length;i+=3){for(var r=void 0,s=n[i]+e,a=n[i+1]+e,l=0,c=void 0;l<t.length;l++)(c=t[l])&&c.from>s&&c.to<a&&(t[l]=null,(r||(r=[])).push(c));if(r){n==this.children&&(n=this.children.slice());var u=n[i+2].removeInner(r,s+1);u!=Vr?n[i+2]=u:(n.splice(i,3),i-=3)}}if(o.length)for(var p=0,h=void 0;p<t.length;p++)if(h=t[p])for(var d=0;d<o.length;d++)o[d].eq(h,e)&&(o==this.local&&(o=this.local.slice()),o.splice(d--,1));return n==this.children&&o==this.local?this:o.length||n.length?new jr(o,n):Vr},jr.prototype.forChild=function(t,e){if(this==Vr)return this;if(e.isLeaf)return jr.empty;for(var n,o,i=0;i<this.children.length;i+=3)if(this.children[i]>=t){this.children[i]==t&&(n=this.children[i+2]);break}for(var r=t+1,s=r+e.content.size,a=0;a<this.local.length;a++){var l=this.local[a];if(l.from<s&&l.to>r&&l.type instanceof Ir){var c=Math.max(r,l.from)-r,u=Math.min(s,l.to)-r;c<u&&(o||(o=[])).push(l.copy(c,u))}}if(o){var p=new jr(o.sort(qr));return n?new Zr([p,n]):p}return n||Vr},jr.prototype.eq=function(t){if(this==t)return!0;if(!(t instanceof jr)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(var e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0},jr.prototype.locals=function(t){return Jr(this.localsInner(t))},jr.prototype.localsInner=function(t){if(this==Vr)return Br;if(t.inlineContent||!this.local.some(Ir.is))return this.local;for(var e=[],n=0;n<this.local.length;n++)this.local[n].type instanceof Ir||e.push(this.local[n]);return e};var Vr=new jr;jr.empty=Vr,jr.removeOverlap=Jr;var Zr=function(t){this.members=t};function Fr(t,e){if(!e||!t.length)return t;for(var n=[],o=0;o<t.length;o++){var i=t[o];n.push(new Rr(i.from+e,i.to+e,i.type))}return n}function Hr(t,e,n){if(e.isLeaf)return null;for(var o=n+e.nodeSize,i=null,r=0,s=void 0;r<t.length;r++)(s=t[r])&&s.from>n&&s.to<o&&((i||(i=[])).push(s),t[r]=null);return i}function Wr(t){for(var e=[],n=0;n<t.length;n++)null!=t[n]&&e.push(t[n]);return e}function Ur(t,e,n,o){var i=[],r=!1;e.forEach((function(e,s){var a=Hr(t,e,s+n);if(a){r=!0;var l=Ur(a,e,n+s+1,o);l!=Vr&&i.push(s,s+e.nodeSize,l)}}));for(var s=Fr(r?Wr(t):t,-n).sort(qr),a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(o.onRemove&&o.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new jr(s,i):Vr}function qr(t,e){return t.from-e.from||t.to-e.to}function Jr(t){for(var e=t,n=0;n<e.length-1;n++){var o=e[n];if(o.from!=o.to)for(var i=n+1;i<e.length;i++){var r=e[i];if(r.from!=o.from){r.from<o.to&&(e==t&&(e=t.slice()),e[n]=o.copy(o.from,r.from),Kr(e,i,o.copy(r.from,o.to)));break}r.to!=o.to&&(e==t&&(e=t.slice()),e[i]=r.copy(r.from,o.to),Kr(e,i+1,r.copy(o.to,r.to)))}}return e}function Kr(t,e,n){for(;e<t.length&&qr(n,t[e])>0;)e++;t.splice(e,0,n)}function Gr(t){var e=[];return t.someProp("decorations",(function(n){var o=n(t.state);o&&o!=Vr&&e.push(o)})),t.cursorWrapper&&e.push(jr.create(t.state.doc,[t.cursorWrapper.deco])),Zr.from(e)}Zr.prototype.map=function(t,e){var n=this.members.map((function(n){return n.map(t,e,$r)}));return Zr.from(n)},Zr.prototype.forChild=function(t,e){if(e.isLeaf)return jr.empty;for(var n=[],o=0;o<this.members.length;o++){var i=this.members[o].forChild(t,e);i!=Vr&&(i instanceof Zr?n=n.concat(i.members):n.push(i))}return Zr.from(n)},Zr.prototype.eq=function(t){if(!(t instanceof Zr)||t.members.length!=this.members.length)return!1;for(var e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0},Zr.prototype.locals=function(t){for(var e,n=!0,o=0;o<this.members.length;o++){var i=this.members[o].localsInner(t);if(i.length)if(e){n&&(e=e.slice(),n=!1);for(var r=0;r<i.length;r++)e.push(i[r])}else e=i}return e?Jr(n?e:e.sort(qr)):Br},Zr.from=function(t){switch(t.length){case 0:return Vr;case 1:return t[0];default:return new Zr(t)}};var Xr=function(t,e){this._props=e,this.state=e.state,this.directPlugins=e.plugins||[],this.directPlugins.forEach(is),this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):t.apply?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=es(this),this.markCursor=null,this.cursorWrapper=null,ts(this),this.nodeViews=ns(this),this.docView=ni(this.state.doc,Qr(this),Gr(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(t){t.shiftKey=!1,t.mouseDown=null,t.lastKeyCode=null,t.lastKeyCodeTime=0,t.lastClick={time:0,x:0,y:0,type:""},t.lastSelectionOrigin=null,t.lastSelectionTime=0,t.lastIOSEnter=0,t.lastIOSEnterFallbackTimeout=null,t.lastAndroidDelete=0,t.composing=!1,t.composingTimeout=null,t.compositionNodes=[],t.compositionEndedAt=-2e8,t.domObserver=new sr(t,(function(e,n,o,i){return Fi(t,e,n,o,i)})),t.domObserver.start(),t.domChangeCount=0,t.eventHandlers=Object.create(null);var e=function(e){var n=lr[e];t.dom.addEventListener(e,t.eventHandlers[e]=function(e){!function(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(var n=e.target;n!=t.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}(t,e)||hr(t,e)||!t.editable&&e.type in cr||n(t,e)})};for(var n in lr)e(n);co.safari&&t.dom.addEventListener("input",(function(){return null})),pr(t)}(this),this.prevDirectPlugins=[],this.pluginViews=[],this.updatePluginViews()},Yr={props:{configurable:!0},root:{configurable:!0},isDestroyed:{configurable:!0}};function Qr(t){var e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),e.translate="no",t.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(t.state)),n)for(var o in n)"class"==o&&(e.class+=" "+n[o]),"style"==o?e.style=(e.style?e.style+";":"")+n[o]:e[o]||"contenteditable"==o||"nodeName"==o||(e[o]=String(n[o]))})),[Rr.node(0,t.state.doc.content.size,e)]}function ts(t){if(t.markCursor){var e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),t.cursorWrapper={dom:e,deco:Rr.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function es(t){return!t.someProp("editable",(function(e){return!1===e(t.state)}))}function ns(t){var e={};return t.someProp("nodeViews",(function(t){for(var n in t)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=t[n])})),e}function is(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}function rs(t){return void 0===t&&(t={}),new ro({view:function(e){return new ss(e,t)}})}Yr.props.get=function(){if(this._props.state!=this.state){var t=this._props;for(var e in this._props={},t)this._props[e]=t[e];this._props.state=this.state}return this._props},Xr.prototype.update=function(t){t.handleDOMEvents!=this._props.handleDOMEvents&&pr(this),this._props=t,t.plugins&&(t.plugins.forEach(is),this.directPlugins=t.plugins),this.updateStateInner(t.state,!0)},Xr.prototype.setProps=function(t){var e={};for(var n in this._props)e[n]=this._props[n];for(var o in e.state=this.state,t)e[o]=t[o];this.update(e)},Xr.prototype.updateState=function(t){this.updateStateInner(t,this.state.plugins!=t.plugins)},Xr.prototype.updateStateInner=function(t,e){var n=this,o=this.state,i=!1,r=!1;if(t.storedMarks&&this.composing&&(Cr(this),r=!0),this.state=t,e){var s=ns(this);(function(t,e){var n=0,o=0;for(var i in t){if(t[i]!=e[i])return!0;n++}for(var r in e)o++;return n!=o})(s,this.nodeViews)&&(this.nodeViews=s,i=!0),pr(this)}this.editable=es(this),ts(this);var a=Gr(this),l=Qr(this),c=e?"reset":t.scrollToSelection>o.scrollToSelection?"to selection":"preserve",u=i||!this.docView.matchesNode(t.doc,l,a);!u&&t.selection.eq(o.selection)||(r=!0);var p,h,d,f,m,v,g,y,b,_,w,x="preserve"==c&&r&&null==this.dom.style.overflowAnchor&&function(t){for(var e,n,o=t.dom.getBoundingClientRect(),i=Math.max(0,o.top),r=(o.left+o.right)/2,s=i+1;s<Math.min(innerHeight,o.bottom);s+=5){var a=t.root.elementFromPoint(r,s);if(a!=t.dom&&t.dom.contains(a)){var l=a.getBoundingClientRect();if(l.top>=i-20){e=a,n=l.top;break}}}return{refDOM:e,refTop:n,stack:No(t.dom)}}(this);if(r){this.domObserver.stop();var S=u&&(co.ie||co.chrome)&&!this.composing&&!o.selection.empty&&!t.selection.empty&&(f=o.selection,m=t.selection,v=Math.min(f.$anchor.sharedDepth(f.head),m.$anchor.sharedDepth(m.head)),f.$anchor.start(v)!=m.$anchor.start(v));if(u){var k=co.chrome?this.trackWrites=this.root.getSelection().focusNode:null;!i&&this.docView.update(t.doc,l,a,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=ni(t.doc,l,a,this.dom,this)),k&&!this.trackWrites&&(S=!0)}S||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&(p=this,h=p.docView.domFromPos(p.state.selection.anchor,0),d=p.root.getSelection(),_o(h.node,h.offset,d.anchorNode,d.anchorOffset)))?_i(this,S):(Ci(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(o),"reset"==c)this.dom.scrollTop=0;else if("to selection"==c){var C=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(t){return t(n)}))||(t.selection instanceof Hn?Ao(this,this.docView.domAfterPos(t.selection.from).getBoundingClientRect(),C):Ao(this,this.coordsAtPos(t.selection.head,1),C))}else x&&(y=(g=x).refDOM,b=g.refTop,_=g.stack,w=y?y.getBoundingClientRect().top:0,Po(_,0==w?0:w-b))},Xr.prototype.destroyPluginViews=function(){for(var t;t=this.pluginViews.pop();)t.destroy&&t.destroy()},Xr.prototype.updatePluginViews=function(t){if(t&&t.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(var e=0;e<this.pluginViews.length;e++){var n=this.pluginViews[e];n.update&&n.update(this,t)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(var o=0;o<this.directPlugins.length;o++){var i=this.directPlugins[o];i.spec.view&&this.pluginViews.push(i.spec.view(this))}for(var r=0;r<this.state.plugins.length;r++){var s=this.state.plugins[r];s.spec.view&&this.pluginViews.push(s.spec.view(this))}}},Xr.prototype.someProp=function(t,e){var n,o=this._props&&this._props[t];if(null!=o&&(n=e?e(o):o))return n;for(var i=0;i<this.directPlugins.length;i++){var r=this.directPlugins[i].props[t];if(null!=r&&(n=e?e(r):r))return n}var s=this.state.plugins;if(s)for(var a=0;a<s.length;a++){var l=s[a].props[t];if(null!=l&&(n=e?e(l):l))return n}},Xr.prototype.hasFocus=function(){return this.root.activeElement==this.dom},Xr.prototype.focus=function(){this.domObserver.stop(),this.editable&&function(t){if(t.setActive)return t.setActive();if(Lo)return t.focus(Lo);var e=No(t);t.focus(null==Lo?{get preventScroll(){return Lo={preventScroll:!0},!0}}:void 0),Lo||(Lo=!1,Po(e,0))}(this.dom),_i(this),this.domObserver.start()},Yr.root.get=function(){var t=this._root;if(null==t)for(var e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=function(){return document.getSelection()}),this._root=e;return t||document},Xr.prototype.posAtCoords=function(t){return zo(this,t)},Xr.prototype.coordsAtPos=function(t,e){return void 0===e&&(e=1),jo(this,t,e)},Xr.prototype.domAtPos=function(t,e){return void 0===e&&(e=0),this.docView.domFromPos(t,e)},Xr.prototype.nodeDOM=function(t){var e=this.docView.descAt(t);return e?e.nodeDOM:null},Xr.prototype.posAtDOM=function(t,e,n){void 0===n&&(n=-1);var o=this.docView.posFromDOM(t,e,n);if(null==o)throw new RangeError("DOM position not inside the editor");return o},Xr.prototype.endOfTextblock=function(t,e){return Jo(this,e||this.state,t)},Xr.prototype.destroy=function(){this.docView&&(!function(t){for(var e in t.domObserver.stop(),t.eventHandlers)t.dom.removeEventListener(e,t.eventHandlers[e]);clearTimeout(t.composingTimeout),clearTimeout(t.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Gr(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},Yr.isDestroyed.get=function(){return null==this.docView},Xr.prototype.dispatchEvent=function(t){return function(t,e){hr(t,e)||!lr[e.type]||!t.editable&&e.type in cr||lr[e.type](t,e)}(this,t)},Xr.prototype.dispatch=function(t){var e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))},Object.defineProperties(Xr.prototype,Yr);var ss=function(t,e){var n=this;this.editorView=t,this.width=e.width||1,this.color=e.color||"black",this.class=e.class,this.cursorPos=null,this.element=null,this.timeout=null,this.handlers=["dragover","dragend","drop","dragleave"].map((function(e){var o=function(t){return n[e](t)};return t.dom.addEventListener(e,o),{name:e,handler:o}}))};ss.prototype.destroy=function(){var t=this;this.handlers.forEach((function(e){var n=e.name,o=e.handler;return t.editorView.dom.removeEventListener(n,o)}))},ss.prototype.update=function(t,e){null!=this.cursorPos&&e.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())},ss.prototype.setCursor=function(t){t!=this.cursorPos&&(this.cursorPos=t,null==t?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())},ss.prototype.updateOverlay=function(){var t,e=this.editorView.state.doc.resolve(this.cursorPos);if(!e.parent.inlineContent){var n=e.nodeBefore,o=e.nodeAfter;if(n||o){var i=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0)).getBoundingClientRect(),r=n?i.bottom:i.top;n&&o&&(r=(r+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),t={left:i.left,right:i.right,top:r-this.width/2,bottom:r+this.width/2}}}if(!t){var s=this.editorView.coordsAtPos(this.cursorPos);t={left:s.left-this.width/2,right:s.left+this.width/2,top:s.top,bottom:s.bottom}}var a,l,c=this.editorView.dom.offsetParent;if(this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color),!c||c==document.body&&"static"==getComputedStyle(c).position)a=-pageXOffset,l=-pageYOffset;else{var u=c.getBoundingClientRect();a=u.left-c.scrollLeft,l=u.top-c.scrollTop}this.element.style.left=t.left-a+"px",this.element.style.top=t.top-l+"px",this.element.style.width=t.right-t.left+"px",this.element.style.height=t.bottom-t.top+"px"},ss.prototype.scheduleRemoval=function(t){var e=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){return e.setCursor(null)}),t)},ss.prototype.dragover=function(t){if(this.editorView.editable){var e=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),n=e&&e.inside>=0&&this.editorView.state.doc.nodeAt(e.inside),o=n&&n.type.spec.disableDropCursor,i="function"==typeof o?o(this.editorView,e):o;if(e&&!i){var r=e.pos;if(this.editorView.dragging&&this.editorView.dragging.slice&&null==(r=kn(this.editorView.state.doc,r,this.editorView.dragging.slice)))return this.setCursor(null);this.setCursor(r),this.scheduleRemoval(5e3)}}},ss.prototype.dragend=function(){this.scheduleRemoval(20)},ss.prototype.drop=function(){this.scheduleRemoval(20)},ss.prototype.dragleave=function(t){t.target!=this.editorView.dom&&this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)};for(var as={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},ls={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},cs="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),us="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),ps="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),hs="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),ds="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),fs=cs&&(hs||+cs[1]<57)||ps&&hs,ms=0;ms<10;ms++)as[48+ms]=as[96+ms]=String(ms);for(ms=1;ms<=24;ms++)as[ms+111]="F"+ms;for(ms=65;ms<=90;ms++)as[ms]=String.fromCharCode(ms+32),ls[ms]=String.fromCharCode(ms);for(var vs in as)ls.hasOwnProperty(vs)||(ls[vs]=as[vs]);var gs="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function ys(t){var e,n,o,i,r=t.split(/-(?!$)/),s=r[r.length-1];"Space"==s&&(s=" ");for(var a=0;a<r.length-1;a++){var l=r[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))e=!0;else if(/^(c|ctrl|control)$/i.test(l))n=!0;else if(/^s(hift)?$/i.test(l))o=!0;else{if(!/^mod$/i.test(l))throw new Error("Unrecognized modifier name: "+l);gs?i=!0:n=!0}}return e&&(s="Alt-"+s),n&&(s="Ctrl-"+s),i&&(s="Meta-"+s),o&&(s="Shift-"+s),s}function bs(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),!1!==n&&e.shiftKey&&(t="Shift-"+t),t}function _s(t){return new ro({props:{handleKeyDown:ws(t)}})}function ws(t){var e=function(t){var e=Object.create(null);for(var n in t)e[ys(n)]=t[n];return e}(t);return function(t,n){var o,i=function(t){var e=!(fs&&(t.ctrlKey||t.altKey||t.metaKey)||(us||ds)&&t.shiftKey&&t.key&&1==t.key.length)&&t.key||(t.shiftKey?ls:as)[t.keyCode]||t.key||"Unidentified";return"Esc"==e&&(e="Escape"),"Del"==e&&(e="Delete"),"Left"==e&&(e="ArrowLeft"),"Up"==e&&(e="ArrowUp"),"Right"==e&&(e="ArrowRight"),"Down"==e&&(e="ArrowDown"),e}(n),r=1==i.length&&" "!=i,s=e[bs(i,n,!r)];if(s&&s(t.state,t.dispatch,t))return!0;if(r&&(n.shiftKey||n.altKey||n.metaKey||i.charCodeAt(0)>127)&&(o=as[n.keyCode])&&o!=i){var a=e[bs(o,n,!0)];if(a&&a(t.state,t.dispatch,t))return!0}else if(r&&n.shiftKey){var l=e[bs(i,n,!0)];if(l&&l(t.state,t.dispatch,t))return!0}return!1}}var xs=function(t){function e(e){t.call(this,e,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(n,o){var i=n.resolve(o.map(this.head));return e.valid(i)?new e(i):t.near(i)},e.prototype.content=function(){return Kt.empty},e.prototype.eq=function(t){return t instanceof e&&t.head==this.head},e.prototype.toJSON=function(){return{type:"gapcursor",pos:this.head}},e.fromJSON=function(t,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new e(t.resolve(n.pos))},e.prototype.getBookmark=function(){return new Ss(this.anchor)},e.valid=function(t){var e=t.parent;if(e.isTextblock||!function(t){for(var e=t.depth;e>=0;e--){var n=t.index(e);if(0!=n)for(var o=t.node(e).child(n-1);;o=o.lastChild){if(0==o.childCount&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}(t)||!function(t){for(var e=t.depth;e>=0;e--){var n=t.indexAfter(e),o=t.node(e);if(n!=o.childCount)for(var i=o.child(n);;i=i.firstChild){if(0==i.childCount&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}(t))return!1;var n=e.type.spec.allowGapCursor;if(null!=n)return n;var o=e.contentMatchAt(t.index()).defaultType;return o&&o.isTextblock},e.findFrom=function(t,n,o){t:for(;;){if(!o&&e.valid(t))return t;for(var i=t.pos,r=null,s=t.depth;;s--){var a=t.node(s);if(n>0?t.indexAfter(s)<a.childCount:t.index(s)>0){r=a.child(n>0?t.indexAfter(s):t.index(s)-1);break}if(0==s)return null;i+=n;var l=t.doc.resolve(i);if(e.valid(l))return l}for(;;){var c=n>0?r.firstChild:r.lastChild;if(!c){if(r.isAtom&&!r.isText&&!Hn.isSelectable(r)){t=t.doc.resolve(i+r.nodeSize*n),o=!1;continue t}break}r=c,i+=n;var u=t.doc.resolve(i);if(e.valid(u))return u}return null}},e}($n);xs.prototype.visible=!1,$n.jsonID("gapcursor",xs);var Ss=function(t){this.pos=t};Ss.prototype.map=function(t){return new Ss(t.map(this.pos))},Ss.prototype.resolve=function(t){var e=t.resolve(this.pos);return xs.valid(e)?new xs(e):$n.near(e)};var ks=ws({ArrowLeft:Cs("horiz",-1),ArrowRight:Cs("horiz",1),ArrowUp:Cs("vert",-1),ArrowDown:Cs("vert",1)});function Cs(t,e){var n="vert"==t?e>0?"down":"up":e>0?"right":"left";return function(t,o,i){var r=t.selection,s=e>0?r.$to:r.$from,a=r.empty;if(r instanceof Zn){if(!i.endOfTextblock(n)||0==s.depth)return!1;a=!1,s=t.doc.resolve(e>0?s.after():s.before())}var l=xs.findFrom(s,e,a);return!!l&&(o&&o(t.tr.setSelection(new xs(l))),!0)}}function Os(t,e,n){if(!t.editable)return!1;var o=t.state.doc.resolve(e);if(!xs.valid(o))return!1;var i=t.posAtCoords({left:n.clientX,top:n.clientY}).inside;return!(i>-1&&Hn.isSelectable(t.state.doc.nodeAt(i)))&&(t.dispatch(t.state.tr.setSelection(new xs(o))),!0)}function Ts(t){if(!(t.selection instanceof xs))return null;var e=document.createElement("div");return e.className="ProseMirror-gapcursor",jr.create(t.doc,[Rr.widget(t.selection.head,e,{key:"gapcursor"})])}function Ms(t,e){return!t.selection.empty&&(e&&e(t.tr.deleteSelection().scrollIntoView()),!0)}function Es(t,e,n){for(;t;t="start"==e?t.firstChild:t.lastChild){if(t.isTextblock)return!0;if(n&&1!=t.childCount)return!1}return!1}function As(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function Ns(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){var n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}function Ps(t){for(var e=0;e<t.edgeCount;e++){var n=t.edge(e).type;if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function Ls(t,e){var n=t.selection,o=n.$head,i=n.$anchor;if(!o.parent.type.spec.code||!o.sameParent(i))return!1;var r=o.node(-1),s=o.indexAfter(-1),a=Ps(r.contentMatchAt(s));if(!r.canReplaceWith(s,s,a))return!1;if(e){var l=o.after(),c=t.tr.replaceWith(l,l,a.createAndFill());c.setSelection($n.near(c.doc.resolve(l),1)),e(c.scrollIntoView())}return!0}function Is(t,e){var n=t.selection,o=n.$from,i=n.$to;if(t.selection instanceof Hn&&t.selection.node.isBlock)return!(!o.parentOffset||!wn(t.doc,o.pos))&&(e&&e(t.tr.split(o.pos).scrollIntoView()),!0);if(!o.parent.isBlock)return!1;if(e){var r=i.parentOffset==i.parent.content.size,s=t.tr;(t.selection instanceof Zn||t.selection instanceof Un)&&s.deleteSelection();var a=0==o.depth?null:Ps(o.node(-1).contentMatchAt(o.indexAfter(-1))),l=r&&a?[{type:a}]:null,c=wn(s.doc,s.mapping.map(o.pos),1,l);if(l||c||!wn(s.doc,s.mapping.map(o.pos),1,a&&[{type:a}])||(l=[{type:a}],c=!0),c&&(s.split(s.mapping.map(o.pos),1,l),!r&&!o.parentOffset&&o.parent.type!=a)){var u=s.mapping.map(o.before()),p=s.doc.resolve(u);o.node(-1).canReplaceWith(p.index(),p.index()+1,a)&&s.setNodeMarkup(s.mapping.map(o.before()),a)}e(s.scrollIntoView())}return!0}function Ds(t,e,n){var o,i,r=e.nodeBefore,s=e.nodeAfter;if(r.type.spec.isolating||s.type.spec.isolating)return!1;if(function(t,e,n){var o=e.nodeBefore,i=e.nodeAfter,r=e.index();return!(!(o&&i&&o.type.compatibleContent(i.type))||(!o.content.size&&e.parent.canReplace(r-1,r)?(n&&n(t.tr.delete(e.pos-o.nodeSize,e.pos).scrollIntoView()),0):!e.parent.canReplace(r,r+1)||!i.isTextblock&&!xn(t.doc,e.pos)||(n&&n(t.tr.clearIncompatible(e.pos,o.type,o.contentMatchAt(o.childCount)).join(e.pos).scrollIntoView()),0)))}(t,e,n))return!0;var a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(o=(i=r.contentMatchAt(r.childCount)).findWrapping(s.type))&&i.matchType(o[0]||s.type).validEnd){if(n){for(var l=e.pos+s.nodeSize,c=Zt.empty,u=o.length-1;u>=0;u--)c=Zt.from(o[u].create(null,c));c=Zt.from(r.copy(c));var p=t.tr.step(new mn(e.pos-1,l,e.pos,l,new Kt(c,1,0),o.length,!0)),h=l+2*o.length;xn(p.doc,h)&&p.join(h),n(p.scrollIntoView())}return!0}var d=$n.findFrom(e,1),f=d&&d.$from.blockRange(d.$to),m=f&&yn(f);if(null!=m&&m>=e.depth)return n&&n(t.tr.lift(f,m).scrollIntoView()),!0;if(a&&Es(s,"start",!0)&&Es(r,"end")){for(var v=r,g=[];g.push(v),!v.isTextblock;)v=v.lastChild;for(var y=s,b=1;!y.isTextblock;y=y.firstChild)b++;if(v.canReplace(v.childCount,v.childCount,y.content)){if(n){for(var _=Zt.empty,w=g.length-1;w>=0;w--)_=Zt.from(g[w].copy(_));n(t.tr.step(new mn(e.pos-g.length,e.pos+s.nodeSize,e.pos+b,e.pos+s.nodeSize-b,new Kt(_,g.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function Rs(t,e){return function(n,o){var i=n.selection,r=i.from,s=i.to,a=!1;return n.doc.nodesBetween(r,s,(function(o,i){if(a)return!1;if(o.isTextblock&&!o.hasMarkup(t,e))if(o.type==t)a=!0;else{var r=n.doc.resolve(i),s=r.index();a=r.parent.canReplaceWith(s,s+1,t)}})),!!a&&(o&&o(n.tr.setBlockType(r,s,t,e).scrollIntoView()),!0)}}function zs(t,e){return function(n,o){var i=n.selection,r=i.empty,s=i.$cursor,a=i.ranges;if(r&&!s||!function(t,e,n){for(var o=function(o){var i=e[o],r=i.$from,s=i.$to,a=0==r.depth&&t.type.allowsMarkType(n);if(t.nodesBetween(r.pos,s.pos,(function(t){if(a)return!1;a=t.inlineContent&&t.type.allowsMarkType(n)})),a)return{v:!0}},i=0;i<e.length;i++){var r=o(i);if(r)return r.v}return!1}(n.doc,a,t))return!1;if(o)if(s)t.isInSet(n.storedMarks||s.marks())?o(n.tr.removeStoredMark(t)):o(n.tr.addStoredMark(t.create(e)));else{for(var l=!1,c=n.tr,u=0;!l&&u<a.length;u++){var p=a[u],h=p.$from,d=p.$to;l=n.doc.rangeHasMark(h.pos,d.pos,t)}for(var f=0;f<a.length;f++){var m=a[f],v=m.$from,g=m.$to;if(l)c.removeMark(v.pos,g.pos,t);else{var y=v.pos,b=g.pos,_=v.nodeAfter,w=g.nodeBefore,x=_&&_.isText?/^\s*/.exec(_.text)[0].length:0,S=w&&w.isText?/\s*$/.exec(w.text)[0].length:0;y+x<b&&(y+=x,b-=S),c.addMark(y,b,t.create(e))}}o(c.scrollIntoView())}return!0}}function Bs(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return function(e,n,o){for(var i=0;i<t.length;i++)if(t[i](e,n,o))return!0;return!1}}var $s=Bs(Ms,(function(t,e,n){var o=t.selection.$cursor;if(!o||(n?!n.endOfTextblock("backward",t):o.parentOffset>0))return!1;var i=As(o);if(!i){var r=o.blockRange(),s=r&&yn(r);return null!=s&&(e&&e(t.tr.lift(r,s).scrollIntoView()),!0)}var a=i.nodeBefore;if(!a.type.spec.isolating&&Ds(t,i,e))return!0;if(0==o.parent.content.size&&(Es(a,"end")||Hn.isSelectable(a))){if(e){var l=t.tr.deleteRange(o.before(),o.after());l.setSelection(Es(a,"end")?$n.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):Hn.create(l.doc,i.pos-a.nodeSize)),e(l.scrollIntoView())}return!0}return!(!a.isAtom||i.depth!=o.depth-1)&&(e&&e(t.tr.delete(i.pos-a.nodeSize,i.pos).scrollIntoView()),!0)}),(function(t,e,n){var o=t.selection,i=o.$head,r=i;if(!o.empty)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):i.parentOffset>0)return!1;r=As(i)}var s=r&&r.nodeBefore;return!(!s||!Hn.isSelectable(s))&&(e&&e(t.tr.setSelection(Hn.create(t.doc,r.pos-s.nodeSize)).scrollIntoView()),!0)})),js=Bs(Ms,(function(t,e,n){var o=t.selection.$cursor;if(!o||(n?!n.endOfTextblock("forward",t):o.parentOffset<o.parent.content.size))return!1;var i=Ns(o);if(!i)return!1;var r=i.nodeAfter;if(Ds(t,i,e))return!0;if(0==o.parent.content.size&&(Es(r,"start")||Hn.isSelectable(r))){if(e){var s=t.tr.deleteRange(o.before(),o.after());s.setSelection(Es(r,"start")?$n.findFrom(s.doc.resolve(s.mapping.map(i.pos)),1):Hn.create(s.doc,s.mapping.map(i.pos))),e(s.scrollIntoView())}return!0}return!(!r.isAtom||i.depth!=o.depth-1)&&(e&&e(t.tr.delete(i.pos,i.pos+r.nodeSize).scrollIntoView()),!0)}),(function(t,e,n){var o=t.selection,i=o.$head,r=i;if(!o.empty)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):i.parentOffset<i.parent.content.size)return!1;r=Ns(i)}var s=r&&r.nodeAfter;return!(!s||!Hn.isSelectable(s))&&(e&&e(t.tr.setSelection(Hn.create(t.doc,r.pos)).scrollIntoView()),!0)})),Vs={Enter:Bs((function(t,e){var n=t.selection,o=n.$head,i=n.$anchor;return!(!o.parent.type.spec.code||!o.sameParent(i))&&(e&&e(t.tr.insertText("\n").scrollIntoView()),!0)}),(function(t,e){var n=t.selection,o=n.$from,i=n.$to;if(n instanceof Un||o.parent.inlineContent||i.parent.inlineContent)return!1;var r=Ps(i.parent.contentMatchAt(i.indexAfter()));if(!r||!r.isTextblock)return!1;if(e){var s=(!o.parentOffset&&i.index()<i.parent.childCount?o:i).pos,a=t.tr.insert(s,r.createAndFill());a.setSelection(Zn.create(a.doc,s+1)),e(a.scrollIntoView())}return!0}),(function(t,e){var n=t.selection.$cursor;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){var o=n.before();if(wn(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}var i=n.blockRange(),r=i&&yn(i);return null!=r&&(e&&e(t.tr.lift(i,r).scrollIntoView()),!0)}),Is),"Mod-Enter":Ls,Backspace:$s,"Mod-Backspace":$s,"Shift-Backspace":$s,Delete:js,"Mod-Delete":js,"Mod-a":function(t,e){return e&&e(t.tr.setSelection(new Un(t.doc))),!0}},Zs={"Ctrl-h":Vs.Backspace,"Alt-Backspace":Vs["Mod-Backspace"],"Ctrl-d":Vs.Delete,"Ctrl-Alt-Backspace":Vs["Mod-Delete"],"Alt-Delete":Vs["Mod-Delete"],"Alt-d":Vs["Mod-Delete"]};for(var Fs in Vs)Zs[Fs]=Vs[Fs];var Hs=("undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&"darwin"==os.platform())?Zs:Vs,Ws=function(t,e){var n;this.match=t,this.handler="string"==typeof e?(n=e,function(t,e,o,i){var r=n;if(e[1]){var s=e[0].lastIndexOf(e[1]);r+=e[0].slice(s+e[1].length);var a=(o+=s)-i;a>0&&(r=e[0].slice(s-a,s)+r,o=i)}return t.tr.insertText(r,o,i)}):e};function Us(t,e,n,o,i,r){if(t.composing)return!1;var s=t.state,a=s.doc.resolve(e);if(a.parent.type.spec.code)return!1;for(var l=a.parent.textBetween(Math.max(0,a.parentOffset-500),a.parentOffset,null,"￼")+o,c=0;c<i.length;c++){var u=i[c].match.exec(l),p=u&&i[c].handler(s,u,e-(u[0].length-o.length),n);if(p)return t.dispatch(p.setMeta(r,{transform:p,from:e,to:n,text:o})),!0}return!1}function qs(t,e){for(var n=t.plugins,o=0;o<n.length;o++){var i=n[o],r=void 0;if(i.spec.isInputRules&&(r=i.getState(t))){if(e){for(var s=t.tr,a=r.transform,l=a.steps.length-1;l>=0;l--)s.step(a.steps[l].invert(a.docs[l]));if(r.text){var c=s.doc.resolve(r.from).marks();s.replaceWith(r.from,r.to,t.schema.text(r.text,c))}else s.delete(r.from,r.to);e(s)}return!0}}return!1}new Ws(/--$/,"—"),new Ws(/\.\.\.$/,"…"),new Ws(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“"),new Ws(/"$/,"”"),new Ws(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘"),new Ws(/'$/,"’");function Js(t,e,n,o){return new Ws(t,(function(t,i,r,s){var a=n instanceof Function?n(i):n,l=t.tr.delete(r,s),c=l.doc.resolve(r).blockRange(),u=c&&bn(c,e,a);if(!u)return null;l.wrap(c,u);var p=l.doc.resolve(r-1).nodeBefore;return p&&p.type==e&&xn(l.doc,r-1)&&(!o||o(i,p))&&l.join(r-1),l}))}function Ks(t,e,n){return new Ws(t,(function(t,o,i,r){var s=t.doc.resolve(i),a=n instanceof Function?n(o):n;return s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),e)?t.tr.delete(i,r).setBlockType(i,i,e,a):null}))}function Gs(t,e){return e?t.createChecked(null,e):t.createAndFill()}function Xs(t,e,n,o,i){const r=function(t){if(t.cached.tableNodeTypes)return t.cached.tableNodeTypes;const e={};return Object.keys(t.nodes).forEach((n=>{const o=t.nodes[n];o.spec.tableRole&&(e[o.spec.tableRole]=o)})),t.cached.tableNodeTypes=e,e}(t),s=[],a=[];for(let t=0;t<n;t+=1){const t=Gs(r.cell,i);if(t&&a.push(t),o){const t=Gs(r.header_cell,i);t&&s.push(t)}}const l=[];for(let t=0;t<e;t+=1)l.push(r.row.createChecked(null,o&&0===t?s:a));return r.table.createChecked(null,l)}function Ys(t){return e=>function(t,e){for(let n=t.depth;n>0;n-=1){const o=t.node(n);if(e(o))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:o}}}(e.$from,t)}function Qs(t){return function(e){if(function(t){return t instanceof Hn}(e)){const{node:n}=e,{$from:o}=e;if(function(t,e){return Array.isArray(t)&&t.indexOf(e.type)>-1||e.type===t}(t,n))return{node:n,pos:o.pos,depth:o.depth}}}}function ta(t,e){const{from:n,to:o}=t.selection;let i=[];t.doc.nodesBetween(n,o,(t=>{i=[...i,...t.marks]}));const r=i.find((t=>t.type.name===e.name));return r?r.attrs:{}}function ea(t=null,e=null){if(!t||!e)return!1;const n=t.parent.childAfter(t.parentOffset);if(!n.node)return!1;const o=n.node.marks.find((t=>t.type===e));if(!o)return!1;let i=t.index(),r=t.start()+n.offset,s=i+1,a=r+n.node.nodeSize;for(;i>0&&o.isInSet(t.parent.child(i-1).marks);)i-=1,r-=t.parent.child(i).nodeSize;for(;s<t.parent.childCount&&o.isInSet(t.parent.child(s).marks);)a+=t.parent.child(s).nodeSize,s+=1;return{from:r,to:a}}function na(t,e){const{from:n,to:o}=t.selection;let i=[];t.doc.nodesBetween(n,o,(t=>{i=[...i,t]}));const r=i.reverse().find((t=>t.type.name===e.name));return r?r.attrs:{}}function oa(t,e,n={}){const o=Qs(e)(t.selection)||Ys((t=>t.type===e))(t.selection);return Object.keys(n).length&&o?o.node.hasMarkup(e,{...o.node.attrs,...n}):!!o}function ia(t,e){return function(n,o){var i=n.selection,r=i.$from,s=i.$to,a=r.blockRange(s),l=!1,c=a;if(!a)return!1;if(a.depth>=2&&r.node(a.depth-1).type.compatibleContent(t)&&0==a.startIndex){if(0==r.index(a.depth-1))return!1;var u=n.doc.resolve(a.start-2);c=new de(u,u,a.depth),a.endIndex<a.parent.childCount&&(a=new de(r,n.doc.resolve(s.end(a.depth)),a.depth)),l=!0}var p=bn(c,t,e,a);return!!p&&(o&&o(function(t,e,n,o,i){for(var r=Zt.empty,s=n.length-1;s>=0;s--)r=Zt.from(n[s].type.create(n[s].attrs,r));t.step(new mn(e.start-(o?2:0),e.end,e.start,e.end,new Kt(r,0,0),n.length,!0));for(var a=0,l=0;l<n.length;l++)n[l].type==i&&(a=l+1);for(var c=n.length-a,u=e.start+n.length-(o?2:0),p=e.parent,h=e.startIndex,d=e.endIndex,f=!0;h<d;h++,f=!1)!f&&wn(t.doc,u,c)&&(t.split(u,c),u+=2*c),u+=p.child(h).nodeSize;return t}(n.tr,a,p,l,t).scrollIntoView()),!0)}}function ra(t){return function(e,n){var o=e.selection,i=o.$from,r=o.$to,s=i.blockRange(r,(function(e){return e.childCount&&e.firstChild.type==t}));return!!s&&(!n||(i.node(s.depth-1).type==t?function(t,e,n,o){var i=t.tr,r=o.end,s=o.$to.end(o.depth);r<s&&(i.step(new mn(r-1,s,r,s,new Kt(Zt.from(n.create(null,o.parent.copy())),1,0),1,!0)),o=new de(i.doc.resolve(o.$from.pos),i.doc.resolve(s),o.depth));return e(i.lift(o,yn(o)).scrollIntoView()),!0}(e,n,t,s):function(t,e,n){for(var o=t.tr,i=n.parent,r=n.end,s=n.endIndex-1,a=n.startIndex;s>a;s--)r-=i.child(s).nodeSize,o.delete(r-1,r+1);var l=o.doc.resolve(n.start),c=l.nodeAfter;if(o.mapping.map(n.end)!=n.start+l.nodeAfter.nodeSize)return!1;var u=0==n.startIndex,p=n.endIndex==i.childCount,h=l.node(-1),d=l.index(-1);if(!h.canReplace(d+(u?0:1),d+1,c.content.append(p?Zt.empty:Zt.from(i))))return!1;var f=l.pos,m=f+c.nodeSize;return o.step(new mn(f-(u?1:0),m+(p?1:0),f+1,m-1,new Kt((u?Zt.empty:Zt.from(i.copy(Zt.empty))).append(p?Zt.empty:Zt.from(i.copy(Zt.empty))),u?0:1,p?0:1),u?0:1)),e(o.scrollIntoView()),!0}(e,n,s)))}}function sa(t){return function(e,n){var o=e.selection,i=o.$from,r=o.$to,s=i.blockRange(r,(function(e){return e.childCount&&e.firstChild.type==t}));if(!s)return!1;var a=s.startIndex;if(0==a)return!1;var l=s.parent,c=l.child(a-1);if(c.type!=t)return!1;if(n){var u=c.lastChild&&c.lastChild.type==l.type,p=Zt.from(u?t.create():null),h=new Kt(Zt.from(t.create(null,Zt.from(l.type.create(null,p)))),u?3:1,0),d=s.start,f=s.end;n(e.tr.step(new mn(d-(u?3:1),f,d,f,h,1,!0)).scrollIntoView())}return!0}}function aa(t,e,n){return new Ws(t,((t,o,i,r)=>{const s=n instanceof Function?n(o):n,{tr:a}=t,l=o.length-1;let c=r,u=i;if(o[l]){const n=i+o[0].indexOf(o[l-1]),s=n+o[l-1].length-1,p=n+o[l-1].lastIndexOf(o[l]),h=p+o[l].length,d=function(t,e,n){let o=[];return n.doc.nodesBetween(t,e,((t,e)=>{o=[...o,...t.marks.map((n=>({start:e,end:e+t.nodeSize,mark:n})))]})),o}(i,r,t).filter((t=>{const{excluded:n}=t.mark.type;return n.find((t=>t.name===e.name))})).filter((t=>t.end>n));if(d.length)return!1;h<s&&a.delete(h,s),p>n&&a.delete(n,p),u=n,c=u+o[l].length}return a.addMark(u,c,e.create(s)),a.removeStoredMark(e),a}))}function la(t,e,n){return new Ws(t,((t,o,i,r)=>{const s=n instanceof Function?n(o):n,{tr:a}=t;return o[0]&&a.replaceWith(i-1,r,e.create(s)),a}))}function ca(t,e,n){const o=i=>{const r=[];return i.forEach((i=>{if(i.isText){const{text:o}=i;let s,a=0;do{if(s=t.exec(o),s){const t=s.index,o=t+s[0].length,l=n instanceof Function?n(s[0]):n;t>0&&r.push(i.cut(a,t)),r.push(i.cut(t,o).mark(e.create(l).addToSet(i.marks))),a=o}}while(s);a<o.length&&r.push(i.cut(a))}else r.push(i.copy(o(i.content)))})),Zt.fromArray(r)};return new ro({props:{transformPasted:t=>new Kt(o(t.content),t.openStart,t.openEnd)}})}function ua(t,e,n){const o=(i,r)=>{const s=[];return i.forEach((i=>{if(i.isText){const{text:o,marks:a}=i;let l,c=0;const u=!!a.filter((t=>"link"===t.type.name))[0];for(;!u&&null!==(l=t.exec(o));)if(r&&r.type.allowsMarkType(e)&&l[1]){const t=l.index,o=t+l[0].length,r=t+l[0].indexOf(l[1]),a=r+l[1].length,u=n instanceof Function?n(l):n;t>0&&s.push(i.cut(c,t)),s.push(i.cut(r,a).mark(e.create(u).addToSet(i.marks))),c=o}c<o.length&&s.push(i.cut(c))}else s.push(i.copy(o(i.content,i)))})),Zt.fromArray(s)};return new ro({props:{transformPasted:t=>new Kt(o(t.content),t.openStart,t.openEnd)}})}function pa(t,e,n={}){return(o,i,r)=>oa(o,t,n)?Rs(e)(o,i,r):Rs(t,n)(o,i,r)}function ha(t,e){return t.type===e.nodes.bullet_list||t.type===e.nodes.ordered_list||t.type===e.nodes.todo_list}function da(t,e){return(n,o,i)=>{const{schema:r,selection:s}=n,{$from:a,$to:l}=s,c=a.blockRange(l);if(!c)return!1;const u=Ys((t=>ha(t,r)))(s);if(c.depth>=1&&u&&c.depth-u.depth<=1){if(u.node.type===t)return ra(e)(n,o,i);if(ha(u.node,r)&&t.validContent(u.node.content)){const{tr:e}=n;return e.setNodeMarkup(u.pos,t),o&&o(e),!1}}return ia(t)(n,o,i)}}function fa(t,e={}){return(n,o,i)=>oa(n,t,e)?function(t,e){var n=t.selection,o=n.$from,i=n.$to,r=o.blockRange(i),s=r&&yn(r);return null!=s&&(e&&e(t.tr.lift(r,s).scrollIntoView()),!0)}(n,o):function(t,e){return function(n,o){var i=n.selection,r=i.$from,s=i.$to,a=r.blockRange(s),l=a&&bn(a,t,e);return!!l&&(o&&o(n.tr.wrap(a,l).scrollIntoView()),!0)}}(t,e)(n,o,i)}class ma{constructor(t,{editor:e,extension:n,parent:o,node:i,view:r,decorations:s,getPos:a}){this.component=t,this.editor=e,this.extension=n,this.parent=o,this.node=i,this.view=r,this.decorations=s,this.isNode=!!this.node.marks,this.isMark=!this.isNode,this.getPos=this.isMark?this.getMarkPos:a,this.captureEvents=!0,this.dom=this.createDOM(),this.contentDOM=this.vm.$refs.content}createDOM(){const t=Rt.Z.extend(this.component),e={editor:this.editor,node:this.node,view:this.view,getPos:()=>this.getPos(),decorations:this.decorations,selected:!1,options:this.extension.options,updateAttrs:t=>this.updateAttrs(t)};return"function"==typeof this.extension.setSelection&&(this.setSelection=this.extension.setSelection),"function"==typeof this.extension.update&&(this.update=this.extension.update),this.vm=new t({parent:this.parent,propsData:e}).$mount(),this.vm.$el}update(t,e){return t.type===this.node.type&&(t===this.node&&this.decorations===e||(this.node=t,this.decorations=e,this.updateComponentProps({node:t,decorations:e})),!0)}updateComponentProps(t){if(!this.vm._props)return;const e=Rt.Z.config.silent;Rt.Z.config.silent=!0,Object.entries(t).forEach((([t,e])=>{this.vm._props[t]=e})),Rt.Z.config.silent=e}updateAttrs(t){if(!this.view.editable)return;const{state:e}=this.view,{type:n}=this.node,o=this.getPos(),i={...this.node.attrs,...t},r=this.isMark?e.tr.removeMark(o.from,o.to,n).addMark(o.from,o.to,n.create(i)):e.tr.setNodeMarkup(o,null,i);this.view.dispatch(r)}ignoreMutation(t){return"selection"!==t.type&&(!this.contentDOM||!this.contentDOM.contains(t.target))}stopEvent(t){if("function"==typeof this.extension.stopEvent)return this.extension.stopEvent(t);const e=!!this.extension.schema.draggable;if(e&&"mousedown"===t.type){const e=t.target.closest&&t.target.closest("[data-drag-handle]");e&&(this.dom===e||this.dom.contains(e))&&(this.captureEvents=!1,document.addEventListener("dragend",(()=>{this.captureEvents=!0}),{once:!0}))}const n="copy"===t.type,o="paste"===t.type,i="cut"===t.type,r=t.type.startsWith("drag")||"drop"===t.type;return!(e&&r||n||o||i)&&this.captureEvents}selectNode(){this.updateComponentProps({selected:!0})}deselectNode(){this.updateComponentProps({selected:!1})}getMarkPos(){const t=this.view.posAtDOM(this.dom);return ea(this.view.state.doc.resolve(t),this.node.type)}destroy(){this.vm.$destroy()}}class va{constructor(t={}){this.options={...this.defaultOptions,...t}}init(){return null}bindEditor(t=null){this.editor=t}get name(){return null}get type(){return"extension"}get defaultOptions(){return{}}get plugins(){return[]}inputRules(){return[]}pasteRules(){return[]}keys(){return{}}}class ga{constructor(t=[],e){t.forEach((t=>{t.bindEditor(e),t.init()})),this.extensions=t}get nodes(){return this.extensions.filter((t=>"node"===t.type)).reduce(((t,{name:e,schema:n})=>({...t,[e]:n})),{})}get options(){const{view:t}=this;return this.extensions.reduce(((e,n)=>({...e,[n.name]:new Proxy(n.options,{set(e,n,o){const i=e[n]!==o;return Object.assign(e,{[n]:o}),i&&t.updateState(t.state),!0}})})),{})}get marks(){return this.extensions.filter((t=>"mark"===t.type)).reduce(((t,{name:e,schema:n})=>({...t,[e]:n})),{})}get plugins(){return this.extensions.filter((t=>t.plugins)).reduce(((t,{plugins:e})=>[...t,...e]),[])}keymaps({schema:t}){return[...this.extensions.filter((t=>["extension"].includes(t.type))).filter((t=>t.keys)).map((e=>e.keys({schema:t}))),...this.extensions.filter((t=>["node","mark"].includes(t.type))).filter((t=>t.keys)).map((e=>e.keys({type:t[`${e.type}s`][e.name],schema:t})))].map((t=>_s(t)))}inputRules({schema:t,excludedExtensions:e}){if(!(e instanceof Array)&&e)return[];const n=e instanceof Array?this.extensions.filter((t=>!e.includes(t.name))):this.extensions;return[...n.filter((t=>["extension"].includes(t.type))).filter((t=>t.inputRules)).map((e=>e.inputRules({schema:t}))),...n.filter((t=>["node","mark"].includes(t.type))).filter((t=>t.inputRules)).map((e=>e.inputRules({type:t[`${e.type}s`][e.name],schema:t})))].reduce(((t,e)=>[...t,...e]),[])}pasteRules({schema:t,excludedExtensions:e}){if(!(e instanceof Array)&&e)return[];const n=e instanceof Array?this.extensions.filter((t=>!e.includes(t.name))):this.extensions;return[...n.filter((t=>["extension"].includes(t.type))).filter((t=>t.pasteRules)).map((e=>e.pasteRules({schema:t}))),...n.filter((t=>["node","mark"].includes(t.type))).filter((t=>t.pasteRules)).map((e=>e.pasteRules({type:t[`${e.type}s`][e.name],schema:t})))].reduce(((t,e)=>[...t,...e]),[])}commands({schema:t,view:e}){return this.extensions.filter((t=>t.commands)).reduce(((n,o)=>{const{name:i,type:r}=o,s={},a=o.commands({schema:t,...["node","mark"].includes(r)?{type:t[`${r}s`][i]}:{}}),l=(t,n)=>!!e.editable&&(e.focus(),t(n)(e.state,e.dispatch,e)),c=(t,e)=>{Array.isArray(e)?s[t]=t=>e.forEach((e=>l(e,t))):"function"==typeof e&&(s[t]=t=>l(e,t))};return"object"==typeof a?Object.entries(a).forEach((([t,e])=>{c(t,e)})):c(i,a),{...n,...s}}),{})}}class ya extends va{constructor(t={}){super(t)}get type(){return"mark"}get view(){return null}get schema(){return null}command(){return()=>{}}}function ba(t=0,e=0,n=0){return Math.min(Math.max(parseInt(t,10),e),n)}class _a extends va{constructor(t={}){super(t)}get type(){return"node"}get view(){return null}get schema(){return null}command(){return()=>{}}}class wa extends _a{get name(){return"doc"}get schema(){return{content:"block+"}}}class xa extends _a{get name(){return"paragraph"}get schema(){return{content:"inline*",group:"block",draggable:!1,parseDOM:[{tag:"p"}],toDOM:()=>["p",0]}}commands({type:t}){return()=>Rs(t)}}class Sa extends _a{get name(){return"text"}get schema(){return{group:"inline"}}}class ka extends class{on(t,e){return this._callbacks=this._callbacks||{},this._callbacks[t]||(this._callbacks[t]=[]),this._callbacks[t].push(e),this}emit(t,...e){this._callbacks=this._callbacks||{};const n=this._callbacks[t];return n&&n.forEach((t=>t.apply(this,e))),this}off(t,e){if(arguments.length){const n=this._callbacks?this._callbacks[t]:null;n&&(e?this._callbacks[t]=n.filter((t=>t!==e)):delete this._callbacks[t])}else this._callbacks={};return this}}{constructor(t={}){super(),this.defaultOptions={editorProps:{},editable:!0,autoFocus:null,extensions:[],content:"",topNode:"doc",emptyDocument:{type:"doc",content:[{type:"paragraph"}]},useBuiltInExtensions:!0,disableInputRules:!1,disablePasteRules:!1,dropCursor:{},enableDropCursor:!0,enableGapCursor:!0,parseOptions:{},injectCSS:!0,onInit:()=>{},onTransaction:()=>{},onUpdate:()=>{},onFocus:()=>{},onBlur:()=>{},onPaste:()=>{},onDrop:()=>{}},this.events=["init","transaction","update","focus","blur","paste","drop"],this.init(t)}init(t={}){this.setOptions({...this.defaultOptions,...t}),this.focused=!1,this.selection={from:0,to:0},this.element=document.createElement("div"),this.extensions=this.createExtensions(),this.nodes=this.createNodes(),this.marks=this.createMarks(),this.schema=this.createSchema(),this.plugins=this.createPlugins(),this.keymaps=this.createKeymaps(),this.inputRules=this.createInputRules(),this.pasteRules=this.createPasteRules(),this.view=this.createView(),this.commands=this.createCommands(),this.setActiveNodesAndMarks(),this.options.injectCSS&&function(t){{const e=document.createElement("style");e.type="text/css",e.textContent=t;const{head:n}=document,{firstChild:o}=n;o?n.insertBefore(e,o):n.appendChild(e)}}('.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n'),null!==this.options.autoFocus&&this.focus(this.options.autoFocus),this.events.forEach((t=>{var e;this.on(t,this.options[(e=`on ${t}`,e.replace(/(?:^\w|[A-Z]|\b\w)/g,((t,e)=>0===e?t.toLowerCase():t.toUpperCase())).replace(/\s+/g,""))]||(()=>{}))})),this.emit("init",{view:this.view,state:this.state}),this.extensions.view=this.view}setOptions(t){this.options={...this.options,...t},this.view&&this.state&&this.view.updateState(this.state)}get builtInExtensions(){return this.options.useBuiltInExtensions?[new wa,new Sa,new xa]:[]}get state(){return this.view?this.view.state:null}createExtensions(){return new ga([...this.builtInExtensions,...this.options.extensions],this)}createPlugins(){return this.extensions.plugins}createKeymaps(){return this.extensions.keymaps({schema:this.schema})}createInputRules(){return this.extensions.inputRules({schema:this.schema,excludedExtensions:this.options.disableInputRules})}createPasteRules(){return this.extensions.pasteRules({schema:this.schema,excludedExtensions:this.options.disablePasteRules})}createCommands(){return this.extensions.commands({schema:this.schema,view:this.view})}createNodes(){return this.extensions.nodes}createMarks(){return this.extensions.marks}createSchema(){return new $e({topNode:this.options.topNode,nodes:this.nodes,marks:this.marks})}createState(){return eo.create({schema:this.schema,doc:this.createDocument(this.options.content),plugins:[...this.plugins,(t={rules:this.inputRules},e=t.rules,n=new ro({state:{init:function(){return null},apply:function(t,e){var n=t.getMeta(this);return n||(t.selectionSet||t.docChanged?null:e)}},props:{handleTextInput:function(t,o,i,r){return Us(t,o,i,r,e,n)},handleDOMEvents:{compositionend:function(t){setTimeout((function(){var o=t.state.selection.$cursor;o&&Us(t,o.pos,o.pos,"",e,n)}))}}},isInputRules:!0}),n),...this.pasteRules,...this.keymaps,_s({Backspace:qs}),_s(Hs),...this.options.enableDropCursor?[rs(this.options.dropCursor)]:[],...this.options.enableGapCursor?[new ro({props:{decorations:Ts,createSelectionBetween:function(t,e,n){if(e.pos==n.pos&&xs.valid(n))return new xs(n)},handleClick:Os,handleKeyDown:ks}})]:[],new ro({key:new lo("editable"),props:{editable:()=>this.options.editable}}),new ro({props:{attributes:{tabindex:0},handleDOMEvents:{focus:(t,e)=>{this.focused=!0,this.emit("focus",{event:e,state:t.state,view:t});const n=this.state.tr.setMeta("focused",!0);this.view.dispatch(n)},blur:(t,e)=>{this.focused=!1,this.emit("blur",{event:e,state:t.state,view:t});const n=this.state.tr.setMeta("focused",!1);this.view.dispatch(n)}}}}),new ro({props:this.options.editorProps})]});var t,e,n}createDocument(t,e=this.options.parseOptions){if(null===t)return this.schema.nodeFromJSON(this.options.emptyDocument);if("object"==typeof t)try{return this.schema.nodeFromJSON(t)}catch(e){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",e),this.schema.nodeFromJSON(this.options.emptyDocument)}if("string"==typeof t){const n=`<div>${t}</div>`,o=(new window.DOMParser).parseFromString(n,"text/html").body.firstElementChild;return Ve.fromSchema(this.schema).parse(o,e)}return!1}createView(){return new Xr(this.element,{state:this.createState(),handlePaste:(...t)=>{this.emit("paste",...t)},handleDrop:(...t)=>{this.emit("drop",...t)},dispatchTransaction:this.dispatchTransaction.bind(this)})}setParentComponent(t=null){t&&this.view.setProps({nodeViews:this.initNodeViews({parent:t,extensions:[...this.builtInExtensions,...this.options.extensions]})})}initNodeViews({parent:t,extensions:e}){return e.filter((t=>["node","mark"].includes(t.type))).filter((t=>t.view)).reduce(((e,n)=>({...e,[n.name]:(e,o,i,r)=>{const s=n.view;return new ma(s,{editor:this,extension:n,parent:t,node:e,view:o,getPos:i,decorations:r})}})),{})}dispatchTransaction(t){const e=this.state.apply(t);this.view.updateState(e),this.selection={from:this.state.selection.from,to:this.state.selection.to},this.setActiveNodesAndMarks(),this.emit("transaction",{getHTML:this.getHTML.bind(this),getJSON:this.getJSON.bind(this),state:this.state,transaction:t}),t.docChanged&&!t.getMeta("preventUpdate")&&this.emitUpdate(t)}emitUpdate(t){this.emit("update",{getHTML:this.getHTML.bind(this),getJSON:this.getJSON.bind(this),state:this.state,transaction:t})}resolveSelection(t=null){if(this.selection&&null===t)return this.selection;if("start"===t||!0===t)return{from:0,to:0};if("end"===t){const{doc:t}=this.state;return{from:t.content.size,to:t.content.size}}return{from:t,to:t}}focus(t=null){if(this.view.focused&&null===t||!1===t)return;const{from:e,to:n}=this.resolveSelection(t);this.setSelection(e,n),setTimeout((()=>this.view.focus()),10)}setSelection(t=0,e=0){const{doc:n,tr:o}=this.state,i=ba(t,0,n.content.size),r=ba(e,0,n.content.size),s=Zn.create(n,i,r),a=o.setSelection(s);this.view.dispatch(a)}blur(){this.view.dom.blur()}getSchemaJSON(){return JSON.parse(JSON.stringify({nodes:this.extensions.nodes,marks:this.extensions.marks}))}getHTML(){const t=document.createElement("div"),e=Ye.fromSchema(this.schema).serializeFragment(this.state.doc.content);return t.appendChild(e),t.innerHTML}getJSON(){return this.state.doc.toJSON()}setContent(t={},e=!1,n){const{doc:o,tr:i}=this.state,r=this.createDocument(t,n),s=Zn.create(o,0,o.content.size),a=i.setSelection(s).replaceSelectionWith(r,!1).setMeta("preventUpdate",!e);this.view.dispatch(a)}clearContent(t=!1){this.setContent(this.options.emptyDocument,t)}setActiveNodesAndMarks(){this.activeMarks=Object.entries(this.schema.marks).reduce(((t,[e,n])=>({...t,[e]:(t={})=>function(t,e){const{from:n,$from:o,to:i,empty:r}=t.selection;return r?!!e.isInSet(t.storedMarks||o.marks()):!!t.doc.rangeHasMark(n,i,e)}(this.state,n)})),{}),this.activeMarkAttrs=Object.entries(this.schema.marks).reduce(((t,[e,n])=>({...t,[e]:ta(this.state,n)})),{}),this.activeNodes=Object.entries(this.schema.nodes).reduce(((t,[e,n])=>({...t,[e]:(t={})=>oa(this.state,n,t)})),{})}getMarkAttrs(t=null){return this.activeMarkAttrs[t]}getNodeAttrs(t=null){return{...na(this.state,this.schema.nodes[t])}}get isActive(){return Object.entries({...this.activeMarks,...this.activeNodes}).reduce(((t,[e,n])=>({...t,[e]:(t={})=>n(t)})),{})}registerPlugin(t=null,e){const n="function"==typeof e?e(t,this.state.plugins):[t,...this.state.plugins],o=this.state.reconfigure({plugins:n});this.view.updateState(o)}unregisterPlugin(t=null){if(!t||!this.view.docView)return;const e=this.state.reconfigure({plugins:this.state.plugins.filter((e=>!e.key.startsWith(`${t}$`)))});this.view.updateState(e)}destroy(){this.view&&this.view.destroy()}}var Ca={props:{editor:{default:null,type:Object}},watch:{editor:{immediate:!0,handler(t){t&&t.element&&this.$nextTick((()=>{this.$el.appendChild(t.element.firstChild),t.setParentComponent(this)}))}}},render:t=>t("div"),beforeDestroy(){this.editor.element=this.$el}};class Oa{constructor({options:t}){this.options=t,this.preventHide=!1,this.mousedownHandler=this.handleClick.bind(this),this.options.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.blurHandler=()=>{this.preventHide?this.preventHide=!1:this.options.editor.emit("menubar:focusUpdate",!1)},this.options.editor.on("blur",this.blurHandler)}handleClick(){this.preventHide=!0}destroy(){this.options.element.removeEventListener("mousedown",this.mousedownHandler),this.options.editor.off("blur",this.blurHandler)}}var Ta={props:{editor:{default:null,type:Object}},data:()=>({focused:!1}),watch:{editor:{immediate:!0,handler(t){t&&this.$nextTick((()=>{t.registerPlugin(function(t){return new ro({key:new lo("menu_bar"),view:e=>new Oa({editorView:e,options:t})})}({editor:t,element:this.$el})),this.focused=t.focused,t.on("focus",(()=>{this.focused=!0})),t.on("menubar:focusUpdate",(t=>{this.focused=t}))}))}}},render(){return this.editor?this.$scopedSlots.default({focused:this.focused,focus:this.editor.focus,commands:this.editor.commands,isActive:this.editor.isActive,getMarkAttrs:this.editor.getMarkAttrs.bind(this.editor),getNodeAttrs:this.editor.getNodeAttrs.bind(this.editor)}):null}};function Ma(t,e,n){const o=document.createRange();return o.setEnd(t,null==n?t.nodeValue.length:n),o.setStart(t,Math.max(e,0)),o}function Ea(t,e){const n=t.getClientRects();return n.length?n[e<0?0:n.length-1]:t.getBoundingClientRect()}function Aa(t,e,n=!1){const{node:o,offset:i}=t.docView.domFromPos(e);let r,s;if(3===o.nodeType)n&&i<o.nodeValue.length?(s=Ea(Ma(o,i-1,i),-1),r="right"):i<o.nodeValue.length&&(s=Ea(Ma(o,i,i+1),-1),r="left");else if(o.firstChild){if(i<o.childNodes.length){const t=o.childNodes[i];s=Ea(3===t.nodeType?Ma(t):t,-1),r="left"}if((!s||s.top===s.bottom)&&i){const t=o.childNodes[i-1];s=Ea(3===t.nodeType?Ma(t):t,1),r="right"}}else s=o.getBoundingClientRect(),r="left";const a=s[r];return{top:s.top,bottom:s.bottom,left:a,right:a}}class Na{constructor({options:t,editorView:e}){this.options={element:null,keepInBounds:!0,onUpdate:()=>!1,...t},this.editorView=e,this.isActive=!1,this.left=0,this.bottom=0,this.top=0,this.preventHide=!1,this.mousedownHandler=this.handleClick.bind(this),this.options.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.focusHandler=({view:t})=>{this.update(t)},this.options.editor.on("focus",this.focusHandler),this.blurHandler=({event:t})=>{this.preventHide?this.preventHide=!1:this.hide(t)},this.options.editor.on("blur",this.blurHandler)}handleClick(){this.preventHide=!0}update(t,e){const{state:n}=t;if(t.composing)return;if(e&&e.doc.eq(n.doc)&&e.selection.eq(n.selection))return;if(n.selection.empty)return void this.hide();const{from:o,to:i}=n.selection,r=Aa(t,o),s=Aa(t,i,!0),a=this.options.element.offsetParent;if(!a)return void this.hide();const l=a.getBoundingClientRect(),c=this.options.element.getBoundingClientRect(),u=(r.left+s.left)/2-l.left;this.left=Math.round(this.options.keepInBounds?Math.min(l.width-c.width/2,Math.max(u,c.width/2)):u),this.bottom=Math.round(l.bottom-r.top),this.top=Math.round(s.bottom-l.top),this.isActive=!0,this.sendUpdate()}sendUpdate(){this.options.onUpdate({isActive:this.isActive,left:this.left,bottom:this.bottom,top:this.top})}hide(t){t&&t.relatedTarget&&this.options.element.parentNode&&this.options.element.parentNode.contains(t.relatedTarget)||(this.isActive=!1,this.sendUpdate())}destroy(){this.options.element.removeEventListener("mousedown",this.mousedownHandler),this.options.editor.off("focus",this.focusHandler),this.options.editor.off("blur",this.blurHandler)}}var Pa={props:{editor:{default:null,type:Object},keepInBounds:{default:!0,type:Boolean}},data:()=>({menu:{isActive:!1,left:0,bottom:0}}),watch:{editor:{immediate:!0,handler(t){t&&this.$nextTick((()=>{t.registerPlugin(function(t){return new ro({key:new lo("menu_bubble"),view:e=>new Na({editorView:e,options:t})})}({editor:t,element:this.$el,keepInBounds:this.keepInBounds,onUpdate:t=>{t.isActive&&!1===this.menu.isActive?this.$emit("show",t):t.isActive||!0!==this.menu.isActive||this.$emit("hide",t),this.menu=t}}))}))}}},render(){return this.editor?this.$scopedSlots.default({focused:this.editor.view.focused,focus:this.editor.focus,commands:this.editor.commands,isActive:this.editor.isActive,getMarkAttrs:this.editor.getMarkAttrs.bind(this.editor),getNodeAttrs:this.editor.getNodeAttrs.bind(this.editor),menu:this.menu}):null},beforeDestroy(){this.editor.unregisterPlugin("menu_bubble")}};var La=n(4739),Ia=n(635),Da=n(756),Ra=n(7731),za=n(9536);const Ba=za.Z.extend({name:"v-tab-item",props:{id:String},methods:{genWindowItem(){const t=za.Z.options.methods.genWindowItem.call(this);return t.data.domProps=t.data.domProps||{},t.data.domProps.id=this.id||this.value,t}}});var $a=n(3689),ja=n(8564),Va={insert:"head",singleton:!1};W()(ja.Z,Va);ja.Z.locals;n(6270);const Za=n(5847).Z.extend({name:"v-checkbox",props:{indeterminate:Boolean,indeterminateIcon:{type:String,default:"$checkboxIndeterminate"},offIcon:{type:String,default:"$checkboxOff"},onIcon:{type:String,default:"$checkboxOn"}},data(){return{inputIndeterminate:this.indeterminate}},computed:{classes(){return{...J.Z.options.computed.classes.call(this),"v-input--selection-controls":!0,"v-input--checkbox":!0,"v-input--indeterminate":this.inputIndeterminate}},computedIcon(){return this.inputIndeterminate?this.indeterminateIcon:this.isActive?this.onIcon:this.offIcon},validationState(){if(!this.isDisabled||this.inputIndeterminate)return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0}},watch:{indeterminate(t){this.$nextTick((()=>this.inputIndeterminate=t))},inputIndeterminate(t){this.$emit("update:indeterminate",t)},isActive(){this.indeterminate&&(this.inputIndeterminate=!1)}},methods:{genCheckbox(){const{title:t,...e}=this.attrs$;return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.$createElement(dt.Z,this.setTextColor(this.validationState,{props:{dense:this.dense,dark:this.dark,light:this.light}}),this.computedIcon),this.genInput("checkbox",{...e,"aria-checked":this.inputIndeterminate?"mixed":this.isActive.toString()}),this.genRipple(this.setTextColor(this.rippleState))])},genDefaultSlot(){return[this.genCheckbox(),this.genLabel()]}}});var Fa,Ha;n(6470);if("undefined"!=typeof WeakMap){var Wa=new WeakMap;Fa=function(t){return Wa.get(t)},Ha=function(t,e){return Wa.set(t,e),e}}else{var Ua=[],qa=0;Fa=function(t){for(var e=0;e<Ua.length;e+=2)if(Ua[e]==t)return Ua[e+1]},Ha=function(t,e){return 10==qa&&(qa=0),Ua[qa++]=t,Ua[qa++]=e}}var Ja=function(t,e,n,o){this.left=t,this.top=e,this.right=n,this.bottom=o},Ka=function(t,e,n,o){this.width=t,this.height=e,this.map=n,this.problems=o};function Ga(t){if(t.colwidth)return t.colwidth.slice();for(var e=[],n=0;n<t.colspan;n++)e.push(0);return e}function Xa(t,e){var n=t.getAttribute("data-colwidth"),o=n&&/^\d+(,\d+)*$/.test(n)?n.split(",").map((function(t){return Number(t)})):null,i=Number(t.getAttribute("colspan")||1),r={colspan:i,rowspan:Number(t.getAttribute("rowspan")||1),colwidth:o&&o.length==i?o:null};for(var s in e){var a=e[s].getFromDOM,l=a&&a(t);null!=l&&(r[s]=l)}return r}function Ya(t,e){var n={};for(var o in 1!=t.attrs.colspan&&(n.colspan=t.attrs.colspan),1!=t.attrs.rowspan&&(n.rowspan=t.attrs.rowspan),t.attrs.colwidth&&(n["data-colwidth"]=t.attrs.colwidth.join(",")),e){var i=e[o].setDOMAttr;i&&i(t.attrs[o],n)}return n}function Qa(t){var e=t.cached.tableNodeTypes;if(!e)for(var n in e=t.cached.tableNodeTypes={},t.nodes){var o=t.nodes[n],i=o.spec.tableRole;i&&(e[i]=o)}return e}Ka.prototype.findCell=function(t){for(var e=0;e<this.map.length;e++){var n=this.map[e];if(n==t){for(var o=e%this.width,i=e/this.width|0,r=o+1,s=i+1,a=1;r<this.width&&this.map[e+a]==n;a++)r++;for(var l=1;s<this.height&&this.map[e+this.width*l]==n;l++)s++;return new Ja(o,i,r,s)}}throw new RangeError("No cell with offset "+t+" found")},Ka.prototype.colCount=function(t){for(var e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError("No cell with offset "+t+" found")},Ka.prototype.nextCell=function(t,e,n){var o=this.findCell(t),i=o.left,r=o.right,s=o.top,a=o.bottom;return"horiz"==e?(n<0?0==i:r==this.width)?null:this.map[s*this.width+(n<0?i-1:r)]:(n<0?0==s:a==this.height)?null:this.map[i+this.width*(n<0?s-1:a)]},Ka.prototype.rectBetween=function(t,e){var n=this.findCell(t),o=n.left,i=n.right,r=n.top,s=n.bottom,a=this.findCell(e),l=a.left,c=a.right,u=a.top,p=a.bottom;return new Ja(Math.min(o,l),Math.min(r,u),Math.max(i,c),Math.max(s,p))},Ka.prototype.cellsInRect=function(t){for(var e=[],n={},o=t.top;o<t.bottom;o++)for(var i=t.left;i<t.right;i++){var r=o*this.width+i,s=this.map[r];n[s]||(n[s]=!0,i==t.left&&i&&this.map[r-1]==s||o==t.top&&o&&this.map[r-this.width]==s||e.push(s))}return e},Ka.prototype.positionAt=function(t,e,n){for(var o=0,i=0;;o++){var r=i+n.child(o).nodeSize;if(o==t){for(var s=e+t*this.width,a=(t+1)*this.width;s<a&&this.map[s]<i;)s++;return s==a?r-1:this.map[s]}i=r}},Ka.get=function(t){return Fa(t)||Ha(t,function(t){if("table"!=t.type.spec.tableRole)throw new RangeError("Not a table node: "+t.type.name);for(var e=function(t){for(var e=-1,n=!1,o=0;o<t.childCount;o++){var i=t.child(o),r=0;if(n)for(var s=0;s<o;s++)for(var a=t.child(s),l=0;l<a.childCount;l++){var c=a.child(l);s+c.attrs.rowspan>o&&(r+=c.attrs.colspan)}for(var u=0;u<i.childCount;u++){var p=i.child(u);r+=p.attrs.colspan,p.attrs.rowspan>1&&(n=!0)}-1==e?e=r:e!=r&&(e=Math.max(e,r))}return e}(t),n=t.childCount,o=[],i=0,r=null,s=[],a=0,l=e*n;a<l;a++)o[a]=0;for(var c=0,u=0;c<n;c++){var p=t.child(c);u++;for(var h=0;;h++){for(;i<o.length&&0!=o[i];)i++;if(h==p.childCount)break;for(var d=p.child(h),f=d.attrs,m=f.colspan,v=f.rowspan,g=f.colwidth,y=0;y<v;y++){if(y+c>=n){(r||(r=[])).push({type:"overlong_rowspan",pos:u,n:v-y});break}for(var b=i+y*e,_=0;_<m;_++){0==o[b+_]?o[b+_]=u:(r||(r=[])).push({type:"collision",row:c,pos:u,n:m-_});var w=g&&g[_];if(w){var x=(b+_)%e*2,S=s[x];null==S||S!=w&&1==s[x+1]?(s[x]=w,s[x+1]=1):S==w&&s[x+1]++}}}i+=m,u+=d.nodeSize}for(var k=(c+1)*e,C=0;i<k;)0==o[i++]&&C++;C&&(r||(r=[])).push({type:"missing",row:c,n:C}),u++}for(var O=new Ka(e,n,o,r),T=!1,M=0;!T&&M<s.length;M+=2)null!=s[M]&&s[M+1]<n&&(T=!0);T&&function(t,e,n){t.problems||(t.problems=[]);for(var o=0,i={};o<t.map.length;o++){var r=t.map[o];if(!i[r]){i[r]=!0;for(var s=n.nodeAt(r),a=null,l=0;l<s.attrs.colspan;l++){var c=e[2*((o+l)%t.width)];null==c||s.attrs.colwidth&&s.attrs.colwidth[l]==c||((a||(a=Ga(s.attrs)))[l]=c)}a&&t.problems.unshift({type:"colwidth mismatch",pos:r,colwidth:a})}}}(O,s,t);return O}(t))};var tl=new lo("selectingCells");function el(t){for(var e=t.depth-1;e>0;e--)if("row"==t.node(e).type.spec.tableRole)return t.node(0).resolve(t.before(e+1));return null}function nl(t){for(var e=t.selection.$head,n=e.depth;n>0;n--)if("row"==e.node(n).type.spec.tableRole)return!0;return!1}function ol(t){var e=t.selection;return e.$anchorCell?e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell:e.node&&"cell"==e.node.type.spec.tableRole?e.$anchor:el(e.$head)||function(t){for(var e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){var o=e.type.spec.tableRole;if("cell"==o||"header_cell"==o)return t.doc.resolve(n)}for(var i=t.nodeBefore,r=t.pos;i;i=i.lastChild,r--){var s=i.type.spec.tableRole;if("cell"==s||"header_cell"==s)return t.doc.resolve(r-i.nodeSize)}}(e.$head)}function il(t){return"row"==t.parent.type.spec.tableRole&&t.nodeAfter}function rl(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function sl(t,e,n){var o=t.start(-1),i=Ka.get(t.node(-1)).nextCell(t.pos-o,e,n);return null==i?null:t.node(0).resolve(o+i)}function al(t,e,n){var o={};for(var i in t)o[i]=t[i];return o[e]=n,o}function ll(t,e,n){void 0===n&&(n=1);var o=al(t,"colspan",t.colspan-n);return o.colwidth&&(o.colwidth=o.colwidth.slice(),o.colwidth.splice(e,n),o.colwidth.some((function(t){return t>0}))||(o.colwidth=null)),o}function cl(t,e,n){void 0===n&&(n=1);var o=al(t,"colspan",t.colspan+n);if(o.colwidth){o.colwidth=o.colwidth.slice();for(var i=0;i<n;i++)o.colwidth.splice(e,0,0)}return o}var ul=function(t){function e(e,n){void 0===n&&(n=e);var o=e.node(-1),i=Ka.get(o),r=e.start(-1),s=i.rectBetween(e.pos-r,n.pos-r),a=e.node(0),l=i.cellsInRect(s).filter((function(t){return t!=n.pos-r}));l.unshift(n.pos-r);var c=l.map((function(t){var e=o.nodeAt(t),n=t+r+1;return new Vn(a.resolve(n),a.resolve(n+e.content.size))}));t.call(this,c[0].$from,c[0].$to,c),this.$anchorCell=e,this.$headCell=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(t,n){var o=t.resolve(n.map(this.$anchorCell.pos)),i=t.resolve(n.map(this.$headCell.pos));if(il(o)&&il(i)&&rl(o,i)){var r=this.$anchorCell.node(-1)!=o.node(-1);return r&&this.isRowSelection()?e.rowSelection(o,i):r&&this.isColSelection()?e.colSelection(o,i):new e(o,i)}return Zn.between(o,i)},e.prototype.content=function(){for(var t=this.$anchorCell.node(-1),e=Ka.get(t),n=this.$anchorCell.start(-1),o=e.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),i={},r=[],s=o.top;s<o.bottom;s++){for(var a=[],l=s*e.width+o.left,c=o.left;c<o.right;c++,l++){var u=e.map[l];if(!i[u]){i[u]=!0;var p=e.findCell(u),h=t.nodeAt(u),d=o.left-p.left,f=p.right-o.right;if(d>0||f>0){var m=h.attrs;d>0&&(m=ll(m,0,d)),f>0&&(m=ll(m,m.colspan-f,f)),h=p.left<o.left?h.type.createAndFill(m):h.type.create(m,h.content)}if(p.top<o.top||p.bottom>o.bottom){var v=al(h.attrs,"rowspan",Math.min(p.bottom,o.bottom)-Math.max(p.top,o.top));h=p.top<o.top?h.type.createAndFill(v):h.type.create(v,h.content)}a.push(h)}}r.push(t.child(s).copy(Zt.from(a)))}var g=this.isColSelection()&&this.isRowSelection()?t:r;return new Kt(Zt.from(g),1,1)},e.prototype.replace=function(e,n){void 0===n&&(n=Kt.empty);for(var o=e.steps.length,i=this.ranges,r=0;r<i.length;r++){var s=i[r],a=s.$from,l=s.$to,c=e.mapping.slice(o);e.replace(c.map(a.pos),c.map(l.pos),r?Kt.empty:n)}var u=t.findFrom(e.doc.resolve(e.mapping.slice(o).map(this.to)),-1);u&&e.setSelection(u)},e.prototype.replaceWith=function(t,e){this.replace(t,new Kt(Zt.from(e),0,0))},e.prototype.forEachCell=function(t){for(var e=this.$anchorCell.node(-1),n=Ka.get(e),o=this.$anchorCell.start(-1),i=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-o,this.$headCell.pos-o)),r=0;r<i.length;r++)t(e.nodeAt(i[r]),o+i[r])},e.prototype.isColSelection=function(){var t=this.$anchorCell.index(-1),e=this.$headCell.index(-1);if(Math.min(t,e)>0)return!1;var n=t+this.$anchorCell.nodeAfter.attrs.rowspan,o=e+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,o)==this.$headCell.node(-1).childCount},e.colSelection=function(t,n){void 0===n&&(n=t);var o=Ka.get(t.node(-1)),i=t.start(-1),r=o.findCell(t.pos-i),s=o.findCell(n.pos-i),a=t.node(0);return r.top<=s.top?(r.top>0&&(t=a.resolve(i+o.map[r.left])),s.bottom<o.height&&(n=a.resolve(i+o.map[o.width*(o.height-1)+s.right-1]))):(s.top>0&&(n=a.resolve(i+o.map[s.left])),r.bottom<o.height&&(t=a.resolve(i+o.map[o.width*(o.height-1)+r.right-1]))),new e(t,n)},e.prototype.isRowSelection=function(){var t=Ka.get(this.$anchorCell.node(-1)),e=this.$anchorCell.start(-1),n=t.colCount(this.$anchorCell.pos-e),o=t.colCount(this.$headCell.pos-e);if(Math.min(n,o)>0)return!1;var i=n+this.$anchorCell.nodeAfter.attrs.colspan,r=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(i,r)==t.width},e.prototype.eq=function(t){return t instanceof e&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos},e.rowSelection=function(t,n){void 0===n&&(n=t);var o=Ka.get(t.node(-1)),i=t.start(-1),r=o.findCell(t.pos-i),s=o.findCell(n.pos-i),a=t.node(0);return r.left<=s.left?(r.left>0&&(t=a.resolve(i+o.map[r.top*o.width])),s.right<o.width&&(n=a.resolve(i+o.map[o.width*(s.top+1)-1]))):(s.left>0&&(n=a.resolve(i+o.map[s.top*o.width])),r.right<o.width&&(t=a.resolve(i+o.map[o.width*(r.top+1)-1]))),new e(t,n)},e.prototype.toJSON=function(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}},e.fromJSON=function(t,n){return new e(t.resolve(n.anchor),t.resolve(n.head))},e.create=function(t,n,o){return void 0===o&&(o=n),new e(t.resolve(n),t.resolve(o))},e.prototype.getBookmark=function(){return new pl(this.$anchorCell.pos,this.$headCell.pos)},e}($n);ul.prototype.visible=!1,$n.jsonID("cell",ul);var pl=function(t,e){this.anchor=t,this.head=e};function hl(t){if(!(t.selection instanceof ul))return null;var e=[];return t.selection.forEachCell((function(t,n){e.push(Rr.node(n,n+t.nodeSize,{class:"selectedCell"}))})),jr.create(t.doc,e)}function dl(t){if(!t.size)return null;for(var e=t.content,n=t.openStart,o=t.openEnd;1==e.childCount&&(n>0&&o>0||"table"==e.firstChild.type.spec.tableRole);)n--,o--,e=e.firstChild.content;var i=e.firstChild,r=i.type.spec.tableRole,s=i.type.schema,a=[];if("row"==r)for(var l=0;l<e.childCount;l++){var c=e.child(l).content,u=l?0:Math.max(0,n-1),p=l<e.childCount-1?0:Math.max(0,o-1);(u||p)&&(c=fl(Qa(s).row,new Kt(c,u,p)).content),a.push(c)}else{if("cell"!=r&&"header_cell"!=r)return null;a.push(n||o?fl(Qa(s).row,new Kt(e,n,o)).content:e)}return function(t,e){for(var n=[],o=0;o<e.length;o++)for(var i=e[o],r=i.childCount-1;r>=0;r--)for(var s=i.child(r).attrs,a=s.rowspan,l=s.colspan,c=o;c<o+a;c++)n[c]=(n[c]||0)+l;for(var u=0,p=0;p<n.length;p++)u=Math.max(u,n[p]);for(var h=0;h<n.length;h++)if(h>=e.length&&e.push(Zt.empty),n[h]<u){for(var d=Qa(t).cell.createAndFill(),f=[],m=n[h];m<u;m++)f.push(d);e[h]=e[h].append(Zt.from(f))}return{height:e.length,width:u,rows:e}}(s,a)}function fl(t,e){var n=t.createAndFill();return new ln(n).replace(0,n.content.size,e).doc}function ml(t,e,n,o,i,r,s,a){if(0==s||s==e.height)return!1;for(var l=!1,c=i;c<r;c++){var u=s*e.width+c,p=e.map[u];if(e.map[u-e.width]==p){l=!0;var h=n.nodeAt(p),d=e.findCell(p),f=d.top,m=d.left;t.setNodeMarkup(t.mapping.slice(a).map(p+o),null,al(h.attrs,"rowspan",s-f)),t.insert(t.mapping.slice(a).map(e.positionAt(s,m,n)),h.type.createAndFill(al(h.attrs,"rowspan",f+h.attrs.rowspan-s))),c+=h.attrs.colspan-1}}return l}function vl(t,e,n,o,i,r,s,a){if(0==s||s==e.width)return!1;for(var l=!1,c=i;c<r;c++){var u=c*e.width+s,p=e.map[u];if(e.map[u-1]==p){l=!0;var h=n.nodeAt(p),d=e.colCount(p),f=t.mapping.slice(a).map(p+o);t.setNodeMarkup(f,null,ll(h.attrs,s-d,h.attrs.colspan-(s-d))),t.insert(f+h.nodeSize,h.type.createAndFill(ll(h.attrs,0,s-d))),c+=h.attrs.rowspan-1}}return l}function gl(t,e,n,o,i){var r=n?t.doc.nodeAt(n-1):t.doc,s=Ka.get(r),a=o.top,l=o.left,c=l+i.width,u=a+i.height,p=t.tr,h=0;function d(){r=n?p.doc.nodeAt(n-1):p.doc,s=Ka.get(r),h=p.mapping.maps.length}(function(t,e,n,o,i,r,s){var a,l,c=Qa(t.doc.type.schema);if(i>e.width)for(var u=0,p=0;u<e.height;u++){var h=n.child(u);p+=h.nodeSize;var d=[],f=void 0;f=null==h.lastChild||h.lastChild.type==c.cell?a||(a=c.cell.createAndFill()):l||(l=c.header_cell.createAndFill());for(var m=e.width;m<i;m++)d.push(f);t.insert(t.mapping.slice(s).map(p-1+o),d)}if(r>e.height){for(var v=[],g=0,y=(e.height-1)*e.width;g<Math.max(e.width,i);g++){var b=!(g>=e.width)&&n.nodeAt(e.map[y+g]).type==c.header_cell;v.push(b?l||(l=c.header_cell.createAndFill()):a||(a=c.cell.createAndFill()))}for(var _=c.row.create(null,Zt.from(v)),w=[],x=e.height;x<r;x++)w.push(_);t.insert(t.mapping.slice(s).map(o+n.nodeSize-2),w)}return!(!a&&!l)})(p,s,r,n,c,u,h)&&d(),ml(p,s,r,n,l,c,a,h)&&d(),ml(p,s,r,n,l,c,u,h)&&d(),vl(p,s,r,n,a,u,l,h)&&d(),vl(p,s,r,n,a,u,c,h)&&d();for(var f=a;f<u;f++){var m=s.positionAt(f,l,r),v=s.positionAt(f,c,r);p.replace(p.mapping.slice(h).map(m+n),p.mapping.slice(h).map(v+n),new Kt(i.rows[f-a],0,0))}d(),p.setSelection(new ul(p.doc.resolve(n+s.positionAt(a,l,r)),p.doc.resolve(n+s.positionAt(u-1,c-1,r)))),e(p)}pl.prototype.map=function(t){return new pl(t.map(this.anchor),t.map(this.head))},pl.prototype.resolve=function(t){var e=t.resolve(this.anchor),n=t.resolve(this.head);return"row"==e.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&e.index()<e.parent.childCount&&n.index()<n.parent.childCount&&rl(e,n)?new ul(e,n):$n.near(n,1)};var yl=ws({ArrowLeft:_l("horiz",-1),ArrowRight:_l("horiz",1),ArrowUp:_l("vert",-1),ArrowDown:_l("vert",1),"Shift-ArrowLeft":wl("horiz",-1),"Shift-ArrowRight":wl("horiz",1),"Shift-ArrowUp":wl("vert",-1),"Shift-ArrowDown":wl("vert",1),Backspace:xl,"Mod-Backspace":xl,Delete:xl,"Mod-Delete":xl});function bl(t,e,n){return!n.eq(t.selection)&&(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function _l(t,e){return function(n,o,i){var r=n.selection;if(r instanceof ul)return bl(n,o,$n.near(r.$headCell,e));if("horiz"!=t&&!r.empty)return!1;var s=Ol(i,t,e);if(null==s)return!1;if("horiz"==t)return bl(n,o,$n.near(n.doc.resolve(r.head+e),e));var a,l=n.doc.resolve(s),c=sl(l,t,e);return a=c?$n.near(c,1):e<0?$n.near(n.doc.resolve(l.before(-1)),-1):$n.near(n.doc.resolve(l.after(-1)),1),bl(n,o,a)}}function wl(t,e){return function(n,o,i){var r=n.selection;if(!(r instanceof ul)){var s=Ol(i,t,e);if(null==s)return!1;r=new ul(n.doc.resolve(s))}var a=sl(r.$headCell,t,e);return!!a&&bl(n,o,new ul(r.$anchorCell,a))}}function xl(t,e){var n=t.selection;if(!(n instanceof ul))return!1;if(e){var o=t.tr,i=Qa(t.schema).cell.createAndFill().content;n.forEachCell((function(t,e){t.content.eq(i)||o.replace(o.mapping.map(e+1),o.mapping.map(e+t.nodeSize-1),new Kt(i,0,0))})),o.docChanged&&e(o)}return!0}function Sl(t,e){var n=el(t.state.doc.resolve(e));return!!n&&(t.dispatch(t.state.tr.setSelection(new ul(n))),!0)}function kl(t,e,n){if(!nl(t.state))return!1;var o=dl(n),i=t.state.selection;if(i instanceof ul){o||(o={width:1,height:1,rows:[Zt.from(fl(Qa(t.state.schema).cell,n))]});var r=i.$anchorCell.node(-1),s=i.$anchorCell.start(-1),a=Ka.get(r).rectBetween(i.$anchorCell.pos-s,i.$headCell.pos-s);return o=function(t,e,n){var o=t.width,i=t.height,r=t.rows;if(o!=e){for(var s=[],a=[],l=0;l<r.length;l++){for(var c=r[l],u=[],p=s[l]||0,h=0;p<e;h++){var d=c.child(h%c.childCount);p+d.attrs.colspan>e&&(d=d.type.create(ll(d.attrs,d.attrs.colspan,p+d.attrs.colspan-e),d.content)),u.push(d),p+=d.attrs.colspan;for(var f=1;f<d.attrs.rowspan;f++)s[l+f]=(s[l+f]||0)+d.attrs.colspan}a.push(Zt.from(u))}r=a,o=e}if(i!=n){for(var m=[],v=0,g=0;v<n;v++,g++){for(var y=[],b=r[g%i],_=0;_<b.childCount;_++){var w=b.child(_);v+w.attrs.rowspan>n&&(w=w.type.create(al(w.attrs,"rowspan",Math.max(1,n-w.attrs.rowspan)),w.content)),y.push(w)}m.push(Zt.from(y))}r=m,i=n}return{width:o,height:i,rows:r}}(o,a.right-a.left,a.bottom-a.top),gl(t.state,t.dispatch,s,a,o),!0}if(o){var l=ol(t.state),c=l.start(-1);return gl(t.state,t.dispatch,c,Ka.get(l.node(-1)).findCell(l.pos-c),o),!0}return!1}function Cl(t,e){if(!e.ctrlKey&&!e.metaKey){var n,o=Tl(t,e.target);if(e.shiftKey&&t.state.selection instanceof ul)i(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&o&&null!=(n=el(t.state.selection.$anchor))&&Ml(t,e).pos!=n.pos)i(n,e),e.preventDefault();else if(!o)return;t.root.addEventListener("mouseup",r),t.root.addEventListener("dragstart",r),t.root.addEventListener("mousemove",s)}function i(e,n){var o=Ml(t,n),i=null==tl.getState(t.state);if(!o||!rl(e,o)){if(!i)return;o=e}var r=new ul(e,o);if(i||!t.state.selection.eq(r)){var s=t.state.tr.setSelection(r);i&&s.setMeta(tl,e.pos),t.dispatch(s)}}function r(){t.root.removeEventListener("mouseup",r),t.root.removeEventListener("dragstart",r),t.root.removeEventListener("mousemove",s),null!=tl.getState(t.state)&&t.dispatch(t.state.tr.setMeta(tl,-1))}function s(n){var s,a=tl.getState(t.state);if(null!=a)s=t.state.doc.resolve(a);else if(Tl(t,n.target)!=o&&!(s=Ml(t,e)))return r();s&&i(s,n)}}function Ol(t,e,n){if(!(t.state.selection instanceof Zn))return null;for(var o=t.state.selection.$head,i=o.depth-1;i>=0;i--){var r=o.node(i);if((n<0?o.index(i):o.indexAfter(i))!=(n<0?0:r.childCount))return null;if("cell"==r.type.spec.tableRole||"header_cell"==r.type.spec.tableRole){var s=o.before(i),a="vert"==e?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(a)?s:null}}return null}function Tl(t,e){for(;e&&e!=t.dom;e=e.parentNode)if("TD"==e.nodeName||"TH"==e.nodeName)return e}function Ml(t,e){var n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?el(t.state.doc.resolve(n.pos)):null}var El=new lo("fix-tables");function Al(t,e,n,o){var i=t.childCount,r=e.childCount;t:for(var s=0,a=0;s<r;s++){for(var l=e.child(s),c=a,u=Math.min(i,s+3);c<u;c++)if(t.child(c)==l){a=c+1,n+=l.nodeSize;continue t}o(l,n),a<i&&t.child(a).sameMarkup(l)?Al(t.child(a),l,n+1,o):l.nodesBetween(0,l.content.size,o,n+1),n+=l.nodeSize}}function Nl(t,e){var n,o=function(e,o){"table"==e.type.spec.tableRole&&(n=function(t,e,n,o){var i=Ka.get(e);if(!i.problems)return o;o||(o=t.tr);for(var r,s,a=[],l=0;l<i.height;l++)a.push(0);for(var c=0;c<i.problems.length;c++){var u=i.problems[c];if("collision"==u.type){for(var p=e.nodeAt(u.pos),h=0;h<p.attrs.rowspan;h++)a[u.row+h]+=u.n;o.setNodeMarkup(o.mapping.map(n+1+u.pos),null,ll(p.attrs,p.attrs.colspan-u.n,u.n))}else if("missing"==u.type)a[u.row]+=u.n;else if("overlong_rowspan"==u.type){var d=e.nodeAt(u.pos);o.setNodeMarkup(o.mapping.map(n+1+u.pos),null,al(d.attrs,"rowspan",d.attrs.rowspan-u.n))}else if("colwidth mismatch"==u.type){var f=e.nodeAt(u.pos);o.setNodeMarkup(o.mapping.map(n+1+u.pos),null,al(f.attrs,"colwidth",u.colwidth))}}for(var m=0;m<a.length;m++)a[m]&&(null==r&&(r=m),s=m);for(var v=0,g=n+1;v<i.height;v++){var y=e.child(v),b=g+y.nodeSize,_=a[v];if(_>0){var w="cell";y.firstChild&&(w=y.firstChild.type.spec.tableRole);for(var x=[],S=0;S<_;S++)x.push(Qa(t.schema)[w].createAndFill());var k=0!=v&&r!=v-1||s!=v?b-1:g+1;o.insert(o.mapping.map(k),x)}g=b}return o.setMeta(El,{fixTables:!0})}(t,e,o,n))};return e?e.doc!=t.doc&&Al(e.doc,t.doc,0,o):t.doc.descendants(o),n}function Pl(t){var e,n=t.selection,o=ol(t),i=o.node(-1),r=o.start(-1),s=Ka.get(i);return(e=n instanceof ul?s.rectBetween(n.$anchorCell.pos-r,n.$headCell.pos-r):s.findCell(o.pos-r)).tableStart=r,e.map=s,e.table=i,e}function Ll(t,e,n){var o=e.map,i=e.tableStart,r=e.table,s=n>0?-1:0;(function(t,e,n){for(var o=Qa(e.type.schema).header_cell,i=0;i<t.height;i++)if(e.nodeAt(t.map[n+i*t.width]).type!=o)return!1;return!0})(o,r,n+s)&&(s=0==n||n==o.width?null:0);for(var a=0;a<o.height;a++){var l=a*o.width+n;if(n>0&&n<o.width&&o.map[l-1]==o.map[l]){var c=o.map[l],u=r.nodeAt(c);t.setNodeMarkup(t.mapping.map(i+c),null,cl(u.attrs,n-o.colCount(c))),a+=u.attrs.rowspan-1}else{var p=null==s?Qa(r.type.schema).cell:r.nodeAt(o.map[l+s]).type,h=o.positionAt(a,n,r);t.insert(t.mapping.map(i+h),p.createAndFill())}}return t}function Il(t,e){if(!nl(t))return!1;if(e){var n=Pl(t);e(Ll(t.tr,n,n.left))}return!0}function Dl(t,e){if(!nl(t))return!1;if(e){var n=Pl(t);e(Ll(t.tr,n,n.right))}return!0}function Rl(t,e,n){for(var o=e.map,i=e.table,r=e.tableStart,s=t.mapping.maps.length,a=0;a<o.height;){var l=a*o.width+n,c=o.map[l],u=i.nodeAt(c);if(n>0&&o.map[l-1]==c||n<o.width-1&&o.map[l+1]==c)t.setNodeMarkup(t.mapping.slice(s).map(r+c),null,ll(u.attrs,n-o.colCount(c)));else{var p=t.mapping.slice(s).map(r+c);t.delete(p,p+u.nodeSize)}a+=u.attrs.rowspan}}function zl(t,e){if(!nl(t))return!1;if(e){var n=Pl(t),o=t.tr;if(0==n.left&&n.right==n.map.width)return!1;for(var i=n.right-1;Rl(o,n,i),i!=n.left;i--)n.table=n.tableStart?o.doc.nodeAt(n.tableStart-1):o.doc,n.map=Ka.get(n.table);e(o)}return!0}function Bl(t,e,n){for(var o=e.map,i=e.tableStart,r=e.table,s=i,a=0;a<n;a++)s+=r.child(a).nodeSize;var l=[],c=n>0?-1:0;(function(t,e,n){for(var o=Qa(e.type.schema).header_cell,i=0;i<t.width;i++)if(e.nodeAt(t.map[i+n*t.width]).type!=o)return!1;return!0})(o,r,n+c)&&(c=0==n||n==o.height?null:0);for(var u=0,p=o.width*n;u<o.width;u++,p++)if(n>0&&n<o.height&&o.map[p]==o.map[p-o.width]){var h=o.map[p],d=r.nodeAt(h).attrs;t.setNodeMarkup(i+h,null,al(d,"rowspan",d.rowspan+1)),u+=d.colspan-1}else{var f=null==c?Qa(r.type.schema).cell:r.nodeAt(o.map[p+c*o.width]).type;l.push(f.createAndFill())}return t.insert(s,Qa(r.type.schema).row.create(null,l)),t}function $l(t,e){if(!nl(t))return!1;if(e){var n=Pl(t);e(Bl(t.tr,n,n.top))}return!0}function jl(t,e){if(!nl(t))return!1;if(e){var n=Pl(t);e(Bl(t.tr,n,n.bottom))}return!0}function Vl(t,e,n){for(var o=e.map,i=e.table,r=e.tableStart,s=0,a=0;a<n;a++)s+=i.child(a).nodeSize;var l=s+i.child(n).nodeSize,c=t.mapping.maps.length;t.delete(s+r,l+r);for(var u=0,p=n*o.width;u<o.width;u++,p++){var h=o.map[p];if(n>0&&h==o.map[p-o.width]){var d=i.nodeAt(h).attrs;t.setNodeMarkup(t.mapping.slice(c).map(h+r),null,al(d,"rowspan",d.rowspan-1)),u+=d.colspan-1}else if(n<o.width&&h==o.map[p+o.width]){var f=i.nodeAt(h),m=f.type.create(al(f.attrs,"rowspan",f.attrs.rowspan-1),f.content),v=o.positionAt(n+1,u,i);t.insert(t.mapping.slice(c).map(r+v),m),u+=f.attrs.colspan-1}}}function Zl(t,e){if(!nl(t))return!1;if(e){var n=Pl(t),o=t.tr;if(0==n.top&&n.bottom==n.map.height)return!1;for(var i=n.bottom-1;Vl(o,n,i),i!=n.top;i--)n.table=n.tableStart?o.doc.nodeAt(n.tableStart-1):o.doc,n.map=Ka.get(n.table);e(o)}return!0}function Fl(t){var e=t.content;return 1==e.childCount&&e.firstChild.isTextblock&&0==e.firstChild.childCount}function Hl(t,e){var n=t.selection;if(!(n instanceof ul)||n.$anchorCell.pos==n.$headCell.pos)return!1;var o=Pl(t),i=o.map;if(function(t,e){for(var n=t.width,o=t.height,i=t.map,r=e.top*n+e.left,s=r,a=(e.bottom-1)*n+e.left,l=r+(e.right-e.left-1),c=e.top;c<e.bottom;c++){if(e.left>0&&i[s]==i[s-1]||e.right<n&&i[l]==i[l+1])return!0;s+=n,l+=n}for(var u=e.left;u<e.right;u++){if(e.top>0&&i[r]==i[r-n]||e.bottom<o&&i[a]==i[a+n])return!0;r++,a++}return!1}(i,o))return!1;if(e){for(var r,s,a=t.tr,l={},c=Zt.empty,u=o.top;u<o.bottom;u++)for(var p=o.left;p<o.right;p++){var h=i.map[u*i.width+p],d=o.table.nodeAt(h);if(!l[h])if(l[h]=!0,null==r)r=h,s=d;else{Fl(d)||(c=c.append(d.content));var f=a.mapping.map(h+o.tableStart);a.delete(f,f+d.nodeSize)}}if(a.setNodeMarkup(r+o.tableStart,null,al(cl(s.attrs,s.attrs.colspan,o.right-o.left-s.attrs.colspan),"rowspan",o.bottom-o.top)),c.size){var m=r+1+s.content.size,v=Fl(s)?r+1:m;a.replaceWith(v+o.tableStart,m+o.tableStart,c)}a.setSelection(new ul(a.doc.resolve(r+o.tableStart))),e(a)}return!0}function Wl(t,e){var n,o=Qa(t.schema);return(n=function(t){var e=t.node;return o[e.type.spec.tableRole]},function(t,e){var o,i,r=t.selection;if(r instanceof ul){if(r.$anchorCell.pos!=r.$headCell.pos)return!1;o=r.$anchorCell.nodeAfter,i=r.$anchorCell.pos}else{if(!(o=function(t){for(var e=t.depth;e>0;e--){var n=t.node(e).type.spec.tableRole;if("cell"===n||"header_cell"===n)return t.node(e)}return null}(r.$from)))return!1;i=el(r.$from).pos}if(1==o.attrs.colspan&&1==o.attrs.rowspan)return!1;if(e){var s=o.attrs,a=[],l=s.colwidth;s.rowspan>1&&(s=al(s,"rowspan",1)),s.colspan>1&&(s=al(s,"colspan",1));for(var c,u=Pl(t),p=t.tr,h=0;h<u.right-u.left;h++)a.push(l?al(s,"colwidth",l&&l[h]?[l[h]]:null):s);for(var d=u.top;d<u.bottom;d++){var f=u.map.positionAt(d,u.left,u.table);d==u.top&&(f+=o.nodeSize);for(var m=u.left,v=0;m<u.right;m++,v++)m==u.left&&d==u.top||p.insert(c=p.mapping.map(f+u.tableStart,1),n({node:o,row:d,col:m}).createAndFill(a[v]))}p.setNodeMarkup(i,n({node:o,row:u.top,col:u.left}),a[0]),r instanceof ul&&p.setSelection(new ul(p.doc.resolve(r.$anchorCell.pos),c&&p.doc.resolve(c))),e(p)}return!0})(t,e)}function Ul(t,e,n){for(var o=e.map.cellsInRect({left:0,top:0,right:"row"==t?e.map.width:1,bottom:"column"==t?e.map.height:1}),i=0;i<o.length;i++){var r=e.table.nodeAt(o[i]);if(r&&r.type!==n.header_cell)return!1}return!0}function ql(t,e){return(e=e||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(t){return function(e,n){if(!nl(e))return!1;if(n){for(var o=Qa(e.schema),i=Pl(e),r=e.tr,s=i.map.cellsInRect("column"==t?new Ja(i.left,0,i.right,i.map.height):"row"==t?new Ja(0,i.top,i.map.width,i.bottom):i),a=s.map((function(t){return i.table.nodeAt(t)})),l=0;l<s.length;l++)a[l].type==o.header_cell&&r.setNodeMarkup(i.tableStart+s[l],o.cell,a[l].attrs);if(0==r.steps.length)for(var c=0;c<s.length;c++)r.setNodeMarkup(i.tableStart+s[c],o.header_cell,a[c].attrs);n(r)}return!0}}(t):function(e,n){if(!nl(e))return!1;if(n){var o=Qa(e.schema),i=Pl(e),r=e.tr,s=Ul("row",i,o),a=Ul("column",i,o),l=("column"===t?s:"row"===t&&a)?1:0,c="column"==t?new Ja(0,l,1,i.map.height):"row"==t?new Ja(l,0,i.map.width,1):i,u="column"==t?a?o.cell:o.header_cell:"row"==t?s?o.cell:o.header_cell:o.cell;i.map.cellsInRect(c).forEach((function(t){var e=t+i.tableStart,n=r.doc.nodeAt(e);n&&r.setNodeMarkup(e,u,n.attrs)})),n(r)}return!0}}var Jl=ql("row",{useDeprecatedLogic:!0}),Kl=ql("column",{useDeprecatedLogic:!0}),Gl=ql("cell",{useDeprecatedLogic:!0});function Xl(t){return function(e,n){if(!nl(e))return!1;var o=function(t,e){if(e<0){var n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(var o=t.index(-1)-1,i=t.before();o>=0;o--){var r=t.node(-1).child(o);if(r.childCount)return i-1-r.lastChild.nodeSize;i-=r.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;for(var s=t.node(-1),a=t.indexAfter(-1),l=t.after();a<s.childCount;a++){var c=s.child(a);if(c.childCount)return l+1;l+=c.nodeSize}}}(ol(e),t);if(null!=o){if(n){var i=e.doc.resolve(o);n(e.tr.setSelection(Zn.between(i,(r=i,r.node(0).resolve(r.pos+r.nodeAfter.nodeSize)))).scrollIntoView())}var r;return!0}}}function Yl(t,e){for(var n=t.selection.$anchor,o=n.depth;o>0;o--){if("table"==n.node(o).type.spec.tableRole)return e&&e(t.tr.delete(n.before(o),n.after(o)).scrollIntoView()),!0}return!1}var Ql=function(t,e){this.node=t,this.cellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),tc(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))};function tc(t,e,n,o,i,r){for(var s=0,a=!0,l=e.firstChild,c=t.firstChild,u=0,p=0;u<c.childCount;u++)for(var h=c.child(u).attrs,d=h.colspan,f=h.colwidth,m=0;m<d;m++,p++){var v=i==p?r:f&&f[m],g=v?v+"px":"";s+=v||o,v||(a=!1),l?(l.style.width!=g&&(l.style.width=g),l=l.nextSibling):e.appendChild(document.createElement("col")).style.width=g}for(;l;){var y=l.nextSibling;l.parentNode.removeChild(l),l=y}a?(n.style.width=s+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=s+"px")}Ql.prototype.update=function(t){return t.type==this.node.type&&(this.node=t,tc(t,this.colgroup,this.table,this.cellMinWidth),!0)},Ql.prototype.ignoreMutation=function(t){return"attributes"==t.type&&(t.target==this.table||this.colgroup.contains(t.target))};var ec=new lo("tableColumnResizing");function nc(t){void 0===t&&(t={});var e=t.handleWidth;void 0===e&&(e=5);var n=t.cellMinWidth;void 0===n&&(n=25);var o=t.View;void 0===o&&(o=Ql);var i=t.lastColumnResizable;void 0===i&&(i=!0);var r=new ro({key:ec,state:{init:function(t,e){return this.spec.props.nodeViews[Qa(e.schema).table.name]=function(t,e){return new o(t,n,e)},new oc(-1,!1)},apply:function(t,e){return e.apply(t)}},props:{attributes:function(t){return ec.getState(t).activeHandle>-1?{class:"resize-cursor"}:null},handleDOMEvents:{mousemove:function(t,n){!function(t,e,n,o,i){var r=ec.getState(t.state);if(!r.dragging){var s=function(t){for(;t&&"TD"!=t.nodeName&&"TH"!=t.nodeName;)t=t.classList.contains("ProseMirror")?null:t.parentNode;return t}(e.target),a=-1;if(s){var l=s.getBoundingClientRect(),c=l.left,u=l.right;e.clientX-c<=n?a=ic(t,e,"left"):u-e.clientX<=n&&(a=ic(t,e,"right"))}if(a!=r.activeHandle){if(!i&&-1!==a){var p=t.state.doc.resolve(a),h=p.node(-1),d=Ka.get(h),f=p.start(-1);if(d.colCount(p.pos-f)+p.nodeAfter.attrs.colspan-1==d.width-1)return}sc(t,a)}}}(t,n,e,0,i)},mouseleave:function(t){!function(t){var e=ec.getState(t.state);e.activeHandle>-1&&!e.dragging&&sc(t,-1)}(t)},mousedown:function(t,e){!function(t,e,n){var o=ec.getState(t.state);if(-1==o.activeHandle||o.dragging)return!1;var i=t.state.doc.nodeAt(o.activeHandle),r=function(t,e,n){var o=n.colspan,i=n.colwidth,r=i&&i[i.length-1];if(r)return r;var s=t.domAtPos(e),a=s.node.childNodes[s.offset].offsetWidth,l=o;if(i)for(var c=0;c<o;c++)i[c]&&(a-=i[c],l--);return a/l}(t,o.activeHandle,i.attrs);function s(e){window.removeEventListener("mouseup",s),window.removeEventListener("mousemove",a);var o=ec.getState(t.state);o.dragging&&(!function(t,e,n){for(var o=t.state.doc.resolve(e),i=o.node(-1),r=Ka.get(i),s=o.start(-1),a=r.colCount(o.pos-s)+o.nodeAfter.attrs.colspan-1,l=t.state.tr,c=0;c<r.height;c++){var u=c*r.width+a;if(!c||r.map[u]!=r.map[u-r.width]){var p=r.map[u],h=i.nodeAt(p).attrs,d=1==h.colspan?0:a-r.colCount(p);if(!h.colwidth||h.colwidth[d]!=n){var f=h.colwidth?h.colwidth.slice():ac(h.colspan);f[d]=n,l.setNodeMarkup(s+p,null,al(h,"colwidth",f))}}}l.docChanged&&t.dispatch(l)}(t,o.activeHandle,rc(o.dragging,e,n)),t.dispatch(t.state.tr.setMeta(ec,{setDragging:null})))}function a(e){if(!e.which)return s(e);var o=ec.getState(t.state),i=rc(o.dragging,e,n);!function(t,e,n,o){var i=t.state.doc.resolve(e),r=i.node(-1),s=i.start(-1),a=Ka.get(r).colCount(i.pos-s)+i.nodeAfter.attrs.colspan-1,l=t.domAtPos(i.start(-1)).node;for(;"TABLE"!=l.nodeName;)l=l.parentNode;tc(r,l.firstChild,l,o,a,n)}(t,o.activeHandle,i,n)}t.dispatch(t.state.tr.setMeta(ec,{setDragging:{startX:e.clientX,startWidth:r}})),window.addEventListener("mouseup",s),window.addEventListener("mousemove",a),e.preventDefault()}(t,e,n)}},decorations:function(t){var e=ec.getState(t);if(e.activeHandle>-1)return function(t,e){for(var n=[],o=t.doc.resolve(e),i=o.node(-1),r=Ka.get(i),s=o.start(-1),a=r.colCount(o.pos-s)+o.nodeAfter.attrs.colspan,l=0;l<r.height;l++){var c=a+l*r.width-1;if(!(a!=r.width&&r.map[c]==r.map[c+1]||0!=l&&r.map[c-1]==r.map[c-1-r.width])){var u=r.map[c],p=s+u+i.nodeAt(u).nodeSize-1,h=document.createElement("div");h.className="column-resize-handle",n.push(Rr.widget(p,h))}}return jr.create(t.doc,n)}(t,e.activeHandle)},nodeViews:{}}});return r}var oc=function(t,e){this.activeHandle=t,this.dragging=e};function ic(t,e,n){var o=t.posAtCoords({left:e.clientX,top:e.clientY});if(!o)return-1;var i=o.pos,r=el(t.state.doc.resolve(i));if(!r)return-1;if("right"==n)return r.pos;var s=Ka.get(r.node(-1)),a=r.start(-1),l=s.map.indexOf(r.pos-a);return l%s.width==0?-1:a+s.map[l-1]}function rc(t,e,n){var o=e.clientX-t.startX;return Math.max(n,t.startWidth+o)}function sc(t,e){t.dispatch(t.state.tr.setMeta(ec,{setHandle:e}))}function ac(t){for(var e=[],n=0;n<t;n++)e.push(0);return e}function lc(t){void 0===t&&(t={});var e=t.allowTableNodeSelection;return void 0===e&&(e=!1),new ro({key:tl,state:{init:function(){return null},apply:function(t,e){var n=t.getMeta(tl);if(null!=n)return-1==n?null:n;if(null==e||!t.docChanged)return e;var o=t.mapping.mapResult(e),i=o.deleted,r=o.pos;return i?null:r}},props:{decorations:hl,handleDOMEvents:{mousedown:Cl},createSelectionBetween:function(t){if(null!=tl.getState(t.state))return t.state.selection},handleTripleClick:Sl,handleKeyDown:yl,handlePaste:kl},appendTransaction:function(t,n,o){return function(t,e,n){var o,i,r=(e||t).selection,s=(e||t).doc;if(r instanceof Hn&&(i=r.node.type.spec.tableRole)){if("cell"==i||"header_cell"==i)o=ul.create(s,r.from);else if("row"==i){var a=s.resolve(r.from+1);o=ul.rowSelection(a,a)}else if(!n){var l=Ka.get(r.node),c=r.from+1,u=c+l.map[l.width*l.height-1];o=ul.create(s,c+1,u)}}else r instanceof Zn&&function(t){var e=t.$from,n=t.$to;if(e.pos==n.pos||e.pos<e.pos-6)return!1;for(var o=e.pos,i=n.pos,r=e.depth;r>=0&&!(e.after(r+1)<e.end(r));r--,o++);for(var s=n.depth;s>=0&&!(n.before(s+1)>n.start(s));s--,i--);return o==i&&/row|table/.test(e.node(r).type.spec.tableRole)}(r)?o=Zn.create(s,r.from):r instanceof Zn&&function(t){for(var e,n,o=t.$from,i=t.$to,r=o.depth;r>0;r--){var s=o.node(r);if("cell"===s.type.spec.tableRole||"header_cell"===s.type.spec.tableRole){e=s;break}}for(var a=i.depth;a>0;a--){var l=i.node(a);if("cell"===l.type.spec.tableRole||"header_cell"===l.type.spec.tableRole){n=l;break}}return e!==n&&0===i.parentOffset}(r)&&(o=Zn.create(s,r.$from.start(),r.$from.end()));return o&&(e||(e=t.tr)).setSelection(o),e}(o,Nl(o,n),e)}})}oc.prototype.apply=function(t){var e=this,n=t.getMeta(ec);if(n&&null!=n.setHandle)return new oc(n.setHandle,null);if(n&&void 0!==n.setDragging)return new oc(e.activeHandle,n.setDragging);if(e.activeHandle>-1&&t.docChanged){var o=t.mapping.map(e.activeHandle,-1);il(t.doc.resolve(o))||(o=null),e=new oc(o,e.dragging)}return e};new lo("collab");var cc=200,uc=function(){};uc.prototype.append=function(t){return t.length?(t=uc.from(t),!this.length&&t||t.length<cc&&this.leafAppend(t)||this.length<cc&&t.leafPrepend(this)||this.appendInner(t)):this},uc.prototype.prepend=function(t){return t.length?uc.from(t).append(this):this},uc.prototype.appendInner=function(t){return new hc(this,t)},uc.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.length),t>=e?uc.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))},uc.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)},uc.prototype.forEach=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length),e<=n?this.forEachInner(t,e,n,0):this.forEachInvertedInner(t,e,n,0)},uc.prototype.map=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length);var o=[];return this.forEach((function(e,n){return o.push(t(e,n))}),e,n),o},uc.from=function(t){return t instanceof uc?t:t&&t.length?new pc(t):uc.empty};var pc=function(t){function e(e){t.call(this),this.values=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(t,n){return 0==t&&n==this.length?this:new e(this.values.slice(t,n))},e.prototype.getInner=function(t){return this.values[t]},e.prototype.forEachInner=function(t,e,n,o){for(var i=e;i<n;i++)if(!1===t(this.values[i],o+i))return!1},e.prototype.forEachInvertedInner=function(t,e,n,o){for(var i=e-1;i>=n;i--)if(!1===t(this.values[i],o+i))return!1},e.prototype.leafAppend=function(t){if(this.length+t.length<=cc)return new e(this.values.concat(t.flatten()))},e.prototype.leafPrepend=function(t){if(this.length+t.length<=cc)return new e(t.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(uc);uc.empty=new pc([]);var hc=function(t){function e(e,n){t.call(this),this.left=e,this.right=n,this.length=e.length+n.length,this.depth=Math.max(e.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(t){return t<this.left.length?this.left.get(t):this.right.get(t-this.left.length)},e.prototype.forEachInner=function(t,e,n,o){var i=this.left.length;return!(e<i&&!1===this.left.forEachInner(t,e,Math.min(n,i),o))&&(!(n>i&&!1===this.right.forEachInner(t,Math.max(e-i,0),Math.min(this.length,n)-i,o+i))&&void 0)},e.prototype.forEachInvertedInner=function(t,e,n,o){var i=this.left.length;return!(e>i&&!1===this.right.forEachInvertedInner(t,e-i,Math.max(n,i)-i,o+i))&&(!(n<i&&!1===this.left.forEachInvertedInner(t,Math.min(e,i),n,o))&&void 0)},e.prototype.sliceInner=function(t,e){if(0==t&&e==this.length)return this;var n=this.left.length;return e<=n?this.left.slice(t,e):t>=n?this.right.slice(t-n,e-n):this.left.slice(t,n).append(this.right.slice(0,e-n))},e.prototype.leafAppend=function(t){var n=this.right.leafAppend(t);if(n)return new e(this.left,n)},e.prototype.leafPrepend=function(t){var n=this.left.leafPrepend(t);if(n)return new e(n,this.right)},e.prototype.appendInner=function(t){return this.left.depth>=Math.max(this.right.depth,t.depth)+1?new e(this.left,new e(this.right,t)):new e(this,t)},e}(uc);const dc=uc;var fc=function(t,e){this.items=t,this.eventCount=e};fc.prototype.popEvent=function(t,e){var n=this;if(0==this.eventCount)return null;for(var o,i,r=this.items.length;;r--){if(this.items.get(r-1).selection){--r;break}}e&&(o=this.remapping(r,this.items.length),i=o.maps.length);var s,a,l=t.tr,c=[],u=[];return this.items.forEach((function(t,e){if(!t.step)return o||(o=n.remapping(r,e+1),i=o.maps.length),i--,void u.push(t);if(o){u.push(new mc(t.map));var p,h=t.step.map(o.slice(i));h&&l.maybeStep(h).doc&&(p=l.mapping.maps[l.mapping.maps.length-1],c.push(new mc(p,null,null,c.length+u.length))),i--,p&&o.appendMap(p,i)}else l.maybeStep(t.step);return t.selection?(s=o?t.selection.map(o.slice(i)):t.selection,a=new fc(n.items.slice(0,r).append(u.reverse().concat(c)),n.eventCount-1),!1):void 0}),this.items.length,0),{remaining:a,transform:l,selection:s}},fc.prototype.addTransform=function(t,e,n,o){for(var i=[],r=this.eventCount,s=this.items,a=!o&&s.length?s.get(s.length-1):null,l=0;l<t.steps.length;l++){var c,u=t.steps[l].invert(t.docs[l]),p=new mc(t.mapping.maps[l],u,e);(c=a&&a.merge(p))&&(p=c,l?i.pop():s=s.slice(0,s.length-1)),i.push(p),e&&(r++,e=null),o||(a=p)}var h,d,f,m=r-n.depth;return m>gc&&(d=m,(h=s).forEach((function(t,e){if(t.selection&&0==d--)return f=e,!1})),s=h.slice(f),r-=m),new fc(s.append(i),r)},fc.prototype.remapping=function(t,e){var n=new sn;return this.items.forEach((function(e,o){var i=null!=e.mirrorOffset&&o-e.mirrorOffset>=t?n.maps.length-e.mirrorOffset:null;n.appendMap(e.map,i)}),t,e),n},fc.prototype.addMaps=function(t){return 0==this.eventCount?this:new fc(this.items.append(t.map((function(t){return new mc(t)}))),this.eventCount)},fc.prototype.rebased=function(t,e){if(!this.eventCount)return this;var n=[],o=Math.max(0,this.items.length-e),i=t.mapping,r=t.steps.length,s=this.eventCount;this.items.forEach((function(t){t.selection&&s--}),o);var a=e;this.items.forEach((function(e){var o=i.getMirror(--a);if(null!=o){r=Math.min(r,o);var l=i.maps[o];if(e.step){var c=t.steps[o].invert(t.docs[o]),u=e.selection&&e.selection.map(i.slice(a+1,o));u&&s++,n.push(new mc(l,c,u))}else n.push(new mc(l))}}),o);for(var l=[],c=e;c<r;c++)l.push(new mc(i.maps[c]));var u=this.items.slice(0,o).append(l).append(n),p=new fc(u,s);return p.emptyItemCount()>500&&(p=p.compress(this.items.length-n.length)),p},fc.prototype.emptyItemCount=function(){var t=0;return this.items.forEach((function(e){e.step||t++})),t},fc.prototype.compress=function(t){void 0===t&&(t=this.items.length);var e=this.remapping(0,t),n=e.maps.length,o=[],i=0;return this.items.forEach((function(r,s){if(s>=t)o.push(r),r.selection&&i++;else if(r.step){var a=r.step.map(e.slice(n)),l=a&&a.getMap();if(n--,l&&e.appendMap(l,n),a){var c=r.selection&&r.selection.map(e.slice(n));c&&i++;var u,p=new mc(l.invert(),a,c),h=o.length-1;(u=o.length&&o[h].merge(p))?o[h]=u:o.push(p)}}else r.map&&n--}),this.items.length,0),new fc(dc.from(o.reverse()),i)},fc.empty=new fc(dc.empty,0);var mc=function(t,e,n,o){this.map=t,this.step=e,this.selection=n,this.mirrorOffset=o};mc.prototype.merge=function(t){if(this.step&&t.step&&!t.selection){var e=t.step.merge(this.step);if(e)return new mc(e.getMap().invert(),e,this.selection)}};var vc=function(t,e,n,o){this.done=t,this.undone=e,this.prevRanges=n,this.prevTime=o},gc=20;function yc(t){var e=[];return t.forEach((function(t,n,o,i){return e.push(o,i)})),e}function bc(t,e){if(!t)return null;for(var n=[],o=0;o<t.length;o+=2){var i=e.map(t[o],1),r=e.map(t[o+1],-1);i<=r&&n.push(i,r)}return n}function _c(t,e,n,o){var i=Sc(e),r=kc.get(e).spec.config,s=(o?t.undone:t.done).popEvent(e,i);if(s){var a=s.selection.resolve(s.transform.doc),l=(o?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),r,i),c=new vc(o?l:s.remaining,o?s.remaining:l,null,0);n(s.transform.setSelection(a).setMeta(kc,{redo:o,historyState:c}).scrollIntoView())}}var wc=!1,xc=null;function Sc(t){var e=t.plugins;if(xc!=e){wc=!1,xc=e;for(var n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){wc=!0;break}}return wc}var kc=new lo("history"),Cc=new lo("closeHistory");function Oc(t){return t={depth:t&&t.depth||100,newGroupDelay:t&&t.newGroupDelay||500},new ro({key:kc,state:{init:function(){return new vc(fc.empty,fc.empty,null,0)},apply:function(e,n,o){return function(t,e,n,o){var i,r=n.getMeta(kc);if(r)return r.historyState;n.getMeta(Cc)&&(t=new vc(t.done,t.undone,null,0));var s=n.getMeta("appendedTransaction");if(0==n.steps.length)return t;if(s&&s.getMeta(kc))return s.getMeta(kc).redo?new vc(t.done.addTransform(n,null,o,Sc(e)),t.undone,yc(n.mapping.maps[n.steps.length-1]),t.prevTime):new vc(t.done,t.undone.addTransform(n,null,o,Sc(e)),null,t.prevTime);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(i=n.getMeta("rebased"))?new vc(t.done.rebased(n,i),t.undone.rebased(n,i),bc(t.prevRanges,n.mapping),t.prevTime):new vc(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),bc(t.prevRanges,n.mapping),t.prevTime);var a=0==t.prevTime||!s&&(t.prevTime<(n.time||0)-o.newGroupDelay||!function(t,e){if(!e)return!1;if(!t.docChanged)return!0;var n=!1;return t.mapping.maps[0].forEach((function(t,o){for(var i=0;i<e.length;i+=2)t<=e[i+1]&&o>=e[i]&&(n=!0)})),n}(n,t.prevRanges)),l=s?bc(t.prevRanges,n.mapping):yc(n.mapping.maps[n.steps.length-1]);return new vc(t.done.addTransform(n,a?e.selection.getBookmark():null,o,Sc(e)),fc.empty,l,n.time)}(n,o,e,t)}},config:t,props:{handleDOMEvents:{beforeinput:function(t,e){var n="historyUndo"==e.inputType?Tc(t.state,t.dispatch):"historyRedo"==e.inputType&&Mc(t.state,t.dispatch);return n&&e.preventDefault(),n}}}})}function Tc(t,e){var n=kc.getState(t);return!(!n||0==n.done.eventCount)&&(e&&_c(n,t,e,!1),!0)}function Mc(t,e){var n=kc.getState(t);return!(!n||0==n.undone.eventCount)&&(e&&_c(n,t,e,!0),!0)}function Ec(t){var e=kc.getState(t);return e?e.done.eventCount:0}function Ac(t){var e=kc.getState(t);return e?e.undone.eventCount:0}class Nc extends _a{get name(){return"blockquote"}get schema(){return{content:"block*",group:"block",defining:!0,draggable:!1,parseDOM:[{tag:"blockquote"}],toDOM:()=>["blockquote",0]}}commands({type:t}){return()=>fa(t)}keys({type:t}){return{"Ctrl->":fa(t)}}inputRules({type:t}){return[Js(/^\s*>\s$/,t)]}}class Pc extends _a{get name(){return"bullet_list"}get schema(){return{content:"list_item+",group:"block",parseDOM:[{tag:"ul"}],toDOM:()=>["ul",0]}}commands({type:t,schema:e}){return()=>da(t,e.nodes.list_item)}keys({type:t,schema:e}){return{"Shift-Ctrl-8":da(t,e.nodes.list_item)}}inputRules({type:t}){return[Js(/^\s*([-+*])\s$/,t)]}}class Lc extends _a{get name(){return"code_block"}get schema(){return{content:"text*",marks:"",group:"block",code:!0,defining:!0,draggable:!1,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:()=>["pre",["code",0]]}}commands({type:t,schema:e}){return()=>pa(t,e.nodes.paragraph)}keys({type:t}){return{"Shift-Ctrl-\\":Rs(t)}}inputRules({type:t}){return[Ks(/^```$/,t)]}}class Ic extends _a{get name(){return"hard_break"}get schema(){return{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:()=>["br"]}}commands({type:t}){return()=>Bs(Ls,((e,n)=>(n(e.tr.replaceSelectionWith(t.create()).scrollIntoView()),!0)))}keys({type:t}){const e=Bs(Ls,((e,n)=>(n(e.tr.replaceSelectionWith(t.create()).scrollIntoView()),!0)));return{"Mod-Enter":e,"Shift-Enter":e}}}class Dc extends _a{get name(){return"heading"}get defaultOptions(){return{levels:[1,2,3,4,5,6]}}get schema(){return{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,draggable:!1,parseDOM:this.options.levels.map((t=>({tag:`h${t}`,attrs:{level:t}}))),toDOM:t=>[`h${t.attrs.level}`,0]}}commands({type:t,schema:e}){return n=>pa(t,e.nodes.paragraph,n)}keys({type:t}){return this.options.levels.reduce(((e,n)=>({...e,[`Shift-Ctrl-${n}`]:Rs(t,{level:n})})),{})}inputRules({type:t}){return this.options.levels.map((e=>Ks(new RegExp(`^(#{1,${e}})\\s$`),t,(()=>({level:e})))))}}class Rc extends _a{get name(){return"horizontal_rule"}get schema(){return{group:"block",parseDOM:[{tag:"hr"}],toDOM:()=>["hr"]}}commands({type:t}){return()=>(e,n)=>n(e.tr.replaceSelectionWith(t.create()))}inputRules({type:t}){return[la(/^(?:---|___\s|\*\*\*\s)$/,t)]}}const zc=/!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\)/;class Bc extends _a{get name(){return"image"}get schema(){return{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:t=>({src:t.getAttribute("src"),title:t.getAttribute("title"),alt:t.getAttribute("alt")})}],toDOM:t=>["img",t.attrs]}}commands({type:t}){return e=>(n,o)=>{const{selection:i}=n,r=i.$cursor?i.$cursor.pos:i.$to.pos,s=t.create(e);o(n.tr.insert(r,s))}}inputRules({type:t}){return[la(zc,t,(t=>{const[,e,n,o]=t;return{src:n,alt:e,title:o}}))]}get plugins(){return[new ro({props:{handleDOMEvents:{drop(t,e){if(!(e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files.length))return;const n=Array.from(e.dataTransfer.files).filter((t=>/image/i.test(t.type)));if(0===n.length)return;e.preventDefault();const{schema:o}=t.state,i=t.posAtCoords({left:e.clientX,top:e.clientY});n.forEach((e=>{const n=new FileReader;n.onload=e=>{const n=o.nodes.image.create({src:e.target.result}),r=t.state.tr.insert(i.pos,n);t.dispatch(r)},n.readAsDataURL(e)}))}}}})]}}class $c extends _a{get name(){return"list_item"}get schema(){return{content:"paragraph block*",defining:!0,draggable:!1,parseDOM:[{tag:"li"}],toDOM:()=>["li",0]}}keys({type:t}){return{Enter:(e=t,function(t,n){var o=t.selection,i=o.$from,r=o.$to,s=o.node;if(s&&s.isBlock||i.depth<2||!i.sameParent(r))return!1;var a=i.node(-1);if(a.type!=e)return!1;if(0==i.parent.content.size&&i.node(-1).childCount==i.indexAfter(-1)){if(2==i.depth||i.node(-3).type!=e||i.index(-2)!=i.node(-2).childCount-1)return!1;if(n){for(var l=Zt.empty,c=i.index(-1)?1:i.index(-2)?2:3,u=i.depth-c;u>=i.depth-3;u--)l=Zt.from(i.node(u).copy(l));var p=i.indexAfter(-1)<i.node(-2).childCount?1:i.indexAfter(-2)<i.node(-3).childCount?2:3;l=l.append(Zt.from(e.createAndFill()));var h=i.before(i.depth-(c-1)),d=t.tr.replace(h,i.after(-p),new Kt(l,4-c,0)),f=-1;d.doc.nodesBetween(h,d.doc.content.size,(function(t,e){if(f>-1)return!1;t.isTextblock&&0==t.content.size&&(f=e+1)})),f>-1&&d.setSelection(t.selection.constructor.near(d.doc.resolve(f))),n(d.scrollIntoView())}return!0}var m=r.pos==i.end()?a.contentMatchAt(0).defaultType:null,v=t.tr.delete(i.pos,r.pos),g=m&&[null,{type:m}];return!!wn(v.doc,i.pos,2,g)&&(n&&n(v.split(i.pos,2,g).scrollIntoView()),!0)}),Tab:sa(t),"Shift-Tab":ra(t)};var e}}class jc extends _a{get name(){return"ordered_list"}get schema(){return{attrs:{order:{default:1}},content:"list_item+",group:"block",parseDOM:[{tag:"ol",getAttrs:t=>({order:t.hasAttribute("start")?+t.getAttribute("start"):1})}],toDOM:t=>1===t.attrs.order?["ol",0]:["ol",{start:t.attrs.order},0]}}commands({type:t,schema:e}){return()=>da(t,e.nodes.list_item)}keys({type:t,schema:e}){return{"Shift-Ctrl-9":da(t,e.nodes.list_item)}}inputRules({type:t}){return[Js(/^(\d+)\.\s$/,t,(t=>({order:+t[1]})),((t,e)=>e.childCount+e.attrs.order===+t[1]))]}}var Vc=function(t){var e=t.cellAttributes||{},n={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(var o in e)n[o]={default:e[o].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:t.tableGroup,parseDOM:[{tag:"table"}],toDOM:function(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM:function(){return["tr",0]}},table_cell:{content:t.cellContent,attrs:n,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:function(t){return Xa(t,e)}}],toDOM:function(t){return["td",Ya(t,e),0]}},table_header:{content:t.cellContent,attrs:n,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:function(t){return Xa(t,e)}}],toDOM:function(t){return["th",Ya(t,e),0]}}}}({tableGroup:"block",cellContent:"block+",cellAttributes:{background:{default:null,getFromDOM:t=>t.style.backgroundColor||null,setDOMAttr(t,e){if(t){const n={style:`${e.style||""}background-color: ${t};`};Object.assign(e,n)}}}}});class Zc extends _a{get name(){return"table"}get defaultOptions(){return{resizable:!1}}get schema(){return Vc.table}commands({schema:t}){return{createTable:({rowsCount:e,colsCount:n,withHeaderRow:o})=>(i,r)=>{const s=i.tr.selection.anchor+1,a=Xs(t,e,n,o),l=i.tr.replaceSelectionWith(a).scrollIntoView(),c=l.doc.resolve(s);l.setSelection(Zn.near(c)),r(l)},addColumnBefore:()=>Il,addColumnAfter:()=>Dl,deleteColumn:()=>zl,addRowBefore:()=>$l,addRowAfter:()=>jl,deleteRow:()=>Zl,deleteTable:()=>Yl,toggleCellMerge:()=>(t,e)=>{Hl(t,e)||Wl(t,e)},mergeCells:()=>Hl,splitCell:()=>Wl,toggleHeaderColumn:()=>Kl,toggleHeaderRow:()=>Jl,toggleHeaderCell:()=>Gl,setCellAttr:({name:t,value:e})=>function(t,e){return function(n,o){if(!nl(n))return!1;var i=ol(n);if(i.nodeAfter.attrs[t]===e)return!1;if(o){var r=n.tr;n.selection instanceof ul?n.selection.forEachCell((function(n,o){n.attrs[t]!==e&&r.setNodeMarkup(o,null,al(n.attrs,t,e))})):r.setNodeMarkup(i.pos,null,al(i.nodeAfter.attrs,t,e)),o(r)}return!0}}(t,e),fixTables:()=>Nl}}keys(){return{Tab:Xl(1),"Shift-Tab":Xl(-1)}}get plugins(){return[...this.options.resizable?[nc()]:[],lc()]}}class Fc extends _a{get name(){return"table_header"}get schema(){return Vc.table_header}}class Hc extends _a{get name(){return"table_cell"}get schema(){return Vc.table_cell}}class Wc extends _a{get name(){return"table_row"}get schema(){return Vc.table_row}}class Uc extends _a{get name(){return"todo_list"}get schema(){return{group:"block",content:"todo_item+",toDOM:()=>["ul",{"data-type":this.name},0],parseDOM:[{priority:51,tag:`[data-type="${this.name}"]`}]}}commands({type:t,schema:e}){return()=>da(t,e.nodes.todo_item)}inputRules({type:t}){return[Js(/^\s*(\[ \])\s$/,t)]}}class qc extends ya{get name(){return"bold"}get schema(){return{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:t=>"normal"!==t.style.fontWeight&&null},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}],toDOM:()=>["strong",0]}}keys({type:t}){return{"Mod-b":zs(t)}}commands({type:t}){return()=>zs(t)}inputRules({type:t}){return[aa(/(?:\*\*|__)([^*_]+)(?:\*\*|__)$/,t)]}pasteRules({type:t}){return[ua(/(?:\*\*|__)([^*_]+)(?:\*\*|__)/g,t)]}}class Jc extends ya{get name(){return"code"}get schema(){return{excludes:"_",parseDOM:[{tag:"code"}],toDOM:()=>["code",0]}}keys({type:t}){return{"Mod-`":zs(t)}}commands({type:t}){return()=>zs(t)}inputRules({type:t}){return[aa(/(?:`)([^`]+)(?:`)$/,t)]}pasteRules({type:t}){return[ua(/(?:`)([^`]+)(?:`)/g,t)]}}class Kc extends ya{get name(){return"italic"}get schema(){return{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:()=>["em",0]}}keys({type:t}){return{"Mod-i":zs(t)}}commands({type:t}){return()=>zs(t)}inputRules({type:t}){return[aa(/(?:^|[^_])(_([^_]+)_)$/,t),aa(/(?:^|[^*])(\*([^*]+)\*)$/,t)]}pasteRules({type:t}){return[ua(/_([^_]+)_/g,t),ua(/\*([^*]+)\*/g,t)]}}class Gc extends ya{get name(){return"link"}get defaultOptions(){return{openOnClick:!0,target:null}}get schema(){return{attrs:{href:{default:null},target:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:t=>({href:t.getAttribute("href"),target:t.getAttribute("target")})}],toDOM:t=>["a",{...t.attrs,rel:"noopener noreferrer nofollow",target:t.attrs.target||this.options.target},0]}}commands({type:t}){return e=>e.href?function(t,e){return(n,o)=>{const{tr:i,selection:r,doc:s}=n,{ranges:a,empty:l}=r;if(l){const{from:n,to:o}=ea(r.$from,t);s.rangeHasMark(n,o,t)&&i.removeMark(n,o,t),i.addMark(n,o,t.create(e))}else a.forEach((n=>{const{$to:o,$from:r}=n;s.rangeHasMark(r.pos,o.pos,t)&&i.removeMark(r.pos,o.pos,t),i.addMark(r.pos,o.pos,t.create(e))}));return o(i)}}(t,e):function(t){return(e,n)=>{const{tr:o,selection:i}=e;let{from:r,to:s}=i;const{$from:a,empty:l}=i;if(l){const e=ea(a,t);r=e.from,s=e.to}return o.removeMark(r,s,t),n(o)}}(t)}pasteRules({type:t}){return[ca(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z]{2,}\b([-a-zA-Z0-9@:%_+.~#?&//=,()!]*)/gi,t,(t=>({href:t})))]}get plugins(){return this.options.openOnClick?[new ro({props:{handleClick:(t,e,n)=>{const{schema:o}=t.state,i=ta(t.state,o.marks.link);i.href&&n.target instanceof HTMLAnchorElement&&(n.stopPropagation(),window.open(i.href,i.target))}}})]:[]}}class Xc extends ya{get name(){return"strike"}get schema(){return{parseDOM:[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",getAttrs:t=>"line-through"===t}],toDOM:()=>["s",0]}}keys({type:t}){return{"Mod-d":zs(t)}}commands({type:t}){return()=>zs(t)}inputRules({type:t}){return[aa(/~([^~]+)~$/,t)]}pasteRules({type:t}){return[ua(/~([^~]+)~/g,t)]}}class Yc extends ya{get name(){return"underline"}get schema(){return{parseDOM:[{tag:"u"},{style:"text-decoration",getAttrs:t=>"underline"===t}],toDOM:()=>["u",0]}}keys({type:t}){return{"Mod-u":zs(t)}}commands({type:t}){return()=>zs(t)}}class Qc extends va{get name(){return"history"}get defaultOptions(){return{depth:"",newGroupDelay:""}}keys(){return{"Mod-z":Tc,"Mod-y":Mc,"Shift-Mod-z":Mc,"Mod-я":Tc,"Shift-Mod-я":Mc}}get plugins(){return[Oc({depth:this.options.depth,newGroupDelay:this.options.newGroupDelay})]}commands(){return{undo:()=>Tc,redo:()=>Mc,undoDepth:()=>Ec,redoDepth:()=>Ac}}}class tu extends va{get name(){return"placeholder"}get defaultOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",emptyNodeText:"Write something …",showOnlyWhenEditable:!0,showOnlyCurrent:!0}}get plugins(){return[new ro({props:{decorations:({doc:t,plugins:e,selection:n})=>{const o=e.find((t=>t.key.startsWith("editable$"))).props.editable()||!this.options.showOnlyWhenEditable,{anchor:i}=n,r=[],s=0===t.textContent.length;return!!o&&(t.descendants(((t,e)=>{const n=i>=e&&i<=e+t.nodeSize,o=0===t.content.size;if((n||!this.options.showOnlyCurrent)&&o){const n=[this.options.emptyNodeClass];s&&n.push(this.options.emptyEditorClass);const o=Rr.node(e,e+t.nodeSize,{class:n.join(" "),"data-empty-text":"function"==typeof this.options.emptyNodeText?this.options.emptyNodeText(t):this.options.emptyNodeText});r.push(o)}return!1})),jr.create(t,r))}}})]}}var eu=function(t,e){return(eu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function nu(t,e){function n(){this.constructor=t}eu(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var ou=function(){return(ou=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function iu(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s}function ru(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function su(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{l(o.next(t))}catch(t){r(t)}}function a(t){try{l(o.throw(t))}catch(t){r(t)}}function l(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(s,a)}l((o=o.apply(t,e||[])).next())}))}function au(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}function lu(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return s}function cu(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(lu(arguments[e]));return t}var uu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{};function pu(t,e){return t(e={exports:{}},e.exports),e.exports}function hu(t){return t&&t.default||t}var du=function(t){return t&&t.Math==Math&&t},fu=du("object"==typeof globalThis&&globalThis)||du("object"==typeof window&&window)||du("object"==typeof self&&self)||du("object"==typeof uu&&uu)||Function("return this")(),mu=function(t){try{return!!t()}catch(t){return!0}},vu=!mu((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),gu={}.propertyIsEnumerable,yu=Object.getOwnPropertyDescriptor,bu={f:yu&&!gu.call({1:2},1)?function(t){var e=yu(this,t);return!!e&&e.enumerable}:gu},_u=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},wu={}.toString,xu=function(t){return wu.call(t).slice(8,-1)},Su="".split,ku=mu((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==xu(t)?Su.call(t,""):Object(t)}:Object,Cu=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},Ou=function(t){return ku(Cu(t))},Tu=function(t){return"object"==typeof t?null!==t:"function"==typeof t},Mu=function(t,e){if(!Tu(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!Tu(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!Tu(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!Tu(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")},Eu={}.hasOwnProperty,Au=function(t,e){return Eu.call(t,e)},Nu=fu.document,Pu=Tu(Nu)&&Tu(Nu.createElement),Lu=function(t){return Pu?Nu.createElement(t):{}},Iu=!vu&&!mu((function(){return 7!=Object.defineProperty(Lu("div"),"a",{get:function(){return 7}}).a})),Du=Object.getOwnPropertyDescriptor,Ru={f:vu?Du:function(t,e){if(t=Ou(t),e=Mu(e,!0),Iu)try{return Du(t,e)}catch(t){}if(Au(t,e))return _u(!bu.f.call(t,e),t[e])}},zu=function(t){if(!Tu(t))throw TypeError(String(t)+" is not an object");return t},Bu=Object.defineProperty,$u={f:vu?Bu:function(t,e,n){if(zu(t),e=Mu(e,!0),zu(n),Iu)try{return Bu(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},ju=vu?function(t,e,n){return $u.f(t,e,_u(1,n))}:function(t,e,n){return t[e]=n,t},Vu=function(t,e){try{ju(fu,t,e)}catch(n){fu[t]=e}return e},Zu=fu["__core-js_shared__"]||Vu("__core-js_shared__",{}),Fu=Function.toString;"function"!=typeof Zu.inspectSource&&(Zu.inspectSource=function(t){return Fu.call(t)});var Hu,Wu,Uu,qu=Zu.inspectSource,Ju=fu.WeakMap,Ku="function"==typeof Ju&&/native code/.test(qu(Ju)),Gu=pu((function(t){(t.exports=function(t,e){return Zu[t]||(Zu[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.4",mode:"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})})),Xu=0,Yu=Math.random(),Qu=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++Xu+Yu).toString(36)},tp=Gu("keys"),ep=function(t){return tp[t]||(tp[t]=Qu(t))},np={},op=fu.WeakMap;if(Ku){var ip=new op,rp=ip.get,sp=ip.has,ap=ip.set;Hu=function(t,e){return ap.call(ip,t,e),e},Wu=function(t){return rp.call(ip,t)||{}},Uu=function(t){return sp.call(ip,t)}}else{var lp=ep("state");np[lp]=!0,Hu=function(t,e){return ju(t,lp,e),e},Wu=function(t){return Au(t,lp)?t[lp]:{}},Uu=function(t){return Au(t,lp)}}var cp={set:Hu,get:Wu,has:Uu,enforce:function(t){return Uu(t)?Wu(t):Hu(t,{})},getterFor:function(t){return function(e){var n;if(!Tu(e)||(n=Wu(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},up=pu((function(t){var e=cp.get,n=cp.enforce,o=String(String).split("String");(t.exports=function(t,e,i,r){var s=!!r&&!!r.unsafe,a=!!r&&!!r.enumerable,l=!!r&&!!r.noTargetGet;"function"==typeof i&&("string"!=typeof e||Au(i,"name")||ju(i,"name",e),n(i).source=o.join("string"==typeof e?e:"")),t!==fu?(s?!l&&t[e]&&(a=!0):delete t[e],a?t[e]=i:ju(t,e,i)):a?t[e]=i:Vu(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||qu(this)}))})),pp=fu,hp=function(t){return"function"==typeof t?t:void 0},dp=function(t,e){return arguments.length<2?hp(pp[t])||hp(fu[t]):pp[t]&&pp[t][e]||fu[t]&&fu[t][e]},fp=Math.ceil,mp=Math.floor,vp=function(t){return isNaN(t=+t)?0:(t>0?mp:fp)(t)},gp=Math.min,yp=function(t){return t>0?gp(vp(t),9007199254740991):0},bp=Math.max,_p=Math.min,wp=function(t,e){var n=vp(t);return n<0?bp(n+e,0):_p(n,e)},xp=function(t){return function(e,n,o){var i,r=Ou(e),s=yp(r.length),a=wp(o,s);if(t&&n!=n){for(;s>a;)if((i=r[a++])!=i)return!0}else for(;s>a;a++)if((t||a in r)&&r[a]===n)return t||a||0;return!t&&-1}},Sp={includes:xp(!0),indexOf:xp(!1)},kp=Sp.indexOf,Cp=function(t,e){var n,o=Ou(t),i=0,r=[];for(n in o)!Au(np,n)&&Au(o,n)&&r.push(n);for(;e.length>i;)Au(o,n=e[i++])&&(~kp(r,n)||r.push(n));return r},Op=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Tp=Op.concat("length","prototype"),Mp={f:Object.getOwnPropertyNames||function(t){return Cp(t,Tp)}},Ep={f:Object.getOwnPropertySymbols},Ap=dp("Reflect","ownKeys")||function(t){var e=Mp.f(zu(t)),n=Ep.f;return n?e.concat(n(t)):e},Np=function(t,e){for(var n=Ap(e),o=$u.f,i=Ru.f,r=0;r<n.length;r++){var s=n[r];Au(t,s)||o(t,s,i(e,s))}},Pp=/#|\.prototype\./,Lp=function(t,e){var n=Dp[Ip(t)];return n==zp||n!=Rp&&("function"==typeof e?mu(e):!!e)},Ip=Lp.normalize=function(t){return String(t).replace(Pp,".").toLowerCase()},Dp=Lp.data={},Rp=Lp.NATIVE="N",zp=Lp.POLYFILL="P",Bp=Lp,$p=Ru.f,jp=function(t,e){var n,o,i,r,s,a=t.target,l=t.global,c=t.stat;if(n=l?fu:c?fu[a]||Vu(a,{}):(fu[a]||{}).prototype)for(o in e){if(r=e[o],i=t.noTargetGet?(s=$p(n,o))&&s.value:n[o],!Bp(l?o:a+(c?".":"#")+o,t.forced)&&void 0!==i){if(typeof r==typeof i)continue;Np(r,i)}(t.sham||i&&i.sham)&&ju(r,"sham",!0),up(n,o,r,t)}},Vp=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},Zp=function(t){return Object(Cu(t))},Fp=Array.isArray||function(t){return"Array"==xu(t)},Hp=!!Object.getOwnPropertySymbols&&!mu((function(){return!String(Symbol())})),Wp=Hp&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Up=Gu("wks"),qp=fu.Symbol,Jp=Wp?qp:qp&&qp.withoutSetter||Qu,Kp=function(t){return Au(Up,t)||(Hp&&Au(qp,t)?Up[t]=qp[t]:Up[t]=Jp("Symbol."+t)),Up[t]},Gp=Kp("species"),Xp=function(t,e){var n;return Fp(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!Fp(n.prototype)?Tu(n)&&null===(n=n[Gp])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},Yp=[].push,Qp=function(t){var e=1==t,n=2==t,o=3==t,i=4==t,r=6==t,s=5==t||r;return function(a,l,c,u){for(var p,h,d=Zp(a),f=ku(d),m=function(t,e,n){return Vp(t),void 0===e?t:function(n,o,i){return t.call(e,n,o,i)}}(l,c),v=yp(f.length),g=0,y=u||Xp,b=e?y(a,v):n?y(a,0):void 0;v>g;g++)if((s||g in f)&&(h=m(p=f[g],g,d),t))if(e)b[g]=h;else if(h)switch(t){case 3:return!0;case 5:return p;case 6:return g;case 2:Yp.call(b,p)}else if(i)return!1;return r?-1:o||i?i:b}},th={forEach:Qp(0),map:Qp(1),filter:Qp(2),some:Qp(3),every:Qp(4),find:Qp(5),findIndex:Qp(6)},eh=function(t,e){var n=[][t];return!!n&&mu((function(){n.call(null,e||function(){throw 1},1)}))},nh=Object.defineProperty,oh={},ih=function(t){throw t},rh=function(t,e){if(Au(oh,t))return oh[t];e||(e={});var n=[][t],o=!!Au(e,"ACCESSORS")&&e.ACCESSORS,i=Au(e,0)?e[0]:ih,r=Au(e,1)?e[1]:void 0;return oh[t]=!!n&&!mu((function(){if(o&&!vu)return!0;var t={length:-1};o?nh(t,1,{enumerable:!0,get:ih}):t[1]=1,n.call(t,i,r)}))},sh=th.forEach,ah=eh("forEach"),lh=rh("forEach"),ch=ah&&lh?[].forEach:function(t){return sh(this,t,arguments.length>1?arguments[1]:void 0)};jp({target:"Array",proto:!0,forced:[].forEach!=ch},{forEach:ch});var uh,ph,hh=function(t,e,n){var o=Mu(e);o in t?$u.f(t,o,_u(0,n)):t[o]=n},dh=dp("navigator","userAgent")||"",fh=fu.process,mh=fh&&fh.versions,vh=mh&&mh.v8;vh?ph=(uh=vh.split("."))[0]+uh[1]:dh&&(!(uh=dh.match(/Edge\/(\d+)/))||uh[1]>=74)&&(uh=dh.match(/Chrome\/(\d+)/))&&(ph=uh[1]);var gh=ph&&+ph,yh=Kp("species"),bh=function(t){return gh>=51||!mu((function(){var e=[];return(e.constructor={})[yh]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},_h=bh("slice"),wh=rh("slice",{ACCESSORS:!0,0:0,1:2}),xh=Kp("species"),Sh=[].slice,kh=Math.max;jp({target:"Array",proto:!0,forced:!_h||!wh},{slice:function(t,e){var n,o,i,r=Ou(this),s=yp(r.length),a=wp(t,s),l=wp(void 0===e?s:e,s);if(Fp(r)&&("function"!=typeof(n=r.constructor)||n!==Array&&!Fp(n.prototype)?Tu(n)&&null===(n=n[xh])&&(n=void 0):n=void 0,n===Array||void 0===n))return Sh.call(r,a,l);for(o=new(void 0===n?Array:n)(kh(l-a,0)),i=0;a<l;a++,i++)a in r&&hh(o,i,r[a]);return o.length=i,o}});var Ch,Oh=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,o){return zu(n),function(t){if(!Tu(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(o),e?t.call(n,o):n.__proto__=o,n}}():void 0),Th=Object.keys||function(t){return Cp(t,Op)},Mh=vu?Object.defineProperties:function(t,e){zu(t);for(var n,o=Th(e),i=o.length,r=0;i>r;)$u.f(t,n=o[r++],e[n]);return t},Eh=dp("document","documentElement"),Ah=ep("IE_PROTO"),Nh=function(){},Ph=function(t){return"<script>"+t+"<\/script>"},Lh=function(){try{Ch=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;Lh=Ch?function(t){t.write(Ph("")),t.close();var e=t.parentWindow.Object;return t=null,e}(Ch):((e=Lu("iframe")).style.display="none",Eh.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Ph("document.F=Object")),t.close(),t.F);for(var n=Op.length;n--;)delete Lh.prototype[Op[n]];return Lh()};np[Ah]=!0;var Ih=Object.create||function(t,e){var n;return null!==t?(Nh.prototype=zu(t),n=new Nh,Nh.prototype=null,n[Ah]=t):n=Lh(),void 0===e?n:Mh(n,e)},Dh="[\t\n\v\f\r                　\u2028\u2029\ufeff]",Rh=RegExp("^"+Dh+Dh+"*"),zh=RegExp(Dh+Dh+"*$"),Bh=function(t){return function(e){var n=String(Cu(e));return 1&t&&(n=n.replace(Rh,"")),2&t&&(n=n.replace(zh,"")),n}},$h={start:Bh(1),end:Bh(2),trim:Bh(3)},jh=Mp.f,Vh=Ru.f,Zh=$u.f,Fh=$h.trim,Hh=fu.Number,Wh=Hh.prototype,Uh="Number"==xu(Ih(Wh)),qh=function(t){var e,n,o,i,r,s,a,l,c=Mu(t,!1);if("string"==typeof c&&c.length>2)if(43===(e=(c=Fh(c)).charCodeAt(0))||45===e){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:o=2,i=49;break;case 79:case 111:o=8,i=55;break;default:return+c}for(s=(r=c.slice(2)).length,a=0;a<s;a++)if((l=r.charCodeAt(a))<48||l>i)return NaN;return parseInt(r,o)}return+c};if(Bp("Number",!Hh(" 0o1")||!Hh("0b1")||Hh("+0x1"))){for(var Jh,Kh=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof Kh&&(Uh?mu((function(){Wh.valueOf.call(n)})):"Number"!=xu(n))?function(t,e,n){var o,i;return Oh&&"function"==typeof(o=e.constructor)&&o!==n&&Tu(i=o.prototype)&&i!==n.prototype&&Oh(t,i),t}(new Hh(qh(e)),n,Kh):qh(e)},Gh=vu?jh(Hh):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),Xh=0;Gh.length>Xh;Xh++)Au(Hh,Jh=Gh[Xh])&&!Au(Kh,Jh)&&Zh(Kh,Jh,Vh(Hh,Jh));Kh.prototype=Wh,Wh.constructor=Kh,up(fu,"Number",Kh)}var Yh={};Yh[Kp("toStringTag")]="z";var Qh="[object z]"===String(Yh),td=Kp("toStringTag"),ed="Arguments"==xu(function(){return arguments}()),nd=Qh?xu:function(t){var e,n,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),td))?n:ed?xu(e):"Object"==(o=xu(e))&&"function"==typeof e.callee?"Arguments":o},od=Qh?{}.toString:function(){return"[object "+nd(this)+"]"};Qh||up(Object.prototype,"toString",od,{unsafe:!0});var id=function(){var t=zu(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},rd=RegExp.prototype,sd=rd.toString,ad=mu((function(){return"/a/b"!=sd.call({source:"a",flags:"b"})})),ld="toString"!=sd.name;(ad||ld)&&up(RegExp.prototype,"toString",(function(){var t=zu(this),e=String(t.source),n=t.flags;return"/"+e+"/"+String(void 0===n&&t instanceof RegExp&&!("flags"in rd)?id.call(t):n)}),{unsafe:!0});var cd={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var ud in cd){var pd=fu[ud],hd=pd&&pd.prototype;if(hd&&hd.forEach!==ch)try{ju(hd,"forEach",ch)}catch(Pd){hd.forEach=ch}}function dd(t){return(dd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fd(t,e,n){(n?Reflect.getOwnMetadataKeys(e,n):Reflect.getOwnMetadataKeys(e)).forEach((function(o){var i=n?Reflect.getOwnMetadata(o,e,n):Reflect.getOwnMetadata(o,e);n?Reflect.defineMetadata(o,i,t,n):Reflect.defineMetadata(o,i,t)}))}var md={__proto__:[]}instanceof Array;function vd(t){return function(e,n,o){var i="function"==typeof e?e:e.constructor;i.__decorators__||(i.__decorators__=[]),"number"!=typeof o&&(o=void 0),i.__decorators__.push((function(e){return t(e,n,o)}))}}function gd(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Rt.Z.extend({mixins:e})}var yd=["data","beforeCreate","created","beforeMount","mounted","beforeDestroy","destroyed","beforeUpdate","updated","activated","deactivated","render","errorCaptured","serverPrefetch"];function bd(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.name=e.name||t._componentTag||t.name;var n=t.prototype;Object.getOwnPropertyNames(n).forEach((function(t){if("constructor"!==t)if(yd.indexOf(t)>-1)e[t]=n[t];else{var o=Object.getOwnPropertyDescriptor(n,t);void 0!==o.value?"function"==typeof o.value?(e.methods||(e.methods={}))[t]=o.value:(e.mixins||(e.mixins=[])).push({data:function(){return function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},t,o.value)}}):(o.get||o.set)&&((e.computed||(e.computed={}))[t]={get:o.get,set:o.set})}})),(e.mixins||(e.mixins=[])).push({data:function(){return function(t,e){var n=e.prototype._init;e.prototype._init=function(){var e=this,n=Object.getOwnPropertyNames(t);if(t.$options.props)for(var o in t.$options.props)t.hasOwnProperty(o)||n.push(o);n.forEach((function(n){"_"!==n.charAt(0)&&Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){t[n]=e},configurable:!0})}))};var o=new e;e.prototype._init=n;var i={};return Object.keys(o).forEach((function(t){void 0!==o[t]&&(i[t]=o[t])})),i}(this,t)}});var o=t.__decorators__;o&&(o.forEach((function(t){return t(e)})),delete t.__decorators__);var i,r,s=Object.getPrototypeOf(t.prototype),a=s instanceof Rt.Z?s.constructor:Rt.Z,l=a.extend(e);return function(t,e,n){Object.getOwnPropertyNames(e).forEach((function(o){if(!_d[o]){var i=Object.getOwnPropertyDescriptor(t,o);if(!i||i.configurable){var r,s,a=Object.getOwnPropertyDescriptor(e,o);if(!md){if("cid"===o)return;var l=Object.getOwnPropertyDescriptor(n,o);if(s=dd(r=a.value),null!=r&&("object"===s||"function"===s)&&l&&l.value===a.value)return}Object.defineProperty(t,o,a)}}}))}(l,t,a),"undefined"!=typeof Reflect&&Reflect.defineMetadata&&Reflect.getOwnMetadataKeys&&(fd(i=l,r=t),Object.getOwnPropertyNames(r.prototype).forEach((function(t){fd(i.prototype,r.prototype,t)})),Object.getOwnPropertyNames(r).forEach((function(t){fd(i,r,t)}))),l}var _d={prototype:!0,arguments:!0,callee:!0,caller:!0};function wd(t){return"function"==typeof t?bd(t):function(e){return bd(e,t)}}wd.registerHooks=function(t){yd.push.apply(yd,function(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(t))};var xd="undefined"!=typeof Reflect&&void 0!==Reflect.getMetadata;function Sd(t){return void 0===t&&(t={}),function(e,n){!function(t,e,n){xd&&(Array.isArray(t)||"function"==typeof t||void 0!==t.type||(t.type=Reflect.getMetadata("design:type",e,n)))}(t,e,n),vd((function(e,n){(e.props||(e.props={}))[n]=t}))(e,n)}}function kd(t,e){void 0===e&&(e={});var n=e.deep,o=void 0!==n&&n,i=e.immediate,r=void 0!==i&&i;return vd((function(e,n){"object"!=typeof e.watch&&(e.watch=Object.create(null));var i=e.watch;"object"!=typeof i[t]||Array.isArray(i[t])?void 0===i[t]&&(i[t]=[]):i[t]=[i[t]],i[t].push({handler:n,deep:o,immediate:r})}))}var Cd={color:"grey lighten-4",flat:!0,dense:!0},Od=function(){function t(t){this.text=t}return t.prototype.toString=function(){return this.text},t}(),Td=$u.f,Md=Function.prototype,Ed=Md.toString,Ad=/^\s*function ([^ (]*)/;!vu||"name"in Md||Td(Md,"name",{configurable:!0,get:function(){try{return Ed.call(this).match(Ad)[1]}catch(t){return""}}});var Nd,Pd,Ld=function(){function t(t){this.name=t}return t.prototype.toString=function(){return this.name},t}(),Id={VALUE:"value",EXTENSIONS:"extensions",TOOLBAR_ATTRIBUTES:"toolbarAttributes",EDITOR_PROPERTIES:"editorProperties",NATIVE_EXTENSIONS:"nativeExtensions",PLACEHOLDER:"placeholder",CARD_PROPS:"cardProps",OUTPUT_FORMAT:"outputFormat",TYPE:"type",MIN_HEIGHT:"minHeight",MAX_HEIGHT:"maxHeight",DISABLED:"disabled"};(Pd=Nd||(Nd={})).card="card",Pd.inline="inline";var Dd=new(function(){function t(){}return t.prototype.warn=function(t){console.warn("tiptap-vuetify: "+t)},t.prototype.error=function(t){console.error("tiptap-vuetify: "+t)},t}()),Rd={EDITOR:"editor",OPTIONS:"options",CONTEXT:"context",DARK:"dark",DISABLED:"disabled"},zd=function(t,e,n,o,i,r,s,a,l,c){"boolean"!=typeof s&&(l=a,a=s,s=!1);var u,p="function"==typeof n?n.options:n;if(t&&t.render&&(p.render=t.render,p.staticRenderFns=t.staticRenderFns,p._compiled=!0,i&&(p.functional=!0)),o&&(p._scopeId=o),r?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(r)},p._ssrRegister=u):e&&(u=s?function(){e.call(this,c(this.$root.$options.shadowRoot))}:function(t){e.call(this,a(t))}),u)if(p.functional){var h=p.render;p.render=function(t,e){return u.call(e),h(t,e)}}else{var d=p.beforeCreate;p.beforeCreate=d?[].concat(d,u):[u]}return n},Bd=zd({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[n("v-btn",t._g({class:{"tiptap-vuetify-editor__action-render-btn":!0,"v-btn--active":t.$props[t.PROPS.OPTIONS].isActive(t.$props[t.PROPS.CONTEXT])},attrs:{disabled:t.disabled,dark:t.$props[t.PROPS.DARK],small:"",icon:""},on:{click:function(e){return t.options.onClick({context:t.$props[t.PROPS.CONTEXT],editor:t.$props[t.PROPS.EDITOR]})}}},o),[n(t.isTextIcon?"b":t.isVuetifyIcon?"v-icon":null,{tag:"component",staticClass:"tiptap-vuetify-editor__btn-icon"},[t._v("\n        "+t._s(t.buttonIcon)+"\n      ")])],1)]}}])},[t._v(" "),[t._v(t._s(t.tooltipText))]],2)},staticRenderFns:[]},void 0,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PROPS=Rd,e}var n,o,i,r,s;return nu(e,t),Object.defineProperty(e.prototype,"buttonIcon",{get:function(){return this[Rd.OPTIONS].icons[this.$tiptapVuetify.iconsGroup]||(Dd.warn("No icon was provided in extension options."),"No icon")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isTextIcon",{get:function(){return this.buttonIcon instanceof Od},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isVuetifyIcon",{get:function(){return this.buttonIcon instanceof Ld},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltipText",{get:function(){var t=this.$props[Rd.OPTIONS].tooltip;return"function"==typeof t?t(this.$props[Rd.CONTEXT],this.$props[Rd.OPTIONS]):t},enumerable:!0,configurable:!0}),n=Rd.DISABLED,o=Rd.EDITOR,i=Rd.OPTIONS,r=Rd.CONTEXT,s=Rd.DARK,iu([Sd({type:Boolean,default:!1}),ru("design:type",Boolean)],e.prototype,n,void 0),iu([Sd({type:Object,required:!0}),ru("design:type",ka)],e.prototype,o,void 0),iu([Sd({type:Object,required:!0}),ru("design:type",Object)],e.prototype,i,void 0),iu([Sd({type:Object,required:!0}),ru("design:type",Object)],e.prototype,r,void 0),iu([Sd({type:Boolean,default:!1}),ru("design:type",Boolean)],e.prototype,s,void 0),iu([wd({components:{VTooltip:La.Z,VBtn:f.Z,VIcon:C.Z}})],e)}(Rt.Z),void 0,!1,void 0,void 0,void 0),$d=function(t){var e=t.nativeExtensionName;this.options=ou({onClick:function(n){n.context.commands[e](t.onClickOptions)},isActive:function(n){var o=n.isActive;return!!o[e]&&o[e](t.isActiveOptions)}},t)},jd={EDITOR:"editor",ACTIONS:"actions",CONTEXT:"context",DARK:"dark",DISABLED:"disabled"},Vd=zd({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._l(t.$props[t.PROPS.ACTIONS],(function(e,o){return[t.isBtn(e)?n("action-btn",{key:"action-button-"+o,attrs:{options:e.render.options,context:t.$props[t.PROPS.CONTEXT],editor:t.$props[t.PROPS.EDITOR],dark:t.$props[t.PROPS.DARK],disabled:t.$props[t.PROPS.DISABLED]}}):t._e()]}))],2)},staticRenderFns:[]},void 0,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PROPS=jd,e}var n,o,i,r,s;return nu(e,t),e.prototype.isBtn=function(t){return t.render instanceof $d},n=jd.EDITOR,o=jd.DISABLED,i=jd.ACTIONS,r=jd.CONTEXT,s=jd.DARK,iu([Sd({type:Object,required:!0}),ru("design:type",ka)],e.prototype,n,void 0),iu([Sd({type:Boolean,default:!1}),ru("design:type",Boolean)],e.prototype,o,void 0),iu([Sd({type:Array,default:function(){return[]}}),ru("design:type",Array)],e.prototype,i,void 0),iu([Sd({type:Object}),ru("design:type",Object)],e.prototype,r,void 0),iu([Sd({type:Boolean,default:!1}),ru("design:type",Boolean)],e.prototype,s,void 0),iu([wd({components:{"action-btn":Bd}})],e)}(Rt.Z),void 0,!1,void 0,void 0,void 0),Zd=zd({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tiptap-vuetify-editor__toolbar"},[n("editor-menu-bar",{attrs:{editor:t.editor},scopedSlots:t._u([{key:"default",fn:function(e){return[t._t("default",[n("v-toolbar",t._b({},"v-toolbar",Object.assign({},t.toolbarConfig,t.toolbarAttributes),!1),[n("actions-render",{attrs:{actions:t.actions,context:e,editor:t.editor,disabled:t.disabled}})],1)],{isActive:e.isActive,commands:e.commands})]}}],null,!0)})],1)},staticRenderFns:[]},void 0,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.toolbarConfig=Cd,e}return nu(e,t),iu([Sd({type:Boolean,default:!1}),ru("design:type",Boolean)],e.prototype,"disabled",void 0),iu([Sd({type:Object,required:!0}),ru("design:type",ka)],e.prototype,"editor",void 0),iu([Sd({type:Array,default:function(){return[]}}),ru("design:type",Array)],e.prototype,"actions",void 0),iu([Sd({type:[Array,Object],default:function(){return{}}}),ru("design:type",Object)],e.prototype,"toolbarAttributes",void 0),iu([wd({components:{ActionsRender:Vd,EditorMenuBar:Ta,VToolbar:D.Z}})],e)}(Rt.Z),void 0,!1,void 0,void 0,void 0),Fd=function(t){return function(e,n,o,i){Vp(n);var r=Zp(e),s=ku(r),a=yp(r.length),l=t?a-1:0,c=t?-1:1;if(o<2)for(;;){if(l in s){i=s[l],l+=c;break}if(l+=c,t?l<0:a<=l)throw TypeError("Reduce of empty array with no initial value")}for(;t?l>=0:a>l;l+=c)l in s&&(i=n(i,s[l],l,r));return i}},Hd=[Fd(!1),Fd(!0)][0],Wd=eh("reduce"),Ud=rh("reduce",{1:0});function qd(t,e){return RegExp(t,e)}jp({target:"Array",proto:!0,forced:!Wd||!Ud},{reduce:function(t){return Hd(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}});var Jd,Kd,Gd={UNSUPPORTED_Y:mu((function(){var t=qd("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),BROKEN_CARET:mu((function(){var t=qd("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},Xd=RegExp.prototype.exec,Yd=String.prototype.replace,Qd=Xd,tf=(Jd=/a/,Kd=/b*/g,Xd.call(Jd,"a"),Xd.call(Kd,"a"),0!==Jd.lastIndex||0!==Kd.lastIndex),ef=Gd.UNSUPPORTED_Y||Gd.BROKEN_CARET,nf=void 0!==/()??/.exec("")[1];(tf||nf||ef)&&(Qd=function(t){var e,n,o,i,r=this,s=ef&&r.sticky,a=id.call(r),l=r.source,c=0,u=t;return s&&(-1===(a=a.replace("y","")).indexOf("g")&&(a+="g"),u=String(t).slice(r.lastIndex),r.lastIndex>0&&(!r.multiline||r.multiline&&"\n"!==t[r.lastIndex-1])&&(l="(?: "+l+")",u=" "+u,c++),n=new RegExp("^(?:"+l+")",a)),nf&&(n=new RegExp("^"+l+"$(?!\\s)",a)),tf&&(e=r.lastIndex),o=Xd.call(s?n:r,u),s?o?(o.input=o.input.slice(c),o[0]=o[0].slice(c),o.index=r.lastIndex,r.lastIndex+=o[0].length):r.lastIndex=0:tf&&o&&(r.lastIndex=r.global?o.index+o[0].length:e),nf&&o&&o.length>1&&Yd.call(o[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o});var of=Qd;jp({target:"RegExp",proto:!0,forced:/./.exec!==of},{exec:of});var rf=Kp("species"),sf=(mu((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),"a".replace(/./,"$0"),Kp("replace")),af=(!!/./[sf]&&/./[sf]("a","$0"),!mu((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}))),lf=Kp("match"),cf=function(t){var e;return Tu(t)&&(void 0!==(e=t[lf])?!!e:"RegExp"==xu(t))},uf=Kp("species"),pf=function(t){return function(e,n){var o,i,r=String(Cu(e)),s=vp(n),a=r.length;return s<0||s>=a?t?"":void 0:(o=r.charCodeAt(s))<55296||o>56319||s+1===a||(i=r.charCodeAt(s+1))<56320||i>57343?t?r.charAt(s):o:t?r.slice(s,s+2):i-56320+(o-55296<<10)+65536}},hf=(pf(!1),pf(!0)),df=function(t,e,n){return e+(n?hf(t,e).length:1)},ff=function(t,e){var n=t.exec;if("function"==typeof n){var o=n.call(t,e);if("object"!=typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==xu(t))throw TypeError("RegExp#exec called on incompatible receiver");return of.call(t,e)},mf=[].push,vf=Math.min,gf=!mu((function(){return!RegExp(4294967295,"y")}));!function(t,e,n,o){var i=Kp(t),r=!mu((function(){var e={};return e[i]=function(){return 7},7!=""[t](e)})),s=r&&!mu((function(){var t=!1,e=/a/;return(e={}).constructor={},e.constructor[rf]=function(){return e},e.flags="",e[i]=/./[i],e.exec=function(){return t=!0,null},e[i](""),!t}));if(!r||!s||!af){var a=/./[i],l=function(t,e,n){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var o=String(Cu(this)),i=void 0===n?4294967295:n>>>0;if(0===i)return[];if(void 0===t)return[o];if(!cf(t))return e.call(o,t,i);for(var r,s,a,l=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),u=0,p=new RegExp(t.source,c+"g");(r=of.call(p,o))&&!((s=p.lastIndex)>u&&(l.push(o.slice(u,r.index)),r.length>1&&r.index<o.length&&mf.apply(l,r.slice(1)),a=r[0].length,u=s,l.length>=i));)p.lastIndex===r.index&&p.lastIndex++;return u===o.length?!a&&p.test("")||l.push(""):l.push(o.slice(u)),l.length>i?l.slice(0,i):l}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var i=Cu(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,i,n):o.call(String(i),e,n)},function(t,i){var r=n(o,t,this,i,o!==e);if(r.done)return r.value;var s=zu(t),a=String(this),l=function(t,e){var n,o=zu(t).constructor;return void 0===o||null==(n=zu(o)[uf])?e:Vp(n)}(s,RegExp),c=s.unicode,u=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(gf?"y":"g"),p=new l(gf?s:"^(?:"+s.source+")",u),h=void 0===i?4294967295:i>>>0;if(0===h)return[];if(0===a.length)return null===ff(p,a)?[a]:[];for(var d=0,f=0,m=[];f<a.length;){p.lastIndex=gf?f:0;var v,g=ff(p,gf?a:a.slice(f));if(null===g||(v=vf(yp(p.lastIndex+(gf?0:f)),a.length))===d)f=df(a,f,c);else{if(m.push(a.slice(d,f)),m.length===h)return m;for(var y=1;y<=g.length-1;y++)if(m.push(g[y]),m.length===h)return m;f=d=v}}return m.push(a.slice(d)),m}]}(i,""[t],(function(t,e,n,o,i){return e.exec===of?r&&!i?{done:!0,value:a.call(e,n,o)}:{done:!0,value:t.call(n,e,o)}:{done:!1}})),c=l[0],u=l[1];up(String.prototype,t,c),up(RegExp.prototype,i,(function(t,e){return u.call(t,this,e)}))}o&&ju(RegExp.prototype[i],"sham",!0)}("split",0,0,!gf);var yf="en",bf={en:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:"Block quote"}}},Bold:{buttons:{bold:{tooltip:"Bold"}}},BulletList:{buttons:{bulletList:{tooltip:"Bulleted list"}}},Code:{buttons:{code:{tooltip:"Code"}}},CodeBlock:{buttons:{codeBlock:{tooltip:"Code block"}}},History:{buttons:{undo:{tooltip:"Undo"},redo:{tooltip:"Redo"}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:"Horizontal line"}}},Italic:{buttons:{italic:{tooltip:"Italic"}}},OrderedList:{buttons:{orderedList:{tooltip:"Ordered list"}}},Paragraph:{buttons:{paragraph:{tooltip:"Paragraph"}}},Strike:{buttons:{strike:{tooltip:"Strike"}}},Underline:{buttons:{underline:{tooltip:"Underline"}}},Heading:{buttons:{heading:{tooltip:function(t){return t.level+" level header"}}}},Link:{buttons:{isActive:{tooltip:"Change Link"},notActive:{tooltip:"Add Link"}},window:{title:"Link control",form:{hrefLabel:"URL"},buttons:{close:"Close",remove:"Remove",apply:"Apply"}}},Image:{buttons:{tooltip:"Image"},window:{title:"Add Image",form:{sourceLink:"Image URL",altText:"Alternative Text",addImage:"Add Image"},imageUpload:{instruction:"Choose a file(s) or drag it here."},buttons:{close:"Close",apply:"Apply"}}},TodoList:{buttons:{todoList:{tooltip:"To Do List"}}}}},ru:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:"Блок цитаты"}}},Bold:{buttons:{bold:{tooltip:"Жирный"}}},BulletList:{buttons:{bulletList:{tooltip:"Маркированный список"}}},Code:{buttons:{code:{tooltip:"Код"}}},CodeBlock:{buttons:{codeBlock:{tooltip:"Блок кода"}}},History:{buttons:{undo:{tooltip:"Назад"},redo:{tooltip:"Вперед"}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:"Горизонтальная линия"}}},Italic:{buttons:{italic:{tooltip:"Курсивный"}}},OrderedList:{buttons:{orderedList:{tooltip:"Упорядоченный список"}}},Paragraph:{buttons:{paragraph:{tooltip:"Параграф"}}},Strike:{buttons:{strike:{tooltip:"Перечерктнутый"}}},Underline:{buttons:{underline:{tooltip:"Подчерктнутый"}}},Heading:{buttons:{heading:{tooltip:function(t){return"Заголовок "+t.level+" уровня"}}}},Link:{buttons:{isActive:{tooltip:"Изменить ссылку"},notActive:{tooltip:"Добавить ссылку"}},window:{title:"Управление ссылкой",form:{hrefLabel:"Href"},buttons:{close:"Закрыть",remove:"Удалить",apply:"Применить"}}},Image:{buttons:{tooltip:"Картинка"},window:{title:"Добавить картинку",form:{sourceLink:"Ссылка на картинку"},buttons:{close:"Закрыть",apply:"Применить"}}}}},es:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:"Cita en bloque"}}},Bold:{buttons:{bold:{tooltip:"Texto en negrita"}}},BulletList:{buttons:{bulletList:{tooltip:"Lista no ordenada"}}},Code:{buttons:{code:{tooltip:"Código"}}},CodeBlock:{buttons:{codeBlock:{tooltip:"Bloque de código"}}},History:{buttons:{undo:{tooltip:"Deshacer"},redo:{tooltip:"Rehacer"}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:"Línea horizontal"}}},Italic:{buttons:{italic:{tooltip:"Texto en cursiva"}}},OrderedList:{buttons:{orderedList:{tooltip:"Lista ordenada"}}},Paragraph:{buttons:{paragraph:{tooltip:"Párrafo"}}},Strike:{buttons:{strike:{tooltip:"Tachar texto"}}},Underline:{buttons:{underline:{tooltip:"Subrayar texto"}}},Heading:{buttons:{heading:{tooltip:function(t){return"Nivel de encabezado "+t.level}}}},Link:{buttons:{isActive:{tooltip:"Actualizar enlace"},notActive:{tooltip:"Añadir enlace"}},window:{title:"Control de enlace",form:{hrefLabel:"Href"},buttons:{close:"Cerrar",remove:"Eliminar",apply:"Aplicar"}}},Image:{buttons:{tooltip:"Imagen"},window:{title:"Agregar Imagen",form:{sourceLink:"URL de la Imagen"},buttons:{close:"Cerrar",apply:"Aplicar"}}}}},pl:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:"Blok cytatu"}}},Bold:{buttons:{bold:{tooltip:"Pogrubienie"}}},BulletList:{buttons:{bulletList:{tooltip:"Lista punktów"}}},Code:{buttons:{code:{tooltip:"Kod"}}},CodeBlock:{buttons:{codeBlock:{tooltip:"Blok kodu"}}},History:{buttons:{undo:{tooltip:"Cofnij"},redo:{tooltip:"Ponów"}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:"Linia pozioma"}}},Italic:{buttons:{italic:{tooltip:"Kursywa"}}},OrderedList:{buttons:{orderedList:{tooltip:"Lista numerowana"}}},Paragraph:{buttons:{paragraph:{tooltip:"Paragraf"}}},Strike:{buttons:{strike:{tooltip:"Przekreślenie"}}},Underline:{buttons:{underline:{tooltip:"Podkreślenie"}}},Heading:{buttons:{heading:{tooltip:function(t){return"Nagłówek "+t.level}}}},Link:{buttons:{isActive:{tooltip:"Zaktualizuj odnośnik"},notActive:{tooltip:"Dodaj odnośnik"}},window:{title:"Odnośnik",form:{hrefLabel:"Adres URL"},buttons:{close:"Zamknij",remove:"Usuń",apply:"Zastosuj"}}},Image:{buttons:{tooltip:"Obrazek"},window:{title:"Dodaj obrazek",form:{sourceLink:"Adres URL obrazka"},buttons:{close:"Zamknij",apply:"Zastosuj"}}}}},fr:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:"Bloc de citation"}}},Bold:{buttons:{bold:{tooltip:"Gras"}}},BulletList:{buttons:{bulletList:{tooltip:"Liste à puce"}}},Code:{buttons:{code:{tooltip:"Code"}}},CodeBlock:{buttons:{codeBlock:{tooltip:"Bloc de code"}}},History:{buttons:{undo:{tooltip:"Annuler"},redo:{tooltip:"Rétablir"}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:"Ligne horizontale"}}},Italic:{buttons:{italic:{tooltip:"Italique"}}},OrderedList:{buttons:{orderedList:{tooltip:"Liste ordonnée"}}},Paragraph:{buttons:{paragraph:{tooltip:"Paragraphe"}}},Strike:{buttons:{strike:{tooltip:"Barré"}}},Underline:{buttons:{underline:{tooltip:"Souligné"}}},Heading:{buttons:{heading:{tooltip:function(t){return"Titre de niveau "+t.level}}}},Link:{buttons:{isActive:{tooltip:"Mise à jour du lien"},notActive:{tooltip:"Ajouter un lien"}},window:{title:"Ajout ou mise à jour d'un lien",form:{hrefLabel:"URL"},buttons:{close:"Fermer",remove:"Retirer",apply:"Appliquer"}}},Image:{buttons:{tooltip:"Image"},window:{title:"Ajouter une Image",form:{sourceLink:"Image URL",altText:"Texte alternatif",addImage:"Ajouter une image"},imageUpload:{instruction:"Sélectionnez un fichier(s), ou glisser-déposser içi"},buttons:{close:"Fermer",apply:"Appliquer"}}},TodoList:{buttons:{todoList:{tooltip:"Liste de choses à faire"}}}}},uk:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:"Блок цитати"}}},Bold:{buttons:{bold:{tooltip:"Жирний"}}},BulletList:{buttons:{bulletList:{tooltip:"Маркований список"}}},Code:{buttons:{code:{tooltip:"Код"}}},CodeBlock:{buttons:{codeBlock:{tooltip:"Блок кода"}}},History:{buttons:{undo:{tooltip:"Назад"},redo:{tooltip:"Вперед"}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:"Горизонтальна лінія"}}},Italic:{buttons:{italic:{tooltip:"Курсивний"}}},OrderedList:{buttons:{orderedList:{tooltip:"Упорядкований список"}}},Paragraph:{buttons:{paragraph:{tooltip:"Параграф"}}},Strike:{buttons:{strike:{tooltip:"Перекреслений"}}},Underline:{buttons:{underline:{tooltip:"Підкреслений"}}},Heading:{buttons:{heading:{tooltip:function(t){return"Заголовок "+t.level+" рівня"}}}},Link:{buttons:{isActive:{tooltip:"Змінити посилання"},notActive:{tooltip:"Додати посилання"}},window:{title:"Управління посиланням",form:{hrefLabel:"Href"},buttons:{close:"Закрити",remove:"Вилучити",apply:"Застосувати"}}}}},ptbr:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:"Bloco de citação"}}},Bold:{buttons:{bold:{tooltip:"Negrito"}}},BulletList:{buttons:{bulletList:{tooltip:"Lista de pontos"}}},Code:{buttons:{code:{tooltip:"Código"}}},CodeBlock:{buttons:{codeBlock:{tooltip:"Bloco de código"}}},History:{buttons:{undo:{tooltip:"Desfazer"},redo:{tooltip:"Refazer"}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:"Linha horizontal"}}},Italic:{buttons:{italic:{tooltip:"Itálico"}}},OrderedList:{buttons:{orderedList:{tooltip:"Lista ordenada"}}},Paragraph:{buttons:{paragraph:{tooltip:"Parágrafo"}}},Strike:{buttons:{strike:{tooltip:"Riscado"}}},Underline:{buttons:{underline:{tooltip:"Sublinhado"}}},Heading:{buttons:{heading:{tooltip:function(t){return"cabeçalho nível "+t.level}}}},Link:{buttons:{isActive:{tooltip:"Mudar Link"},notActive:{tooltip:"Adicionar Link"}},window:{title:"Configurar link",form:{hrefLabel:"link"},buttons:{close:"Fechar",remove:"Remover",apply:"Aplicar"}}}}},tr:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:"Alıntı"}}},Bold:{buttons:{bold:{tooltip:"Kalın"}}},BulletList:{buttons:{bulletList:{tooltip:"Liste"}}},Code:{buttons:{code:{tooltip:"Kod"}}},CodeBlock:{buttons:{codeBlock:{tooltip:"Kod Bloğu"}}},History:{buttons:{undo:{tooltip:"Geri"},redo:{tooltip:"İleri"}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:"Yatay çizgi"}}},Italic:{buttons:{italic:{tooltip:"İtalik"}}},OrderedList:{buttons:{orderedList:{tooltip:"Numaralı Liste"}}},Paragraph:{buttons:{paragraph:{tooltip:"Paragraf"}}},Strike:{buttons:{strike:{tooltip:"Üstü Çizili"}}},Underline:{buttons:{underline:{tooltip:"Altı Çizili"}}},Heading:{buttons:{heading:{tooltip:function(t){return t.level+" Başlık"}}}},Link:{buttons:{isActive:{tooltip:"Link'i Düzenle"},notActive:{tooltip:"Link Ekle"}},window:{title:"Link Kontrol",form:{hrefLabel:"Adres"},buttons:{close:"Kapat",remove:"Sil",apply:"Uygula"}}}}},he:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:"ציטוט"}}},Bold:{buttons:{bold:{tooltip:"מודגש"}}},BulletList:{buttons:{bulletList:{tooltip:"רשימה לא ממוספרת"}}},Code:{buttons:{code:{tooltip:"קוד"}}},CodeBlock:{buttons:{codeBlock:{tooltip:"בלוק קוד"}}},History:{buttons:{undo:{tooltip:"ביטול"},redo:{tooltip:"בצע שוב"}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:"קו אופקי"}}},Italic:{buttons:{italic:{tooltip:"מוטה"}}},OrderedList:{buttons:{orderedList:{tooltip:"רשימה ממוספרת"}}},Paragraph:{buttons:{paragraph:{tooltip:"פיסקה"}}},Strike:{buttons:{strike:{tooltip:"קו אמצע"}}},Underline:{buttons:{underline:{tooltip:"קו תחתון"}}},Heading:{buttons:{heading:{tooltip:function(t){return t.level+" כותרת בגודל"}}}},Link:{buttons:{isActive:{tooltip:"שנה קישור"},notActive:{tooltip:"הוסף קישור"}},window:{title:"ניהול קישור",form:{hrefLabel:"כתובת"},buttons:{close:"סגור",remove:"הסר",apply:"החל"}}}}},nl:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:"Citaatblok"}}},Bold:{buttons:{bold:{tooltip:"Vet"}}},BulletList:{buttons:{bulletList:{tooltip:"Opsomming tekens"}}},Code:{buttons:{code:{tooltip:"Code"}}},CodeBlock:{buttons:{codeBlock:{tooltip:"Code blok"}}},History:{buttons:{undo:{tooltip:"Ongedaan maken"},redo:{tooltip:"Opnieuw uitvoeren"}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:"Horizontale lijn"}}},Italic:{buttons:{italic:{tooltip:"Cursief"}}},OrderedList:{buttons:{orderedList:{tooltip:"Genummerde lijst"}}},Paragraph:{buttons:{paragraph:{tooltip:"Paragraaf"}}},Strike:{buttons:{strike:{tooltip:"Doorhalen"}}},Underline:{buttons:{underline:{tooltip:"Onderstrepen"}}},Heading:{buttons:{heading:{tooltip:function(t){return"Kop "+t.level}}}},Link:{buttons:{isActive:{tooltip:"Link wijzigigen"},notActive:{tooltip:"Link invoegen"}},window:{title:"Link controle",form:{hrefLabel:"Href"},buttons:{close:"Sluiten",remove:"Verwijderen",apply:"Toepassen"}}},Image:{buttons:{tooltip:"Afbeelding"},window:{title:"Afbeelding toevoegen",form:{sourceLink:"Afbeelding URL",altText:"Alternatieve Tekst"},imageUpload:{instruction:"Kies een of meerdere bestanden of sleep ze hiernaartoe."},buttons:{close:"Sluiten",apply:"Toepassen"}}}}},ja:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:"引用"}}},Bold:{buttons:{bold:{tooltip:"太字"}}},BulletList:{buttons:{bulletList:{tooltip:"箇条書き"}}},Code:{buttons:{code:{tooltip:"コード"}}},CodeBlock:{buttons:{codeBlock:{tooltip:"コードブロック"}}},History:{buttons:{undo:{tooltip:"元に戻す"},redo:{tooltip:"やり直し"}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:"平行線"}}},Italic:{buttons:{italic:{tooltip:"斜体"}}},OrderedList:{buttons:{orderedList:{tooltip:"番号付きリスト"}}},Paragraph:{buttons:{paragraph:{tooltip:"段落"}}},Strike:{buttons:{strike:{tooltip:"取り消し線"}}},Underline:{buttons:{underline:{tooltip:"下線"}}},Heading:{buttons:{heading:{tooltip:function(t){return"見出し "+t.level}}}},Link:{buttons:{isActive:{tooltip:"リンク変更"},notActive:{tooltip:"リンク追加"}},window:{title:"リンクの編集",form:{hrefLabel:"リンク"},buttons:{close:"閉じる",remove:"削除",apply:"適用"}}},Image:{buttons:{tooltip:"画像"},window:{title:"画像を追加する",form:{sourceLink:"画像URL"},buttons:{close:"閉じる",apply:"適用"}}}}},de:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:"Block Zitat"}}},Bold:{buttons:{bold:{tooltip:"Fett"}}},BulletList:{buttons:{bulletList:{tooltip:"Aufzählungsliste"}}},Code:{buttons:{code:{tooltip:"Code"}}},CodeBlock:{buttons:{codeBlock:{tooltip:"Code Abschnitt"}}},History:{buttons:{undo:{tooltip:"Rückgängig"},redo:{tooltip:"Wiederherstellen"}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:"Horizontale Linie"}}},Italic:{buttons:{italic:{tooltip:"Kursiv"}}},OrderedList:{buttons:{orderedList:{tooltip:"Geordnete Liste"}}},Paragraph:{buttons:{paragraph:{tooltip:"Paragraph"}}},Strike:{buttons:{strike:{tooltip:"Durchgestrichen"}}},Underline:{buttons:{underline:{tooltip:"Unterstreichen"}}},Heading:{buttons:{heading:{tooltip:function(t){return t.level+" level Überschrift"}}}},Link:{buttons:{isActive:{tooltip:"Link ändern"},notActive:{tooltip:"Link hinzufügen"}},window:{title:"Link Kontrolle",form:{hrefLabel:"Href"},buttons:{close:"Schließen",remove:"Entfernen",apply:"Übernehmen"}}},Image:{buttons:{tooltip:"Bild"},window:{title:"Bild hinzufügen",form:{sourceLink:"Bild URL"},buttons:{close:"Schließen",apply:"Übernehmen"}}}}},ko:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:"인용"}}},Bold:{buttons:{bold:{tooltip:"굵게"}}},BulletList:{buttons:{bulletList:{tooltip:"글머리 기호"}}},Code:{buttons:{code:{tooltip:"코드"}}},CodeBlock:{buttons:{codeBlock:{tooltip:"코드 블록"}}},History:{buttons:{undo:{tooltip:"입력 취소"},redo:{tooltip:"입력 다시 실행"}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:"수평선"}}},Italic:{buttons:{italic:{tooltip:"기울임꼴"}}},OrderedList:{buttons:{orderedList:{tooltip:"번호 매기기"}}},Paragraph:{buttons:{paragraph:{tooltip:"단락"}}},Strike:{buttons:{strike:{tooltip:"취소선"}}},Underline:{buttons:{underline:{tooltip:"밑줄"}}},Heading:{buttons:{heading:{tooltip:function(t){return"헤딩 "+t.level}}}},Link:{buttons:{isActive:{tooltip:"링크 변경"},notActive:{tooltip:"링크 추가"}},window:{title:"링크 편집",form:{hrefLabel:"링크"},buttons:{close:"닫기",remove:"삭제",apply:"적용"}}},Image:{buttons:{tooltip:"이미지"},window:{title:"이미지 추가",form:{sourceLink:"이미지 URL"},buttons:{close:"닫기",apply:"적용"}}}}},zh:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:"引用"}}},Bold:{buttons:{bold:{tooltip:"粗体"}}},BulletList:{buttons:{bulletList:{tooltip:"项目符号"}}},Code:{buttons:{code:{tooltip:"代码"}}},CodeBlock:{buttons:{codeBlock:{tooltip:"代码块"}}},History:{buttons:{undo:{tooltip:"撤销"},redo:{tooltip:"重做"}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:"水平线"}}},Italic:{buttons:{italic:{tooltip:"斜体"}}},OrderedList:{buttons:{orderedList:{tooltip:"数字编号"}}},Paragraph:{buttons:{paragraph:{tooltip:"段落"}}},Strike:{buttons:{strike:{tooltip:"删除线"}}},Underline:{buttons:{underline:{tooltip:"下划线"}}},Heading:{buttons:{heading:{tooltip:function(t){return t.level+" 级标题 "}}}},Link:{buttons:{isActive:{tooltip:"改变链接"},notActive:{tooltip:"增加链接"}},window:{title:"增加链接",form:{hrefLabel:"链接"},buttons:{close:"关闭",remove:"移除",apply:"使用"}}},Image:{buttons:{tooltip:"图片"},window:{title:"添加图片",form:{sourceLink:"图片链接"},buttons:{close:"关闭",apply:"使用"}}}}},fa:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:"نقل قول"}}},Bold:{buttons:{bold:{tooltip:"درشت"}}},BulletList:{buttons:{bulletList:{tooltip:"لیست بولت"}}},Code:{buttons:{code:{tooltip:"کد"}}},CodeBlock:{buttons:{codeBlock:{tooltip:"بلوک کد"}}},History:{buttons:{undo:{tooltip:"بازگشت"},redo:{tooltip:"مجدد"}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:"خط افقی"}}},Italic:{buttons:{italic:{tooltip:"ایتالیک"}}},OrderedList:{buttons:{orderedList:{tooltip:"لیست مرتب شده"}}},Paragraph:{buttons:{paragraph:{tooltip:"پاراگراف"}}},Strike:{buttons:{strike:{tooltip:"خط زدن"}}},Underline:{buttons:{underline:{tooltip:"خط زیرین"}}},Heading:{buttons:{heading:{tooltip:function(t){return t.level+" سطح هدر"}}}},Link:{buttons:{isActive:{tooltip:"عوض کردن لینک"},notActive:{tooltip:"اضافه لینک"}},window:{title:"کنترل لینک",form:{hrefLabel:"لینک"},buttons:{close:"بستن",remove:"حذف",apply:"اعمال"}}},Image:{buttons:{tooltip:"عکس"},window:{title:"اضافه عکس",or:"OR",form:{sourceLink:"لینک عکس"},buttons:{close:"بستن",apply:"اعمال"}}},TodoList:{buttons:{todoList:{tooltip:"لیست کارها"}}}}},sv:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:"Blockcitat"}}},Bold:{buttons:{bold:{tooltip:"Fet"}}},BulletList:{buttons:{bulletList:{tooltip:"Punktlista"}}},Code:{buttons:{code:{tooltip:"Kod"}}},CodeBlock:{buttons:{codeBlock:{tooltip:"Kodblock"}}},History:{buttons:{undo:{tooltip:"Ångra"},redo:{tooltip:"Gör om"}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:"Horisontell linje"}}},Italic:{buttons:{italic:{tooltip:"Kursiv"}}},OrderedList:{buttons:{orderedList:{tooltip:"Nummerlista"}}},Paragraph:{buttons:{paragraph:{tooltip:"Stycke"}}},Strike:{buttons:{strike:{tooltip:"Genomstruken"}}},Underline:{buttons:{underline:{tooltip:"Understruken"}}},Heading:{buttons:{heading:{tooltip:function(t){return"Rubriknivå "+t.level}}}},Link:{buttons:{isActive:{tooltip:"Ändra länk"},notActive:{tooltip:"Lägg till länk"}},window:{title:"Länkinställningar",form:{hrefLabel:"Href"},buttons:{close:"Stäng",remove:"Ta bort",apply:"Applicera"}}},Image:{buttons:{tooltip:"Bild"},window:{title:"Lägg till bild",or:"ELLER",form:{sourceLink:"Bild-URL"},buttons:{close:"Stäng",apply:"Applicera"}}},TodoList:{buttons:{todoList:{tooltip:"Att göra-lista"}}}}},cs:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:"Bloková citace"}}},Bold:{buttons:{bold:{tooltip:"Tučně"}}},BulletList:{buttons:{bulletList:{tooltip:"Bodový seznam"}}},Code:{buttons:{code:{tooltip:"Kód"}}},CodeBlock:{buttons:{codeBlock:{tooltip:"Blok kódu"}}},History:{buttons:{undo:{tooltip:"Zpět"},redo:{tooltip:"Vpřed"}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:"Horizontální oddělovač"}}},Italic:{buttons:{italic:{tooltip:"Kurzíva"}}},OrderedList:{buttons:{orderedList:{tooltip:"Číslovaný seznam"}}},Paragraph:{buttons:{paragraph:{tooltip:"Odstavec"}}},Strike:{buttons:{strike:{tooltip:"Přeškrtnutě"}}},Underline:{buttons:{underline:{tooltip:"Podrženě"}}},Heading:{buttons:{heading:{tooltip:function(t){return t.level+". úroveň nadpisu"}}}},Link:{buttons:{isActive:{tooltip:"Změnit odkaz"},notActive:{tooltip:"Přidat odkaz"}},window:{title:"Správa odkazu",form:{hrefLabel:"Odkaz"},buttons:{close:"Zavřít",remove:"Odebrat",apply:"Použít"}}},Image:{buttons:{tooltip:"Obrázek"},window:{title:"Přidat obrázek",form:{sourceLink:"Adresa obrázku",altText:"Alternativní text",addImage:"Přidat obrázek"},imageUpload:{instruction:"Vyberte soubor(y) nebo je(j) přetáhněte sem."},buttons:{close:"Zavřít",apply:"Použít"}}},TodoList:{buttons:{todoList:{tooltip:"Seznam TODO"}}}}},it:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:"Citazione"}}},Bold:{buttons:{bold:{tooltip:"Grassetto"}}},BulletList:{buttons:{bulletList:{tooltip:"Elenco puntato"}}},Code:{buttons:{code:{tooltip:"Codice"}}},CodeBlock:{buttons:{codeBlock:{tooltip:"Blocco codice"}}},History:{buttons:{undo:{tooltip:"Annulla"},redo:{tooltip:"Ripristina"}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:"Linea orizzontale"}}},Italic:{buttons:{italic:{tooltip:"Corsivo"}}},OrderedList:{buttons:{orderedList:{tooltip:"Elenco numerato"}}},Paragraph:{buttons:{paragraph:{tooltip:"Paragrafo"}}},Strike:{buttons:{strike:{tooltip:"Barrato"}}},Underline:{buttons:{underline:{tooltip:"Sottolineato"}}},Heading:{buttons:{heading:{tooltip:function(t){return t.level+" livello intestazione"}}}},Link:{buttons:{isActive:{tooltip:"Modifica collegamento"},notActive:{tooltip:"Aggiungi collegamento"}},window:{title:"Gestione collegamento",form:{hrefLabel:"Indirizzo"},buttons:{close:"Chiudi",remove:"Rimuovi",apply:"Applica"}}},Image:{buttons:{tooltip:"Immagine"},window:{title:"Aggiungi Immagine",form:{sourceLink:"Indirizzo Immagine",altText:"Testo Alternativo",addImage:"Aggiungi Immagine"},imageUpload:{instruction:"Seleziona file o trascinalo(i) qui."},buttons:{close:"Chiudi",apply:"Applica"}}},TodoList:{buttons:{todoList:{tooltip:"Cose da fare"}}}}},el:{extensions:{Blockquote:{buttons:{blockquote:{tooltip:"Παράθεση"}}},Bold:{buttons:{bold:{tooltip:"Έντονη γραφή"}}},BulletList:{buttons:{bulletList:{tooltip:"Λίστα με κουκκίδες"}}},Code:{buttons:{code:{tooltip:"Κώδικας"}}},CodeBlock:{buttons:{codeBlock:{tooltip:"Μπλοκ κώδικα"}}},History:{buttons:{undo:{tooltip:"Αναίρεση"},redo:{tooltip:"Ακύρωση αναίρεσης"}}},HorizontalRule:{buttons:{horizontalRule:{tooltip:"Οριζόντια γραμμή"}}},Italic:{buttons:{italic:{tooltip:"Πλάγια γραφή"}}},OrderedList:{buttons:{orderedList:{tooltip:"Λίστα με αρίθμηση"}}},Paragraph:{buttons:{paragraph:{tooltip:"Παράγραφος"}}},Strike:{buttons:{strike:{tooltip:"Επιγράμμιση"}}},Underline:{buttons:{underline:{tooltip:"Υπογράμμιση"}}},Heading:{buttons:{heading:{tooltip:function(t){return t.level+" επίπεδο κεφαλίδας"}}}},Link:{buttons:{isActive:{tooltip:"Αλλαγή συνδέσμου"},notActive:{tooltip:"Προσθήκη συνδέσμου"}},window:{title:"Διαχείριση συνδέσμου",form:{hrefLabel:"Διεύθυνση"},buttons:{close:"Κλείσιμο",remove:"Αφαίρεση",apply:"Εφαρμογή"}}},Image:{buttons:{tooltip:"Εικόνα"},window:{title:"Προσθήκη εικόνας",form:{sourceLink:"Διεύθυνση εικόνας",altText:"Εναλλακτικό κείμενο",addImage:"Προσθήκη εικόνας"},imageUpload:{instruction:"Επιλέξτε ένα αρχείο ή σύρετε το εδώ."},buttons:{close:"Κλείσιμο",apply:"Εφαρμογή"}}},TodoList:{buttons:{todoList:{tooltip:"Λίστα εκκρεμοτήτων"}}}}}};function _f(t,e,n){void 0===n&&(n=null);var o=n||$S.vuetifyLang||yf;bf[o]||(Dd.warn('The current language "'+o+'" is not yet available. Using language "'+'en" by default. Contribution to github is welcome.'),o=yf);var i,r=bf[o];try{if(void 0===(i=t.split(".").reduce((function(t,e){return t[e]}),r)))throw new Error(t+" is undefined.")}catch(n){return Dd.warn('Cannot get translation "'+t+'" for language "'+o+'". Fallback "'+'en" is used instead. Contribution to github is welcome.'),_f(t,e,yf)}return i instanceof Function?i(e):i}var wf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return nu(e,t),Object.defineProperty(e.prototype,"$i18n",{get:function(){return{getMsg:_f}},enumerable:!0,configurable:!0}),iu([wd],e)}(Rt.Z),xf="undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"!=typeof navigator,Sf=function(){for(var t=["Edge","Trident","Firefox"],e=0;e<t.length;e+=1)if(xf&&navigator.userAgent.indexOf(t[e])>=0)return 1;return 0}(),kf=xf&&window.Promise?function(t){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then((function(){e=!1,t()})))}}:function(t){var e=!1;return function(){e||(e=!0,setTimeout((function(){e=!1,t()}),Sf))}};function Cf(t){return t&&"[object Function]"==={}.toString.call(t)}function Of(t,e){if(1!==t.nodeType)return[];var n=t.ownerDocument.defaultView.getComputedStyle(t,null);return e?n[e]:n}function Tf(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function Mf(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}var e=Of(t),n=e.overflow,o=e.overflowX,i=e.overflowY;return/(auto|scroll|overlay)/.test(n+i+o)?t:Mf(Tf(t))}function Ef(t){return t&&t.referenceNode?t.referenceNode:t}var Af=xf&&!(!window.MSInputMethodContext||!document.documentMode),Nf=xf&&/MSIE 10/.test(navigator.userAgent);function Pf(t){return 11===t?Af:10===t?Nf:Af||Nf}function Lf(t){if(!t)return document.documentElement;for(var e=Pf(10)?document.body:null,n=t.offsetParent||null;n===e&&t.nextElementSibling;)n=(t=t.nextElementSibling).offsetParent;var o=n&&n.nodeName;return o&&"BODY"!==o&&"HTML"!==o?-1!==["TH","TD","TABLE"].indexOf(n.nodeName)&&"static"===Of(n,"position")?Lf(n):n:t?t.ownerDocument.documentElement:document.documentElement}function If(t){return null!==t.parentNode?If(t.parentNode):t}function Df(t,e){if(!(t&&t.nodeType&&e&&e.nodeType))return document.documentElement;var n=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,o=n?t:e,i=n?e:t,r=document.createRange();r.setStart(o,0),r.setEnd(i,0);var s,a,l=r.commonAncestorContainer;if(t!==l&&e!==l||o.contains(i))return"BODY"===(a=(s=l).nodeName)||"HTML"!==a&&Lf(s.firstElementChild)!==s?Lf(l):l;var c=If(t);return c.host?Df(c.host,e):Df(t,If(e).host)}function Rf(t){var e="top"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top")?"scrollTop":"scrollLeft",n=t.nodeName;if("BODY"===n||"HTML"===n){var o=t.ownerDocument.documentElement;return(t.ownerDocument.scrollingElement||o)[e]}return t[e]}function zf(t,e){var n="x"===e?"Left":"Top",o="Left"===n?"Right":"Bottom";return parseFloat(t["border"+n+"Width"])+parseFloat(t["border"+o+"Width"])}function Bf(t,e,n,o){return Math.max(e["offset"+t],e["scroll"+t],n["client"+t],n["offset"+t],n["scroll"+t],Pf(10)?parseInt(n["offset"+t])+parseInt(o["margin"+("Height"===t?"Top":"Left")])+parseInt(o["margin"+("Height"===t?"Bottom":"Right")]):0)}function $f(t){var e=t.body,n=t.documentElement,o=Pf(10)&&getComputedStyle(n);return{height:Bf("Height",e,n,o),width:Bf("Width",e,n,o)}}var jf=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},Vf=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),Zf=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},Ff=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t};function Hf(t){return Ff({},t,{right:t.left+t.width,bottom:t.top+t.height})}function Wf(t){var e={};try{if(Pf(10)){e=t.getBoundingClientRect();var n=Rf(t,"top"),o=Rf(t,"left");e.top+=n,e.left+=o,e.bottom+=n,e.right+=o}else e=t.getBoundingClientRect()}catch(t){}var i={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},r="HTML"===t.nodeName?$f(t.ownerDocument):{},s=r.width||t.clientWidth||i.width,a=r.height||t.clientHeight||i.height,l=t.offsetWidth-s,c=t.offsetHeight-a;if(l||c){var u=Of(t);l-=zf(u,"x"),c-=zf(u,"y"),i.width-=l,i.height-=c}return Hf(i)}function Uf(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Pf(10),i="HTML"===e.nodeName,r=Wf(t),s=Wf(e),a=Mf(t),l=Of(e),c=parseFloat(l.borderTopWidth),u=parseFloat(l.borderLeftWidth);n&&i&&(s.top=Math.max(s.top,0),s.left=Math.max(s.left,0));var p=Hf({top:r.top-s.top-c,left:r.left-s.left-u,width:r.width,height:r.height});if(p.marginTop=0,p.marginLeft=0,!o&&i){var h=parseFloat(l.marginTop),d=parseFloat(l.marginLeft);p.top-=c-h,p.bottom-=c-h,p.left-=u-d,p.right-=u-d,p.marginTop=h,p.marginLeft=d}return(o&&!n?e.contains(a):e===a&&"BODY"!==a.nodeName)&&(p=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Rf(e,"top"),i=Rf(e,"left"),r=n?-1:1;return t.top+=o*r,t.bottom+=o*r,t.left+=i*r,t.right+=i*r,t}(p,e)),p}function qf(t){if(!t||!t.parentElement||Pf())return document.documentElement;for(var e=t.parentElement;e&&"none"===Of(e,"transform");)e=e.parentElement;return e||document.documentElement}function Jf(t,e,n,o){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r={top:0,left:0},s=i?qf(t):Df(t,Ef(e));if("viewport"===o)r=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.ownerDocument.documentElement,o=Uf(t,n),i=Math.max(n.clientWidth,window.innerWidth||0),r=Math.max(n.clientHeight,window.innerHeight||0),s=e?0:Rf(n),a=e?0:Rf(n,"left");return Hf({top:s-o.top+o.marginTop,left:a-o.left+o.marginLeft,width:i,height:r})}(s,i);else{var a=void 0;"scrollParent"===o?"BODY"===(a=Mf(Tf(e))).nodeName&&(a=t.ownerDocument.documentElement):a="window"===o?t.ownerDocument.documentElement:o;var l=Uf(a,s,i);if("HTML"!==a.nodeName||function t(e){var n=e.nodeName;if("BODY"===n||"HTML"===n)return!1;if("fixed"===Of(e,"position"))return!0;var o=Tf(e);return!!o&&t(o)}(s))r=l;else{var c=$f(t.ownerDocument),u=c.height,p=c.width;r.top+=l.top-l.marginTop,r.bottom=u+l.top,r.left+=l.left-l.marginLeft,r.right=p+l.left}}var h="number"==typeof(n=n||0);return r.left+=h?n:n.left||0,r.top+=h?n:n.top||0,r.right-=h?n:n.right||0,r.bottom-=h?n:n.bottom||0,r}function Kf(t,e,n,o,i){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===t.indexOf("auto"))return t;var s=Jf(n,o,r,i),a={top:{width:s.width,height:e.top-s.top},right:{width:s.right-e.right,height:s.height},bottom:{width:s.width,height:s.bottom-e.bottom},left:{width:e.left-s.left,height:s.height}},l=Object.keys(a).map((function(t){return Ff({key:t},a[t],{area:(e=a[t],e.width*e.height)});var e})).sort((function(t,e){return e.area-t.area})),c=l.filter((function(t){var e=t.width,o=t.height;return e>=n.clientWidth&&o>=n.clientHeight})),u=c.length>0?c[0].key:l[0].key,p=t.split("-")[1];return u+(p?"-"+p:"")}function Gf(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Uf(n,o?qf(e):Df(e,Ef(n)),o)}function Xf(t){var e=t.ownerDocument.defaultView.getComputedStyle(t),n=parseFloat(e.marginTop||0)+parseFloat(e.marginBottom||0),o=parseFloat(e.marginLeft||0)+parseFloat(e.marginRight||0);return{width:t.offsetWidth+o,height:t.offsetHeight+n}}function Yf(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,(function(t){return e[t]}))}function Qf(t,e,n){n=n.split("-")[0];var o=Xf(t),i={width:o.width,height:o.height},r=-1!==["right","left"].indexOf(n),s=r?"top":"left",a=r?"left":"top",l=r?"height":"width",c=r?"width":"height";return i[s]=e[s]+e[l]/2-o[l]/2,i[a]=n===a?e[a]-o[c]:e[Yf(a)],i}function tm(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function em(t,e,n){return(void 0===n?t:t.slice(0,function(t,e,n){if(Array.prototype.findIndex)return t.findIndex((function(t){return t[e]===n}));var o=tm(t,(function(t){return t[e]===n}));return t.indexOf(o)}(t,"name",n))).forEach((function(t){t.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var n=t.function||t.fn;t.enabled&&Cf(n)&&(e.offsets.popper=Hf(e.offsets.popper),e.offsets.reference=Hf(e.offsets.reference),e=n(e,t))})),e}function nm(t,e){return t.some((function(t){var n=t.name;return t.enabled&&n===e}))}function om(t){for(var e=[!1,"ms","Webkit","Moz","O"],n=t.charAt(0).toUpperCase()+t.slice(1),o=0;o<e.length;o++){var i=e[o],r=i?""+i+n:t;if(void 0!==document.body.style[r])return r}return null}function im(t){var e=t.ownerDocument;return e?e.defaultView:window}function rm(){var t,e;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(t=this.reference,e=this.state,im(t).removeEventListener("resize",e.updateBound),e.scrollParents.forEach((function(t){t.removeEventListener("scroll",e.updateBound)})),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e))}function sm(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}function am(t,e){Object.keys(e).forEach((function(n){var o="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&sm(e[n])&&(o="px"),t.style[n]=e[n]+o}))}var lm=xf&&/Firefox/i.test(navigator.userAgent);function cm(t,e,n){var o=tm(t,(function(t){return t.name===e})),i=!!o&&t.some((function(t){return t.name===n&&t.enabled&&t.order<o.order}));if(!i){var r="`"+e+"`",s="`"+n+"`";console.warn(s+" modifier is required by "+r+" modifier in order to work, be sure to include it before "+r+"!")}return i}var um=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],pm=um.slice(3);function hm(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=pm.indexOf(t),o=pm.slice(n+1).concat(pm.slice(0,n));return e?o.reverse():o}var dm="flip",fm="clockwise",mm="counterclockwise";var vm={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(t){var e=t.placement,n=e.split("-")[0],o=e.split("-")[1];if(o){var i=t.offsets,r=i.reference,s=i.popper,a=-1!==["bottom","top"].indexOf(n),l=a?"left":"top",c=a?"width":"height",u={start:Zf({},l,r[l]),end:Zf({},l,r[l]+r[c]-s[c])};t.offsets.popper=Ff({},s,u[o])}return t}},offset:{order:200,enabled:!0,fn:function(t,e){var n,o=e.offset,i=t.placement,r=t.offsets,s=r.popper,a=r.reference,l=i.split("-")[0];return n=sm(+o)?[+o,0]:function(t,e,n,o){var i=[0,0],r=-1!==["right","left"].indexOf(o),s=t.split(/(\+|\-)/).map((function(t){return t.trim()})),a=s.indexOf(tm(s,(function(t){return-1!==t.search(/,|\s/)})));s[a]&&-1===s[a].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,c=-1!==a?[s.slice(0,a).concat([s[a].split(l)[0]]),[s[a].split(l)[1]].concat(s.slice(a+1))]:[s];return(c=c.map((function(t,o){var i=(1===o?!r:r)?"height":"width",s=!1;return t.reduce((function(t,e){return""===t[t.length-1]&&-1!==["+","-"].indexOf(e)?(t[t.length-1]=e,s=!0,t):s?(t[t.length-1]+=e,s=!1,t):t.concat(e)}),[]).map((function(t){return function(t,e,n,o){var i=t.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),r=+i[1],s=i[2];if(!r)return t;if(0===s.indexOf("%")){return Hf("%p"===s?n:o)[e]/100*r}return"vh"===s||"vw"===s?("vh"===s?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*r:r}(t,i,e,n)}))}))).forEach((function(t,e){t.forEach((function(n,o){sm(n)&&(i[e]+=n*("-"===t[o-1]?-1:1))}))})),i}(o,s,a,l),"left"===l?(s.top+=n[0],s.left-=n[1]):"right"===l?(s.top+=n[0],s.left+=n[1]):"top"===l?(s.left+=n[0],s.top-=n[1]):"bottom"===l&&(s.left+=n[0],s.top+=n[1]),t.popper=s,t},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(t,e){var n=e.boundariesElement||Lf(t.instance.popper);t.instance.reference===n&&(n=Lf(n));var o=om("transform"),i=t.instance.popper.style,r=i.top,s=i.left,a=i[o];i.top="",i.left="",i[o]="";var l=Jf(t.instance.popper,t.instance.reference,e.padding,n,t.positionFixed);i.top=r,i.left=s,i[o]=a,e.boundaries=l;var c=e.priority,u=t.offsets.popper,p={primary:function(t){var n=u[t];return u[t]<l[t]&&!e.escapeWithReference&&(n=Math.max(u[t],l[t])),Zf({},t,n)},secondary:function(t){var n="right"===t?"left":"top",o=u[n];return u[t]>l[t]&&!e.escapeWithReference&&(o=Math.min(u[n],l[t]-("right"===t?u.width:u.height))),Zf({},n,o)}};return c.forEach((function(t){var e=-1!==["left","top"].indexOf(t)?"primary":"secondary";u=Ff({},u,p[e](t))})),t.offsets.popper=u,t},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(t){var e=t.offsets,n=e.popper,o=e.reference,i=t.placement.split("-")[0],r=Math.floor,s=-1!==["top","bottom"].indexOf(i),a=s?"right":"bottom",l=s?"left":"top",c=s?"width":"height";return n[a]<r(o[l])&&(t.offsets.popper[l]=r(o[l])-n[c]),n[l]>r(o[a])&&(t.offsets.popper[l]=r(o[a])),t}},arrow:{order:500,enabled:!0,fn:function(t,e){var n;if(!cm(t.instance.modifiers,"arrow","keepTogether"))return t;var o=e.element;if("string"==typeof o){if(!(o=t.instance.popper.querySelector(o)))return t}else if(!t.instance.popper.contains(o))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var i=t.placement.split("-")[0],r=t.offsets,s=r.popper,a=r.reference,l=-1!==["left","right"].indexOf(i),c=l?"height":"width",u=l?"Top":"Left",p=u.toLowerCase(),h=l?"left":"top",d=l?"bottom":"right",f=Xf(o)[c];a[d]-f<s[p]&&(t.offsets.popper[p]-=s[p]-(a[d]-f)),a[p]+f>s[d]&&(t.offsets.popper[p]+=a[p]+f-s[d]),t.offsets.popper=Hf(t.offsets.popper);var m=a[p]+a[c]/2-f/2,v=Of(t.instance.popper),g=parseFloat(v["margin"+u]),y=parseFloat(v["border"+u+"Width"]),b=m-t.offsets.popper[p]-g-y;return b=Math.max(Math.min(s[c]-f,b),0),t.arrowElement=o,t.offsets.arrow=(Zf(n={},p,Math.round(b)),Zf(n,h,""),n),t},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(t,e){if(nm(t.instance.modifiers,"inner"))return t;if(t.flipped&&t.placement===t.originalPlacement)return t;var n=Jf(t.instance.popper,t.instance.reference,e.padding,e.boundariesElement,t.positionFixed),o=t.placement.split("-")[0],i=Yf(o),r=t.placement.split("-")[1]||"",s=[];switch(e.behavior){case dm:s=[o,i];break;case fm:s=hm(o);break;case mm:s=hm(o,!0);break;default:s=e.behavior}return s.forEach((function(a,l){if(o!==a||s.length===l+1)return t;o=t.placement.split("-")[0],i=Yf(o);var c=t.offsets.popper,u=t.offsets.reference,p=Math.floor,h="left"===o&&p(c.right)>p(u.left)||"right"===o&&p(c.left)<p(u.right)||"top"===o&&p(c.bottom)>p(u.top)||"bottom"===o&&p(c.top)<p(u.bottom),d=p(c.left)<p(n.left),f=p(c.right)>p(n.right),m=p(c.top)<p(n.top),v=p(c.bottom)>p(n.bottom),g="left"===o&&d||"right"===o&&f||"top"===o&&m||"bottom"===o&&v,y=-1!==["top","bottom"].indexOf(o),b=!!e.flipVariations&&(y&&"start"===r&&d||y&&"end"===r&&f||!y&&"start"===r&&m||!y&&"end"===r&&v),_=!!e.flipVariationsByContent&&(y&&"start"===r&&f||y&&"end"===r&&d||!y&&"start"===r&&v||!y&&"end"===r&&m),w=b||_;(h||g||w)&&(t.flipped=!0,(h||g)&&(o=s[l+1]),w&&(r=function(t){return"end"===t?"start":"start"===t?"end":t}(r)),t.placement=o+(r?"-"+r:""),t.offsets.popper=Ff({},t.offsets.popper,Qf(t.instance.popper,t.offsets.reference,t.placement)),t=em(t.instance.modifiers,t,"flip"))})),t},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(t){var e=t.placement,n=e.split("-")[0],o=t.offsets,i=o.popper,r=o.reference,s=-1!==["left","right"].indexOf(n),a=-1===["top","left"].indexOf(n);return i[s?"left":"top"]=r[n]-(a?i[s?"width":"height"]:0),t.placement=Yf(e),t.offsets.popper=Hf(i),t}},hide:{order:800,enabled:!0,fn:function(t){if(!cm(t.instance.modifiers,"hide","preventOverflow"))return t;var e=t.offsets.reference,n=tm(t.instance.modifiers,(function(t){return"preventOverflow"===t.name})).boundaries;if(e.bottom<n.top||e.left>n.right||e.top>n.bottom||e.right<n.left){if(!0===t.hide)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(!1===t.hide)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}return t}},computeStyle:{order:850,enabled:!0,fn:function(t,e){var n=e.x,o=e.y,i=t.offsets.popper,r=tm(t.instance.modifiers,(function(t){return"applyStyle"===t.name})).gpuAcceleration;void 0!==r&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var s,a,l=void 0!==r?r:e.gpuAcceleration,c=Lf(t.instance.popper),u=Wf(c),p={position:i.position},h=function(t,e){var n=t.offsets,o=n.popper,i=n.reference,r=Math.round,s=Math.floor,a=function(t){return t},l=r(i.width),c=r(o.width),u=-1!==["left","right"].indexOf(t.placement),p=-1!==t.placement.indexOf("-"),h=e?u||p||l%2==c%2?r:s:a,d=e?r:a;return{left:h(l%2==1&&c%2==1&&!p&&e?o.left-1:o.left),top:d(o.top),bottom:d(o.bottom),right:h(o.right)}}(t,window.devicePixelRatio<2||!lm),d="bottom"===n?"top":"bottom",f="right"===o?"left":"right",m=om("transform");if(a="bottom"===d?"HTML"===c.nodeName?-c.clientHeight+h.bottom:-u.height+h.bottom:h.top,s="right"===f?"HTML"===c.nodeName?-c.clientWidth+h.right:-u.width+h.right:h.left,l&&m)p[m]="translate3d("+s+"px, "+a+"px, 0)",p[d]=0,p[f]=0,p.willChange="transform";else{var v="bottom"===d?-1:1,g="right"===f?-1:1;p[d]=a*v,p[f]=s*g,p.willChange=d+", "+f}var y={"x-placement":t.placement};return t.attributes=Ff({},y,t.attributes),t.styles=Ff({},p,t.styles),t.arrowStyles=Ff({},t.offsets.arrow,t.arrowStyles),t},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(t){var e,n;return am(t.instance.popper,t.styles),e=t.instance.popper,n=t.attributes,Object.keys(n).forEach((function(t){!1!==n[t]?e.setAttribute(t,n[t]):e.removeAttribute(t)})),t.arrowElement&&Object.keys(t.arrowStyles).length&&am(t.arrowElement,t.arrowStyles),t},onLoad:function(t,e,n,o,i){var r=Gf(i,e,t,n.positionFixed),s=Kf(n.placement,r,e,t,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return e.setAttribute("x-placement",s),am(e,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}}},gm=function(){function t(e,n){var o=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};jf(this,t),this.scheduleUpdate=function(){return requestAnimationFrame(o.update)},this.update=kf(this.update.bind(this)),this.options=Ff({},t.Defaults,i),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=e&&e.jquery?e[0]:e,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(Ff({},t.Defaults.modifiers,i.modifiers)).forEach((function(e){o.options.modifiers[e]=Ff({},t.Defaults.modifiers[e]||{},i.modifiers?i.modifiers[e]:{})})),this.modifiers=Object.keys(this.options.modifiers).map((function(t){return Ff({name:t},o.options.modifiers[t])})).sort((function(t,e){return t.order-e.order})),this.modifiers.forEach((function(t){t.enabled&&Cf(t.onLoad)&&t.onLoad(o.reference,o.popper,o.options,t,o.state)})),this.update();var r=this.options.eventsEnabled;r&&this.enableEventListeners(),this.state.eventsEnabled=r}return Vf(t,[{key:"update",value:function(){return function(){if(!this.state.isDestroyed){var t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};t.offsets.reference=Gf(this.state,this.popper,this.reference,this.options.positionFixed),t.placement=Kf(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.positionFixed=this.options.positionFixed,t.offsets.popper=Qf(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",t=em(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t))}}.call(this)}},{key:"destroy",value:function(){return function(){return this.state.isDestroyed=!0,nm(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[om("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}.call(this)}},{key:"enableEventListeners",value:function(){return function(){this.state.eventsEnabled||(this.state=function(t,e,n,o){n.updateBound=o,im(t).addEventListener("resize",n.updateBound,{passive:!0});var i=Mf(t);return function t(e,n,o,i){var r="BODY"===e.nodeName,s=r?e.ownerDocument.defaultView:e;s.addEventListener(n,o,{passive:!0}),r||t(Mf(s.parentNode),n,o,i),i.push(s)}(i,"scroll",n.updateBound,n.scrollParents),n.scrollElement=i,n.eventsEnabled=!0,n}(this.reference,this.options,this.state,this.scheduleUpdate))}.call(this)}},{key:"disableEventListeners",value:function(){return rm.call(this)}}]),t}();gm.Utils=("undefined"!=typeof window?window:n.g).PopperUtils,gm.placements=um,gm.Defaults=vm;var ym,bm=zd({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("editor-menu-bubble",{attrs:{editor:t.editor},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"tiptap-vuetify-editor-pop",attrs:{role:"tooltip"}},[n("div",{staticClass:"tiptap-vuetify-editor-pop__popper"},[n("actions-render",{attrs:{actions:t.actions,context:e,editor:t.editor,dark:!0}}),t._v(" "),n("div",{attrs:{"x-arrow":""}})],1)])]}}])})},staticRenderFns:[]},void 0,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return nu(e,t),e.prototype.mounted=function(){var t=function(){function t(){var t=this;this.range=null,this.rect=null,this.timeoutMousemove=null,this.updateRect();var e,n,o=function(e,n){var o=document.getSelection();t.range=o&&o.rangeCount&&o.getRangeAt(0),t.updateRect(n)},i=document.querySelector(".tiptap-vuetify-editor .ProseMirror");i.addEventListener("mouseup",o),i.addEventListener("input",o),i.addEventListener("keydown",(function(t){return o(0,!0)})),i.addEventListener("mousemove",(e=function(){o()},100,n=!1,function(){n||(e.apply(this,arguments),n=!0,setTimeout((function(){return n=!1}),100))})),window.addEventListener("scroll",o),document.scrollingElement.addEventListener("scroll",o)}return t.prototype.updateRect=function(t){void 0===t&&(t=!1),!t&&this.range?this.rect=this.range.getBoundingClientRect():this.rect={top:0,left:0,right:0,bottom:0,width:0,height:0},this.rectChangedCallback(this.rect)},t.prototype.rectChangedCallback=function(t){},t.prototype.getBoundingClientRect=function(){return this.rect},Object.defineProperty(t.prototype,"clientWidth",{get:function(){return this.rect.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clientHeight",{get:function(){return this.rect.height},enumerable:!0,configurable:!0}),t}();setTimeout((function(){var e=document.querySelector(".tiptap-vuetify-editor-pop"),n=new t,o=new gm(n,e,{placement:"top",modifiers:{offset:{offset:"0,5"}},positionFixed:!0});n.rectChangedCallback=function(t){t.width>0?(o.scheduleUpdate(),e.firstElementChild.classList.add("tiptap-vuetify-editor-pop__popper--visible")):e.firstElementChild.classList.remove("tiptap-vuetify-editor-pop__popper--visible")}}),1e3)},iu([Sd({type:Object,required:!0}),ru("design:type",ka)],e.prototype,"editor",void 0),iu([Sd({type:Array,default:function(){return[]}}),ru("design:type",Array)],e.prototype,"actions",void 0),iu([wd({components:{ActionsRender:Vd,EditorMenuBubble:Pa,VCard:m.Z}})],e)}(gd(wf)),void 0,!1,void 0,void 0,void 0);!function(t){t.toolbar="toolbar",t.bubbleMenu="bubbleMenu"}(ym||(ym={}));var _m,wm=zd({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.editor?n("div",{staticClass:"tiptap-vuetify-editor",class:{"tiptap-vuetify-editor--disabled":t.$props[t.PROPS.DISABLED]}},[t.availableActions.bubbleMenu.length&&t.editor.options.editable?n("bubble",{attrs:{editor:t.editor,actions:t.availableActions.bubbleMenu}}):t._e(),t._v(" "),t.$props[t.PROPS.TYPE]===t.EDITOR_TYPES_ENUM.card?n("VCard",t._b({},"VCard",t.$props[t.PROPS.CARD_PROPS],!1),[t._t("toolbar-before"),t._v(" "),t.availableActions.toolbar.length?n("toolbar",{attrs:{editor:t.editor,actions:t.availableActions.toolbar,"toolbar-attributes":t.$props[t.PROPS.TOOLBAR_ATTRIBUTES],disabled:t.$props[t.PROPS.DISABLED]},scopedSlots:t._u([t.$scopedSlots.toolbar?{key:"default",fn:function(e){return[t._t("toolbar",null,null,e)]}}:null],null,!0)}):t._e(),t._v(" "),t._t("toolbar-after"),t._v(" "),n("editor-content",{staticClass:"tiptap-vuetify-editor__content",class:{"tiptap-vuetify-editor__content--disabled":t.$props[t.PROPS.DISABLED]},style:t.contentDynamicStyles,attrs:{editor:t.editor}}),t._v(" "),t._t("footer")],2):t._e()],1):t._e()},staticRenderFns:[]},void 0,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PROPS=Id,e.EDITOR_TYPES_ENUM=Nd,e.editor=null,e.availableActions={toolbar:[],bubbleMenu:[]},e.emitAfterOnUpdate=!1,e}var n,o,i,r,s,a,l,c,u,p,h,d;return nu(e,t),Object.defineProperty(e.prototype,"contentDynamicStyles",{get:function(){var t=function(t){if(!t)return t;var e=parseInt(t,10),n=t.slice(e.toString().length);return e+(n||"px")};return{minHeight:t(this[Id.MIN_HEIGHT]),maxHeight:t(this[Id.MAX_HEIGHT])}},enumerable:!0,configurable:!0}),e.prototype.onDisabledChange=function(t){this.editor&&this.editor.setOptions({editable:!t})},e.prototype.onValueChange=function(t){this.emitAfterOnUpdate?this.emitAfterOnUpdate=!1:this.editor&&this.editor.setContent(t)},e.prototype.mounted=function(){var t=this,e=[],n=[],o={renderIn:ym.toolbar,options:{}};this[Id.EXTENSIONS].forEach((function(i){var r,s,a,l;if(Array.isArray(i))a=(r=lu(i,2))[0],l=r[1];else{if(!i.prototype.availableActions)throw new Error('Incorrect extension declaration passed to "extensions" prop (array). It looks like the array\'s element is in the wrong format.');a=i}var c=ou(ou({},o),l),u=new a(c.options);(s=t.availableActions[c.renderIn]).push.apply(s,cu(u.availableActions)),u.nativeExtensionInstance&&e.push(u.nativeExtensionInstance),n.push(u)}));var i=cu(this[Id.NATIVE_EXTENSIONS],e);this[Id.PLACEHOLDER]&&i.push(new tu({emptyNodeClass:"tiptap-vuetify-editor__paragraph--is-empty",emptyNodeText:this[Id.PLACEHOLDER],showOnlyWhenEditable:!0})),this.editor=new ka(ou(ou({editable:!this[Id.DISABLED],extensions:i},this[Id.EDITOR_PROPERTIES]),{editorProps:ou(ou({},this[Id.EDITOR_PROPERTIES].editorProps),{handleKeyDown:function(e,n){t[Id.EDITOR_PROPERTIES].editorProps&&t[Id.EDITOR_PROPERTIES].editorProps.handleKeyDown&&t[Id.EDITOR_PROPERTIES].editorProps.handleKeyDown(e,n),t.$emit("keydown",n,e)}}),content:this[Id.VALUE],onUpdate:this.onUpdate.bind(this),onBlur:this.onBlur.bind(this),onFocus:this.onFocus.bind(this)})),this.$emit("init",{editor:this.editor}),n.forEach((function(e){return e.onEditorInit&&e.onEditorInit(t.editor)}))},e.prototype.onUpdate=function(t){var e;this.emitAfterOnUpdate=!0,e="html"===this[Id.OUTPUT_FORMAT]?t.getHTML():t.getJSON(),this.$emit("input",e,t)},e.prototype.onBlur=function(t){var e=t.event,n=t.view;this.$emit("blur",e,n)},e.prototype.onFocus=function(t){var e=t.event,n=t.view;this.$emit("focus",e,n)},e.prototype.beforeDestroy=function(){this.editor&&this.editor.destroy()},n=Id.DISABLED,o=Id.VALUE,i=Id.EXTENSIONS,r=Id.PLACEHOLDER,s=Id.CARD_PROPS,a=Id.OUTPUT_FORMAT,l=Id.TOOLBAR_ATTRIBUTES,c=Id.EDITOR_PROPERTIES,u=Id.NATIVE_EXTENSIONS,p=Id.TYPE,h=Id.MIN_HEIGHT,d=Id.MAX_HEIGHT,iu([Sd({type:Boolean,default:!1}),ru("design:type",Boolean)],e.prototype,n,void 0),iu([Sd({type:[String,Object],default:""}),ru("design:type",String)],e.prototype,o,void 0),iu([Sd({type:Array,default:function(){return[]}}),ru("design:type",Array)],e.prototype,i,void 0),iu([Sd({type:String}),ru("design:type",String)],e.prototype,r,void 0),iu([Sd({type:Object,default:function(){return{}}}),ru("design:type",Object)],e.prototype,s,void 0),iu([Sd({type:String,default:"html"}),ru("design:type",String)],e.prototype,a,void 0),iu([Sd({type:[Array,Object],default:function(){return{}}}),ru("design:type",Object)],e.prototype,l,void 0),iu([Sd({type:Object,default:function(){return{}}}),ru("design:type",Object)],e.prototype,c,void 0),iu([Sd({type:Array,default:function(){return[]}}),ru("design:type",Array)],e.prototype,u,void 0),iu([Sd({type:String,default:Nd.card}),ru("design:type",String)],e.prototype,p,void 0),iu([Sd({type:[String,Number]}),ru("design:type",Object)],e.prototype,h,void 0),iu([Sd({type:[String,Number]}),ru("design:type",Object)],e.prototype,d,void 0),iu([kd("disabled"),ru("design:type",Function),ru("design:paramtypes",[Object]),ru("design:returntype",void 0)],e.prototype,"onDisabledChange",null),iu([kd("value"),ru("design:type",Function),ru("design:paramtypes",[Object]),ru("design:returntype",void 0)],e.prototype,"onValueChange",null),iu([wd({components:{Bubble:bm,EditorContent:Ca,Toolbar:Zd,VCard:m.Z}})],e)}(Rt.Z),void 0,!1,void 0,void 0,void 0),xm={close:(_m={},_m.md=new Ld("close"),_m.fa=new Ld("fas fa-times"),_m.mdi=new Ld("mdi-close"),_m.mdiSvg=new Ld("M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"),_m)},Sm=th.map,km=bh("map"),Cm=rh("map");jp({target:"Array",proto:!0,forced:!km||!Cm},{map:function(t){return Sm(this,t,arguments.length>1?arguments[1]:void 0)}});var Om=function(){function t(t,e){this.text=_f(t,e)}return t.prototype.toString=function(){return this.text},t}(),Tm=function(t,e){this.options=t,this.extensionClass=e,this.nativeExtensionInstance=null,e&&(this.nativeExtensionInstance=new e(t))},Mm=function(t){function e(e){return t.call(this,e,Dc)||this}return nu(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){return this.options.levels.map((function(t){var e;return{render:new $d({tooltip:new Om("extensions.Heading.buttons.heading.tooltip",{level:t}),icons:(e={},e.md=new Od("H"+t),e.fa=new Od("H"+t),e.mdi=new Od("H"+t),e.mdiSvg=new Od("H"+t),e),nativeExtensionName:"heading",onClickOptions:{level:t},isActiveOptions:{level:t}})}}))},enumerable:!0,configurable:!0}),e}(Tm),Em=function(t){function e(e){return t.call(this,e,qc)||this}return nu(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){var t;return[{render:new $d({tooltip:new Om("extensions.Bold.buttons.bold.tooltip"),icons:(t={},t.md=new Ld("format_bold"),t.fa=new Ld("fas fa-bold"),t.mdi=new Ld("mdi-format-bold"),t.mdiSvg=new Ld("M13.5,15.5H10V12.5H13.5A1.5,1.5 0 0,1 15,14A1.5,1.5 0 0,1 13.5,15.5M10,6.5H13A1.5,1.5 0 0,1 14.5,8A1.5,1.5 0 0,1 13,9.5H10M15.6,10.79C16.57,10.11 17.25,9 17.25,8C17.25,5.74 15.5,4 13.25,4H7V18H14.04C16.14,18 17.75,16.3 17.75,14.21C17.75,12.69 16.89,11.39 15.6,10.79Z"),t),nativeExtensionName:"bold"})}]},enumerable:!0,configurable:!0}),e}(Tm),Am=function(t){function e(e){return t.call(this,e,Kc)||this}return nu(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){var t;return[{render:new $d({tooltip:new Om("extensions.Italic.buttons.italic.tooltip"),icons:(t={},t.md=new Ld("format_italic"),t.fa=new Ld("fas fa-italic"),t.mdi=new Ld("mdi-format-italic"),t.mdiSvg=new Ld("M10,4V7H12.21L8.79,15H6V18H14V15H11.79L15.21,7H18V4H10Z"),t),nativeExtensionName:"italic"})}]},enumerable:!0,configurable:!0}),e}(Tm),Nm=function(t){function e(e){return t.call(this,e,Xc)||this}return nu(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){var t;return[{render:new $d({tooltip:new Om("extensions.Strike.buttons.strike.tooltip"),icons:(t={},t.md=new Ld("format_strikethrough"),t.fa=new Ld("fas fa-strikethrough"),t.mdi=new Ld("mdi-format-strikethrough"),t.mdiSvg=new Ld("M3,14H21V12H3M5,4V7H10V10H14V7H19V4M10,19H14V16H10V19Z"),t),nativeExtensionName:"strike"})}]},enumerable:!0,configurable:!0}),e}(Tm),Pm=function(t){function e(e){return t.call(this,e,Yc)||this}return nu(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){var t;return[{render:new $d({tooltip:new Om("extensions.Underline.buttons.underline.tooltip"),icons:(t={},t.md=new Ld("format_underline"),t.fa=new Ld("fas fa-underline"),t.mdi=new Ld("mdi-format-underline"),t.mdiSvg=new Ld("M5,21H19V19H5V21M12,17A6,6 0 0,0 18,11V3H15.5V11A3.5,3.5 0 0,1 12,14.5A3.5,3.5 0 0,1 8.5,11V3H6V11A6,6 0 0,0 12,17Z"),t),nativeExtensionName:"underline"})}]},enumerable:!0,configurable:!0}),e}(Tm),Lm=function(t){function e(e){return t.call(this,e,Jc)||this}return nu(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){var t;return[{render:new $d({tooltip:new Om("extensions.Code.buttons.code.tooltip"),icons:(t={},t.md=new Ld("code"),t.fa=new Ld("fas fa-code"),t.mdi=new Ld("mdi-code-tags"),t.mdiSvg=new Ld("M14.6,16.6L19.2,12L14.6,7.4L16,6L22,12L16,18L14.6,16.6M9.4,16.6L4.8,12L9.4,7.4L8,6L2,12L8,18L9.4,16.6Z"),t),nativeExtensionName:"code"})}]},enumerable:!0,configurable:!0}),e}(Tm),Im=function(t){function e(e){return t.call(this,e,Lc)||this}return nu(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){var t;return[{render:new $d({tooltip:new Om("extensions.CodeBlock.buttons.codeBlock.tooltip"),icons:(t={},t.md=new Ld("code"),t.fa=new Ld("fas fa-code"),t.mdi=new Ld("mdi-code-tags"),t.mdiSvg=new Ld("M14.6,16.6L19.2,12L14.6,7.4L16,6L22,12L16,18L14.6,16.6M9.4,16.6L4.8,12L9.4,7.4L8,6L2,12L8,18L9.4,16.6Z"),t),nativeExtensionName:"code_block"})}]},enumerable:!0,configurable:!0}),e}(Tm),Dm=function(t){function e(e){return t.call(this,e,null)||this}return nu(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){var t;return[{render:new $d({tooltip:new Om("extensions.Paragraph.buttons.paragraph.tooltip"),icons:(t={},t.md=new Ld("format_textdirection_l_to_r"),t.fa=new Ld("fas fa-paragraph"),t.mdi=new Ld("mdi-format-paragraph"),t.mdiSvg=new Ld("M13,4A4,4 0 0,1 17,8A4,4 0 0,1 13,12H11V18H9V4H13M13,10A2,2 0 0,0 15,8A2,2 0 0,0 13,6H11V10H13Z"),t),nativeExtensionName:"paragraph"})}]},enumerable:!0,configurable:!0}),e}(Tm),Rm=function(t){function e(e){return t.call(this,e,Pc)||this}return nu(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){var t;return[{render:new $d({tooltip:new Om("extensions.BulletList.buttons.bulletList.tooltip"),icons:(t={},t.md=new Ld("format_list_bulleted"),t.fa=new Ld("fas fa-list-ul"),t.mdi=new Ld("mdi-format-list-bulleted"),t.mdiSvg=new Ld("M7,5H21V7H7V5M7,13V11H21V13H7M4,4.5A1.5,1.5 0 0,1 5.5,6A1.5,1.5 0 0,1 4,7.5A1.5,1.5 0 0,1 2.5,6A1.5,1.5 0 0,1 4,4.5M4,10.5A1.5,1.5 0 0,1 5.5,12A1.5,1.5 0 0,1 4,13.5A1.5,1.5 0 0,1 2.5,12A1.5,1.5 0 0,1 4,10.5M7,19V17H21V19H7M4,16.5A1.5,1.5 0 0,1 5.5,18A1.5,1.5 0 0,1 4,19.5A1.5,1.5 0 0,1 2.5,18A1.5,1.5 0 0,1 4,16.5Z"),t),nativeExtensionName:"bullet_list"})}]},enumerable:!0,configurable:!0}),e}(Tm),zm=function(t){function e(e){return t.call(this,e,jc)||this}return nu(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){var t;return[{render:new $d({tooltip:new Om("extensions.OrderedList.buttons.orderedList.tooltip"),icons:(t={},t.md=new Ld("format_list_numbered"),t.fa=new Ld("fas fa-list-ol"),t.mdi=new Ld("mdi-format-list-numbered"),t.mdiSvg=new Ld("M7,13V11H21V13H7M7,19V17H21V19H7M7,7V5H21V7H7M3,8V5H2V4H4V8H3M2,17V16H5V20H2V19H4V18.5H3V17.5H4V17H2M4.25,10A0.75,0.75 0 0,1 5,10.75C5,10.95 4.92,11.14 4.79,11.27L3.12,13H5V14H2V13.08L4,11H2V10H4.25Z"),t),nativeExtensionName:"ordered_list"})}]},enumerable:!0,configurable:!0}),e}(Tm),Bm=function(t){function e(e){return t.call(this,e,$c)||this}return nu(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){return[]},enumerable:!0,configurable:!0}),e}(Tm),$m=function(t){function e(e){return t.call(this,e,Nc)||this}return nu(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){var t;return[{render:new $d({tooltip:new Om("extensions.Blockquote.buttons.blockquote.tooltip"),icons:(t={},t.md=new Ld("format_quote"),t.fa=new Ld("fas fa-quote-right"),t.mdi=new Ld("mdi-format-quote-close"),t.mdiSvg=new Ld("M14,17H17L19,13V7H13V13H16M6,17H9L11,13V7H5V13H8L6,17Z"),t),nativeExtensionName:"blockquote"})}]},enumerable:!0,configurable:!0}),e}(Tm),jm=function(t){function e(e){return t.call(this,e,Ic)||this}return nu(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){return[]},enumerable:!0,configurable:!0}),e}(Tm),Vm=function(t){function e(e){return t.call(this,e,Rc)||this}return nu(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){var t;return[{render:new $d({tooltip:new Om("extensions.HorizontalRule.buttons.horizontalRule.tooltip"),icons:(t={},t.md=new Od("—"),t.fa=new Ld("fas fa-minus"),t.mdi=new Ld("mdi-minus"),t.mdiSvg=new Ld("M19,13H5V11H19V13Z"),t),nativeExtensionName:"horizontal_rule"})}]},enumerable:!0,configurable:!0}),e}(Tm),Zm=function(t){function e(e){return t.call(this,e,Qc)||this}return nu(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){var t,e;return this.options&&this.options.noActions?[]:[{render:new $d({tooltip:new Om("extensions.History.buttons.undo.tooltip"),icons:(t={},t.md=new Ld("undo"),t.fa=new Ld("fas fa-undo"),t.mdi=new Ld("mdi-undo"),t.mdiSvg=new Ld("M12.5,8C9.85,8 7.45,9 5.6,10.6L2,7V16H11L7.38,12.38C8.77,11.22 10.54,10.5 12.5,10.5C16.04,10.5 19.05,12.81 20.1,16L22.47,15.22C21.08,11.03 17.15,8 12.5,8Z"),t),nativeExtensionName:"undo"})},{render:new $d({tooltip:new Om("extensions.History.buttons.redo.tooltip"),icons:(e={},e.md=new Ld("redo"),e.fa=new Ld("fas fa-redo"),e.mdi=new Ld("mdi-redo"),e.mdiSvg=new Ld("M18.4,10.6C16.55,9 14.15,8 11.5,8C6.85,8 2.92,11.03 1.54,15.22L3.9,16C4.95,12.81 7.95,10.5 11.5,10.5C13.45,10.5 15.23,11.22 16.62,12.38L13,16H22V7L18.4,10.6Z"),e),nativeExtensionName:"redo"})}]},enumerable:!0,configurable:!0}),e}(Tm),Fm="value",Hm="context",Wm="editor",Um="nativeExtensionName",qm="href",Jm=zd({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{value:t.value,"max-width":"500px"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[t._v("\n        "+t._s(t.$i18n.getMsg("extensions.Link.window.title"))+"\n      ")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{icon:""},on:{click:t.close}},[n("v-icon",[t._v(t._s(t.COMMON_ICONS.close[t.$tiptapVuetify.iconsGroup]))])],1)],1),t._v(" "),n("v-card-text",[n("v-text-field",{attrs:{label:t.$i18n.getMsg("extensions.Link.window.form.hrefLabel")},model:{value:t.form.href,callback:function(e){t.$set(t.form,"href",e)},expression:"form.href"}})],1),t._v(" "),n("v-card-actions",[n("v-btn",{attrs:{text:""},on:{click:t.close}},[t._v("\n        "+t._s(t.$i18n.getMsg("extensions.Link.window.buttons.close"))+"\n      ")]),t._v(" "),n("v-btn",{attrs:{disabled:t.isDisabled,color:t.isRemove?"error":"primary",text:""},on:{click:t.apply}},[t._v("\n        "+t._s(t.$i18n.getMsg("extensions.Link.window.buttons."+(t.isRemove?"remove":"apply")))+"\n      ")])],1)],1)],1)},staticRenderFns:[]},void 0,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.COMMON_ICONS=xm,e.form={href:e[qm],blank:!1},e}var n,o,i,r,s;return nu(e,t),Object.defineProperty(e.prototype,"isRemove",{get:function(){return this[qm]&&!this.form.href},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDisabled",{get:function(){return this[qm]===this.form.href||!this[qm]&&!this.form.href},enumerable:!0,configurable:!0}),e.prototype.apply=function(){this[Hm].commands[this[Um]]({href:this.form.href}),this.close(),this[Wm].focus()},e.prototype.close=function(){this.$destroy(),this.$el.parentNode.removeChild(this.$el)},n=Fm,o=Um,i=Hm,r=Wm,s=qm,iu([Sd({type:Boolean,default:!1}),ru("design:type",Boolean)],e.prototype,n,void 0),iu([Sd({type:String,required:!0}),ru("design:type",String)],e.prototype,o,void 0),iu([Sd({type:Object,required:!0}),ru("design:type",Object)],e.prototype,i,void 0),iu([Sd({type:Object,required:!0}),ru("design:type",Object)],e.prototype,r,void 0),iu([Sd({type:String}),ru("design:type",Object)],e.prototype,s,void 0),iu([wd({components:{VDialog:b.Z,VCard:m.Z,VCardTitle:v.EB,VCardText:v.ZB,VCardActions:v.h7,VBtn:f.Z,VSpacer:P.Z,VIcon:C.Z,VTextField:I.Z}})],e)}(gd(wf)),void 0,!1,void 0,void 0,void 0),Km=function(t){function e(e){return t.call(this,e,Gc)||this}return nu(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){var t;return[{render:new $d({tooltip:function(t,e){return new Om(e.isActive(t)?"extensions.Link.buttons.isActive.tooltip":"extensions.Link.buttons.notActive.tooltip")},icons:(t={},t.md=new Ld("link"),t.fa=new Ld("fas fa-link"),t.mdi=new Ld("mdi-link"),t.mdiSvg=new Ld("M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z"),t),nativeExtensionName:"link",onClick:function(t){var e=t.context,n=t.editor,o=e.getMarkAttrs("link").href,i=new(Rt.Z.extend(Jm))({vuetify:Rt.Z.prototype.tiptapVuetifyPlugin.vuetify,propsData:{value:!0,nativeExtensionName:"link",context:e,editor:n,href:o}});i.$mount(),document.querySelector("body").appendChild(i.$el)}})}]},enumerable:!0,configurable:!0}),e}(Tm),Gm=Kp("isConcatSpreadable"),Xm=gh>=51||!mu((function(){var t=[];return t[Gm]=!1,t.concat()[0]!==t})),Ym=bh("concat"),Qm=function(t){if(!Tu(t))return!1;var e=t[Gm];return void 0!==e?!!e:Fp(t)};jp({target:"Array",proto:!0,forced:!Xm||!Ym},{concat:function(t){var e,n,o,i,r,s=Zp(this),a=Xp(s,0),l=0;for(e=-1,o=arguments.length;e<o;e++)if(Qm(r=-1===e?s:arguments[e])){if(l+(i=yp(r.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<i;n++,l++)n in r&&hh(a,l,r[n])}else{if(l>=9007199254740991)throw TypeError("Maximum allowed index exceeded");hh(a,l++,r)}return a.length=l,a}});var tv=th.filter,ev=bh("filter"),nv=rh("filter");jp({target:"Array",proto:!0,forced:!ev||!nv},{filter:function(t){return tv(this,t,arguments.length>1?arguments[1]:void 0)}});var ov=Kp("unscopables"),iv=Array.prototype;null==iv[ov]&&$u.f(iv,ov,{configurable:!0,value:Ih(null)});var rv=function(t){iv[ov][t]=!0},sv=Sp.includes,av=rh("indexOf",{ACCESSORS:!0,1:0});jp({target:"Array",proto:!0,forced:!av},{includes:function(t){return sv(this,t,arguments.length>1?arguments[1]:void 0)}}),rv("includes");var lv=Kp("match");jp({target:"String",proto:!0,forced:!function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[lv]=!1,"/./"[t](e)}catch(t){}}return!1}("includes")},{includes:function(t){return!!~String(Cu(this)).indexOf(function(t){if(cf(t))throw TypeError("The method doesn't accept regular expressions");return t}(t),arguments.length>1?arguments[1]:void 0)}});var cv="select-file",uv="tiptap-vuetify-image-upload-area-holder",pv=zd({render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tiptap-vuetify-image-upload-area"},[e("input",{attrs:{id:"tiptap-vuetify-image-upload-area__input-file",type:"file",accept:"image/*",multiple:""}}),this._v(" "),e("label",{staticClass:"tiptap-vuetify-image-upload-area-holder",attrs:{for:"tiptap-vuetify-image-upload-area__input-file"}},[e("div",[e("svg",{staticClass:"tiptap-vuetify-image-upload-area-holder__icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"50",height:"43",viewBox:"0 0 50 43"}},[e("path",{attrs:{d:"M48.4 26.5c-.9 0-1.7.7-1.7 1.7v11.6h-43.3v-11.6c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v13.2c0 .9.7 1.7 1.7 1.7h46.7c.9 0 1.7-.7 1.7-1.7v-13.2c0-1-.7-1.7-1.7-1.7zm-24.5 6.1c.3.3.8.5 1.2.5.4 0 .9-.2 1.2-.5l10-11.6c.7-.7.7-1.7 0-2.4s-1.7-.7-2.4 0l-7.1 8.3v-25.3c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v25.3l-7.1-8.3c-.7-.7-1.7-.7-2.4 0s-.7 1.7 0 2.4l10 11.6z"}})]),this._v(" "),e("br"),e("br"),this._v(" "),e("h3",[this._v(this._s(this.$i18n.getMsg("extensions.Image.window.imageUpload.instruction")))])])])])},staticRenderFns:[]},void 0,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return nu(e,t),e.prototype.mounted=function(){var t=this,e=this.$el.querySelector("."+uv);this.$el.querySelector("#tiptap-vuetify-image-upload-area__input-file").addEventListener("change",(function(n){n.target instanceof HTMLInputElement&&(t.filesSelected(n.target.files),e.classList.remove(uv+"--dragover"),n.target.value="")})),e.addEventListener("dragover",(function(){return e.classList.add(uv+"--dragover"),!1}));var n=function(){return e.classList.remove(uv+"--dragover"),!1};e.addEventListener("dragleave",n),e.addEventListener("dragend",n),e.addEventListener("drop",(function(e){e.preventDefault(),t.filesSelected(e.dataTransfer.files)}))},e.prototype.filesSelected=function(t){var e=this;cu(t).forEach((function(t){var n=new FileReader;n.addEventListener("load",(function(n){e.$emit(cv,{src:n.target.result.toString(),alt:t.name})})),n.readAsDataURL(t)}))},iu([wd],e)}(gd(wf)),void 0,!1,void 0,void 0,void 0),hv=zd({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-text-field",{attrs:{label:t.$i18n.getMsg("extensions.Image.window.form.sourceLink")},model:{value:t.form.src,callback:function(e){t.$set(t.form,"src",e)},expression:"form.src"}}),t._v(" "),n("v-text-field",{attrs:{label:t.$i18n.getMsg("extensions.Image.window.form.altText")},model:{value:t.form.alt,callback:function(e){t.$set(t.form,"alt",e)},expression:"form.alt"}}),t._v(" "),n("v-btn",{on:{click:t.addImage}},[t._v("\n    "+t._s(t.$i18n.getMsg("extensions.Image.window.form.addImage"))+"\n  ")])],1)},staticRenderFns:[]},void 0,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.form={src:null,alt:null},e}return nu(e,t),e.prototype.addImage=function(){this.$emit(cv,{src:this.form.src,alt:this.form.alt}),this.form.src=null,this.form.alt=null},iu([wd({components:{VTextField:I.Z}})],e)}(gd(wf)),"data-v-c4747a2a",!1,void 0,void 0,void 0);let dv=null;try{if("undefined"!=typeof window){const t=Object.defineProperty({},"passive",{get:()=>{dv=!0}});window.addEventListener("testListener",t,t),window.removeEventListener("testListener",t,t)}}catch(Pd){console.warn(Pd)}Object.freeze({enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,end:35,home:36,del:46,backspace:8,insert:45,pageup:33,pagedown:34});const fv=/-(\w)/g,mv=t=>t.replace(fv,((t,e)=>e?e.toUpperCase():"")),vv=/;(?![^(]*\))/g,gv=/:(.*)/;function yv(t){const e={};for(const n of t.split(vv)){let[t,o]=n.split(gv);(t=t.trim())&&("string"==typeof o&&(o=o.trim()),e[mv(t)]=o)}return e}function bv(t,e,n="in-out"){return{name:t,functional:!0,props:{mode:{type:String,default:n}},render:(n,o)=>n("transition",function(){const t={};let e,n,o=arguments.length;for(;o--;)for(e of Object.keys(arguments[o]))switch(e){case"class":case"style":case"directives":if(Array.isArray(t[e])||(t[e]=[]),"style"===e){let t;t=Array.isArray(arguments[o].style)?arguments[o].style:[arguments[o].style];for(let e=0;e<t.length;e++){const n=t[e];"string"==typeof n&&(t[e]=yv(n))}arguments[o].style=t}t[e]=t[e].concat(arguments[o][e]);break;case"staticClass":if(!arguments[o][e])break;void 0===t[e]&&(t[e]=""),t[e]&&(t[e]+=" "),t[e]+=arguments[o][e].trim();break;case"on":case"nativeOn":t[e]||(t[e]={});const i=t[e];for(n of Object.keys(arguments[o][e]||{}))i[n]?i[n]=Array().concat(i[n],arguments[o][e][n]):i[n]=arguments[o][e][n];break;case"attrs":case"props":case"domProps":case"scopedSlots":case"staticStyle":case"hook":case"transition":t[e]||(t[e]={}),t[e]={...arguments[o][e],...t[e]};break;default:t[e]||(t[e]=arguments[o][e])}return t}(o.data,{props:{name:t},on:e}),o.children)}}function _v(t="",e=!1){const n=e?"width":"height",o=`offset${i=n,i.charAt(0).toUpperCase()+i.slice(1)}`;var i;return{beforeEnter(t){t._parent=t.parentNode,t._initialStyle={transition:t.style.transition,visibility:t.style.visibility,overflow:t.style.overflow,[n]:t.style[n]}},enter(e){const i=e._initialStyle,r=`${e[o]}px`;e.style.setProperty("transition","none","important"),e.style.visibility="hidden",e.style.visibility=i.visibility,e.style.overflow="hidden",e.style[n]="0",e.offsetHeight,e.style.transition=i.transition,t&&e._parent&&e._parent.classList.add(t),requestAnimationFrame((()=>{e.style[n]=r}))},afterEnter:s,enterCancelled:s,leave(t){t._initialStyle={transition:"",visibility:"",overflow:t.style.overflow,[n]:t.style[n]},t.style.overflow="hidden",t.style[n]=`${t[o]}px`,t.offsetHeight,requestAnimationFrame((()=>t.style[n]="0"))},afterLeave:r,leaveCancelled:r};function r(e){t&&e._parent&&e._parent.classList.remove(t),s(e)}function s(t){const e=t._initialStyle[n];t.style.overflow=t._initialStyle.overflow,null!=e&&(t.style[n]=e),delete t._initialStyle}}const wv=bv("expand-transition",_v());bv("expand-x-transition",_v("",!0));var xv,Sv,kv,Cv="context",Ov="editor",Tv="imageSources",Mv="imageSourcesOverride",Ev="nativeExtensionName",Av=zd({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{value:t.value,"max-width":"500px"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[t._v("\n        "+t._s(t.$i18n.getMsg("extensions.Image.window.title"))+"\n      ")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{icon:""},on:{click:t.close}},[n("v-icon",[t._v(t._s(t.COMMON_ICONS.close[t.$tiptapVuetify.iconsGroup]))])],1)],1),t._v(" "),n("v-card-text",[n("v-expand-transition",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.previewSources.length,expression:"previewSources.length"}]},[n("v-row",{attrs:{"no-gutters":"",justify:"center",align:"center"}},t._l(t.previewSources,(function(e,o){return n("v-col",{key:"preview"+o,attrs:{cols:"4"}},[n("v-img",{staticClass:"text-right",attrs:{src:e.src,alt:e.alt}},[n("v-btn",{attrs:{icon:"",small:"",dark:""},on:{click:function(n){return t.removeSource(e)}}},[n("v-icon",{attrs:{small:""}},[t._v("\n                    close\n                  ")])],1)],1),t._v(" "),n("v-text-field",{attrs:{label:"Alt Text"},model:{value:e.alt,callback:function(n){t.$set(e,"alt",n)},expression:"source.alt"}})],1)})),1)],1)])],1),t._v(" "),n("v-tabs",{attrs:{"fixed-tabs":""}},[t._l(t.imageTabs,(function(e,o){return[n("v-tab",{key:"tab-"+o,attrs:{href:"#tab-"+o}},[t._v("\n          "+t._s(e.name)+"\n        ")]),t._v(" "),n("v-tab-item",{key:"tab-item-"+o,attrs:{value:"tab-"+o}},[n(e.component,{tag:"component",staticClass:"pa-4",on:{"select-file":t.onFileSelect}})],1)]}))],2),t._v(" "),n("v-card-actions",[n("v-btn",{attrs:{text:""},on:{click:t.close}},[t._v("\n        "+t._s(t.$i18n.getMsg("extensions.Image.window.buttons.close"))+"\n      ")]),t._v(" "),n("v-btn",{attrs:{disabled:t.isDisabled,text:""},on:{click:t.apply}},[t._v("\n        "+t._s(t.$i18n.getMsg("extensions.Image.window.buttons.apply"))+"\n      ")])],1)],1)],1)},staticRenderFns:[]},void 0,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.COMMON_ICONS=xm,e.defaultImageTabs=[{name:"URL",component:hv},{name:"Upload",component:pv}],e.inputPreviewSources=[],e}return nu(e,t),Object.defineProperty(e.prototype,"imageTabs",{get:function(){return this[Tv]?this[Mv]?this[Tv]:this.defaultImageTabs.concat(this[Tv]):this.defaultImageTabs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"previewSources",{get:function(){return this.inputPreviewSources.filter(Boolean)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDisabled",{get:function(){return!this.previewSources.length},enumerable:!0,configurable:!0}),e.prototype.removeSource=function(t){this.inputPreviewSources.includes(t)&&(this.inputPreviewSources=this.inputPreviewSources.filter((function(e){return e!==t})))},e.prototype.onFileSelect=function(t){if(null!==t.src&&""!==t.src){var e=this.findFile(t);null!==e?e.alt=t.alt:this.inputPreviewSources.push(t)}},e.prototype.findFile=function(t){var e=this.inputPreviewSources.filter((function(e){return e.src===t.src}));return e.length>0?e[0]:null},e.prototype.apply=function(){var t=this;this.previewSources.forEach((function(e){t[Cv].commands[t[Ev]](e)})),this.close(),this[Ov].focus()},e.prototype.close=function(){this.$destroy(),this.$el.parentNode.removeChild(this.$el)},"value",Ev,Cv,Ov,Tv,Mv,iu([Sd({type:Boolean,default:!1}),ru("design:type",Boolean)],e.prototype,"value",void 0),iu([Sd({type:String,required:!0}),ru("design:type",String)],e.prototype,"nativeExtensionName",void 0),iu([Sd({type:Object,required:!0}),ru("design:type",Object)],e.prototype,"context",void 0),iu([Sd({type:Object,required:!0}),ru("design:type",Object)],e.prototype,"editor",void 0),iu([Sd({type:Array,required:!1}),ru("design:type",Object)],e.prototype,"imageSources",void 0),iu([Sd({type:Boolean,required:!1}),ru("design:type",Object)],e.prototype,"imageSourcesOverride",void 0),iu([wd({components:{VRow:A.Z,VCol:g.Z,VExpandTransition:wv,ImageForm:hv,ImageUploadArea:pv,VImg:O.Z,VDialog:b.Z,VCard:m.Z,VCardTitle:v.EB,VCardText:v.ZB,VCardActions:v.h7,VBtn:f.Z,VSpacer:P.Z,VIcon:C.Z,VTextField:I.Z,VTabs:Ia.Z,VTab:Da.Z,VTabsSlider:Ra.Z,VTabItem:Ba,VTabsItems:$a.Z}})],e)}(gd(wf)),void 0,!1,void 0,void 0,void 0),Nv=(function(t){function e(e){return t.call(this,e,Bc)||this}nu(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){var t,e=this.options;return[{render:new $d({tooltip:new Om("extensions.Image.buttons.tooltip"),icons:(t={},t.md=new Ld("image"),t.fa=new Ld("fas fa-image"),t.mdi=new Ld("mdi-image"),t.mdiSvg=new Ld("M8.5,13.5L11,16.5L14.5,12L19,18H5M21,19V5C21,3.89 20.1,3 19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19Z"),t),nativeExtensionName:"image",onClick:function(t){var n=t.context,o=t.editor;return su(this,void 0,void 0,(function(){var t,i;return au(this,(function(r){return t=Rt.Z.extend(Av),(i=new t({vuetify:Rt.Z.prototype.tiptapVuetifyPlugin.vuetify,propsData:{value:!0,nativeExtensionName:"image",context:n,editor:o,imageSources:e.imageSources,imageSourcesOverride:e.imageSourcesOverride}})).$mount(),document.querySelector("body").appendChild(i.$el),[2]}))}))}})}]},enumerable:!0,configurable:!0})}(Tm),function(t){function e(e){return t.call(this,e,Uc)||this}nu(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){var t;return[{render:new $d({tooltip:new Om("extensions.TodoList.buttons.todoList.tooltip"),icons:(t={},t.md=new Ld("check_box"),t.fa=new Ld("fas fa-tasks"),t.mdi=new Ld("mdi-format-list-checks"),t.mdiSvg=new Ld("M3,5H9V11H3V5M5,7V9H7V7H5M11,7H21V9H11V7M11,15H21V17H11V15M5,20L1.5,16.5L2.91,15.09L5,17.17L9.59,12.59L11,14L5,20Z"),t),nativeExtensionName:"todo_list"})}]},enumerable:!0,configurable:!0})}(Tm),!mu((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))),Pv=ep("IE_PROTO"),Lv=Object.prototype,Iv=Nv?Object.getPrototypeOf:function(t){return t=Zp(t),Au(t,Pv)?t[Pv]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Lv:null},Dv=Kp("iterator"),Rv=!1;[].keys&&("next"in(kv=[].keys())?(Sv=Iv(Iv(kv)))!==Object.prototype&&(xv=Sv):Rv=!0),null==xv&&(xv={}),Au(xv,Dv)||ju(xv,Dv,(function(){return this}));var zv={IteratorPrototype:xv,BUGGY_SAFARI_ITERATORS:Rv},Bv=$u.f,$v=Kp("toStringTag"),jv=function(t,e,n){t&&!Au(t=n?t:t.prototype,$v)&&Bv(t,$v,{configurable:!0,value:e})},Vv=zv.IteratorPrototype,Zv=zv.IteratorPrototype,Fv=zv.BUGGY_SAFARI_ITERATORS,Hv=Kp("iterator"),Wv=function(){return this},Uv=cp.set,qv=cp.getterFor("Array Iterator"),Jv=function(t,e,n,o,i,r,s){!function(t,e,n){t.prototype=Ih(Vv,{next:_u(1,n)}),jv(t,"Array Iterator",!1)}(n,0,(function(){var t=qv(this),e=t.target,n=t.kind,o=t.index++;return!e||o>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:o,done:!1}:"values"==n?{value:e[o],done:!1}:{value:[o,e[o]],done:!1}}));var a,l,c,u=function(t){if(t===i&&f)return f;if(!Fv&&t in h)return h[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},p=!1,h=t.prototype,d=h[Hv]||h["@@iterator"]||h[i],f=!Fv&&d||u(i),m=h.entries||d;if(m&&(a=Iv(m.call(new t)),Zv!==Object.prototype&&a.next&&(Iv(a)!==Zv&&(Oh?Oh(a,Zv):"function"!=typeof a[Hv]&&ju(a,Hv,Wv)),jv(a,"Array Iterator",!0))),d&&"values"!==d.name&&(p=!0,f=function(){return d.call(this)}),h[Hv]!==f&&ju(h,Hv,f),void(l={values:u("values"),keys:u("keys"),entries:u("entries")}))for(c in l)!Fv&&!p&&c in h||up(h,c,l[c]);else jp({target:e,proto:!0,forced:Fv||p},l);return l}(Array,"Array",(function(t,e){Uv(this,{type:"Array Iterator",target:Ou(t),index:0,kind:e})}),0,"values");rv("keys"),rv("values"),rv("entries");var Kv=Kp("iterator"),Gv=Kp("toStringTag"),Xv=Jv.values;for(var Yv in cd){var Qv=fu[Yv],tg=Qv&&Qv.prototype;if(tg){if(tg[Kv]!==Xv)try{ju(tg,Kv,Xv)}catch(Pd){tg[Kv]=Xv}if(tg[Gv]||ju(tg,Gv,Yv),cd[Yv])for(var eg in Jv)if(tg[eg]!==Jv[eg])try{ju(tg,eg,Jv[eg])}catch(Pd){tg[eg]=Jv[eg]}}}function ng(t){this.content=t}ng.prototype={constructor:ng,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return-1==e?void 0:this.content[e+1]},update:function(t,e,n){var o=n&&n!=t?this.remove(n):this,i=o.find(t),r=o.content.slice();return-1==i?r.push(n||t,e):(r[i+1]=e,n&&(r[i]=n)),new ng(r)},remove:function(t){var e=this.find(t);if(-1==e)return this;var n=this.content.slice();return n.splice(e,2),new ng(n)},addToStart:function(t,e){return new ng([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new ng(n)},addBefore:function(t,e,n){var o=this.remove(e),i=o.content.slice(),r=o.find(t);return i.splice(-1==r?i.length:r,0,e,n),new ng(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return(t=ng.from(t)).size?new ng(t.content.concat(this.subtract(t).content)):this},append:function(t){return(t=ng.from(t)).size?new ng(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=ng.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},get size(){return this.content.length>>1}},ng.from=function(t){if(t instanceof ng)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new ng(e)};var og=ng,ig=function(t,e){if(this.content=t,this.size=e||0,null==e)for(var n=0;n<t.length;n++)this.size+=t[n].nodeSize},rg={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};ig.prototype.nodesBetween=function(t,e,n,o,i){void 0===o&&(o=0);for(var r=0,s=0;s<e;r++){var a=this.content[r],l=s+a.nodeSize;if(l>t&&!1!==n(a,o+s,i,r)&&a.content.size){var c=s+1;a.nodesBetween(Math.max(0,t-c),Math.min(a.content.size,e-c),n,o+c)}s=l}},ig.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)},ig.prototype.textBetween=function(t,e,n,o){var i="",r=!0;return this.nodesBetween(t,e,(function(s,a){s.isText?(i+=s.text.slice(Math.max(t,a)-a,e-a),r=!n):s.isLeaf&&o?(i+=o,r=!n):!r&&s.isBlock&&(i+=n,r=!0)}),0),i},ig.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var e=this.lastChild,n=t.firstChild,o=this.content.slice(),i=0;for(e.isText&&e.sameMarkup(n)&&(o[o.length-1]=e.withText(e.text+n.text),i=1);i<t.content.length;i++)o.push(t.content[i]);return new ig(o,this.size+t.size)},ig.prototype.cut=function(t,e){if(null==e&&(e=this.size),0==t&&e==this.size)return this;var n=[],o=0;if(e>t)for(var i=0,r=0;r<e;i++){var s=this.content[i],a=r+s.nodeSize;a>t&&((r<t||a>e)&&(s=s.isText?s.cut(Math.max(0,t-r),Math.min(s.text.length,e-r)):s.cut(Math.max(0,t-r-1),Math.min(s.content.size,e-r-1))),n.push(s),o+=s.nodeSize),r=a}return new ig(n,o)},ig.prototype.cutByIndex=function(t,e){return t==e?ig.empty:0==t&&e==this.content.length?this:new ig(this.content.slice(t,e))},ig.prototype.replaceChild=function(t,e){var n=this.content[t];if(n==e)return this;var o=this.content.slice(),i=this.size+e.nodeSize-n.nodeSize;return o[t]=e,new ig(o,i)},ig.prototype.addToStart=function(t){return new ig([t].concat(this.content),this.size+t.nodeSize)},ig.prototype.addToEnd=function(t){return new ig(this.content.concat(t),this.size+t.nodeSize)},ig.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0},rg.firstChild.get=function(){return this.content.length?this.content[0]:null},rg.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},rg.childCount.get=function(){return this.content.length},ig.prototype.child=function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e},ig.prototype.maybeChild=function(t){return this.content[t]},ig.prototype.forEach=function(t){for(var e=0,n=0;e<this.content.length;e++){var o=this.content[e];t(o,n,e),n+=o.nodeSize}},ig.prototype.findDiffStart=function(t,e){return void 0===e&&(e=0),function t(e,n,o){for(var i=0;;i++){if(i==e.childCount||i==n.childCount)return e.childCount==n.childCount?null:o;var r=e.child(i),s=n.child(i);if(r!=s){if(!r.sameMarkup(s))return o;if(r.isText&&r.text!=s.text){for(var a=0;r.text[a]==s.text[a];a++)o++;return o}if(r.content.size||s.content.size){var l=t(r.content,s.content,o+1);if(null!=l)return l}o+=r.nodeSize}else o+=r.nodeSize}}(this,t,e)},ig.prototype.findDiffEnd=function(t,e,n){return void 0===e&&(e=this.size),void 0===n&&(n=t.size),function t(e,n,o,i){for(var r=e.childCount,s=n.childCount;;){if(0==r||0==s)return r==s?null:{a:o,b:i};var a=e.child(--r),l=n.child(--s),c=a.nodeSize;if(a!=l){if(!a.sameMarkup(l))return{a:o,b:i};if(a.isText&&a.text!=l.text){for(var u=0,p=Math.min(a.text.length,l.text.length);u<p&&a.text[a.text.length-u-1]==l.text[l.text.length-u-1];)u++,o--,i--;return{a:o,b:i}}if(a.content.size||l.content.size){var h=t(a.content,l.content,o-1,i-1);if(h)return h}o-=c,i-=c}else o-=c,i-=c}}(this,t,e,n)},ig.prototype.findIndex=function(t,e){if(void 0===e&&(e=-1),0==t)return ag(0,t);if(t==this.size)return ag(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var n=0,o=0;;n++){var i=o+this.child(n).nodeSize;if(i>=t)return i==t||e>0?ag(n+1,i):ag(n,o);o=i}},ig.prototype.toString=function(){return"<"+this.toStringInner()+">"},ig.prototype.toStringInner=function(){return this.content.join(", ")},ig.prototype.toJSON=function(){return this.content.length?this.content.map((function(t){return t.toJSON()})):null},ig.fromJSON=function(t,e){if(!e)return ig.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new ig(e.map(t.nodeFromJSON))},ig.fromArray=function(t){if(!t.length)return ig.empty;for(var e,n=0,o=0;o<t.length;o++){var i=t[o];n+=i.nodeSize,o&&i.isText&&t[o-1].sameMarkup(i)?(e||(e=t.slice(0,o)),e[e.length-1]=i.withText(e[e.length-1].text+i.text)):e&&e.push(i)}return new ig(e||t,n)},ig.from=function(t){if(!t)return ig.empty;if(t instanceof ig)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new ig([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(ig.prototype,rg);var sg={index:0,offset:0};function ag(t,e){return sg.index=t,sg.offset=e,sg}function lg(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var o=0;o<t.length;o++)if(!lg(t[o],e[o]))return!1}else{for(var i in t)if(!(i in e)||!lg(t[i],e[i]))return!1;for(var r in e)if(!(r in t))return!1}return!0}ig.empty=new ig([],0);var cg=function(t,e){this.type=t,this.attrs=e};function ug(t){var e=Error.call(this,t);return e.__proto__=ug.prototype,e}cg.prototype.addToSet=function(t){for(var e,n=!1,o=0;o<t.length;o++){var i=t[o];if(this.eq(i))return t;if(this.type.excludes(i.type))e||(e=t.slice(0,o));else{if(i.type.excludes(this.type))return t;!n&&i.type.rank>this.type.rank&&(e||(e=t.slice(0,o)),e.push(this),n=!0),e&&e.push(i)}}return e||(e=t.slice()),n||e.push(this),e},cg.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t},cg.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1},cg.prototype.eq=function(t){return this==t||this.type==t.type&&lg(this.attrs,t.attrs)},cg.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t},cg.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type "+e.type+" in this schema");return n.create(e.attrs)},cg.sameSet=function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0},cg.setFrom=function(t){if(!t||0==t.length)return cg.none;if(t instanceof cg)return[t];var e=t.slice();return e.sort((function(t,e){return t.type.rank-e.type.rank})),e},cg.none=[],ug.prototype=Object.create(Error.prototype),ug.prototype.constructor=ug,ug.prototype.name="ReplaceError";var pg=function(t,e,n){this.content=t,this.openStart=e,this.openEnd=n},hg={size:{configurable:!0}};function dg(t,e){if(!e.type.compatibleContent(t.type))throw new ug("Cannot join "+e.type.name+" onto "+t.type.name)}function fg(t,e,n){var o=t.node(n);return dg(o,e.node(n)),o}function mg(t,e){var n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function vg(t,e,n,o){var i=(e||t).node(n),r=0,s=e?e.index(n):i.childCount;t&&(r=t.index(n),t.depth>n?r++:t.textOffset&&(mg(t.nodeAfter,o),r++));for(var a=r;a<s;a++)mg(i.child(a),o);e&&e.depth==n&&e.textOffset&&mg(e.nodeBefore,o)}function gg(t,e){if(!t.type.validContent(e))throw new ug("Invalid content for node "+t.type.name);return t.copy(e)}function yg(t,e,n){var o=[];return vg(null,t,n,o),t.depth>n&&mg(gg(fg(t,e,n+1),yg(t,e,n+1)),o),vg(e,null,n,o),new ig(o)}hg.size.get=function(){return this.content.size-this.openStart-this.openEnd},pg.prototype.insertAt=function(t,e){var n=function t(e,n,o,i){var r=e.findIndex(n),s=r.index,a=r.offset,l=e.maybeChild(s);if(a==n||l.isText)return i&&!i.canReplace(s,s,o)?null:e.cut(0,n).append(o).append(e.cut(n));var c=t(l.content,n-a-1,o);return c&&e.replaceChild(s,l.copy(c))}(this.content,t+this.openStart,e,null);return n&&new pg(n,this.openStart,this.openEnd)},pg.prototype.removeBetween=function(t,e){return new pg(function t(e,n,o){var i=e.findIndex(n),r=i.index,s=i.offset,a=e.maybeChild(r),l=e.findIndex(o),c=l.index,u=l.offset;if(s==n||a.isText){if(u!=o&&!e.child(c).isText)throw new RangeError("Removing non-flat range");return e.cut(0,n).append(e.cut(o))}if(r!=c)throw new RangeError("Removing non-flat range");return e.replaceChild(r,a.copy(t(a.content,n-s-1,o-s-1)))}(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)},pg.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd},pg.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},pg.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t},pg.fromJSON=function(t,e){if(!e)return pg.empty;var n=e.openStart||0,o=e.openEnd||0;if("number"!=typeof n||"number"!=typeof o)throw new RangeError("Invalid input for Slice.fromJSON");return new pg(ig.fromJSON(t,e.content),e.openStart||0,e.openEnd||0)},pg.maxOpen=function(t,e){void 0===e&&(e=!0);for(var n=0,o=0,i=t.firstChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.firstChild)n++;for(var r=t.lastChild;r&&!r.isLeaf&&(e||!r.type.spec.isolating);r=r.lastChild)o++;return new pg(t,n,o)},Object.defineProperties(pg.prototype,hg),pg.empty=new pg(ig.empty,0,0);var bg=function(t,e,n){this.pos=t,this.path=e,this.depth=e.length/3-1,this.parentOffset=n},_g={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};bg.prototype.resolveDepth=function(t){return null==t?this.depth:t<0?this.depth+t:t},_g.parent.get=function(){return this.node(this.depth)},_g.doc.get=function(){return this.node(0)},bg.prototype.node=function(t){return this.path[3*this.resolveDepth(t)]},bg.prototype.index=function(t){return this.path[3*this.resolveDepth(t)+1]},bg.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)},bg.prototype.start=function(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1},bg.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size},bg.prototype.before=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]},bg.prototype.after=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize},_g.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},_g.nodeAfter.get=function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var n=this.pos-this.path[this.path.length-1],o=t.child(e);return n?t.child(e).cut(n):o},_g.nodeBefore.get=function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)},bg.prototype.marks=function(){var t=this.parent,e=this.index();if(0==t.content.size)return cg.none;if(this.textOffset)return t.child(e).marks;var n=t.maybeChild(e-1),o=t.maybeChild(e);if(!n){var i=n;n=o,o=i}for(var r=n.marks,s=0;s<r.length;s++)!1!==r[s].type.spec.inclusive||o&&r[s].isInSet(o.marks)||(r=r[s--].removeFromSet(r));return r},bg.prototype.marksAcross=function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var n=e.marks,o=t.parent.maybeChild(t.index()),i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||o&&n[i].isInSet(o.marks)||(n=n[i--].removeFromSet(n));return n},bg.prototype.sharedDepth=function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0},bg.prototype.blockRange=function(t,e){if(void 0===t&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new kg(this,t,n)},bg.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset},bg.prototype.max=function(t){return t.pos>this.pos?t:this},bg.prototype.min=function(t){return t.pos<this.pos?t:this},bg.prototype.toString=function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset},bg.resolve=function(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");for(var n=[],o=0,i=e,r=t;;){var s=r.content.findIndex(i),a=s.index,l=s.offset,c=i-l;if(n.push(r,a,o+l),!c)break;if((r=r.child(a)).isText)break;i=c-1,o+=l+1}return new bg(e,n,i)},bg.resolveCached=function(t,e){for(var n=0;n<wg.length;n++){var o=wg[n];if(o.pos==e&&o.doc==t)return o}var i=wg[xg]=bg.resolve(t,e);return xg=(xg+1)%Sg,i},Object.defineProperties(bg.prototype,_g);var wg=[],xg=0,Sg=12,kg=function(t,e,n){this.$from=t,this.$to=e,this.depth=n},Cg={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};Cg.start.get=function(){return this.$from.before(this.depth+1)},Cg.end.get=function(){return this.$to.after(this.depth+1)},Cg.parent.get=function(){return this.$from.node(this.depth)},Cg.startIndex.get=function(){return this.$from.index(this.depth)},Cg.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(kg.prototype,Cg);var Og=Object.create(null),Tg=function(t,e,n,o){this.type=t,this.attrs=e,this.content=n||ig.empty,this.marks=o||cg.none},Mg={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};Mg.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},Mg.childCount.get=function(){return this.content.childCount},Tg.prototype.child=function(t){return this.content.child(t)},Tg.prototype.maybeChild=function(t){return this.content.maybeChild(t)},Tg.prototype.forEach=function(t){this.content.forEach(t)},Tg.prototype.nodesBetween=function(t,e,n,o){void 0===o&&(o=0),this.content.nodesBetween(t,e,n,o,this)},Tg.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)},Mg.textContent.get=function(){return this.textBetween(0,this.content.size,"")},Tg.prototype.textBetween=function(t,e,n,o){return this.content.textBetween(t,e,n,o)},Mg.firstChild.get=function(){return this.content.firstChild},Mg.lastChild.get=function(){return this.content.lastChild},Tg.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)},Tg.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)},Tg.prototype.hasMarkup=function(t,e,n){return this.type==t&&lg(this.attrs,e||t.defaultAttrs||Og)&&cg.sameSet(this.marks,n||cg.none)},Tg.prototype.copy=function(t){return void 0===t&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)},Tg.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)},Tg.prototype.cut=function(t,e){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))},Tg.prototype.slice=function(t,e,n){if(void 0===e&&(e=this.content.size),void 0===n&&(n=!1),t==e)return pg.empty;var o=this.resolve(t),i=this.resolve(e),r=n?0:o.sharedDepth(e),s=o.start(r),a=o.node(r).content.cut(o.pos-s,i.pos-s);return new pg(a,o.depth-r,i.depth-r)},Tg.prototype.replace=function(t,e,n){return function(t,e,n){if(n.openStart>t.depth)throw new ug("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new ug("Inconsistent open depths");return function t(e,n,o,i){var r=e.index(i),s=e.node(i);if(r==n.index(i)&&i<e.depth-o.openStart){var a=t(e,n,o,i+1);return s.copy(s.content.replaceChild(r,a))}if(o.content.size){if(o.openStart||o.openEnd||e.depth!=i||n.depth!=i){var l=function(t,e){for(var n=e.depth-t.openStart,o=e.node(n).copy(t.content),i=n-1;i>=0;i--)o=e.node(i).copy(ig.from(o));return{start:o.resolveNoCache(t.openStart+n),end:o.resolveNoCache(o.content.size-t.openEnd-n)}}(o,e);return gg(s,function t(e,n,o,i,r){var s=e.depth>r&&fg(e,n,r+1),a=i.depth>r&&fg(o,i,r+1),l=[];return vg(null,e,r,l),s&&a&&n.index(r)==o.index(r)?(dg(s,a),mg(gg(s,t(e,n,o,i,r+1)),l)):(s&&mg(gg(s,yg(e,n,r+1)),l),vg(n,o,r,l),a&&mg(gg(a,yg(o,i,r+1)),l)),vg(i,null,r,l),new ig(l)}(e,l.start,l.end,n,i))}var c=e.parent,u=c.content;return gg(c,u.cut(0,e.parentOffset).append(o.content).append(u.cut(n.parentOffset)))}return gg(s,yg(e,n,i))}(t,e,n,0)}(this.resolve(t),this.resolve(e),n)},Tg.prototype.nodeAt=function(t){for(var e=this;;){var n=e.content.findIndex(t),o=n.index,i=n.offset;if(!(e=e.maybeChild(o)))return null;if(i==t||e.isText)return e;t-=i+1}},Tg.prototype.childAfter=function(t){var e=this.content.findIndex(t),n=e.index,o=e.offset;return{node:this.content.maybeChild(n),index:n,offset:o}},Tg.prototype.childBefore=function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),n=e.index,o=e.offset;if(o<t)return{node:this.content.child(n),index:n,offset:o};var i=this.content.child(n-1);return{node:i,index:n-1,offset:o-i.nodeSize}},Tg.prototype.resolve=function(t){return bg.resolveCached(this,t)},Tg.prototype.resolveNoCache=function(t){return bg.resolve(this,t)},Tg.prototype.rangeHasMark=function(t,e,n){var o=!1;return e>t&&this.nodesBetween(t,e,(function(t){return n.isInSet(t.marks)&&(o=!0),!o})),o},Mg.isBlock.get=function(){return this.type.isBlock},Mg.isTextblock.get=function(){return this.type.isTextblock},Mg.inlineContent.get=function(){return this.type.inlineContent},Mg.isInline.get=function(){return this.type.isInline},Mg.isText.get=function(){return this.type.isText},Mg.isLeaf.get=function(){return this.type.isLeaf},Mg.isAtom.get=function(){return this.type.isAtom},Tg.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),Ag(this.marks,t)},Tg.prototype.contentMatchAt=function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e},Tg.prototype.canReplace=function(t,e,n,o,i){void 0===n&&(n=ig.empty),void 0===o&&(o=0),void 0===i&&(i=n.childCount);var r=this.contentMatchAt(t).matchFragment(n,o,i),s=r&&r.matchFragment(this.content,e);if(!s||!s.validEnd)return!1;for(var a=o;a<i;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0},Tg.prototype.canReplaceWith=function(t,e,n,o){if(o&&!this.type.allowsMarks(o))return!1;var i=this.contentMatchAt(t).matchType(n),r=i&&i.matchFragment(this.content,e);return!!r&&r.validEnd},Tg.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)},Tg.prototype.defaultContentType=function(t){return this.contentMatchAt(t).defaultType},Tg.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));this.content.forEach((function(t){return t.check()}))},Tg.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((function(t){return t.toJSON()}))),t},Tg.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}var o=ig.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,o,n)},Object.defineProperties(Tg.prototype,Mg);var Eg=function(t){function e(e,n,o,i){if(t.call(this,e,n,null,i),!o)throw new RangeError("Empty text nodes are not allowed");this.text=o}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return e.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Ag(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},e.prototype.textBetween=function(t,e){return this.text.slice(t,e)},n.nodeSize.get=function(){return this.text.length},e.prototype.mark=function(t){return t==this.marks?this:new e(this.type,this.attrs,this.text,t)},e.prototype.withText=function(t){return t==this.text?this:new e(this.type,this.attrs,t,this.marks)},e.prototype.cut=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.text.length),0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))},e.prototype.eq=function(t){return this.sameMarkup(t)&&this.text==t.text},e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.text=this.text,e},Object.defineProperties(e.prototype,n),e}(Tg);function Ag(t,e){for(var n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}var Ng=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]},Pg={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};Ng.parse=function(t,e){var n=new Lg(t,e);if(null==n.next)return Ng.empty;var o=Dg(n);n.next&&n.err("Unexpected trailing text");var i=function(t){var e=Object.create(null);return function n(o){var i=[];o.forEach((function(e){t[e].forEach((function(e){var n=e.term,o=e.to;if(n){var r=i.indexOf(n),s=r>-1&&i[r+1];Vg(t,o).forEach((function(t){s||i.push(n,s=[]),-1==s.indexOf(t)&&s.push(t)}))}}))}));for(var r=e[o.join(",")]=new Ng(o.indexOf(t.length-1)>-1),s=0;s<i.length;s+=2){var a=i[s+1].sort(jg);r.next.push(i[s],e[a.join(",")]||n(a))}return r}(Vg(t,0))}(function(t){var e=[[]];return i(function t(e,r){if("choice"==e.type)return e.exprs.reduce((function(e,n){return e.concat(t(n,r))}),[]);if("seq"==e.type)for(var s=0;;s++){var a=t(e.exprs[s],r);if(s==e.exprs.length-1)return a;i(a,r=n())}else{if("star"==e.type){var l=n();return o(r,l),i(t(e.expr,l),l),[o(l)]}if("plus"==e.type){var c=n();return i(t(e.expr,r),c),i(t(e.expr,c),c),[o(c)]}if("opt"==e.type)return[o(r)].concat(t(e.expr,r));if("range"==e.type){for(var u=r,p=0;p<e.min;p++){var h=n();i(t(e.expr,u),h),u=h}if(-1==e.max)i(t(e.expr,u),u);else for(var d=e.min;d<e.max;d++){var f=n();o(u,f),i(t(e.expr,u),f),u=f}return[o(u)]}if("name"==e.type)return[o(r,null,e.value)]}}(t,0),n()),e;function n(){return e.push([])-1}function o(t,n,o){var i={term:o,to:n};return e[t].push(i),i}function i(t,e){t.forEach((function(t){return t.to=e}))}}(o));return function(t,e){for(var n=0,o=[t];n<o.length;n++){for(var i=o[n],r=!i.validEnd,s=[],a=0;a<i.next.length;a+=2){var l=i.next[a],c=i.next[a+1];s.push(l.name),!r||l.isText||l.hasRequiredAttrs()||(r=!1),-1==o.indexOf(c)&&o.push(c)}r&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position")}}(i,n),i},Ng.prototype.matchType=function(t){for(var e=0;e<this.next.length;e+=2)if(this.next[e]==t)return this.next[e+1];return null},Ng.prototype.matchFragment=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.childCount);for(var o=this,i=e;o&&i<n;i++)o=o.matchType(t.child(i).type);return o},Pg.inlineContent.get=function(){var t=this.next[0];return!!t&&t.isInline},Pg.defaultType.get=function(){for(var t=0;t<this.next.length;t+=2){var e=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}},Ng.prototype.compatible=function(t){for(var e=0;e<this.next.length;e+=2)for(var n=0;n<t.next.length;n+=2)if(this.next[e]==t.next[n])return!0;return!1},Ng.prototype.fillBefore=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=0);var o=[this];return function i(r,s){var a=r.matchFragment(t,n);if(a&&(!e||a.validEnd))return ig.from(s.map((function(t){return t.createAndFill()})));for(var l=0;l<r.next.length;l+=2){var c=r.next[l],u=r.next[l+1];if(!c.isText&&!c.hasRequiredAttrs()&&-1==o.indexOf(u)){o.push(u);var p=i(u,s.concat(c));if(p)return p}}}(this,[])},Ng.prototype.findWrapping=function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var n=this.computeWrapping(t);return this.wrapCache.push(t,n),n},Ng.prototype.computeWrapping=function(t){for(var e=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var o=n.shift(),i=o.match;if(i.matchType(t)){for(var r=[],s=o;s.type;s=s.via)r.push(s.type);return r.reverse()}for(var a=0;a<i.next.length;a+=2){var l=i.next[a];l.isLeaf||l.hasRequiredAttrs()||l.name in e||o.type&&!i.next[a+1].validEnd||(n.push({match:l.contentMatch,type:l,via:o}),e[l.name]=!0)}}},Pg.edgeCount.get=function(){return this.next.length>>1},Ng.prototype.edge=function(t){var e=t<<1;if(e>=this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[e],next:this.next[e+1]}},Ng.prototype.toString=function(){var t=[];return function e(n){t.push(n);for(var o=1;o<n.next.length;o+=2)-1==t.indexOf(n.next[o])&&e(n.next[o])}(this),t.map((function(e,n){for(var o=n+(e.validEnd?"*":" ")+" ",i=0;i<e.next.length;i+=2)o+=(i?", ":"")+e.next[i].name+"->"+t.indexOf(e.next[i+1]);return o})).join("\n")},Object.defineProperties(Ng.prototype,Pg),Ng.empty=new Ng(!0);var Lg=function(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.unshift()},Ig={next:{configurable:!0}};function Dg(t){var e=[];do{e.push(Rg(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function Rg(t){var e=[];do{e.push(zg(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function zg(t){for(var e=function(t){if(t.eat("(")){var e=Dg(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var n=function(t,e){var n=t.nodeTypes,o=n[e];if(o)return[o];var i=[];for(var r in n){var s=n[r];s.groups.indexOf(e)>-1&&i.push(s)}return 0==i.length&&t.err("No node type or group '"+e+"' found"),i}(t,t.next).map((function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}}));return t.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}t.err("Unexpected token '"+t.next+"'")}(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=$g(t,e)}return e}function Bg(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function $g(t,e){var n=Bg(t),o=n;return t.eat(",")&&(o="}"!=t.next?Bg(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:o,expr:e}}function jg(t,e){return e-t}function Vg(t,e){var n=[];return function e(o){var i=t[o];if(1==i.length&&!i[0].term)return e(i[0].to);n.push(o);for(var r=0;r<i.length;r++){var s=i[r],a=s.term,l=s.to;a||-1!=n.indexOf(l)||e(l)}}(e),n.sort(jg)}function Zg(t){var e=Object.create(null);for(var n in t){var o=t[n];if(!o.hasDefault)return null;e[n]=o.default}return e}function Fg(t,e){var n=Object.create(null);for(var o in t){var i=e&&e[o];if(void 0===i){var r=t[o];if(!r.hasDefault)throw new RangeError("No value supplied for attribute "+o);i=r.default}n[o]=i}return n}function Hg(t){var e=Object.create(null);if(t)for(var n in t)e[n]=new qg(t[n]);return e}Ig.next.get=function(){return this.tokens[this.pos]},Lg.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)},Lg.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")},Object.defineProperties(Lg.prototype,Ig);var Wg=function(t,e,n){this.name=t,this.schema=e,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=Hg(n.attrs),this.defaultAttrs=Zg(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t},Ug={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};Ug.isInline.get=function(){return!this.isBlock},Ug.isTextblock.get=function(){return this.isBlock&&this.inlineContent},Ug.isLeaf.get=function(){return this.contentMatch==Ng.empty},Ug.isAtom.get=function(){return this.isLeaf||this.spec.atom},Wg.prototype.hasRequiredAttrs=function(t){for(var e in this.attrs)if(this.attrs[e].isRequired&&(!t||!(e in t)))return!0;return!1},Wg.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)},Wg.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:Fg(this.attrs,t)},Wg.prototype.create=function(t,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Tg(this,this.computeAttrs(t),ig.from(e),cg.setFrom(n))},Wg.prototype.createChecked=function(t,e,n){if(e=ig.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new Tg(this,this.computeAttrs(t),e,cg.setFrom(n))},Wg.prototype.createAndFill=function(t,e,n){if(t=this.computeAttrs(t),(e=ig.from(e)).size){var o=this.contentMatch.fillBefore(e);if(!o)return null;e=o.append(e)}var i=this.contentMatch.matchFragment(e).fillBefore(ig.empty,!0);return i?new Tg(this,t,e.append(i),cg.setFrom(n)):null},Wg.prototype.validContent=function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0},Wg.prototype.allowsMarkType=function(t){return null==this.markSet||this.markSet.indexOf(t)>-1},Wg.prototype.allowsMarks=function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0},Wg.prototype.allowedMarks=function(t){if(null==this.markSet)return t;for(var e,n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:cg.empty:t},Wg.compile=function(t,e){var n=Object.create(null);t.forEach((function(t,o){return n[t]=new Wg(t,e,o)}));var o=e.spec.topNode||"doc";if(!n[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var i in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(Wg.prototype,Ug);var qg=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},Jg={isRequired:{configurable:!0}};Jg.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(qg.prototype,Jg);var Kg=function(t,e,n,o){this.name=t,this.schema=n,this.spec=o,this.attrs=Hg(o.attrs),this.rank=e,this.excluded=null;var i=Zg(this.attrs);this.instance=i&&new cg(this,i)};Kg.prototype.create=function(t){return!t&&this.instance?this.instance:new cg(this,Fg(this.attrs,t))},Kg.compile=function(t,e){var n=Object.create(null),o=0;return t.forEach((function(t,i){return n[t]=new Kg(t,o++,e,i)})),n},Kg.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t.slice(0,e).concat(t.slice(e+1));return t},Kg.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]},Kg.prototype.excludes=function(t){return this.excluded.indexOf(t)>-1};var Gg=function(t){for(var e in this.spec={},t)this.spec[e]=t[e];this.spec.nodes=og.from(t.nodes),this.spec.marks=og.from(t.marks),this.nodes=Wg.compile(this.spec.nodes,this),this.marks=Kg.compile(this.spec.marks,this);var n=Object.create(null);for(var o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");var i=this.nodes[o],r=i.spec.content||"",s=i.spec.marks;i.contentMatch=n[r]||(n[r]=Ng.parse(r,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.markSet="_"==s?null:s?Xg(this,s.split(" ")):""!=s&&i.inlineContent?null:[]}for(var a in this.marks){var l=this.marks[a],c=l.spec.excludes;l.excluded=null==c?[l]:""==c?[]:Xg(this,c.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function Xg(t,e){for(var n=[],o=0;o<e.length;o++){var i=e[o],r=t.marks[i],s=r;if(r)n.push(r);else for(var a in t.marks){var l=t.marks[a];("_"==i||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[o]+"'")}return n}Gg.prototype.node=function(t,e,n,o){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof Wg))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,o)},Gg.prototype.text=function(t,e){var n=this.nodes.text;return new Eg(n,n.defaultAttrs,t,cg.setFrom(e))},Gg.prototype.mark=function(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)},Gg.prototype.nodeFromJSON=function(t){return Tg.fromJSON(this,t)},Gg.prototype.markFromJSON=function(t){return cg.fromJSON(this,t)},Gg.prototype.nodeType=function(t){var e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e};var Yg=function(t,e){var n=this;this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach((function(t){t.tag?n.tags.push(t):t.style&&n.styles.push(t)}))};Yg.prototype.parse=function(t,e){void 0===e&&(e={});var n=new iy(this,e,!1);return n.addAll(t,null,e.from,e.to),n.finish()},Yg.prototype.parseSlice=function(t,e){void 0===e&&(e={});var n=new iy(this,e,!0);return n.addAll(t,null,e.from,e.to),pg.maxOpen(n.finish())},Yg.prototype.matchTag=function(t,e){for(var n=0;n<this.tags.length;n++){var o=this.tags[n];if(sy(t,o.tag)&&(void 0===o.namespace||t.namespaceURI==o.namespace)&&(!o.context||e.matchesContext(o.context))){if(o.getAttrs){var i=o.getAttrs(t);if(!1===i)continue;o.attrs=i}return o}}},Yg.prototype.matchStyle=function(t,e,n){for(var o=0;o<this.styles.length;o++){var i=this.styles[o];if(!(0!=i.style.indexOf(t)||i.context&&!n.matchesContext(i.context)||i.style.length>t.length&&(61!=i.style.charCodeAt(t.length)||i.style.slice(t.length+1)!=e))){if(i.getAttrs){var r=i.getAttrs(e);if(!1===r)continue;i.attrs=r}return i}}},Yg.schemaRules=function(t){var e=[];function n(t){for(var n=null==t.priority?50:t.priority,o=0;o<e.length;o++){var i=e[o];if((null==i.priority?50:i.priority)<n)break}e.splice(o,0,t)}var o,i=function(e){var o=t.marks[e].spec.parseDOM;o&&o.forEach((function(t){n(t=ay(t)),t.mark=e}))};for(var r in t.marks)i(r);for(var s in t.nodes)o=void 0,(o=t.nodes[s].spec.parseDOM)&&o.forEach((function(t){n(t=ay(t)),t.node=s}));return e},Yg.fromSchema=function(t){return t.cached.domParser||(t.cached.domParser=new Yg(t,Yg.schemaRules(t)))};var Qg={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ty={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},ey={ol:!0,ul:!0};function ny(t){return(t?1:0)|("full"===t?2:0)}var oy=function(t,e,n,o,i,r){this.type=t,this.attrs=e,this.solid=o,this.match=i||(4&r?null:t.contentMatch),this.options=r,this.content=[],this.marks=n,this.activeMarks=cg.none};oy.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(ig.from(t));if(!e){var n,o=this.type.contentMatch;return(n=o.findWrapping(t.type))?(this.match=o,n):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)},oy.prototype.finish=function(t){if(!(1&this.options)){var e,n=this.content[this.content.length-1];n&&n.isText&&(e=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length)))}var o=ig.from(this.content);return!t&&this.match&&(o=o.append(this.match.fillBefore(ig.empty,!0))),this.type?this.type.create(this.attrs,o,this.marks):o};var iy=function(t,e,n){this.parser=t,this.options=e,this.isOpen=n,this.pendingMarks=[];var o,i=e.topNode,r=ny(e.preserveWhitespace)|(n?4:0);o=i?new oy(i.type,i.attrs,cg.none,!0,e.topMatch||i.type.contentMatch,r):new oy(n?null:t.schema.topNodeType,null,cg.none,!0,null,r),this.nodes=[o],this.open=0,this.find=e.findPositions,this.needsBlock=!1},ry={top:{configurable:!0},currentPos:{configurable:!0}};function sy(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function ay(t){var e={};for(var n in t)e[n]=t[n];return e}ry.top.get=function(){return this.nodes[this.open]},iy.prototype.addDOM=function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style"),n=e?this.readStyles(function(t){for(var e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,o=[];e=n.exec(t);)o.push(e[1],e[2].trim());return o}(e)):null;if(null!=n)for(var o=0;o<n.length;o++)this.addPendingMark(n[o]);if(this.addElement(t),null!=n)for(var i=0;i<n.length;i++)this.removePendingMark(n[i])}},iy.prototype.addTextNode=function(t){var e=t.nodeValue,n=this.top;if((n.type?n.type.inlineContent:n.content.length&&n.content[0].isInline)||/[^ \t\r\n\u000c]/.test(e)){if(1&n.options)2&n.options||(e=e.replace(/\r?\n|\r/g," "));else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var o=n.content[n.content.length-1],i=t.previousSibling;(!o||i&&"BR"==i.nodeName||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)},iy.prototype.addElement=function(t){var e=t.nodeName.toLowerCase();ey.hasOwnProperty(e)&&function(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var o=1==e.nodeType?e.nodeName.toLowerCase():null;o&&ey.hasOwnProperty(o)&&n?(n.appendChild(e),e=n):"li"==o?n=e:o&&(n=null)}}(t);var n=this.options.ruleFromNode&&this.options.ruleFromNode(t)||this.parser.matchTag(t,this);if(n?n.ignore:ty.hasOwnProperty(e))this.findInside(t);else if(!n||n.skip){n&&n.skip.nodeType&&(t=n.skip);var o,i=this.top,r=this.needsBlock;if(Qg.hasOwnProperty(e))o=!0,i.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),o&&this.sync(i),this.needsBlock=r}else this.addElementByRule(t,n)},iy.prototype.leafFallback=function(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))},iy.prototype.readStyles=function(t){for(var e=cg.none,n=0;n<t.length;n+=2){var o=this.parser.matchStyle(t[n],t[n+1],this);if(o){if(o.ignore)return null;e=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(e)}}return e},iy.prototype.addElementByRule=function(t,e){var n,o,i,r=this;e.node?(o=this.parser.schema.nodes[e.node]).isLeaf?this.insertNode(o.create(e.attrs))||this.leafFallback(t):n=this.enter(o,e.attrs,e.preserveWhitespace):(i=this.parser.schema.marks[e.mark].create(e.attrs),this.addPendingMark(i));var s=this.top;if(o&&o.isLeaf)this.findInside(t);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((function(t){return r.insertNode(t)}));else{var a=e.contentElement;"string"==typeof a?a=t.querySelector(a):"function"==typeof a&&(a=a(t)),a||(a=t),this.findAround(t,a,!0),this.addAll(a,n)}n&&(this.sync(s),this.open--),i&&this.removePendingMark(i)},iy.prototype.addAll=function(t,e,n,o){for(var i=n||0,r=n?t.childNodes[n]:t.firstChild,s=null==o?null:t.childNodes[o];r!=s;r=r.nextSibling,++i)this.findAtPoint(t,i),this.addDOM(r),e&&Qg.hasOwnProperty(r.nodeName.toLowerCase())&&this.sync(e);this.findAtPoint(t,i)},iy.prototype.findPlace=function(t){for(var e,n,o=this.open;o>=0;o--){var i=this.nodes[o],r=i.findWrapping(t);if(r&&(!e||e.length>r.length)&&(e=r,n=i,!r.length))break;if(i.solid)break}if(!e)return!1;this.sync(n);for(var s=0;s<e.length;s++)this.enterInner(e[s],null,!1);return!0},iy.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var n=this.top;this.applyPendingMarks(n),n.match&&(n.match=n.match.matchType(t.type));for(var o=n.activeMarks,i=0;i<t.marks.length;i++)n.type&&!n.type.allowsMarkType(t.marks[i].type)||(o=t.marks[i].addToSet(o));return n.content.push(t.mark(o)),!0}return!1},iy.prototype.applyPendingMarks=function(t){for(var e=0;e<this.pendingMarks.length;e++){var n=this.pendingMarks[e];t.type&&!t.type.allowsMarkType(n.type)||n.isInSet(t.activeMarks)||(t.activeMarks=n.addToSet(t.activeMarks),this.pendingMarks.splice(e--,1))}},iy.prototype.enter=function(t,e,n){var o=this.findPlace(t.create(e));return o&&(this.applyPendingMarks(this.top),this.enterInner(t,e,!0,n)),o},iy.prototype.enterInner=function(t,e,n,o){this.closeExtra();var i=this.top;i.match=i.match&&i.match.matchType(t,e);var r=null==o?-5&i.options:ny(o);4&i.options&&0==i.content.length&&(r|=4),this.nodes.push(new oy(t,e,i.activeMarks,n,null,r)),this.open++},iy.prototype.closeExtra=function(t){var e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}},iy.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},iy.prototype.sync=function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return void(this.open=e)},iy.prototype.addPendingMark=function(t){this.pendingMarks.push(t)},iy.prototype.removePendingMark=function(t){var e=this.pendingMarks.lastIndexOf(t);if(e>-1)this.pendingMarks.splice(e,1);else{var n=this.top;n.activeMarks=t.removeFromSet(n.activeMarks)}},ry.currentPos.get=function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var n=this.nodes[e].content,o=n.length-1;o>=0;o--)t+=n[o].nodeSize;e&&t++}return t},iy.prototype.findAtPoint=function(t,e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)},iy.prototype.findInside=function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)},iy.prototype.findAround=function(t,e,n){if(t!=e&&this.find)for(var o=0;o<this.find.length;o++)null==this.find[o].pos&&1==t.nodeType&&t.contains(this.find[o].node)&&e.compareDocumentPosition(this.find[o].node)&(n?2:4)&&(this.find[o].pos=this.currentPos)},iy.prototype.findInText=function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))},iy.prototype.matchesContext=function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var n=t.split("/"),o=this.options.context,i=!(this.isOpen||o&&o.parent.type!=this.nodes[0].type),r=-(o?o.depth+1:0)+(i?0:1),s=function(t,a){for(;t>=0;t--){var l=n[t];if(""==l){if(t==n.length-1||0==t)continue;for(;a>=r;a--)if(s(t-1,a))return!0;return!1}var c=a>0||0==a&&i?e.nodes[a].type:o&&a>=r?o.node(a-r).type:null;if(!c||c.name!=l&&-1==c.groups.indexOf(l))return!1;a--}return!0};return s(n.length-1,this.open)},iy.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var o in this.parser.schema.nodes){var i=this.parser.schema.nodes[o];if(i.isTextblock&&i.defaultAttrs)return i}},Object.defineProperties(iy.prototype,ry);var ly=function(t,e){this.nodes=t||{},this.marks=e||{}};function cy(t){var e={};for(var n in t){var o=t[n].spec.toDOM;o&&(e[n]=o)}return e}function uy(t){return t.document||window.document}ly.prototype.serializeFragment=function(t,e,n){var o=this;void 0===e&&(e={}),n||(n=uy(e).createDocumentFragment());var i=n,r=null;return t.forEach((function(t){if(r||t.marks.length){r||(r=[]);for(var n=0,s=0;n<r.length&&s<t.marks.length;){var a=t.marks[s];if(o.marks[a.type.name]){if(!a.eq(r[n])||!1===a.type.spec.spanning)break;n+=2,s++}else s++}for(;n<r.length;)i=r.pop(),r.pop();for(;s<t.marks.length;){var l=t.marks[s++],c=o.serializeMark(l,t.isInline,e);c&&(r.push(l,i),i.appendChild(c.dom),i=c.contentDOM||c.dom)}}i.appendChild(o.serializeNode(t,e))})),n},ly.prototype.serializeNode=function(t,e){void 0===e&&(e={});var n=ly.renderSpec(uy(e),this.nodes[t.type.name](t)),o=n.dom,i=n.contentDOM;if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");e.onContent?e.onContent(t,i,e):this.serializeFragment(t.content,e,i)}return o},ly.prototype.serializeNodeAndMarks=function(t,e){void 0===e&&(e={});for(var n=this.serializeNode(t,e),o=t.marks.length-1;o>=0;o--){var i=this.serializeMark(t.marks[o],t.isInline,e);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n},ly.prototype.serializeMark=function(t,e,n){void 0===n&&(n={});var o=this.marks[t.type.name];return o&&ly.renderSpec(uy(n),o(t,e))},ly.renderSpec=function(t,e){if("string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};var n=t.createElement(e[0]),o=null,i=e[1],r=1;if(i&&"object"==typeof i&&null==i.nodeType&&!Array.isArray(i))for(var s in r=2,i)null!=i[s]&&n.setAttribute(s,i[s]);for(var a=r;a<e.length;a++){var l=e[a];if(0===l){if(a<e.length-1||a>r)throw new RangeError("Content hole must be the only child of its parent node");return{dom:n,contentDOM:n}}var c=ly.renderSpec(t,l),u=c.dom,p=c.contentDOM;if(n.appendChild(u),p){if(o)throw new RangeError("Multiple content holes");o=p}}return{dom:n,contentDOM:o}},ly.fromSchema=function(t){return t.cached.domSerializer||(t.cached.domSerializer=new ly(this.nodesFromSchema(t),this.marksFromSchema(t)))},ly.nodesFromSchema=function(t){var e=cy(t.nodes);return e.text||(e.text=function(t){return t.text}),e},ly.marksFromSchema=function(t){return cy(t.marks)};var py=Object.freeze({__proto__:null,ContentMatch:Ng,DOMParser:Yg,DOMSerializer:ly,Fragment:ig,Mark:cg,MarkType:Kg,Node:Tg,NodeRange:kg,NodeType:Wg,ReplaceError:ug,ResolvedPos:bg,Schema:Gg,Slice:pg}),hy=Math.pow(2,16);function dy(t){return 65535&t}var fy=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=null),this.pos=t,this.deleted=e,this.recover=n},my=function(t,e){void 0===e&&(e=!1),this.ranges=t,this.inverted=e};my.prototype.recover=function(t){var e=0,n=dy(t);if(!this.inverted)for(var o=0;o<n;o++)e+=this.ranges[3*o+2]-this.ranges[3*o+1];return this.ranges[3*n]+e+function(t){return(t-(65535&t))/hy}(t)},my.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},my.prototype.map=function(t,e){return void 0===e&&(e=1),this._map(t,e,!0)},my.prototype._map=function(t,e,n){for(var o=0,i=this.inverted?2:1,r=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?o:0);if(a>t)break;var l=this.ranges[s+i],c=this.ranges[s+r],u=a+l;if(t<=u){var p=a+o+((l?t==a?-1:t==u?1:e:e)<0?0:c);return n?p:new fy(p,e<0?t!=a:t!=u,s/3+(t-a)*hy)}o+=c-l}return n?t+o:new fy(t+o)},my.prototype.touches=function(t,e){for(var n=0,o=dy(e),i=this.inverted?2:1,r=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?n:0);if(a>t)break;var l=this.ranges[s+i];if(t<=a+l&&s==3*o)return!0;n+=this.ranges[s+r]-l}return!1},my.prototype.forEach=function(t){for(var e=this.inverted?2:1,n=this.inverted?1:2,o=0,i=0;o<this.ranges.length;o+=3){var r=this.ranges[o],s=r-(this.inverted?i:0),a=r+(this.inverted?0:i),l=this.ranges[o+e],c=this.ranges[o+n];t(s,s+l,a,a+c),i+=c-l}},my.prototype.invert=function(){return new my(this.ranges,!this.inverted)},my.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},my.offset=function(t){return 0==t?my.empty:new my(t<0?[0,-t,0]:[0,0,t])},my.empty=new my([]);var vy=function(t,e,n,o){this.maps=t||[],this.from=n||0,this.to=null==o?this.maps.length:o,this.mirror=e};function gy(t){var e=Error.call(this,t);return e.__proto__=gy.prototype,e}vy.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.maps.length),new vy(this.maps,this.mirror,t,e)},vy.prototype.copy=function(){return new vy(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},vy.prototype.appendMap=function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)},vy.prototype.appendMapping=function(t){for(var e=0,n=this.maps.length;e<t.maps.length;e++){var o=t.getMirror(e);this.appendMap(t.maps[e],null!=o&&o<e?n+o:null)}},vy.prototype.getMirror=function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]},vy.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)},vy.prototype.appendMappingInverted=function(t){for(var e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){var o=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=o&&o>e?n-o-1:null)}},vy.prototype.invert=function(){var t=new vy;return t.appendMappingInverted(this),t},vy.prototype.map=function(t,e){if(void 0===e&&(e=1),this.mirror)return this._map(t,e,!0);for(var n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t},vy.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},vy.prototype._map=function(t,e,n){for(var o=!1,i=null,r=this.from;r<this.to;r++){var s=this.maps[r],a=i&&i[r];if(null!=a&&s.touches(t,a))t=s.recover(a);else{var l=s.mapResult(t,e);if(null!=l.recover){var c=this.getMirror(r);if(null!=c&&c>r&&c<this.to){if(l.deleted){r=c,t=this.maps[c].recover(l.recover);continue}(i||(i=Object.create(null)))[c]=l.recover}}l.deleted&&(o=!0),t=l.pos}}return n?t:new fy(t,o)},gy.prototype=Object.create(Error.prototype),gy.prototype.constructor=gy,gy.prototype.name="TransformError";var yy=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new vy},by={before:{configurable:!0},docChanged:{configurable:!0}};function _y(){throw new Error("Override me")}by.before.get=function(){return this.docs.length?this.docs[0]:this.doc},yy.prototype.step=function(t){var e=this.maybeStep(t);if(e.failed)throw new gy(e.failed);return this},yy.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e},by.docChanged.get=function(){return this.steps.length>0},yy.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e},Object.defineProperties(yy.prototype,by);var wy=Object.create(null),xy=function(){};xy.prototype.apply=function(t){return _y()},xy.prototype.getMap=function(){return my.empty},xy.prototype.invert=function(t){return _y()},xy.prototype.map=function(t){return _y()},xy.prototype.merge=function(t){return null},xy.prototype.toJSON=function(){return _y()},xy.fromJSON=function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=wy[e.stepType];if(!n)throw new RangeError("No step type "+e.stepType+" defined");return n.fromJSON(t,e)},xy.jsonID=function(t,e){if(t in wy)throw new RangeError("Duplicate use of step JSON ID "+t);return wy[t]=e,e.prototype.jsonID=t,e};var Sy=function(t,e){this.doc=t,this.failed=e};Sy.ok=function(t){return new Sy(t,null)},Sy.fail=function(t){return new Sy(null,t)},Sy.fromReplace=function(t,e,n,o){try{return Sy.ok(t.replace(e,n,o))}catch(t){if(t instanceof ug)return Sy.fail(t.message);throw t}};var ky=function(t){function e(e,n,o,i){t.call(this),this.from=e,this.to=n,this.slice=o,this.structure=!!i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){return this.structure&&Oy(t,this.from,this.to)?Sy.fail("Structure replace would overwrite content"):Sy.fromReplace(t,this.from,this.to,this.slice)},e.prototype.getMap=function(){return new my([this.from,this.to-this.from,this.slice.size])},e.prototype.invert=function(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))},e.prototype.map=function(t){var n=t.mapResult(this.from,1),o=t.mapResult(this.to,-1);return n.deleted&&o.deleted?null:new e(n.pos,Math.max(n.pos,o.pos),this.slice)},e.prototype.merge=function(t){if(!(t instanceof e)||t.structure!=this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;var n=this.slice.size+t.slice.size==0?pg.empty:new pg(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,n,this.structure)}var o=this.slice.size+t.slice.size==0?pg.empty:new pg(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),o,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(n.from,n.to,pg.fromJSON(t,n.slice),!!n.structure)},e}(xy);xy.jsonID("replace",ky);var Cy=function(t){function e(e,n,o,i,r,s,a){t.call(this),this.from=e,this.to=n,this.gapFrom=o,this.gapTo=i,this.slice=r,this.insert=s,this.structure=!!a}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){if(this.structure&&(Oy(t,this.from,this.gapFrom)||Oy(t,this.gapTo,this.to)))return Sy.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return Sy.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,e.content);return n?Sy.fromReplace(t,this.from,this.to,n):Sy.fail("Content does not fit in gap")},e.prototype.getMap=function(){return new my([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},e.prototype.invert=function(t){var n=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),o=t.mapResult(this.to,-1),i=t.map(this.gapFrom,-1),r=t.map(this.gapTo,1);return n.deleted&&o.deleted||i<n.pos||r>o.pos?null:new e(n.pos,o.pos,i,r,this.slice,this.insert,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(n.from,n.to,n.gapFrom,n.gapTo,pg.fromJSON(t,n.slice),n.insert,!!n.structure)},e}(xy);function Oy(t,e,n){for(var o=t.resolve(e),i=n-e,r=o.depth;i>0&&r>0&&o.indexAfter(r)==o.node(r).childCount;)r--,i--;if(i>0)for(var s=o.node(r).maybeChild(o.indexAfter(r));i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}return!1}function Ty(t,e,n){return(0==e||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function My(t){for(var e=t.parent.content.cutByIndex(t.startIndex,t.endIndex),n=t.depth;;--n){var o=t.$from.node(n),i=t.$from.index(n),r=t.$to.indexAfter(n);if(n<t.depth&&o.canReplace(i,r,e))return n;if(0==n||o.type.spec.isolating||!Ty(o,i,r))break}}function Ey(t,e,n,o){void 0===n&&(n=1);var i=t.resolve(e),r=i.depth-n,s=o&&o[o.length-1]||i.parent;if(r<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(var a=i.depth-1,l=n-2;a>r;a--,l--){var c=i.node(a),u=i.index(a);if(c.type.spec.isolating)return!1;var p=c.content.cutByIndex(u,c.childCount),h=o&&o[l]||c;if(h!=c&&(p=p.replaceChild(0,h.type.create(h.attrs))),!c.canReplace(u+1,c.childCount)||!h.type.validContent(p))return!1}var d=i.indexAfter(r),f=o&&o[0];return i.node(r).canReplaceWith(d,d,f?f.type:i.node(r+1).type)}function Ay(t,e){var n,o,i=t.resolve(e),r=i.index();return n=i.nodeBefore,o=i.nodeAfter,n&&o&&!n.isLeaf&&n.canAppend(o)&&i.parent.canReplace(r,r+1)}function Ny(t,e,n){for(var o=[],i=0;i<t.childCount;i++){var r=t.child(i);r.content.size&&(r=r.copy(Ny(r.content,e,r))),r.isInline&&(r=e(r,n,i)),o.push(r)}return ig.fromArray(o)}xy.jsonID("replaceAround",Cy),yy.prototype.lift=function(t,e){for(var n=t.$from,o=t.$to,i=t.depth,r=n.before(i+1),s=o.after(i+1),a=r,l=s,c=ig.empty,u=0,p=i,h=!1;p>e;p--)h||n.index(p)>0?(h=!0,c=ig.from(n.node(p).copy(c)),u++):a--;for(var d=ig.empty,f=0,m=i,v=!1;m>e;m--)v||o.after(m+1)<o.end(m)?(v=!0,d=ig.from(o.node(m).copy(d)),f++):l++;return this.step(new Cy(a,l,r,s,new pg(c.append(d),u,f),c.size-u,!0))},yy.prototype.wrap=function(t,e){for(var n=ig.empty,o=e.length-1;o>=0;o--)n=ig.from(e[o].type.create(e[o].attrs,n));var i=t.start,r=t.end;return this.step(new Cy(i,r,i,r,new pg(n,0,0),e.length,!0))},yy.prototype.setBlockType=function(t,e,n,o){var i=this;if(void 0===e&&(e=t),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var r=this.steps.length;return this.doc.nodesBetween(t,e,(function(t,e){if(t.isTextblock&&!t.hasMarkup(n,o)&&function(t,e,n){var o=t.resolve(e),i=o.index();return o.parent.canReplaceWith(i,i+1,n)}(i.doc,i.mapping.slice(r).map(e),n)){i.clearIncompatible(i.mapping.slice(r).map(e,1),n);var s=i.mapping.slice(r),a=s.map(e,1),l=s.map(e+t.nodeSize,1);return i.step(new Cy(a,l,a+1,l-1,new pg(ig.from(n.create(o,null,t.marks)),0,0),1,!0)),!1}})),this},yy.prototype.setNodeMarkup=function(t,e,n,o){var i=this.doc.nodeAt(t);if(!i)throw new RangeError("No node at given position");e||(e=i.type);var r=e.create(n,null,o||i.marks);if(i.isLeaf)return this.replaceWith(t,t+i.nodeSize,r);if(!e.validContent(i.content))throw new RangeError("Invalid content for node type "+e.name);return this.step(new Cy(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new pg(ig.from(r),0,0),1,!0))},yy.prototype.split=function(t,e,n){void 0===e&&(e=1);for(var o=this.doc.resolve(t),i=ig.empty,r=ig.empty,s=o.depth,a=o.depth-e,l=e-1;s>a;s--,l--){i=ig.from(o.node(s).copy(i));var c=n&&n[l];r=ig.from(c?c.type.create(c.attrs,r):o.node(s).copy(r))}return this.step(new ky(t,t,new pg(i.append(r),e,e),!0))},yy.prototype.join=function(t,e){void 0===e&&(e=1);var n=new ky(t-e,t+e,pg.empty,!0);return this.step(n)};var Py=function(t){function e(e,n,o){t.call(this),this.from=e,this.to=n,this.mark=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),o=t.resolve(this.from),i=o.node(o.sharedDepth(this.to)),r=new pg(Ny(n.content,(function(t,n){return n.type.allowsMarkType(e.mark.type)?t.mark(e.mark.addToSet(t.marks)):t}),i),n.openStart,n.openEnd);return Sy.fromReplace(t,this.from,this.to,r)},e.prototype.invert=function(){return new Ly(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),o=t.mapResult(this.to,-1);return n.deleted&&o.deleted||n.pos>=o.pos?null:new e(n.pos,o.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(xy);xy.jsonID("addMark",Py);var Ly=function(t){function e(e,n,o){t.call(this),this.from=e,this.to=n,this.mark=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),o=new pg(Ny(n.content,(function(t){return t.mark(e.mark.removeFromSet(t.marks))})),n.openStart,n.openEnd);return Sy.fromReplace(t,this.from,this.to,o)},e.prototype.invert=function(){return new Py(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),o=t.mapResult(this.to,-1);return n.deleted&&o.deleted||n.pos>=o.pos?null:new e(n.pos,o.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(xy);function Iy(t,e,n,o,i,r,s){var a,l=t.childCount,c=l-(s>0?1:0),u=r<0?e:n.node(i);a=r<0?u.contentMatchAt(c):1==l&&s>0?u.contentMatchAt(r?n.index(i):n.indexAfter(i)):u.contentMatchAt(n.indexAfter(i)).matchFragment(t,l>0&&r?1:0,c);var p=o.node(i);if(s>0&&i<o.depth){var h=p.content.cutByIndex(o.indexAfter(i)).addToStart(t.lastChild),d=a.fillBefore(h,!0);if(d&&d.size&&r>0&&1==l&&(d=null),d){var f=Iy(t.lastChild.content,t.lastChild,n,o,i+1,1==l?r-1:-1,s-1);if(f){var m=t.lastChild.copy(f);return d.size?t.cutByIndex(0,l-1).append(d).addToEnd(m):t.replaceChild(l-1,m)}}}s>0&&(a=a.matchType((1==l&&r>0?n.node(i+1):t.lastChild).type));var v=o.index(i);if(v==p.childCount&&!p.type.compatibleContent(e.type))return null;for(var g=a.fillBefore(p.content,!0,v),y=v;g&&y<p.content.childCount;y++)u.type.allowsMarks(p.content.child(y).marks)||(g=null);if(!g)return null;if(s>0){var b=function t(e,n,o,i,r){var s,a=e.content,l=a.childCount;if(s=r>=0?o.node(i).contentMatchAt(o.indexAfter(i)).matchFragment(a,r>0?1:0,l):e.contentMatchAt(l),n>0){var c=t(a.lastChild,n-1,o,i+1,1==l?r-1:-1);a=a.replaceChild(l-1,c)}return e.copy(a.append(s.fillBefore(ig.empty,!0)))}(t.lastChild,s-1,n,i+1,1==l?r-1:-1);t=t.replaceChild(l-1,b)}return t=t.append(g),o.depth>i&&(t=t.addToEnd(function t(e,n){var o=e.node(n),i=o.contentMatchAt(0).fillBefore(o.content,!0,e.index(n));return e.depth>n&&(i=i.addToEnd(t(e,n+1))),o.copy(i)}(o,i+1))),t}function Dy(t,e,n){var o=Iy(n.content,t.node(0),t,e,0,n.openStart,n.openEnd);return o?function(t,e,n){for(;e>0&&n>0&&1==t.childCount;)t=t.firstChild.content,e--,n--;return new pg(t,e,n)}(o,n.openStart,e.depth):null}function Ry(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}xy.jsonID("removeMark",Ly),yy.prototype.addMark=function(t,e,n){var o=this,i=[],r=[],s=null,a=null;return this.doc.nodesBetween(t,e,(function(o,l,c){if(o.isInline){var u=o.marks;if(!n.isInSet(u)&&c.type.allowsMarkType(n.type)){for(var p=Math.max(l,t),h=Math.min(l+o.nodeSize,e),d=n.addToSet(u),f=0;f<u.length;f++)u[f].isInSet(d)||(s&&s.to==p&&s.mark.eq(u[f])?s.to=h:i.push(s=new Ly(p,h,u[f])));a&&a.to==p?a.to=h:r.push(a=new Py(p,h,n))}}})),i.forEach((function(t){return o.step(t)})),r.forEach((function(t){return o.step(t)})),this},yy.prototype.removeMark=function(t,e,n){var o=this;void 0===n&&(n=null);var i=[],r=0;return this.doc.nodesBetween(t,e,(function(o,s){if(o.isInline){r++;var a=null;if(n instanceof Kg){var l=n.isInSet(o.marks);l&&(a=[l])}else n?n.isInSet(o.marks)&&(a=[n]):a=o.marks;if(a&&a.length)for(var c=Math.min(s+o.nodeSize,e),u=0;u<a.length;u++){for(var p=a[u],h=void 0,d=0;d<i.length;d++){var f=i[d];f.step==r-1&&p.eq(i[d].style)&&(h=f)}h?(h.to=c,h.step=r):i.push({style:p,from:Math.max(s,t),to:c,step:r})}}})),i.forEach((function(t){return o.step(new Ly(t.from,t.to,t.style))})),this},yy.prototype.clearIncompatible=function(t,e,n){void 0===n&&(n=e.contentMatch);for(var o=this.doc.nodeAt(t),i=[],r=t+1,s=0;s<o.childCount;s++){var a=o.child(s),l=r+a.nodeSize,c=n.matchType(a.type,a.attrs);if(c){n=c;for(var u=0;u<a.marks.length;u++)e.allowsMarkType(a.marks[u].type)||this.step(new Ly(r,l,a.marks[u]))}else i.push(new ky(r,l,pg.empty));r=l}if(!n.validEnd){var p=n.fillBefore(ig.empty,!0);this.replace(r,r,new pg(p,0,0))}for(var h=i.length-1;h>=0;h--)this.step(i[h]);return this},yy.prototype.replace=function(t,e,n){void 0===e&&(e=t),void 0===n&&(n=pg.empty);var o=function(t,e,n,o){if(void 0===n&&(n=e),void 0===o&&(o=pg.empty),e==n&&!o.size)return null;var i=t.resolve(e),r=t.resolve(n);if(Ry(i,r,o))return new ky(e,n,o);var s=function(t,e){var n=function t(e,n,o,i){var r=ig.empty,s=0,a=o[n];if(e.depth>n){var l=t(e,n+1,o,i||a);s=l.openEnd+1,r=ig.from(e.node(n+1).copy(l.content))}return a&&(r=r.append(a.content),s=a.openEnd),i&&(r=r.append(e.node(n).contentMatchAt(e.indexAfter(n)).fillBefore(ig.empty,!0)),s=0),{content:r,openEnd:s}}(t,0,e,!1),o=n.content,i=n.openEnd;return new pg(o,t.depth,i||0)}(i,function(t,e){for(var n=new zy(t),o=1;e.size&&o<=3;o++){var i=n.placeSlice(e.content,e.openStart,e.openEnd,o);3==o&&i!=e&&i.size&&(o=0),e=i}for(;n.open.length;)n.closeNode();return n.placed}(i,o)),a=Dy(i,r,s);if(!a)return null;if(s.size!=a.size&&function(t,e,n){if(!e.parent.isTextblock)return!1;var o,i=n.openEnd?function(t,e){for(var n=1;n<e;n++)t=t.lastChild.content;return t.lastChild}(n.content,n.openEnd):t.node(t.depth-(n.openStart-n.openEnd));if(!i.isTextblock)return!1;for(var r=e.index();r<e.parent.childCount;r++)if(!i.type.allowsMarks(e.parent.child(r).marks))return!1;return n.openEnd?o=i.contentMatchAt(i.childCount):(o=i.contentMatchAt(i.childCount),n.size&&(o=o.matchFragment(n.content,n.openStart?1:0))),(o=o.matchFragment(e.parent.content,e.index()))&&o.validEnd}(i,r,s)){for(var l=r.depth,c=r.after(l);l>1&&c==r.end(--l);)++c;var u=Dy(i,t.resolve(c),s);if(u)return new Cy(e,c,n,r.end(),u,s.size)}return a.size||e!=n?new ky(e,n,a):null}(this.doc,t,e,n);return o&&this.step(o),this},yy.prototype.replaceWith=function(t,e,n){return this.replace(t,e,new pg(ig.from(n),0,0))},yy.prototype.delete=function(t,e){return this.replace(t,e,pg.empty)},yy.prototype.insert=function(t,e){return this.replaceWith(t,t,e)};var zy=function(t){this.open=[];for(var e=0;e<=t.depth;e++){var n=t.node(e),o=n.contentMatchAt(t.indexAfter(e));this.open.push({parent:n,match:o,content:ig.empty,wrapper:!1,openEnd:0,depth:e})}this.placed=[]};function By(t,e,n){var o=t.content;if(e>1){var i=By(t.firstChild,e-1,1==t.childCount?n-1:0);o=t.content.replaceChild(0,i)}var r=t.type.contentMatch.fillBefore(o,0==n);return t.copy(r.append(o))}function $y(t,e,n,o,i){if(e<n){var r=t.firstChild;t=t.replaceChild(0,r.copy($y(r.content,e+1,n,o,r)))}if(e>o){var s=i.contentMatchAt(0),a=s.fillBefore(t).append(t);t=a.append(s.matchFragment(a).fillBefore(ig.empty,!0))}return t}function jy(t,e){for(var n=[],o=Math.min(t.depth,e.depth);o>=0;o--){var i=t.start(o);if(i<t.pos-(t.depth-o)||e.end(o)>e.pos+(e.depth-o)||t.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;i==e.start(o)&&n.push(o)}return n}zy.prototype.placeSlice=function(t,e,n,o,i){if(e>0){var r=t.firstChild,s=this.placeSlice(r.content,Math.max(0,e-1),n&&1==t.childCount?n-1:0,o,r);s.content!=r.content&&(s.content.size?(t=t.replaceChild(0,r.copy(s.content)),e=s.openStart+1):(1==t.childCount&&(n=0),t=t.cutByIndex(1),e=0))}var a=this.placeContent(t,e,n,o,i);if(o>2&&a.size&&0==e){var l=a.content.firstChild,c=1==a.content.childCount;this.placeContent(l.content,0,n&&c?n-1:0,o,l),a=c?ig.empty:new pg(a.content.cutByIndex(1),0,n)}return a},zy.prototype.placeContent=function(t,e,n,o,i){for(var r=0;r<t.childCount;r++){for(var s=t.child(r),a=!1,l=r==t.childCount-1,c=this.open.length-1;c>=0;c--){var u=this.open[c],p=void 0;if(o>1&&(p=u.match.findWrapping(s.type))&&(!i||!p.length||p[p.length-1]!=i.type)){for(;this.open.length-1>c;)this.closeNode();for(var h=0;h<p.length;h++)u.match=u.match.matchType(p[h]),c++,u={parent:p[h].create(),match:p[h].contentMatch,content:ig.empty,wrapper:!0,openEnd:0,depth:c+h},this.open.push(u)}var d=u.match.matchType(s.type);if(!d){var f=u.match.fillBefore(ig.from(s));if(!f){if(i&&u.match.matchType(i.type))break;continue}for(var m=0;m<f.childCount;m++){var v=f.child(m);this.addNode(u,v,0),d=u.match.matchFragment(v)}}for(;this.open.length-1>c;)this.closeNode();s=s.mark(u.parent.type.allowedMarks(s.marks)),e&&(s=By(s,e,l?n:0),e=0),this.addNode(u,s,l?n:0),u.match=d,l&&(n=0),a=!0;break}if(!a)break}return this.open.length>1&&(r>0&&r==t.childCount||i&&this.open[this.open.length-1].parent.type==i.type)&&this.closeNode(),new pg(t.cutByIndex(r),e,n)},zy.prototype.addNode=function(t,e,n){var o,i;t.content=(o=t.content,i=t.openEnd,i?o.replaceChild(o.childCount-1,function t(e,n){var o=e.content;if(n>1){var i=t(e.lastChild,n-1);o=e.content.replaceChild(e.childCount-1,i)}var r=e.contentMatchAt(e.childCount).fillBefore(ig.empty,!0);return e.copy(o.append(r))}(o.lastChild,i)):o).addToEnd(e),t.openEnd=n},zy.prototype.closeNode=function(){var t=this.open.pop();0==t.content.size||(t.wrapper?this.addNode(this.open[this.open.length-1],t.parent.copy(t.content),t.openEnd+1):this.placed[t.depth]={depth:t.depth,content:t.content,openEnd:t.openEnd})},yy.prototype.replaceRange=function(t,e,n){if(!n.size)return this.deleteRange(t,e);var o=this.doc.resolve(t),i=this.doc.resolve(e);if(Ry(o,i,n))return this.step(new ky(t,e,n));var r=jy(o,this.doc.resolve(e));0==r[r.length-1]&&r.pop();var s=-(o.depth+1);r.unshift(s);for(var a=o.depth,l=o.pos-1;a>0;a--,l--){var c=o.node(a).type.spec;if(c.defining||c.isolating)break;r.indexOf(a)>-1?s=a:o.before(a)==l&&r.splice(1,0,-a)}for(var u=r.indexOf(s),p=[],h=n.openStart,d=n.content,f=0;;f++){var m=d.firstChild;if(p.push(m),f==n.openStart)break;d=m.content}h>0&&p[h-1].type.spec.defining&&o.node(u).type!=p[h-1].type?h-=1:h>=2&&p[h-1].isTextblock&&p[h-2].type.spec.defining&&o.node(u).type!=p[h-2].type&&(h-=2);for(var v=n.openStart;v>=0;v--){var g=(v+h+1)%(n.openStart+1),y=p[g];if(y)for(var b=0;b<r.length;b++){var _=r[(b+u)%r.length],w=!0;_<0&&(w=!1,_=-_);var x=o.node(_-1),S=o.index(_-1);if(x.canReplaceWith(S,S,y.type,y.marks))return this.replace(o.before(_),w?i.after(_):e,new pg($y(n.content,0,n.openStart,g),g,n.openEnd))}}for(var k=this.steps.length,C=r.length-1;C>=0&&(this.replace(t,e,n),!(this.steps.length>k));C--){var O=r[C];C<0||(t=o.before(O),e=i.after(O))}return this},yy.prototype.replaceRangeWith=function(t,e,n){if(!n.isInline&&t==e&&this.doc.resolve(t).parent.content.size){var o=function(t,e,n){var o=t.resolve(e);if(o.parent.canReplaceWith(o.index(),o.index(),n))return e;if(0==o.parentOffset)for(var i=o.depth-1;i>=0;i--){var r=o.index(i);if(o.node(i).canReplaceWith(r,r,n))return o.before(i+1);if(r>0)return null}if(o.parentOffset==o.parent.content.size)for(var s=o.depth-1;s>=0;s--){var a=o.indexAfter(s);if(o.node(s).canReplaceWith(a,a,n))return o.after(s+1);if(a<o.node(s).childCount)return null}}(this.doc,t,n.type);null!=o&&(t=e=o)}return this.replaceRange(t,e,new pg(ig.from(n),0,0))},yy.prototype.deleteRange=function(t,e){for(var n=this.doc.resolve(t),o=this.doc.resolve(e),i=jy(n,o),r=0;r<i.length;r++){var s=i[r],a=r==i.length-1;if(a&&0==s||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),o.end(s));if(s>0&&(a||n.node(s-1).canReplace(n.index(s-1),o.indexAfter(s-1))))return this.delete(n.before(s),o.after(s))}for(var l=1;l<=n.depth&&l<=o.depth;l++)if(t-n.start(l)==n.depth-l&&e>n.end(l)&&o.end(l)-e!=o.depth-l)return this.delete(n.before(l),e);return this.delete(t,e)};var Vy=Object.create(null),Zy=function(t,e,n){this.ranges=n||[new Hy(t.min(e),t.max(e))],this.$anchor=t,this.$head=e},Fy={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};Fy.anchor.get=function(){return this.$anchor.pos},Fy.head.get=function(){return this.$head.pos},Fy.from.get=function(){return this.$from.pos},Fy.to.get=function(){return this.$to.pos},Fy.$from.get=function(){return this.ranges[0].$from},Fy.$to.get=function(){return this.ranges[0].$to},Fy.empty.get=function(){for(var t=this.ranges,e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0},Zy.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},Zy.prototype.replace=function(t,e){void 0===e&&(e=pg.empty);for(var n=e.content.lastChild,o=null,i=0;i<e.openEnd;i++)o=n,n=n.lastChild;for(var r=t.steps.length,s=this.ranges,a=0;a<s.length;a++){var l=s[a],c=l.$from,u=l.$to,p=t.mapping.slice(r);t.replaceRange(p.map(c.pos),p.map(u.pos),a?pg.empty:e),0==a&&Yy(t,r,(n?n.isInline:o&&o.isTextblock)?-1:1)}},Zy.prototype.replaceWith=function(t,e){for(var n=t.steps.length,o=this.ranges,i=0;i<o.length;i++){var r=o[i],s=r.$from,a=r.$to,l=t.mapping.slice(n),c=l.map(s.pos),u=l.map(a.pos);i?t.deleteRange(c,u):(t.replaceRangeWith(c,u,e),Yy(t,n,e.isInline?-1:1))}},Zy.findFrom=function(t,e,n){var o=t.parent.inlineContent?new Wy(t):Xy(t.node(0),t.parent,t.pos,t.index(),e,n);if(o)return o;for(var i=t.depth-1;i>=0;i--){var r=e<0?Xy(t.node(0),t.node(i),t.before(i+1),t.index(i),e,n):Xy(t.node(0),t.node(i),t.after(i+1),t.index(i)+1,e,n);if(r)return r}},Zy.near=function(t,e){return void 0===e&&(e=1),this.findFrom(t,e)||this.findFrom(t,-e)||new Ky(t.node(0))},Zy.atStart=function(t){return Xy(t,t,0,0,1)||new Ky(t)},Zy.atEnd=function(t){return Xy(t,t,t.content.size,t.childCount,-1)||new Ky(t)},Zy.fromJSON=function(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=Vy[e.type];if(!n)throw new RangeError("No selection type "+e.type+" defined");return n.fromJSON(t,e)},Zy.jsonID=function(t,e){if(t in Vy)throw new RangeError("Duplicate use of selection JSON ID "+t);return Vy[t]=e,e.prototype.jsonID=t,e},Zy.prototype.getBookmark=function(){return Wy.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(Zy.prototype,Fy),Zy.prototype.visible=!0;var Hy=function(t,e){this.$from=t,this.$to=e},Wy=function(t){function e(e,n){void 0===n&&(n=e),t.call(this,e,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={$cursor:{configurable:!0}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},e.prototype.map=function(n,o){var i=n.resolve(o.map(this.head));if(!i.parent.inlineContent)return t.near(i);var r=n.resolve(o.map(this.anchor));return new e(r.parent.inlineContent?r:i,i)},e.prototype.replace=function(e,n){if(void 0===n&&(n=pg.empty),t.prototype.replace.call(this,e,n),n==pg.empty){var o=this.$from.marksAcross(this.$to);o&&e.ensureMarks(o)}},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor&&t.head==this.head},e.prototype.getBookmark=function(){return new Uy(this.anchor,this.head)},e.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},e.fromJSON=function(t,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new e(t.resolve(n.anchor),t.resolve(n.head))},e.create=function(t,e,n){void 0===n&&(n=e);var o=t.resolve(e);return new this(o,n==e?o:t.resolve(n))},e.between=function(n,o,i){var r=n.pos-o.pos;if(i&&!r||(i=r>=0?1:-1),!o.parent.inlineContent){var s=t.findFrom(o,i,!0)||t.findFrom(o,-i,!0);if(!s)return t.near(o,i);o=s.$head}return n.parent.inlineContent||(0==r||(n=(t.findFrom(n,-i,!0)||t.findFrom(n,i,!0)).$anchor).pos<o.pos!=r<0)&&(n=o),new e(n,o)},Object.defineProperties(e.prototype,n),e}(Zy);Zy.jsonID("text",Wy);var Uy=function(t,e){this.anchor=t,this.head=e};Uy.prototype.map=function(t){return new Uy(t.map(this.anchor),t.map(this.head))},Uy.prototype.resolve=function(t){return Wy.between(t.resolve(this.anchor),t.resolve(this.head))};var qy=function(t){function e(e){var n=e.nodeAfter,o=e.node(0).resolve(e.pos+n.nodeSize);t.call(this,e,o),this.node=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(n,o){var i=o.mapResult(this.anchor),r=i.deleted,s=i.pos,a=n.resolve(s);return r?t.near(a):new e(a)},e.prototype.content=function(){return new pg(ig.from(this.node),0,0)},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor},e.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},e.prototype.getBookmark=function(){return new Jy(this.anchor)},e.fromJSON=function(t,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new e(t.resolve(n.anchor))},e.create=function(t,e){return new this(t.resolve(e))},e.isSelectable=function(t){return!t.isText&&!1!==t.type.spec.selectable},e}(Zy);qy.prototype.visible=!1,Zy.jsonID("node",qy);var Jy=function(t){this.anchor=t};Jy.prototype.map=function(t){var e=t.mapResult(this.anchor),n=e.deleted,o=e.pos;return n?new Uy(o,o):new Jy(o)},Jy.prototype.resolve=function(t){var e=t.resolve(this.anchor),n=e.nodeAfter;return n&&qy.isSelectable(n)?new qy(e):Zy.near(e)};var Ky=function(t){function e(e){t.call(this,e.resolve(0),e.resolve(e.content.size))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toJSON=function(){return{type:"all"}},e.fromJSON=function(t){return new e(t)},e.prototype.map=function(t){return new e(t)},e.prototype.eq=function(t){return t instanceof e},e.prototype.getBookmark=function(){return Gy},e}(Zy);Zy.jsonID("all",Ky);var Gy={map:function(){return this},resolve:function(t){return new Ky(t)}};function Xy(t,e,n,o,i,r){if(e.inlineContent)return Wy.create(t,n);for(var s=o-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){var a=e.child(s);if(a.isAtom){if(!r&&qy.isSelectable(a))return qy.create(t,n-(i<0?a.nodeSize:0))}else{var l=Xy(t,a,n+i,i<0?a.childCount:0,i,r);if(l)return l}n+=a.nodeSize*i}}function Yy(t,e,n){var o=t.steps.length-1;if(!(o<e)){var i,r=t.steps[o];(r instanceof ky||r instanceof Cy)&&(t.mapping.maps[o].forEach((function(t,e,n,o){null==i&&(i=o)})),t.setSelection(Zy.near(t.doc.resolve(i),n)))}}var Qy=function(t){function e(e){t.call(this,e.doc),this.time=Date.now(),this.curSelection=e.selection,this.curSelectionFor=0,this.storedMarks=e.storedMarks,this.updated=0,this.meta=Object.create(null)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},e.prototype.setSelection=function(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},n.selectionSet.get=function(){return(1&this.updated)>0},e.prototype.setStoredMarks=function(t){return this.storedMarks=t,this.updated|=2,this},e.prototype.ensureMarks=function(t){return cg.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this},e.prototype.addStoredMark=function(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))},e.prototype.removeStoredMark=function(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(2&this.updated)>0},e.prototype.addStep=function(e,n){t.prototype.addStep.call(this,e,n),this.updated=-3&this.updated,this.storedMarks=null},e.prototype.setTime=function(t){return this.time=t,this},e.prototype.replaceSelection=function(t){return this.selection.replace(this,t),this},e.prototype.replaceSelectionWith=function(t,e){var n=this.selection;return!1!==e&&(t=t.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||cg.none))),n.replaceWith(this,t),this},e.prototype.deleteSelection=function(){return this.selection.replace(this),this},e.prototype.insertText=function(t,e,n){void 0===n&&(n=e);var o=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(o.text(t),!0):this.deleteSelection();if(!t)return this.deleteRange(e,n);var i=this.storedMarks;if(!i){var r=this.doc.resolve(e);i=n==e?r.marks():r.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(e,n,o.text(t,i)),this.selection.empty||this.setSelection(Zy.near(this.selection.$to)),this},e.prototype.setMeta=function(t,e){return this.meta["string"==typeof t?t:t.key]=e,this},e.prototype.getMeta=function(t){return this.meta["string"==typeof t?t:t.key]},n.isGeneric.get=function(){for(var t in this.meta)return!1;return!0},e.prototype.scrollIntoView=function(){return this.updated|=4,this},n.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(e.prototype,n),e}(yy);function tb(t,e){return e&&t?t.bind(e):t}var eb=function(t,e,n){this.name=t,this.init=tb(e.init,n),this.apply=tb(e.apply,n)},nb=[new eb("doc",{init:function(t){return t.doc||t.schema.topNodeType.createAndFill()},apply:function(t){return t.doc}}),new eb("selection",{init:function(t,e){return t.selection||Zy.atStart(e.doc)},apply:function(t){return t.selection}}),new eb("storedMarks",{init:function(t){return t.storedMarks||null},apply:function(t,e,n,o){return o.selection.$cursor?t.storedMarks:null}}),new eb("scrollToSelection",{init:function(){return 0},apply:function(t,e){return t.scrolledIntoView?e+1:e}})],ob=function(t,e){var n=this;this.schema=t,this.fields=nb.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),e&&e.forEach((function(t){if(n.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");n.plugins.push(t),n.pluginsByKey[t.key]=t,t.spec.state&&n.fields.push(new eb(t.key,t.spec.state,t))}))},ib=function(t){this.config=t},rb={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};rb.schema.get=function(){return this.config.schema},rb.plugins.get=function(){return this.config.plugins},ib.prototype.apply=function(t){return this.applyTransaction(t).state},ib.prototype.filterTransaction=function(t,e){void 0===e&&(e=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=e){var o=this.config.plugins[n];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,t,this))return!1}return!0},ib.prototype.applyTransaction=function(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};for(var e=[t],n=this.applyInner(t),o=null;;){for(var i=!1,r=0;r<this.config.plugins.length;r++){var s=this.config.plugins[r];if(s.spec.appendTransaction){var a=o?o[r].n:0,l=o?o[r].state:this,c=a<e.length&&s.spec.appendTransaction.call(s,a?e.slice(a):e,l,n);if(c&&n.filterTransaction(c,r)){if(c.setMeta("appendedTransaction",t),!o){o=[];for(var u=0;u<this.config.plugins.length;u++)o.push(u<r?{state:n,n:e.length}:{state:this,n:0})}e.push(c),n=n.applyInner(c),i=!0}o&&(o[r]={state:n,n:e.length})}}if(!i)return{state:n,transactions:e}}},ib.prototype.applyInner=function(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var e=new ib(this.config),n=this.config.fields,o=0;o<n.length;o++){var i=n[o];e[i.name]=i.apply(t,this[i.name],this,e)}for(var r=0;r<sb.length;r++)sb[r](this,t,e);return e},rb.tr.get=function(){return new Qy(this)},ib.create=function(t){for(var e=new ob(t.schema||t.doc.type.schema,t.plugins),n=new ib(e),o=0;o<e.fields.length;o++)n[e.fields[o].name]=e.fields[o].init(t,n);return n},ib.prototype.reconfigure=function(t){for(var e=new ob(t.schema||this.schema,t.plugins),n=e.fields,o=new ib(e),i=0;i<n.length;i++){var r=n[i].name;o[r]=this.hasOwnProperty(r)?this[r]:n[i].init(t,o)}return o},ib.prototype.toJSON=function(t){var e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map((function(t){return t.toJSON()}))),t&&"object"==typeof t)for(var n in t){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var o=t[n],i=o.spec.state;i&&i.toJSON&&(e[n]=i.toJSON.call(o,this[o.key]))}return e},ib.fromJSON=function(t,e,n){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");var o=new ob(t.schema,t.plugins),i=new ib(o);return o.fields.forEach((function(o){if("doc"==o.name)i.doc=Tg.fromJSON(t.schema,e.doc);else if("selection"==o.name)i.selection=Zy.fromJSON(i.doc,e.selection);else if("storedMarks"==o.name)e.storedMarks&&(i.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(n)for(var r in n){var s=n[r],a=s.spec.state;if(s.key==o.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(e,r))return void(i[o.name]=a.fromJSON.call(s,t,e[r],i))}i[o.name]=o.init(t,i)}})),i},ib.addApplyListener=function(t){sb.push(t)},ib.removeApplyListener=function(t){var e=sb.indexOf(t);e>-1&&sb.splice(e,1)},Object.defineProperties(ib.prototype,rb);var sb=[],ab=function(t){this.props={},t.props&&function t(e,n,o){for(var i in e){var r=e[i];r instanceof Function?r=r.bind(n):"handleDOMEvents"==i&&(r=t(r,n,{})),o[i]=r}return o}(t.props,this,this.props),this.spec=t,this.key=t.key?t.key.key:cb("plugin")};ab.prototype.getState=function(t){return t[this.key]};var lb=Object.create(null);function cb(t){return t in lb?t+"$"+ ++lb[t]:(lb[t]=0,t+"$")}var ub=function(t){void 0===t&&(t="key"),this.key=cb(t)};ub.prototype.get=function(t){return t.config.pluginsByKey[this.key]},ub.prototype.getState=function(t){return t[this.key]};var pb=Object.freeze({__proto__:null,AllSelection:Ky,EditorState:ib,NodeSelection:qy,Plugin:ab,PluginKey:ub,Selection:Zy,SelectionRange:Hy,TextSelection:Wy,Transaction:Qy});function hb(t,e){return!t.selection.empty&&(e&&e(t.tr.deleteSelection().scrollIntoView()),!0)}function db(t,e){for(;t;t="start"==e?t.firstChild:t.lastChild)if(t.isTextblock)return!0;return!1}function fb(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function mb(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){var n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}function vb(t,e,n){var o,i,r=e.nodeBefore,s=e.nodeAfter;if(r.type.spec.isolating||s.type.spec.isolating)return!1;if(function(t,e,n){var o=e.nodeBefore,i=e.nodeAfter,r=e.index();return!(!(o&&i&&o.type.compatibleContent(i.type))||(!o.content.size&&e.parent.canReplace(r-1,r)?(n&&n(t.tr.delete(e.pos-o.nodeSize,e.pos).scrollIntoView()),0):!e.parent.canReplace(r,r+1)||!i.isTextblock&&!Ay(t.doc,e.pos)||(n&&n(t.tr.clearIncompatible(e.pos,o.type,o.contentMatchAt(o.childCount)).join(e.pos).scrollIntoView()),0)))}(t,e,n))return!0;if(e.parent.canReplace(e.index(),e.index()+1)&&(o=(i=r.contentMatchAt(r.childCount)).findWrapping(s.type))&&i.matchType(o[0]||s.type).validEnd){if(n){for(var a=e.pos+s.nodeSize,l=ig.empty,c=o.length-1;c>=0;c--)l=ig.from(o[c].create(null,l));l=ig.from(r.copy(l));var u=t.tr.step(new Cy(e.pos-1,a,e.pos,a,new pg(l,1,0),o.length,!0)),p=a+2*o.length;Ay(u.doc,p)&&u.join(p),n(u.scrollIntoView())}return!0}var h=Zy.findFrom(e,1),d=h&&h.$from.blockRange(h.$to),f=d&&My(d);return null!=f&&f>=e.depth&&(n&&n(t.tr.lift(d,f).scrollIntoView()),!0)}function gb(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return function(e,n,o){for(var i=0;i<t.length;i++)if(t[i](e,n,o))return!0;return!1}}var yb=gb(hb,(function(t,e,n){var o=t.selection.$cursor;if(!o||(n?!n.endOfTextblock("backward",t):o.parentOffset>0))return!1;var i=fb(o);if(!i){var r=o.blockRange(),s=r&&My(r);return null!=s&&(e&&e(t.tr.lift(r,s).scrollIntoView()),!0)}var a=i.nodeBefore;if(!a.type.spec.isolating&&vb(t,i,e))return!0;if(0==o.parent.content.size&&(db(a,"end")||qy.isSelectable(a))){if(e){var l=t.tr.deleteRange(o.before(),o.after());l.setSelection(db(a,"end")?Zy.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):qy.create(l.doc,i.pos-a.nodeSize)),e(l.scrollIntoView())}return!0}return!(!a.isAtom||i.depth!=o.depth-1||(e&&e(t.tr.delete(i.pos-a.nodeSize,i.pos).scrollIntoView()),0))}),(function(t,e,n){var o=t.selection.$cursor;if(!o||(n?!n.endOfTextblock("backward",t):o.parentOffset>0))return!1;var i=fb(o),r=i&&i.nodeBefore;return!(!r||!qy.isSelectable(r)||(e&&e(t.tr.setSelection(qy.create(t.doc,i.pos-r.nodeSize)).scrollIntoView()),0))})),bb=gb(hb,(function(t,e,n){var o=t.selection.$cursor;if(!o||(n?!n.endOfTextblock("forward",t):o.parentOffset<o.parent.content.size))return!1;var i=mb(o);if(!i)return!1;var r=i.nodeAfter;if(vb(t,i,e))return!0;if(0==o.parent.content.size&&(db(r,"start")||qy.isSelectable(r))){if(e){var s=t.tr.deleteRange(o.before(),o.after());s.setSelection(db(r,"start")?Zy.findFrom(s.doc.resolve(s.mapping.map(i.pos)),1):qy.create(s.doc,s.mapping.map(i.pos))),e(s.scrollIntoView())}return!0}return!(!r.isAtom||i.depth!=o.depth-1||(e&&e(t.tr.delete(i.pos,i.pos+r.nodeSize).scrollIntoView()),0))}),(function(t,e,n){var o=t.selection.$cursor;if(!o||(n?!n.endOfTextblock("forward",t):o.parentOffset<o.parent.content.size))return!1;var i=mb(o),r=i&&i.nodeAfter;return!(!r||!qy.isSelectable(r)||(e&&e(t.tr.setSelection(qy.create(t.doc,i.pos)).scrollIntoView()),0))})),_b={Enter:gb((function(t,e){var n=t.selection,o=n.$head,i=n.$anchor;return!(!o.parent.type.spec.code||!o.sameParent(i)||(e&&e(t.tr.insertText("\n").scrollIntoView()),0))}),(function(t,e){var n=t.selection,o=n.$from,i=n.$to;if(o.parent.inlineContent||i.parent.inlineContent)return!1;var r=o.parent.contentMatchAt(i.indexAfter()).defaultType;if(!r||!r.isTextblock)return!1;if(e){var s=(!o.parentOffset&&i.index()<i.parent.childCount?o:i).pos,a=t.tr.insert(s,r.createAndFill());a.setSelection(Wy.create(a.doc,s+1)),e(a.scrollIntoView())}return!0}),(function(t,e){var n=t.selection.$cursor;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){var o=n.before();if(Ey(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}var i=n.blockRange(),r=i&&My(i);return null!=r&&(e&&e(t.tr.lift(i,r).scrollIntoView()),!0)}),(function(t,e){var n=t.selection,o=n.$from,i=n.$to;if(t.selection instanceof qy&&t.selection.node.isBlock)return!(!o.parentOffset||!Ey(t.doc,o.pos)||(e&&e(t.tr.split(o.pos).scrollIntoView()),0));if(!o.parent.isBlock)return!1;if(e){var r=i.parentOffset==i.parent.content.size,s=t.tr;t.selection instanceof Wy&&s.deleteSelection();var a=0==o.depth?null:o.node(-1).contentMatchAt(o.indexAfter(-1)).defaultType,l=r&&a?[{type:a}]:null,c=Ey(s.doc,s.mapping.map(o.pos),1,l);l||c||!Ey(s.doc,s.mapping.map(o.pos),1,a&&[{type:a}])||(l=[{type:a}],c=!0),c&&(s.split(s.mapping.map(o.pos),1,l),r||o.parentOffset||o.parent.type==a||!o.node(-1).canReplace(o.index(-1),o.indexAfter(-1),ig.from(a.create(),o.parent))||s.setNodeMarkup(s.mapping.map(o.before()),a)),e(s.scrollIntoView())}return!0})),"Mod-Enter":function(t,e){var n=t.selection,o=n.$head,i=n.$anchor;if(!o.parent.type.spec.code||!o.sameParent(i))return!1;var r=o.node(-1),s=o.indexAfter(-1),a=r.contentMatchAt(s).defaultType;if(!r.canReplaceWith(s,s,a))return!1;if(e){var l=o.after(),c=t.tr.replaceWith(l,l,a.createAndFill());c.setSelection(Zy.near(c.doc.resolve(l),1)),e(c.scrollIntoView())}return!0},Backspace:yb,"Mod-Backspace":yb,Delete:bb,"Mod-Delete":bb,"Mod-a":function(t,e){return e&&e(t.tr.setSelection(new Ky(t.doc))),!0}},wb={"Ctrl-h":_b.Backspace,"Alt-Backspace":_b["Mod-Backspace"],"Ctrl-d":_b.Delete,"Ctrl-Alt-Backspace":_b["Mod-Delete"],"Alt-Delete":_b["Mod-Delete"],"Alt-d":_b["Mod-Delete"]};for(var xb in _b)wb[xb]=_b[xb];function Sb(t){return function(e,n){var o=e.selection,i=o.$from,r=o.$to,s=i.blockRange(r,(function(e){return e.childCount&&e.firstChild.type==t}));return!!s&&(!n||(i.node(s.depth-1).type==t?function(t,e,n,o){var i=t.tr,r=o.end,s=o.$to.end(o.depth);return r<s&&(i.step(new Cy(r-1,s,r,s,new pg(ig.from(n.create(null,o.parent.copy())),1,0),1,!0)),o=new kg(i.doc.resolve(o.$from.pos),i.doc.resolve(s),o.depth)),e(i.lift(o,My(o)).scrollIntoView()),!0}(e,n,t,s):function(t,e,n){for(var o=t.tr,i=n.parent,r=n.end,s=n.endIndex-1,a=n.startIndex;s>a;s--)r-=i.child(s).nodeSize,o.delete(r-1,r+1);var l=o.doc.resolve(n.start),c=l.nodeAfter,u=0==n.startIndex,p=n.endIndex==i.childCount,h=l.node(-1),d=l.index(-1);if(!h.canReplace(d+(u?0:1),d+1,c.content.append(p?ig.empty:ig.from(i))))return!1;var f=l.pos,m=f+c.nodeSize;return o.step(new Cy(f-(u?1:0),m+(p?1:0),f+1,m-1,new pg((u?ig.empty:ig.from(i.copy(ig.empty))).append(p?ig.empty:ig.from(i.copy(ig.empty))),u?0:1,p?0:1),u?0:1)),e(o.scrollIntoView()),!0}(e,n,s)))}}function kb(t){return function(e,n){var o=e.selection,i=o.$from,r=o.$to,s=i.blockRange(r,(function(e){return e.childCount&&e.firstChild.type==t}));if(!s)return!1;var a=s.startIndex;if(0==a)return!1;var l=s.parent,c=l.child(a-1);if(c.type!=t)return!1;if(n){var u=c.lastChild&&c.lastChild.type==l.type,p=ig.from(u?t.create():null),h=new pg(ig.from(t.create(null,ig.from(l.type.create(null,p)))),u?3:1,0),d=s.start,f=s.end;n(e.tr.step(new Cy(d-(u?3:1),f,d,f,h,1,!0)).scrollIntoView())}return!0}}"undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&os.platform();for(var Cb={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},Ob=Cb,Tb={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:";",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},Mb="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),Eb="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),Ab="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),Nb="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),Pb="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Lb=Mb&&(Nb||+Mb[1]<57)||Ab&&Nb,Ib=0;Ib<10;Ib++)Cb[48+Ib]=Cb[96+Ib]=String(Ib);for(Ib=1;Ib<=24;Ib++)Cb[Ib+111]="F"+Ib;for(Ib=65;Ib<=90;Ib++)Cb[Ib]=String.fromCharCode(Ib+32),Tb[Ib]=String.fromCharCode(Ib);for(var Db in Cb)Tb.hasOwnProperty(Db)||(Tb[Db]=Cb[Db]);var Rb="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function zb(t){var e,n,o,i,r=t.split(/-(?!$)/),s=r[r.length-1];"Space"==s&&(s=" ");for(var a=0;a<r.length-1;a++){var l=r[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))e=!0;else if(/^(c|ctrl|control)$/i.test(l))n=!0;else if(/^s(hift)?$/i.test(l))o=!0;else{if(!/^mod$/i.test(l))throw new Error("Unrecognized modifier name: "+l);Rb?i=!0:n=!0}}return e&&(s="Alt-"+s),n&&(s="Ctrl-"+s),i&&(s="Meta-"+s),o&&(s="Shift-"+s),s}function Bb(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),!1!==n&&e.shiftKey&&(t="Shift-"+t),t}var $b={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var jb=/Edge\/(\d+)/.exec(navigator.userAgent),Vb=/MSIE \d/.test(navigator.userAgent),Zb=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);$b.mac=/Mac/.test(navigator.platform);var Fb=$b.ie=!!(Vb||Zb||jb);$b.ie_version=Vb?document.documentMode||6:Zb?+Zb[1]:jb?+jb[1]:null,$b.gecko=!Fb&&/gecko\/(\d+)/i.test(navigator.userAgent),$b.gecko_version=$b.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var Hb=!Fb&&/Chrome\/(\d+)/.exec(navigator.userAgent);$b.chrome=!!Hb,$b.chrome_version=Hb&&+Hb[1],$b.ios=!Fb&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),$b.android=/Android \d/.test(navigator.userAgent),$b.webkit=!Fb&&"WebkitAppearance"in document.documentElement.style,$b.safari=/Apple Computer/.test(navigator.vendor),$b.webkit_version=$b.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var Wb=function(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e},Ub=function(t){var e=t.parentNode;return e&&11==e.nodeType?e.host:e},qb=function(t,e,n){var o=document.createRange();return o.setEnd(t,null==n?t.nodeValue.length:n),o.setStart(t,e||0),o},Jb=function(t,e,n,o){return n&&(Gb(t,e,n,o,-1)||Gb(t,e,n,o,1))},Kb=/^(img|br|input|textarea|hr)$/i;function Gb(t,e,n,o,i){for(;;){if(t==n&&e==o)return!0;if(e==(i<0?0:Xb(t))){var r=t.parentNode;if(1!=r.nodeType||Yb(t)||Kb.test(t.nodeName)||"false"==t.contentEditable)return!1;e=Wb(t)+(i<0?0:1),t=r}else{if(1!=t.nodeType)return!1;if("false"==(t=t.childNodes[e+(i<0?-1:0)]).contentEditable)return!1;e=i<0?Xb(t):0}}}function Xb(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function Yb(t){for(var e,n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}var Qb=function(t){var e=t.isCollapsed;return e&&$b.chrome&&t.rangeCount&&!t.getRangeAt(0).collapsed&&(e=!1),e};function t_(t,e){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function e_(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function n_(t,e){return"number"==typeof t?t:t[e]}function o_(t,e,n){for(var o=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,r=t.dom.ownerDocument,s=r.defaultView,a=n||t.dom;a;a=Ub(a))if(1==a.nodeType){var l=a==r.body||1!=a.nodeType,c=l?e_(s):a.getBoundingClientRect(),u=0,p=0;if(e.top<c.top+n_(o,"top")?p=-(c.top-e.top+n_(i,"top")):e.bottom>c.bottom-n_(o,"bottom")&&(p=e.bottom-c.bottom+n_(i,"bottom")),e.left<c.left+n_(o,"left")?u=-(c.left-e.left+n_(i,"left")):e.right>c.right-n_(o,"right")&&(u=e.right-c.right+n_(i,"right")),(u||p)&&(l?s.scrollBy(u,p):(p&&(a.scrollTop+=p),u&&(a.scrollLeft+=u))),l)break}}function i_(t){for(var e=[],n=t.ownerDocument;t&&(e.push({dom:t,top:t.scrollTop,left:t.scrollLeft}),t!=n);t=Ub(t));return e}function r_(t,e){for(var n=0;n<t.length;n++){var o=t[n],i=o.dom,r=o.top,s=o.left;i.scrollTop!=r+e&&(i.scrollTop=r+e),i.scrollLeft!=s&&(i.scrollLeft=s)}}var s_=null;function a_(t,e){for(var n,o,i=2e8,r=0,s=e.top,a=e.top,l=t.firstChild,c=0;l;l=l.nextSibling,c++){var u=void 0;if(1==l.nodeType)u=l.getClientRects();else{if(3!=l.nodeType)continue;u=qb(l).getClientRects()}for(var p=0;p<u.length;p++){var h=u[p];if(h.top<=s&&h.bottom>=a){s=Math.max(h.bottom,s),a=Math.min(h.top,a);var d=h.left>e.left?h.left-e.left:h.right<e.left?e.left-h.right:0;if(d<i){n=l,i=d,o=d&&3==n.nodeType?{left:h.right<e.left?h.right:h.left,top:e.top}:e,1==l.nodeType&&d&&(r=c+(e.left>=(h.left+h.right)/2?1:0));continue}}!n&&(e.left>=h.right&&e.top>=h.top||e.left>=h.left&&e.top>=h.bottom)&&(r=c+1)}}return n&&3==n.nodeType?function(t,e){for(var n=t.nodeValue.length,o=document.createRange(),i=0;i<n;i++){o.setEnd(t,i+1),o.setStart(t,i);var r=u_(o,1);if(r.top!=r.bottom&&l_(e,r))return{node:t,offset:i+(e.left>=(r.left+r.right)/2?1:0)}}return{node:t,offset:0}}(n,o):!n||i&&1==n.nodeType?{node:t,offset:r}:a_(n,o)}function l_(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function c_(t,e){var n,o,i,r,s=t.root;if(s.caretPositionFromPoint)try{var a=s.caretPositionFromPoint(e.left,e.top);a&&(i=(n=a).offsetNode,r=n.offset)}catch(t){}if(!i&&s.caretRangeFromPoint){var l=s.caretRangeFromPoint(e.left,e.top);l&&(i=(o=l).startContainer,r=o.startOffset)}var c,u=s.elementFromPoint(e.left,e.top+1);if(!u||!t.dom.contains(1!=u.nodeType?u.parentNode:u)){var p=t.dom.getBoundingClientRect();if(!l_(e,p))return null;if(!(u=function t(e,n,o){var i=e.childNodes.length;if(i&&o.top<o.bottom)for(var r=Math.max(0,Math.min(i-1,Math.floor(i*(n.top-o.top)/(o.bottom-o.top))-2)),s=r;;){var a=e.childNodes[s];if(1==a.nodeType)for(var l=a.getClientRects(),c=0;c<l.length;c++){var u=l[c];if(l_(n,u))return t(a,n,u)}if((s=(s+1)%i)==r)break}return e}(t.dom,e,p)))return null}if(u=function(t,e){var n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}(u,e),i){if($b.gecko&&1==i.nodeType&&(r=Math.min(r,i.childNodes.length))<i.childNodes.length){var h,d=i.childNodes[r];"IMG"==d.nodeName&&(h=d.getBoundingClientRect()).right<=e.left&&h.bottom>e.top&&r++}i==t.dom&&r==i.childNodes.length-1&&1==i.lastChild.nodeType&&e.top>i.lastChild.getBoundingClientRect().bottom?c=t.state.doc.content.size:0!=r&&1==i.nodeType&&"BR"==i.childNodes[r-1].nodeName||(c=function(t,e,n,o){for(var i=-1,r=e;r!=t.dom;){var s=t.docView.nearestDesc(r,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>o.left||a.top>o.top)i=s.posBefore;else{if(!(a.right<o.left||a.bottom<o.top))break;i=s.posAfter}}r=s.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n)}(t,i,r,e))}null==c&&(c=function(t,e,n){var o=a_(e,n),i=o.node,r=o.offset,s=-1;if(1==i.nodeType&&!i.firstChild){var a=i.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return t.docView.posFromDOM(i,r,s)}(t,u,e));var f=t.docView.nearestDesc(u,!0);return{pos:c,inside:f?f.posAtStart-f.border:-1}}function u_(t,e){var n=t.getClientRects();return n.length?n[e<0?0:n.length-1]:t.getBoundingClientRect()}function p_(t,e){var n=t.docView.domFromPos(e),o=n.node,i=n.offset;if(3==o.nodeType&&($b.chrome||$b.gecko)){var r=u_(qb(o,i,i),0);if($b.gecko&&i&&/\s/.test(o.nodeValue[i-1])&&i<o.nodeValue.length){var s=u_(qb(o,i-1,i-1),-1);if(Math.abs(s.left-r.left)<1&&s.top==r.top){var a=u_(qb(o,i,i+1),-1);return h_(a,a.left<s.left)}}return r}if(1==o.nodeType&&!t.state.doc.resolve(e).parent.inlineContent){var l,c=!0;if(i<o.childNodes.length){var u=o.childNodes[i];1==u.nodeType&&(l=u.getBoundingClientRect())}if(!l&&i){var p=o.childNodes[i-1];1==p.nodeType&&(l=p.getBoundingClientRect(),c=!1)}return function(t,e){if(0==t.height)return t;var n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}(l||o.getBoundingClientRect(),c)}for(var h=-1;h<2;h+=2)if(h<0&&i){var d=void 0,f=3==o.nodeType?qb(o,i-1,i):3==(d=o.childNodes[i-1]).nodeType?qb(d):1==d.nodeType&&"BR"!=d.nodeName?d:null;if(f){var m=u_(f,1);if(m.top<m.bottom)return h_(m,!1)}}else if(h>0&&i<Xb(o)){var v=void 0,g=3==o.nodeType?qb(o,i,i+1):3==(v=o.childNodes[i]).nodeType?qb(v):1==v.nodeType?v:null;if(g){var y=u_(g,-1);if(y.top<y.bottom)return h_(y,!0)}}return h_(u_(3==o.nodeType?qb(o):o,0),!1)}function h_(t,e){if(0==t.width)return t;var n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function d_(t,e,n){var o=t.state,i=t.root.activeElement;o!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{o!=e&&t.updateState(o),i!=t.dom&&i.focus()}}var f_=/[\u0590-\u08ac]/,m_=null,v_=null,g_=!1;var y_=function(t,e,n,o){this.parent=t,this.children=e,this.dom=n,n.pmViewDesc=this,this.contentDOM=o,this.dirty=0},b_={beforePosition:{configurable:!0},size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0}};y_.prototype.matchesWidget=function(){return!1},y_.prototype.matchesMark=function(){return!1},y_.prototype.matchesNode=function(){return!1},y_.prototype.matchesHack=function(){return!1},b_.beforePosition.get=function(){return!1},y_.prototype.parseRule=function(){return null},y_.prototype.stopEvent=function(){return!1},b_.size.get=function(){for(var t=0,e=0;e<this.children.length;e++)t+=this.children[e].size;return t},b_.border.get=function(){return 0},y_.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var t=0;t<this.children.length;t++)this.children[t].destroy()},y_.prototype.posBeforeChild=function(t){for(var e=0,n=this.posAtStart;e<this.children.length;e++){var o=this.children[e];if(o==t)return n;n+=o.size}},b_.posBefore.get=function(){return this.parent.posBeforeChild(this)},b_.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},b_.posAfter.get=function(){return this.posBefore+this.size},b_.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},y_.prototype.localPosFromDOM=function(t,e,n){if(this.contentDOM&&this.contentDOM.contains(1==t.nodeType?t:t.parentNode)){if(n<0){var o,i;if(t==this.contentDOM)o=t.childNodes[e-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;o=t.previousSibling}for(;o&&(!(i=o.pmViewDesc)||i.parent!=this);)o=o.previousSibling;return o?this.posBeforeChild(i)+i.size:this.posAtStart}var r,s;if(t==this.contentDOM)r=t.childNodes[e];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;r=t.nextSibling}for(;r&&(!(s=r.pmViewDesc)||s.parent!=this);)r=r.nextSibling;return r?this.posBeforeChild(s):this.posAtEnd}var a;if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=2&t.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==e)for(var l=t;;l=l.parentNode){if(l==this.dom){a=!1;break}if(l.parentNode.firstChild!=l)break}if(null==a&&e==t.childNodes.length)for(var c=t;;c=c.parentNode){if(c==this.dom){a=!0;break}if(c.parentNode.lastChild!=c)break}}return(null==a?n>0:a)?this.posAtEnd:this.posAtStart},y_.prototype.nearestDesc=function(t,e){for(var n=!0,o=t;o;o=o.parentNode){var i=this.getDesc(o);if(i&&(!e||i.node)){if(!n||!i.nodeDOM||(1==i.nodeDOM.nodeType?i.nodeDOM.contains(t):i.nodeDOM==t))return i;n=!1}}},y_.prototype.getDesc=function(t){for(var e=t.pmViewDesc,n=e;n;n=n.parent)if(n==this)return e},y_.prototype.posFromDOM=function(t,e,n){for(var o=t;;o=o.parentNode){var i=this.getDesc(o);if(i)return i.localPosFromDOM(t,e,n)}},y_.prototype.descAt=function(t){for(var e=0,n=0;e<this.children.length;e++){var o=this.children[e],i=n+o.size;if(n==t&&i!=n){for(;!o.border&&o.children.length;)o=o.children[0];return o}if(t<i)return o.descAt(t-n-o.border);n=i}},y_.prototype.domFromPos=function(t){if(!this.contentDOM)return{node:this.dom,offset:0};for(var e=0,n=0;;n++){if(e==t){for(;n<this.children.length&&(this.children[n].beforePosition||this.children[n].dom.parentNode!=this.contentDOM);)n++;return{node:this.contentDOM,offset:n==this.children.length?this.contentDOM.childNodes.length:Wb(this.children[n].dom)}}if(n==this.children.length)throw new Error("Invalid position "+t);var o=this.children[n],i=e+o.size;if(t<i)return o.domFromPos(t-e-o.border);e=i}},y_.prototype.parseRange=function(t,e,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var o=-1,i=-1,r=n,s=0;;s++){var a=this.children[s],l=r+a.size;if(-1==o&&t<=l){var c=r+a.border;if(t>=c&&e<=l-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(t,e,c);t=r;for(var u=s;u>0;u--){var p=this.children[u-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){o=Wb(p.dom)+1;break}t-=p.size}-1==o&&(o=0)}if(o>-1&&e<=l){e=l;for(var h=s+1;h<this.children.length;h++){var d=this.children[h];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){i=Wb(d.dom);break}e+=d.size}-1==i&&(i=this.contentDOM.childNodes.length);break}r=l}return{node:this.contentDOM,from:t,to:e,fromOffset:o,toOffset:i}},y_.prototype.emptyChildAt=function(t){if(this.border||!this.contentDOM||!this.children.length)return!1;var e=this.children[t<0?0:this.children.length-1];return 0==e.size||e.emptyChildAt(t)},y_.prototype.domAfterPos=function(t){var e=this.domFromPos(t),n=e.node,o=e.offset;if(1!=n.nodeType||o==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[o]},y_.prototype.setSelection=function(t,e,n,o){for(var i=Math.min(t,e),r=Math.max(t,e),s=0,a=0;s<this.children.length;s++){var l=this.children[s],c=a+l.size;if(i>a&&r<c)return l.setSelection(t-a-l.border,e-a-l.border,n,o);a=c}var u=this.domFromPos(t),p=this.domFromPos(e),h=n.getSelection(),d=document.createRange();if(o||!Jb(u.node,u.offset,h.anchorNode,h.anchorOffset)||!Jb(p.node,p.offset,h.focusNode,h.focusOffset)){if(h.extend)d.setEnd(u.node,u.offset),d.collapse(!1);else{if(t>e){var f=u;u=p,p=f}d.setEnd(p.node,p.offset),d.setStart(u.node,u.offset)}h.removeAllRanges(),h.addRange(d),h.extend&&h.extend(p.node,p.offset)}},y_.prototype.ignoreMutation=function(t){return!this.contentDOM&&"selection"!=t.type},b_.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},y_.prototype.markDirty=function(t,e){for(var n=0,o=0;o<this.children.length;o++){var i=this.children[o],r=n+i.size;if(n==r?t<=r&&e>=n:t<r&&e>n){var s=n+i.border,a=r-i.border;if(t>=s&&e<=a)return this.dirty=t==n||e==r?2:1,void(t!=s||e!=a||!i.contentLost&&i.dom.parentNode==this.contentDOM?i.markDirty(t-s,e-s):i.dirty=3);i.dirty=3}n=r}this.dirty=2},y_.prototype.markParentsDirty=function(){for(var t=this.parent;t;t=t.parent)t.dirty<2&&(t.dirty=2)},Object.defineProperties(y_.prototype,b_);var __=[],w_=function(t){function e(e,n,o,i){var r,s=n.type.toDOM;if("function"==typeof s&&(s=s(o,(function(){return r?r.parent?r.parent.posBeforeChild(r):void 0:i}))),!n.type.spec.raw){if(1!=s.nodeType){var a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}t.call(this,e,__,s,null),this.widget=n,r=this}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={beforePosition:{configurable:!0}};return n.beforePosition.get=function(){return this.widget.type.side<0},e.prototype.matchesWidget=function(t){return 0==this.dirty&&t.type.eq(this.widget.type)},e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.stopEvent=function(t){var e=this.widget.spec.stopEvent;return!!e&&e(t)},Object.defineProperties(e.prototype,n),e}(y_),x_=function(t){function e(e,n,o,i){t.call(this,e,__,n,null),this.textDOM=o,this.text=i}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={size:{configurable:!0}};return n.size.get=function(){return this.text.length},e.prototype.localPosFromDOM=function(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e},e.prototype.domFromPos=function(t){return{node:this.textDOM,offset:t}},e.prototype.ignoreMutation=function(t){return"characterData"===t.type&&t.target.nodeValue==t.oldValue},Object.defineProperties(e.prototype,n),e}(y_),S_=function(t){function e(e,n,o,i){t.call(this,e,[],o,i),this.mark=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.create=function(t,n,o,i){var r=i.nodeViews[n.type.name],s=r&&r(n,i,o);return s&&s.dom||(s=ly.renderSpec(document,n.type.spec.toDOM(n,o))),new e(t,n,s.dom,s.contentDOM||s.dom)},e.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},e.prototype.matchesMark=function(t){return 3!=this.dirty&&this.mark.eq(t)},e.prototype.markDirty=function(e,n){if(t.prototype.markDirty.call(this,e,n),0!=this.dirty){for(var o=this.parent;!o.node;)o=o.parent;o.dirty<this.dirty&&(o.dirty=this.dirty),this.dirty=0}},e.prototype.slice=function(t,n,o){var i=e.create(this.parent,this.mark,!0,o),r=this.children,s=this.size;n<s&&(r=$_(r,n,s,o)),t>0&&(r=$_(r,0,t,o));for(var a=0;a<r.length;a++)r[a].parent=i;return i.children=r,i},e}(y_),k_=function(t){function e(e,n,o,i,r,s,a,l,c){t.call(this,e,n.isLeaf?__:[],r,s),this.nodeDOM=a,this.node=n,this.outerDeco=o,this.innerDeco=i,s&&this.updateChildren(l,c)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={size:{configurable:!0},border:{configurable:!0}};return e.create=function(t,n,o,i,r,s){var a,l,c=r.nodeViews[n.type.name],u=c&&c(n,r,(function(){return l?l.parent?l.parent.posBeforeChild(l):void 0:s}),o),p=u&&u.dom,h=u&&u.contentDOM;if(n.isText)if(p){if(3!=p.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else p=document.createTextNode(n.text);else p||(p=(a=ly.renderSpec(document,n.type.spec.toDOM(n))).dom,h=a.contentDOM);h||n.isText||"BR"==p.nodeName||(p.hasAttribute("contenteditable")||(p.contentEditable=!1),n.type.spec.draggable&&(p.draggable=!0));var d=p;return p=I_(p,o,n),u?l=new M_(t,n,o,i,p,h,d,u,r,s+1):n.isText?new O_(t,n,o,i,p,d,r):new e(t,n,o,i,p,h,d,r,s+1)},e.prototype.parseRule=function(){var t=this;if(this.node.type.spec.reparseInView)return null;var e={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(e.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?e.contentElement=this.contentDOM:e.getContent=function(){return t.contentDOM?ig.empty:t.node.content},e},e.prototype.matchesNode=function(t,e,n){return 0==this.dirty&&t.eq(this.node)&&D_(e,this.outerDeco)&&n.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},e.prototype.updateChildren=function(t,e){var n=this,o=this.node.inlineContent,i=e,r=o&&t.composing&&this.localCompositionNode(t,e),s=new z_(this,r&&r.node);!function(t,e,n,o){var i=e.locals(t),r=0;if(0!=i.length)for(var s=0,a=[],l=null,c=0;;){if(s<i.length&&i[s].to==r){for(var u=i[s++],p=void 0;s<i.length&&i[s].to==r;)(p||(p=[u])).push(i[s++]);if(p){p.sort(B_);for(var h=0;h<p.length;h++)n(p[h],c,!!l)}else n(u,c,!!l)}var d=void 0,f=void 0;if(l)f=-1,d=l,l=null;else{if(!(c<t.childCount))break;f=c,d=t.child(c++)}for(var m=0;m<a.length;m++)a[m].to<=r&&a.splice(m--,1);for(;s<i.length&&i[s].from==r;)a.push(i[s++]);var v=r+d.nodeSize;if(d.isText){var g=v;s<i.length&&i[s].from<g&&(g=i[s].from);for(var y=0;y<a.length;y++)a[y].to<g&&(g=a[y].to);g<v&&(l=d.cut(g-r),d=d.cut(0,g-r),v=g,f=-1)}o(d,a.length?a.slice():__,e.forChild(r,d),f),r=v}else for(var b=0;b<t.childCount;b++){var _=t.child(b);o(_,i,e.forChild(r,_),b),r+=_.nodeSize}}(this.node,this.innerDeco,(function(e,r,a){e.spec.marks?s.syncToMarks(e.spec.marks,o,t):e.type.side>=0&&!a&&s.syncToMarks(r==n.node.childCount?cg.none:n.node.child(r).marks,o,t),s.placeWidget(e,t,i)}),(function(e,n,r,a){s.syncToMarks(e.marks,o,t),s.findNodeMatch(e,n,r,a)||s.updateNextNode(e,n,r,t,a)||s.addNode(e,n,r,t,i),i+=e.nodeSize})),s.syncToMarks(__,o,t),this.node.isTextblock&&s.addTextblockHacks(),s.destroyRest(),(s.changed||2==this.dirty)&&(r&&this.protectLocalComposition(t,r),this.renderChildren())},e.prototype.renderChildren=function(){!function t(e,n){for(var o=e.firstChild,i=0;i<n.length;i++){var r=n[i],s=r.dom;if(s.parentNode==e){for(;s!=o;)o=R_(o);o=o.nextSibling}else e.insertBefore(s,o);if(r instanceof S_){var a=o?o.previousSibling:e.lastChild;t(r.contentDOM,r.children),o=a?a.nextSibling:e.firstChild}}for(;o;)o=R_(o)}(this.contentDOM,this.children),$b.ios&&function(t){if("UL"==t.nodeName||"OL"==t.nodeName){var e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}(this.dom)},e.prototype.localCompositionNode=function(t,e){var n=t.state.selection,o=n.from,i=n.to;if(!(!(t.state.selection instanceof Wy)||o<e||i>e+this.node.content.size)){var r=t.root.getSelection(),s=function(t,e){for(;;){if(3==t.nodeType)return t;if(1==t.nodeType&&e>0){if(t.childNodes.length>e&&3==t.childNodes[e].nodeType)return t.childNodes[e];e=Xb(t=t.childNodes[e-1])}else{if(!(1==t.nodeType&&e<t.childNodes.length))return null;t=t.childNodes[e],e=0}}}(r.focusNode,r.focusOffset);if(s&&this.dom.contains(s.parentNode)){var a=s.nodeValue,l=function(t,e,n,o){for(var i="",r=0,s=0;r<t.childCount;r++){var a=t.child(r),l=s+a.nodeSize;if(a.isText){if(i+=a.text,l>=o){for(var c=l-i.length,u=i.lastIndexOf(e);u>-1&&c+u>n;)u=i.lastIndexOf(e,u-1);if(u>-1&&c+u+e.length>=o)return c+u;if(l>o)break}}else i="";s=l}return-1}(this.node.content,a,o-e,i-e);return l<0?null:{node:s,pos:l,text:a}}}},e.prototype.protectLocalComposition=function(t,e){var n=e.node,o=e.pos,i=e.text;if(!this.getDesc(n)){for(var r=n;r.parentNode!=this.contentDOM;r=r.parentNode){for(;r.previousSibling;)r.parentNode.removeChild(r.previousSibling);for(;r.nextSibling;)r.parentNode.removeChild(r.nextSibling);r.pmViewDesc&&(r.pmViewDesc=null)}var s=new x_(this,r,n,i);t.compositionNodes.push(s),this.children=$_(this.children,o,o+i.length,t,s)}},e.prototype.update=function(t,e,n,o){return!(3==this.dirty||!t.sameMarkup(this.node)||(this.updateInner(t,e,n,o),0))},e.prototype.updateInner=function(t,e,n,o){this.updateOuterDeco(e),this.node=t,this.innerDeco=n,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=0},e.prototype.updateOuterDeco=function(t){if(!D_(t,this.outerDeco)){var e=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=P_(this.dom,this.nodeDOM,N_(this.outerDeco,this.node,e),N_(t,this.node,e)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=t}},e.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},e.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!1)},Object.defineProperties(e.prototype,n),e}(y_);function C_(t,e,n,o,i){return I_(o,e,t),new k_(null,t,e,n,o,o,o,i,0)}var O_=function(t){function e(e,n,o,i,r,s,a){t.call(this,e,n,o,i,r,null,s,a)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseRule=function(){return{skip:this.nodeDOM.parentNode||!0}},e.prototype.update=function(t,e){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!t.sameMarkup(this.node)||(this.updateOuterDeco(e),0==this.dirty&&t.text==this.node.text||t.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=t.text),this.node=t,this.dirty=0,0))},e.prototype.inParent=function(){for(var t=this.parent.contentDOM,e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1},e.prototype.domFromPos=function(t){return{node:this.nodeDOM,offset:t}},e.prototype.localPosFromDOM=function(e,n,o){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):t.prototype.localPosFromDOM.call(this,e,n,o)},e.prototype.ignoreMutation=function(t){return"characterData"!=t.type&&"selection"!=t.type},e.prototype.slice=function(t,n,o){var i=this.node.cut(t,n),r=document.createTextNode(i.text);return new e(this.parent,i,this.outerDeco,this.innerDeco,r,r,o)},e}(k_),T_=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.matchesHack=function(){return 0==this.dirty},e}(y_),M_=function(t){function e(e,n,o,i,r,s,a,l,c,u){t.call(this,e,n,o,i,r,s,a,c,u),this.spec=l}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.update=function(e,n,o,i){if(3==this.dirty)return!1;if(this.spec.update){var r=this.spec.update(e,n);return r&&this.updateInner(e,n,o,i),r}return!(!this.contentDOM&&!e.isLeaf)&&t.prototype.update.call(this,e,n,o,i)},e.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():t.prototype.selectNode.call(this)},e.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():t.prototype.deselectNode.call(this)},e.prototype.setSelection=function(e,n,o,i){this.spec.setSelection?this.spec.setSelection(e,n,o):t.prototype.setSelection.call(this,e,n,o,i)},e.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),t.prototype.destroy.call(this)},e.prototype.stopEvent=function(t){return!!this.spec.stopEvent&&this.spec.stopEvent(t)},e.prototype.ignoreMutation=function(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):t.prototype.ignoreMutation.call(this,e)},e}(k_);function E_(t){t&&(this.nodeName=t)}E_.prototype=Object.create(null);var A_=[new E_];function N_(t,e,n){if(0==t.length)return A_;for(var o=n?A_[0]:new E_,i=[o],r=0;r<t.length;r++){var s=t[r].type.attrs,a=o;if(s)for(var l in s.nodeName&&i.push(a=new E_(s.nodeName)),s){var c=s[l];null!=c&&(n&&1==i.length&&i.push(a=o=new E_(e.isInline?"span":"div")),"class"==l?a.class=(a.class?a.class+" ":"")+c:"style"==l?a.style=(a.style?a.style+";":"")+c:"nodeName"!=l&&(a[l]=c))}}return i}function P_(t,e,n,o){if(n==A_&&o==A_)return e;for(var i=e,r=0;r<o.length;r++){var s=o[r],a=n[r];if(r){var l=void 0;a&&a.nodeName==s.nodeName&&i!=t&&(l=i.parentNode)&&l.tagName.toLowerCase()==s.nodeName||((l=document.createElement(s.nodeName)).appendChild(i),a=A_[0]),i=l}L_(i,a||A_[0],s)}return i}function L_(t,e,n){for(var o in e)"class"==o||"style"==o||"nodeName"==o||o in n||t.removeAttribute(o);for(var i in n)"class"!=i&&"style"!=i&&"nodeName"!=i&&n[i]!=e[i]&&t.setAttribute(i,n[i]);if(e.class!=n.class){for(var r=e.class?e.class.split(" "):__,s=n.class?n.class.split(" "):__,a=0;a<r.length;a++)-1==s.indexOf(r[a])&&t.classList.remove(r[a]);for(var l=0;l<s.length;l++)-1==r.indexOf(s[l])&&t.classList.add(s[l])}if(e.style!=n.style){if(e.style)for(var c,u=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;c=u.exec(e.style);)t.style.removeProperty(c[1]);n.style&&(t.style.cssText+=n.style)}}function I_(t,e,n){return P_(t,t,A_,N_(e,n,1!=t.nodeType))}function D_(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function R_(t){var e=t.nextSibling;return t.parentNode.removeChild(t),e}var z_=function(t,e){this.top=t,this.lock=e,this.index=0,this.stack=[],this.changed=!1;var n=function(t,e){for(var n=[],o=t.childCount,i=e.length-1;o>0&&i>=0;i--){var r=e[i],s=r.node;if(s){if(s!=t.child(o-1))break;n.push(r),--o}}return{nodes:n.reverse(),offset:o}}(t.node.content,t.children);this.preMatched=n.nodes,this.preMatchOffset=n.offset};function B_(t,e){return t.type.side-e.type.side}function $_(t,e,n,o,i){for(var r=[],s=0,a=0;s<t.length;s++){var l=t[s],c=a,u=a+=l.size;c>=n||u<=e?r.push(l):(c<e&&r.push(l.slice(0,e-c,o)),i&&(r.push(i),i=null),u>n&&r.push(l.slice(n-c,l.size,o)))}return r}function j_(t,e){var n=t.selection,o=n.$anchor,i=n.$head,r=e>0?o.max(i):o.min(i),s=r.parent.inlineContent?r.depth?t.doc.resolve(e>0?r.after():r.before()):null:r;return s&&Zy.findFrom(s,e)}function V_(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Z_(t,e,n){var o=t.state.selection;if(o instanceof Wy){if(!o.empty||n.indexOf("s")>-1)return!1;if(t.endOfTextblock(e>0?"right":"left")){var i=j_(t.state,e);return!!(i&&i instanceof qy)&&V_(t,i)}var r,s=o.$head,a=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!a||a.isText)return!1;var l=e<0?s.pos-a.nodeSize:s.pos;return!!(a.isAtom||(r=t.docView.descAt(l))&&!r.contentDOM)&&(qy.isSelectable(a)?V_(t,new qy(e<0?t.state.doc.resolve(s.pos-a.nodeSize):s)):!!$b.webkit&&V_(t,new Wy(t.state.doc.resolve(e<0?l:l+a.nodeSize))))}if(o instanceof qy&&o.node.isInline)return V_(t,new Wy(e>0?o.$to:o.$from));var c=j_(t.state,e);return!!c&&V_(t,c)}function F_(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function H_(t){var e=t.pmViewDesc;return e&&0==e.size&&(t.nextSibling||"BR"!=t.nodeName)}function W_(t){var e=t.root.getSelection(),n=e.focusNode,o=e.focusOffset;if(n){var i,r,s=!1;for($b.gecko&&1==n.nodeType&&o<F_(n)&&H_(n.childNodes[o])&&(s=!0);;)if(o>0){if(1!=n.nodeType)break;var a=n.childNodes[o-1];if(H_(a))i=n,r=--o;else{if(3!=a.nodeType)break;o=(n=a).nodeValue.length}}else{if(q_(n))break;for(var l=n.previousSibling;l&&H_(l);)i=n.parentNode,r=Wb(l),l=l.previousSibling;if(l)o=F_(n=l);else{if((n=n.parentNode)==t.dom)break;o=0}}s?J_(t,e,n,o):i&&J_(t,e,i,r)}}function U_(t){var e=t.root.getSelection(),n=e.focusNode,o=e.focusOffset;if(n){for(var i,r,s=F_(n);;)if(o<s){if(1!=n.nodeType)break;if(!H_(n.childNodes[o]))break;i=n,r=++o}else{if(q_(n))break;for(var a=n.nextSibling;a&&H_(a);)i=a.parentNode,r=Wb(a)+1,a=a.nextSibling;if(a)o=0,s=F_(n=a);else{if((n=n.parentNode)==t.dom)break;o=s=0}}i&&J_(t,e,i,r)}}function q_(t){var e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function J_(t,e,n,o){if(Qb(e)){var i=document.createRange();i.setEnd(n,o),i.setStart(n,o),e.removeAllRanges(),e.addRange(i)}else e.extend&&e.extend(n,o);t.domObserver.setCurSelection()}function K_(t,e,n){var o=t.state.selection;if(o instanceof Wy&&!o.empty||n.indexOf("s")>-1)return!1;var i=o.$from,r=o.$to;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){var s=j_(t.state,e);if(s&&s instanceof qy)return V_(t,s)}if(!i.parent.inlineContent){var a=Zy.findFrom(e<0?i:r,e);return!a||V_(t,a)}return!1}function G_(t,e){if(!(t.state.selection instanceof Wy))return!0;var n=t.state.selection,o=n.$head,i=n.$anchor,r=n.empty;if(!o.sameParent(i))return!0;if(!r)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;var s=!o.textOffset&&(e<0?o.nodeBefore:o.nodeAfter);if(s&&!s.isText){var a=t.state.tr;return e<0?a.delete(o.pos-s.nodeSize,o.pos):a.delete(o.pos,o.pos+s.nodeSize),t.dispatch(a),!0}return!1}function X_(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function Y_(t,e){var n=t.state.selection;if(ow(t,n),t.editable?t.hasFocus():sw(t)&&document.activeElement.contains(t.dom)){if(t.domObserver.disconnectSelection(),t.cursorWrapper)!function(t){var e=t.root.getSelection(),n=document.createRange(),o=t.cursorWrapper.dom,i="IMG"==o.nodeName;i?n.setEnd(o.parentNode,Wb(o)+1):n.setEnd(o,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&$b.ie&&$b.ie_version<=11&&(o.disabled=!0,o.disabled=!1)}(t);else{var o,i,r=n.anchor,s=n.head;!Q_||n instanceof Wy||(n.$from.parent.inlineContent||(o=tw(t,n.from)),n.empty||n.$from.parent.inlineContent||(i=tw(t,n.to))),t.docView.setSelection(r,s,t.root,e),Q_&&(o&&nw(o),i&&nw(i)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):r!=s&&(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(t){var e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.hideSelectionGuard);var n=t.root.getSelection(),o=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.hideSelectionGuard=function(){n.anchorNode==o&&n.anchorOffset==i||(e.removeEventListener("selectionchange",t.hideSelectionGuard),t.dom.classList.remove("ProseMirror-hideselection"))})}(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}z_.prototype.getPreMatch=function(t){return t>=this.preMatchOffset?this.preMatched[t-this.preMatchOffset]:null},z_.prototype.destroyBetween=function(t,e){if(t!=e){for(var n=t;n<e;n++)this.top.children[n].destroy();this.top.children.splice(t,e-t),this.changed=!0}},z_.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},z_.prototype.syncToMarks=function(t,e,n){for(var o=0,i=this.stack.length>>1,r=Math.min(i,t.length);o<r&&(o==i-1?this.top:this.stack[o+1<<1]).matchesMark(t[o])&&!1!==t[o].type.spec.spanning;)o++;for(;o<i;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<t.length;){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(t[i])){s=a;break}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{var l=S_.create(this.top,t[i],e,n);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,i++}},z_.prototype.findNodeMatch=function(t,e,n,o){var i=-1,r=o<0?void 0:this.getPreMatch(o),s=this.top.children;if(r&&r.matchesNode(t,e,n))i=s.indexOf(r);else for(var a=this.index,l=Math.min(s.length,a+5);a<l;a++){var c=s[a];if(c.matchesNode(t,e,n)&&this.preMatched.indexOf(c)<0){i=a;break}}return!(i<0||(this.destroyBetween(this.index,i),this.index++,0))},z_.prototype.updateNextNode=function(t,e,n,o,i){if(this.index==this.top.children.length)return!1;var r=this.top.children[this.index];if(r instanceof k_){var s=this.preMatched.indexOf(r);if(s>-1&&s+this.preMatchOffset!=i)return!1;var a=r.dom;if((!this.lock||!(a==this.lock||1==a.nodeType&&a.contains(this.lock.parentNode))||t.isText&&r.node&&r.node.isText&&r.nodeDOM.nodeValue==t.text&&3!=r.dirty&&D_(e,r.outerDeco))&&r.update(t,e,n,o))return r.dom!=a&&(this.changed=!0),this.index++,!0}return!1},z_.prototype.addNode=function(t,e,n,o,i){this.top.children.splice(this.index++,0,k_.create(this.top,t,e,n,o,i)),this.changed=!0},z_.prototype.placeWidget=function(t,e,n){if(this.index<this.top.children.length&&this.top.children[this.index].matchesWidget(t))this.index++;else{var o=new w_(this.top,t,e,n);this.top.children.splice(this.index++,0,o),this.changed=!0}},z_.prototype.addTextblockHacks=function(){for(var t=this.top.children[this.index-1];t instanceof S_;)t=t.children[t.children.length-1];if(!t||!(t instanceof O_)||/\n$/.test(t.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var e=document.createElement("br");this.top.children.splice(this.index++,0,new T_(this.top,__,e,null)),this.changed=!0}};var Q_=$b.safari||$b.chrome&&$b.chrome_version<63;function tw(t,e){var n=t.docView.domFromPos(e),o=n.node,i=n.offset,r=i<o.childNodes.length?o.childNodes[i]:null,s=i?o.childNodes[i-1]:null;if((!r||"false"==r.contentEditable)&&($b.safari||!s||"false"==s.contentEditable)){if(r)return ew(r);if(s)return ew(s)}}function ew(t){return t.contentEditable="true",$b.safari&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function nw(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function ow(t,e){if(e instanceof qy){var n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(iw(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else iw(t)}function iw(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=null)}function rw(t,e,n,o){return t.someProp("createSelectionBetween",(function(o){return o(t,e,n)}))||Wy.between(e,n,o)}function sw(t){var e=t.root.getSelection();if(!e.anchorNode)return!1;try{return t.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch(t){return!1}}function aw(t){var e=t.pmViewDesc;if(e)return e.parseRule();if("BR"==t.nodeName&&t.parentNode){if($b.safari&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(t.parentNode.lastChild==t||$b.safari&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if("IMG"==t.nodeName&&t.getAttribute("mark-placeholder"))return{ignore:!0}}function lw(t,e,n,o,i){if(e<0){var r=t.lastSelectionTime>Date.now()-50?t.lastSelectionOrigin:null,s=function(t,e){var n,o,i=t.root.getSelection(),r=t.state.doc,s=t.docView.nearestDesc(i.focusNode),a=s&&0==s.size,l=t.docView.posFromDOM(i.focusNode,i.focusOffset),c=r.resolve(l);if(Qb(i)){for(n=c;s&&!s.node;)s=s.parent;if(s&&s.node.isAtom&&qy.isSelectable(s.node)&&s.parent&&(!s.node.isInline||!function(t,e){for(var n=t.focusNode,o=t.focusOffset,i=o;n;){if(n==e)return 0==o||i==Xb(e);i=(o=Wb(n))+1,n=n.parentNode}}(i,s.dom))){var u=s.posBefore;o=new qy(l==u?c:r.resolve(u))}}else n=r.resolve(t.docView.posFromDOM(i.anchorNode,i.anchorOffset));return o||(o=rw(t,n,c,"pointer"==e||t.state.selection.head<c.pos&&!a?1:-1)),o}(t,r);if(!t.state.selection.eq(s)){var a=t.state.tr.setSelection(s);"pointer"==r?a.setMeta("pointer",!0):"key"==r&&a.scrollIntoView(),t.dispatch(a)}}else{var l=t.state.doc.resolve(e),c=l.sharedDepth(n);e=l.before(c+1),n=t.state.doc.resolve(n).after(c+1);var u,p,h=t.state.selection,d=function(t,e,n){var o=t.docView.parseRange(e,n),i=o.node,r=o.fromOffset,s=o.toOffset,a=o.from,l=o.to,c=t.root.getSelection(),u=null,p=c.anchorNode;if(p&&t.dom.contains(1==p.nodeType?p:p.parentNode)&&(u=[{node:p,offset:c.anchorOffset}],Qb(c)||u.push({node:c.focusNode,offset:c.focusOffset})),$b.chrome&&8===t.lastKeyCode)for(var h=s;h>r;h--){var d=i.childNodes[h-1],f=d.pmViewDesc;if("BR"==d.nodeType&&!f){s=h;break}if(!f||f.size)break}var m=t.state.doc,v=t.someProp("domParser")||Yg.fromSchema(t.state.schema),g=m.resolve(a),y=null,b=v.parse(i,{topNode:g.parent,topMatch:g.parent.contentMatchAt(g.index()),topOpen:!0,from:r,to:s,preserveWhitespace:!g.parent.type.spec.code||"full",editableContent:!0,findPositions:u,ruleFromNode:aw,context:g});if(u&&null!=u[0].pos){var _=u[0].pos,w=u[1]&&u[1].pos;null==w&&(w=_),y={anchor:_+a,head:w+a}}return{doc:b,sel:y,from:a,to:l}}(t,e,n),f=t.state.doc,m=f.slice(d.from,d.to);8===t.lastKeyCode&&Date.now()-100<t.lastKeyCodeTime?(u=t.state.selection.to,p="end"):(u=t.state.selection.from,p="start"),t.lastKeyCode=null;var v=function(t,e,n,o,i){var r=t.findDiffStart(e,n);if(null==r)return null;var s=t.findDiffEnd(e,n+t.size,n+e.size),a=s.a,l=s.b;"end"==i&&(o-=a+Math.max(0,r-Math.min(a,l))-r);if(a<r&&t.size<e.size)l=(r-=o<=r&&o>=a?r-o:0)+(l-a),a=r;else if(l<r){a=(r-=o<=r&&o>=l?r-o:0)+(a-l),l=r}return{start:r,endA:a,endB:l}}(m.content,d.doc.content,d.from,u,p);if(!v){if(!(o&&h instanceof Wy&&!h.empty&&h.$head.sameParent(h.$anchor))||t.composing||d.sel&&d.sel.anchor!=d.sel.head){if(d.sel){var g=cw(t,t.state.doc,d.sel);g&&!g.eq(t.state.selection)&&t.dispatch(t.state.tr.setSelection(g))}return}v={start:h.from,endA:h.to,endB:h.to}}t.domChangeCount++,t.state.selection.from<t.state.selection.to&&v.start==v.endB&&t.state.selection instanceof Wy&&(v.start>t.state.selection.from&&v.start<=t.state.selection.from+2?v.start=t.state.selection.from:v.endA<t.state.selection.to&&v.endA>=t.state.selection.to-2&&(v.endB+=t.state.selection.to-v.endA,v.endA=t.state.selection.to)),$b.ie&&$b.ie_version<=11&&v.endB==v.start+1&&v.endA==v.start&&v.start>d.from&&"  "==d.doc.textBetween(v.start-d.from-1,v.start-d.from+1)&&(v.start--,v.endA--,v.endB--);var y,b=d.doc.resolveNoCache(v.start-d.from),_=d.doc.resolveNoCache(v.endB-d.from);if(($b.ios&&t.lastIOSEnter>Date.now()-100&&(!b.sameParent(_)||i.some((function(t){return"DIV"==t.nodeName})))||!b.sameParent(_)&&b.pos<d.doc.content.size&&(y=Zy.findFrom(d.doc.resolve(b.pos+1),1,!0))&&y.head==_.pos)&&t.someProp("handleKeyDown",(function(e){return e(t,t_(13,"Enter"))})))t.lastIOSEnter=0;else if(t.state.selection.anchor>v.start&&function(t,e,n,o,i){if(!o.parent.isTextblock||n-e<=i.pos-o.pos||uw(o,!0,!1)<i.pos)return!1;var r=t.resolve(e);if(r.parentOffset<r.parent.content.size||!r.parent.isTextblock)return!1;var s=t.resolve(uw(r,!0,!0));return!(!s.parent.isTextblock||s.pos>n||uw(s,!0,!1)<n)&&o.parent.content.cut(o.parentOffset).eq(s.parent.content)}(f,v.start,v.endA,b,_)&&t.someProp("handleKeyDown",(function(e){return e(t,t_(8,"Backspace"))})))$b.android&&$b.chrome&&t.domObserver.suppressSelectionUpdates();else{var w,x,S,k,C=v.start,O=v.endA;if(b.sameParent(_)&&b.parent.inlineContent)if(b.pos==_.pos)$b.ie&&$b.ie_version<=11&&0==b.parentOffset&&(t.domObserver.suppressSelectionUpdates(),setTimeout((function(){return Y_(t)}),20)),w=t.state.tr.delete(C,O),x=f.resolve(v.start).marksAcross(f.resolve(v.endA));else if(v.endA==v.endB&&(k=f.resolve(v.start))&&(S=function(t,e){for(var n,o,i,r=t.firstChild.marks,s=e.firstChild.marks,a=r,l=s,c=0;c<s.length;c++)a=s[c].removeFromSet(a);for(var u=0;u<r.length;u++)l=r[u].removeFromSet(l);if(1==a.length&&0==l.length)o=a[0],n="add",i=function(t){return t.mark(o.addToSet(t.marks))};else{if(0!=a.length||1!=l.length)return null;o=l[0],n="remove",i=function(t){return t.mark(o.removeFromSet(t.marks))}}for(var p=[],h=0;h<e.childCount;h++)p.push(i(e.child(h)));if(ig.from(p).eq(t))return{mark:o,type:n}}(b.parent.content.cut(b.parentOffset,_.parentOffset),k.parent.content.cut(k.parentOffset,v.endA-k.start()))))w=t.state.tr,"add"==S.type?w.addMark(C,O,S.mark):w.removeMark(C,O,S.mark);else if(b.parent.child(b.index()).isText&&b.index()==_.index()-(_.textOffset?0:1)){var T=b.parent.textBetween(b.parentOffset,_.parentOffset);if(t.someProp("handleTextInput",(function(e){return e(t,C,O,T)})))return;w=t.state.tr.insertText(T,C,O)}if(w||(w=t.state.tr.replace(C,O,d.doc.slice(v.start-d.from,v.endB-d.from))),d.sel){var M=cw(t,w.doc,d.sel);M&&!($b.chrome&&$b.android&&t.composing&&M.empty&&M.head==C||$b.ie&&M.empty&&M.head==C)&&w.setSelection(M)}x&&w.ensureMarks(x),t.dispatch(w.scrollIntoView())}}}function cw(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:rw(t,e.resolve(n.anchor),e.resolve(n.head))}function uw(t,e,n){for(var o=t.depth,i=e?t.end():t.pos;o>0&&(e||t.indexAfter(o)==t.node(o).childCount);)o--,i++,e=!1;if(n)for(var r=t.node(o).maybeChild(t.indexAfter(o));r&&!r.isLeaf;)r=r.firstChild,i++;return i}function pw(t,e){for(var n=[],o=e.content,i=e.openStart,r=e.openEnd;i>1&&r>1&&1==o.childCount&&1==o.firstChild.childCount;){i--,r--;var s=o.firstChild;n.push(s.type.name,s.type.hasRequiredAttrs()?s.attrs:null),o=s.content}var a=t.someProp("clipboardSerializer")||ly.fromSchema(t.state.schema),l=gw(),c=l.createElement("div");c.appendChild(a.serializeFragment(o,{document:l}));for(var u,p=c.firstChild;p&&1==p.nodeType&&(u=mw[p.nodeName.toLowerCase()]);){for(var h=u.length-1;h>=0;h--){for(var d=l.createElement(u[h]);c.firstChild;)d.appendChild(c.firstChild);c.appendChild(d)}p=c.firstChild}return p&&1==p.nodeType&&p.setAttribute("data-pm-slice",i+" "+r+" "+JSON.stringify(n)),{dom:c,text:t.someProp("clipboardTextSerializer",(function(t){return t(e)}))||e.content.textBetween(0,e.content.size,"\n\n")}}function hw(t,e,n,o,i){var r,s,a=i.parent.type.spec.code;if(!n&&!e)return null;var l=e&&(o||a||!n);if(l){if(t.someProp("transformPastedText",(function(t){e=t(e)})),a)return new pg(ig.from(t.state.schema.text(e)),0,0);var c=t.someProp("clipboardTextParser",(function(t){return t(e,i)}));c?s=c:(r=document.createElement("div"),e.trim().split(/(?:\r\n?|\n)+/).forEach((function(t){r.appendChild(document.createElement("p")).textContent=t})))}else t.someProp("transformPastedHTML",(function(t){n=t(n)})),r=function(t){var e=/(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));var n,o=gw().createElement("div"),i=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(t),r=0;(n=i&&mw[i[1].toLowerCase()])&&(t=n.map((function(t){return"<"+t+">"})).join("")+t+n.map((function(t){return"</"+t+">"})).reverse().join(""),r=n.length),o.innerHTML=t;for(var s=0;s<r;s++)o=o.firstChild;return o}(n);var u=r&&r.querySelector("[data-pm-slice]"),p=u&&/^(\d+) (\d+) (.*)/.exec(u.getAttribute("data-pm-slice"));if(!s){var h=t.someProp("clipboardParser")||t.someProp("domParser")||Yg.fromSchema(t.state.schema);s=h.parseSlice(r,{preserveWhitespace:!(!l&&!p),context:i})}return s=p?function(t,e){if(!t.size)return t;var n,o=t.content.firstChild.type.schema;try{n=JSON.parse(e)}catch(e){return t}for(var i=t.content,r=t.openStart,s=t.openEnd,a=n.length-2;a>=0;a-=2){var l=o.nodes[n[a]];if(!l||l.hasRequiredAttrs())break;i=ig.from(l.create(n[a+1],i)),r++,s++}return new pg(i,r,s)}(function(t,e,n){return e<t.openStart&&(t=new pg(fw(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new pg(fw(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}(s,+p[1],+p[2]),p[3]):pg.maxOpen(function(t,e){if(t.childCount<2)return t;for(var n=function(n){var o=e.node(n).contentMatchAt(e.index(n)),i=void 0,r=[];if(t.forEach((function(t){if(r){var e,n=o.findWrapping(t.type);if(!n)return r=null;if(e=r.length&&i.length&&function t(e,n,o,i,r){if(r<e.length&&r<n.length&&e[r]==n[r]){var s=t(e,n,o,i.lastChild,r+1);if(s)return i.copy(i.content.replaceChild(i.childCount-1,s));if(i.contentMatchAt(i.childCount).matchType(r==e.length-1?o.type:e[r+1]))return i.copy(i.content.append(ig.from(dw(o,e,r+1))))}}(n,i,t,r[r.length-1],0))r[r.length-1]=e;else{r.length&&(r[r.length-1]=function t(e,n){if(0==n)return e;var o=e.content.replaceChild(e.childCount-1,t(e.lastChild,n-1)),i=e.contentMatchAt(e.childCount).fillBefore(ig.empty,!0);return e.copy(o.append(i))}(r[r.length-1],i.length));var s=dw(t,n);r.push(s),o=o.matchType(s.type,s.attrs),i=n}}})),r)return{v:ig.from(r)}},o=e.depth;o>=0;o--){var i=n(o);if(i)return i.v}return t}(s.content,i),!1),t.someProp("transformPasted",(function(t){s=t(s)})),s}function dw(t,e,n){void 0===n&&(n=0);for(var o=e.length-1;o>=n;o--)t=e[o].create(null,ig.from(t));return t}function fw(t,e,n,o,i,r){var s=e<0?t.firstChild:t.lastChild,a=s.content;return i<o-1&&(a=fw(a,e,n,o,i+1,r)),i>=n&&(a=e<0?s.contentMatchAt(0).fillBefore(a,t.childCount>1||r<=i).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(ig.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(a))}var mw={thead:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},vw=null;function gw(){return vw||(vw=document.implementation.createHTMLDocument("title"))}var yw={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},bw=$b.ie&&$b.ie_version<=11,_w=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};_w.prototype.set=function(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset},_w.prototype.eq=function(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset};var ww=function(t,e){var n=this;this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=!1,this.observer=window.MutationObserver&&new window.MutationObserver((function(t){for(var e=0;e<t.length;e++)n.queue.push(t[e]);$b.ie&&$b.ie_version<=11&&t.some((function(t){return"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length}))?n.flushSoon():n.flush()})),this.currentSelection=new _w,bw&&(this.onCharData=function(t){n.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),n.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};ww.prototype.flushSoon=function(){var t=this;this.flushingSoon||(this.flushingSoon=!0,window.setTimeout((function(){t.flushingSoon=!1,t.flush()}),20))},ww.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,yw),bw&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},ww.prototype.stop=function(){var t=this;if(this.observer){var e=this.observer.takeRecords();if(e.length){for(var n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout((function(){return t.flush()}),20)}this.observer.disconnect()}bw&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},ww.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},ww.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},ww.prototype.suppressSelectionUpdates=function(){var t=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return t.suppressingSelectionUpdates=!1}),50)},ww.prototype.onSelectionChange=function(){if((!(t=this.view).editable||t.root.activeElement==t.dom)&&sw(t)){var t;if(this.suppressingSelectionUpdates)return Y_(this.view);if($b.ie&&$b.ie_version<=11&&!this.view.state.selection.empty){var e=this.view.root.getSelection();if(e.focusNode&&Jb(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}},ww.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},ww.prototype.ignoreSelectionChange=function(t){if(0==t.rangeCount)return!0;var e=t.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(e);return n&&n.ignoreMutation({type:"selection",target:3==e.nodeType?e.parentNode:e})},ww.prototype.flush=function(){if(this.view.docView&&!this.flushingSoon){var t=this.observer?this.observer.takeRecords():[];this.queue.length&&(t=this.queue.concat(t),this.queue.length=0);var e=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(e)&&sw(this.view)&&!this.ignoreSelectionChange(e),o=-1,i=-1,r=!1,s=[];if(this.view.editable)for(var a=0;a<t.length;a++){var l=this.registerMutation(t[a],s);l&&(o=o<0?l.from:Math.min(l.from,o),i=i<0?l.to:Math.max(l.to,i),l.typeOver&&!this.view.composing&&(r=!0))}if($b.gecko&&s.length>1){var c=s.filter((function(t){return"BR"==t.nodeName}));if(2==c.length){var u=c[0],p=c[1];u.parentNode&&u.parentNode.parentNode==p.parentNode?p.remove():u.remove()}}(o>-1||n)&&(o>-1&&(this.view.docView.markDirty(o,i),function(t){xw||(xw=!0,"normal"==getComputedStyle(t.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."))}(this.view)),this.handleDOMChange(o,i,r,s),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(e)||Y_(this.view))}},ww.prototype.registerMutation=function(t,e){if(e.indexOf(t.target)>-1)return null;var n=this.view.docView.nearestDesc(t.target);if("attributes"==t.type&&(n==this.view.docView||"contenteditable"==t.attributeName||"style"==t.attributeName&&!t.oldValue&&!t.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(t))return null;if("childList"==t.type){var o=t.previousSibling,i=t.nextSibling;if($b.ie&&$b.ie_version<=11&&t.addedNodes.length)for(var r=0;r<t.addedNodes.length;r++){var s=t.addedNodes[r],a=s.previousSibling,l=s.nextSibling;(!a||Array.prototype.indexOf.call(t.addedNodes,a)<0)&&(o=a),(!l||Array.prototype.indexOf.call(t.addedNodes,l)<0)&&(i=l)}for(var c=o&&o.parentNode==t.target?Wb(o)+1:0,u=n.localPosFromDOM(t.target,c,-1),p=i&&i.parentNode==t.target?Wb(i):t.target.childNodes.length,h=0;h<t.addedNodes.length;h++)e.push(t.addedNodes[h]);return{from:u,to:n.localPosFromDOM(t.target,p,1)}}return"attributes"==t.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}};var xw=!1,Sw={},kw={};function Cw(t,e){t.lastSelectionOrigin=e,t.lastSelectionTime=Date.now()}function Ow(t){t.someProp("handleDOMEvents",(function(e){for(var n in e)t.eventHandlers[n]||t.dom.addEventListener(n,t.eventHandlers[n]=function(e){return Tw(t,e)})}))}function Tw(t,e){return t.someProp("handleDOMEvents",(function(n){var o=n[e.type];return!!o&&(o(t,e)||e.defaultPrevented)}))}function Mw(t){return{left:t.clientX,top:t.clientY}}function Ew(t,e,n,o,i){if(-1==o)return!1;for(var r=t.state.doc.resolve(o),s=function(o){if(t.someProp(e,(function(e){return o>r.depth?e(t,n,r.nodeAfter,r.before(o),i,!0):e(t,n,r.node(o),r.before(o),i,!1)})))return{v:!0}},a=r.depth+1;a>0;a--){var l=s(a);if(l)return l.v}return!1}function Aw(t,e,n){t.focused||t.focus();var o=t.state.tr.setSelection(e);"pointer"==n&&o.setMeta("pointer",!0),t.dispatch(o)}function Nw(t,e,n,o){return Ew(t,"handleTripleClickOn",e,n,o)||t.someProp("handleTripleClick",(function(n){return n(t,e,o)}))||function(t,e){var n=t.state.doc;if(-1==e)return!!n.inlineContent&&(Aw(t,Wy.create(n,0,n.content.size),"pointer"),!0);for(var o=n.resolve(e),i=o.depth+1;i>0;i--){var r=i>o.depth?o.nodeAfter:o.node(i),s=o.before(i);if(r.inlineContent)Aw(t,Wy.create(n,s+1,s+1+r.content.size),"pointer");else{if(!qy.isSelectable(r))continue;Aw(t,qy.create(n,s),"pointer")}return!0}}(t,n)}function Pw(t){return Bw(t)}kw.keydown=function(t,e){t.shiftKey=16==e.keyCode||e.shiftKey,Dw(t,e)||(t.lastKeyCode=e.keyCode,t.lastKeyCodeTime=Date.now(),!$b.ios||13!=e.keyCode||e.ctrlKey||e.altKey||e.metaKey?t.someProp("handleKeyDown",(function(n){return n(t,e)}))||function(t,e){var n=e.keyCode,o=function(t){var e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}(e);return 8==n||$b.mac&&72==n&&"c"==o?G_(t,-1)||W_(t):46==n||$b.mac&&68==n&&"c"==o?G_(t,1)||U_(t):13==n&&!$b.ios||27==n||(37==n?Z_(t,-1,o)||W_(t):39==n?Z_(t,1,o)||U_(t):38==n?K_(t,-1,o)||W_(t):40==n?function(t){if($b.chrome&&!(t.state.selection.$head.parentOffset>0)){var e=t.root.getSelection(),n=e.focusNode,o=e.focusOffset;if(n&&1==n.nodeType&&0==o&&n.firstChild&&"false"==n.firstChild.contentEditable){var i=n.firstChild;X_(t,i,!0),setTimeout((function(){return X_(t,i,!1)}),20)}}}(t)||K_(t,1,o)||U_(t):o==($b.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}(t,e)?e.preventDefault():Cw(t,"key"):t.lastIOSEnter=Date.now())},kw.keyup=function(t,e){16==e.keyCode&&(t.shiftKey=!1)},kw.keypress=function(t,e){if(!(Dw(t,e)||!e.charCode||e.ctrlKey&&!e.altKey||$b.mac&&e.metaKey))if(t.someProp("handleKeyPress",(function(n){return n(t,e)})))e.preventDefault();else{var n=t.state.selection;if(!(n instanceof Wy&&n.$from.sameParent(n.$to))){var o=String.fromCharCode(e.charCode);t.someProp("handleTextInput",(function(e){return e(t,n.$from.pos,n.$to.pos,o)}))||t.dispatch(t.state.tr.insertText(o).scrollIntoView()),e.preventDefault()}}};var Lw=$b.mac?"metaKey":"ctrlKey";Sw.mousedown=function(t,e){t.shiftKey=e.shiftKey;var n=Pw(t),o=Date.now(),i="singleClick";o-t.lastClick.time<500&&function(t,e){var n=e.x-t.clientX,o=e.y-t.clientY;return n*n+o*o<100}(e,t.lastClick)&&!e[Lw]&&("singleClick"==t.lastClick.type?i="doubleClick":"doubleClick"==t.lastClick.type&&(i="tripleClick")),t.lastClick={time:o,x:e.clientX,y:e.clientY,type:i};var r=t.posAtCoords(Mw(e));r&&("singleClick"==i?t.mouseDown=new Iw(t,r,e,n):("doubleClick"==i?function(t,e,n,o){return Ew(t,"handleDoubleClickOn",e,n,o)||t.someProp("handleDoubleClick",(function(n){return n(t,e,o)}))}:Nw)(t,r.pos,r.inside,e)?e.preventDefault():Cw(t,"pointer"))};var Iw=function(t,e,n,o){var i,r,s=this;if(this.view=t,this.startDoc=t.state.doc,this.pos=e,this.event=n,this.flushed=o,this.selectNode=n[Lw],this.allowDefault=n.shiftKey,e.inside>-1)i=t.state.doc.nodeAt(e.inside),r=e.inside;else{var a=t.state.doc.resolve(e.pos);i=a.parent,r=a.depth?a.before():0}this.mightDrag=null;var l=o?null:n.target,c=l?t.docView.nearestDesc(l,!0):null;this.target=c?c.dom:null,(i.type.spec.draggable&&!1!==i.type.spec.selectable||t.state.selection instanceof qy&&r==t.state.selection.from)&&(this.mightDrag={node:i,pos:r,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&$b.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){return s.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),Cw(t,"pointer")};function Dw(t,e){return!!t.composing||!!($b.safari&&Math.abs(e.timeStamp-t.compositionEndedAt)<500)&&(t.compositionEndedAt=-2e8,!0)}Iw.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!1),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},Iw.prototype.up=function(t){if(this.done(),this.view.dom.contains(3==t.target.nodeType?t.target.parentNode:t.target)){var e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(Mw(t))),this.allowDefault||!e?Cw(this.view,"pointer"):function(t,e,n,o,i){return Ew(t,"handleClickOn",e,n,o)||t.someProp("handleClick",(function(n){return n(t,e,o)}))||(i?function(t,e){if(-1==e)return!1;var n,o,i=t.state.selection;i instanceof qy&&(n=i.node);for(var r=t.state.doc.resolve(e),s=r.depth+1;s>0;s--){var a=s>r.depth?r.nodeAfter:r.node(s);if(qy.isSelectable(a)){o=n&&i.$from.depth>0&&s>=i.$from.depth&&r.before(i.$from.depth+1)==i.$from.pos?r.before(i.$from.depth):r.before(s);break}}return null!=o&&(Aw(t,qy.create(t.state.doc,o),"pointer"),!0)}(t,n):function(t,e){if(-1==e)return!1;var n=t.state.doc.resolve(e),o=n.nodeAfter;return!!(o&&o.isAtom&&qy.isSelectable(o))&&(Aw(t,new qy(n),"pointer"),!0)}(t,n))}(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():!this.flushed&&(!$b.chrome||this.view.state.selection instanceof Wy||e.pos!=this.view.state.selection.from&&e.pos!=this.view.state.selection.to)?Cw(this.view,"pointer"):(Aw(this.view,Zy.near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault())}},Iw.prototype.move=function(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0),Cw(this.view,"pointer")},Sw.touchdown=function(t){Pw(t),Cw(t,"pointer")},Sw.contextmenu=function(t){return Pw(t)};var Rw=$b.android?5e3:-1;function zw(t,e){clearTimeout(t.composingTimeout),e>-1&&(t.composingTimeout=setTimeout((function(){return Bw(t)}),e))}function Bw(t,e){for(t.composing=!1;t.compositionNodes.length>0;)t.compositionNodes.pop().markParentsDirty();return!(!e&&!t.docView.dirty||(t.updateState(t.state),0))}kw.compositionstart=kw.compositionupdate=function(t){if(!t.composing){t.domObserver.flush();var e=t.state,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(t){return!1===t.type.spec.inclusive}))))t.markCursor=t.state.storedMarks||n.marks(),Bw(t,!0),t.markCursor=null;else if(Bw(t),$b.gecko&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var o=t.root.getSelection(),i=o.focusNode,r=o.focusOffset;i&&1==i.nodeType&&0!=r;){var s=r<0?i.lastChild:i.childNodes[r-1];if(!s)break;if(3==s.nodeType){o.collapse(s,s.nodeValue.length);break}i=s,r=-1}t.composing=!0}zw(t,Rw)},kw.compositionend=function(t,e){t.composing&&(t.composing=!1,t.compositionEndedAt=e.timeStamp,zw(t,20))};var $w=$b.ie&&$b.ie_version<15||$b.ios&&$b.webkit_version<604;function jw(t,e,n,o){var i=hw(t,e,n,t.shiftKey,t.state.selection.$from);if(!t.someProp("handlePaste",(function(e){return e(t,o,i||pg.empty)}))&&i){var r=function(t){return 0==t.openStart&&0==t.openEnd&&1==t.content.childCount?t.content.firstChild:null}(i),s=r?t.state.tr.replaceSelectionWith(r,t.shiftKey):t.state.tr.replaceSelection(i);t.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste"))}}Sw.copy=kw.cut=function(t,e){var n=t.state.selection,o="cut"==e.type;if(!n.empty){var i=$w?null:e.clipboardData,r=pw(t,n.content()),s=r.dom,a=r.text;i?(e.preventDefault(),i.clearData(),i.setData("text/html",s.innerHTML),i.setData("text/plain",a)):function(t,e){var n=t.dom.ownerDocument,o=n.body.appendChild(n.createElement("div"));o.appendChild(e),o.style.cssText="position: fixed; left: -10000px; top: 10px";var i=getSelection(),r=n.createRange();r.selectNodeContents(e),t.dom.blur(),i.removeAllRanges(),i.addRange(r),setTimeout((function(){n.body.removeChild(o),t.focus()}),50)}(t,s),o&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},kw.paste=function(t,e){var n=$w?null:e.clipboardData,o=n&&n.getData("text/html"),i=n&&n.getData("text/plain");n&&(o||i||n.files.length)?(jw(t,i,o,e),e.preventDefault()):function(t,e){var n=t.dom.ownerDocument,o=t.shiftKey||t.state.selection.$from.parent.type.spec.code,i=n.body.appendChild(n.createElement(o?"textarea":"div"));o||(i.contentEditable="true"),i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus(),setTimeout((function(){t.focus(),n.body.removeChild(i),o?jw(t,i.value,null,e):jw(t,i.textContent,i.innerHTML,e)}),50)}(t,e)};var Vw=function(t,e){this.slice=t,this.move=e},Zw=$b.mac?"altKey":"ctrlKey";for(var Fw in Sw.dragstart=function(t,e){var n=t.mouseDown;if(n&&n.done(),e.dataTransfer){var o=t.state.selection,i=o.empty?null:t.posAtCoords(Mw(e));if(i&&i.pos>=o.from&&i.pos<=(o instanceof qy?o.to-1:o.to));else if(n&&n.mightDrag)t.dispatch(t.state.tr.setSelection(qy.create(t.state.doc,n.mightDrag.pos)));else if(e.target&&1==e.target.nodeType){var r=t.docView.nearestDesc(e.target,!0);if(!r||!r.node.type.spec.draggable||r==t.docView)return;t.dispatch(t.state.tr.setSelection(qy.create(t.state.doc,r.posBefore)))}var s=t.state.selection.content(),a=pw(t,s),l=a.dom,c=a.text;e.dataTransfer.clearData(),e.dataTransfer.setData($w?"Text":"text/html",l.innerHTML),$w||e.dataTransfer.setData("text/plain",c),t.dragging=new Vw(s,!e[Zw])}},Sw.dragend=function(t){window.setTimeout((function(){return t.dragging=null}),50)},kw.dragover=kw.dragenter=function(t,e){return e.preventDefault()},kw.drop=function(t,e){var n=t.dragging;if(t.dragging=null,e.dataTransfer){var o=t.posAtCoords(Mw(e));if(o){var i=t.state.doc.resolve(o.pos);if(i){var r=n&&n.slice||hw(t,e.dataTransfer.getData($w?"Text":"text/plain"),$w?null:e.dataTransfer.getData("text/html"),!1,i);if(r&&(e.preventDefault(),!t.someProp("handleDrop",(function(o){return o(t,e,r,n&&n.move)})))){var s=r?function(t,e,n){var o=t.resolve(e);if(!n.content.size)return e;for(var i=n.content,r=0;r<n.openStart;r++)i=i.firstChild.content;for(var s=1;s<=(0==n.openStart&&n.size?2:1);s++)for(var a=o.depth;a>=0;a--){var l=a==o.depth?0:o.pos<=(o.start(a+1)+o.end(a+1))/2?-1:1,c=o.index(a)+(l>0?1:0);if(1==s?o.node(a).canReplace(c,c,i):o.node(a).contentMatchAt(c).findWrapping(i.firstChild.type))return 0==l?o.pos:l<0?o.before(a+1):o.after(a+1)}return null}(t.state.doc,i.pos,r):i.pos;null==s&&(s=i.pos);var a=t.state.tr;n&&n.move&&a.deleteSelection();var l=a.mapping.map(s),c=0==r.openStart&&0==r.openEnd&&1==r.content.childCount,u=a.doc;if(c?a.replaceRangeWith(l,l,r.content.firstChild):a.replaceRange(l,l,r),!a.doc.eq(u)){var p=a.doc.resolve(l);c&&qy.isSelectable(r.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(r.content.firstChild)?a.setSelection(new qy(p)):a.setSelection(rw(t,p,a.doc.resolve(a.mapping.map(s)))),t.focus(),t.dispatch(a.setMeta("uiEvent","drop"))}}}}}},Sw.focus=function(t){t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0)},Sw.blur=function(t){t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),t.domObserver.currentSelection.set({}),t.focused=!1)},Sw.beforeinput=function(t,e){if($b.chrome&&$b.android&&"deleteContentBackward"==e.inputType){var n=t.domChangeCount;setTimeout((function(){if(t.domChangeCount==n&&(t.dom.blur(),t.focus(),!t.someProp("handleKeyDown",(function(e){return e(t,t_(8,"Backspace"))})))){var e=t.state.selection.$cursor;e&&e.pos>0&&t.dispatch(t.state.tr.delete(e.pos-1,e.pos).scrollIntoView())}}),50)}},kw)Sw[Fw]=kw[Fw];function Hw(t,e){if(t==e)return!0;for(var n in t)if(t[n]!==e[n])return!1;for(var o in e)if(!(o in t))return!1;return!0}var Ww=function(t,e){this.spec=e||Xw,this.side=this.spec.side||0,this.toDOM=t};Ww.prototype.map=function(t,e,n,o){var i=t.mapResult(e.from+o,this.side<0?-1:1),r=i.pos;return i.deleted?null:new Jw(r-n,r-n,this)},Ww.prototype.valid=function(){return!0},Ww.prototype.eq=function(t){return this==t||t instanceof Ww&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Hw(this.spec,t.spec))};var Uw=function(t,e){this.spec=e||Xw,this.attrs=t};Uw.prototype.map=function(t,e,n,o){var i=t.map(e.from+o,this.spec.inclusiveStart?-1:1)-n,r=t.map(e.to+o,this.spec.inclusiveEnd?1:-1)-n;return i>=r?null:new Jw(i,r,this)},Uw.prototype.valid=function(t,e){return e.from<e.to},Uw.prototype.eq=function(t){return this==t||t instanceof Uw&&Hw(this.attrs,t.attrs)&&Hw(this.spec,t.spec)},Uw.is=function(t){return t.type instanceof Uw};var qw=function(t,e){this.spec=e||Xw,this.attrs=t};qw.prototype.map=function(t,e,n,o){var i=t.mapResult(e.from+o,1);if(i.deleted)return null;var r=t.mapResult(e.to+o,-1);return r.deleted||r.pos<=i.pos?null:new Jw(i.pos-n,r.pos-n,this)},qw.prototype.valid=function(t,e){var n=t.content.findIndex(e.from),o=n.index,i=n.offset;return i==e.from&&i+t.child(o).nodeSize==e.to},qw.prototype.eq=function(t){return this==t||t instanceof qw&&Hw(this.attrs,t.attrs)&&Hw(this.spec,t.spec)};var Jw=function(t,e,n){this.from=t,this.to=e,this.type=n},Kw={spec:{configurable:!0}};Jw.prototype.copy=function(t,e){return new Jw(t,e,this.type)},Jw.prototype.eq=function(t){return this.type.eq(t.type)&&this.from==t.from&&this.to==t.to},Jw.prototype.map=function(t,e,n){return this.type.map(t,this,e,n)},Jw.widget=function(t,e,n){return new Jw(t,t,new Ww(e,n))},Jw.inline=function(t,e,n,o){return new Jw(t,e,new Uw(n,o))},Jw.node=function(t,e,n,o){return new Jw(t,e,new qw(n,o))},Kw.spec.get=function(){return this.type.spec},Object.defineProperties(Jw.prototype,Kw);var Gw=[],Xw={},Yw=function(t,e){this.local=t&&t.length?t:Gw,this.children=e&&e.length?e:Gw};Yw.create=function(t,e){return e.length?ix(e,t,0,Xw):Qw},Yw.prototype.find=function(t,e,n){var o=[];return this.findInner(null==t?0:t,null==e?1e9:e,o,0,n),o},Yw.prototype.findInner=function(t,e,n,o,i){for(var r=0;r<this.local.length;r++){var s=this.local[r];s.from<=e&&s.to>=t&&(!i||i(s.spec))&&n.push(s.copy(s.from+o,s.to+o))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<e&&this.children[a+1]>t){var l=this.children[a]+1;this.children[a+2].findInner(t-l,e-l,n,o+l,i)}},Yw.prototype.map=function(t,e,n){return this==Qw||0==t.maps.length?this:this.mapInner(t,e,0,0,n||Xw)},Yw.prototype.mapInner=function(t,e,n,o,i){for(var r,s=0;s<this.local.length;s++){var a=this.local[s].map(t,n,o);a&&a.type.valid(e,a)?(r||(r=[])).push(a):i.onRemove&&i.onRemove(this.local[s].spec)}return this.children.length?function(t,e,n,o,i,r,s){for(var a=t.slice(),l=function(t,e,n,o){for(var s=0;s<a.length;s+=3){var l=a[s+1],c=void 0;-1==l||t>l+r||(e>=a[s]+r?a[s+1]=-1:(c=o-n-(e-t)+(r-i))&&(a[s]+=c,a[s+1]+=c))}},c=0;c<n.maps.length;c++)n.maps[c].forEach(l);for(var u=!1,p=0;p<a.length;p+=3)if(-1==a[p+1]){var h=n.map(a[p]+r),d=h-i;if(d<0||d>=o.content.size){u=!0;continue}var f=n.map(t[p+1]+r,-1)-i,m=o.content.findIndex(d),v=m.index,g=m.offset,y=o.maybeChild(v);if(y&&g==d&&g+y.nodeSize==f){var b=a[p+2].mapInner(n,y,h+1,a[p]+r+1,s);b!=Qw?(a[p]=d,a[p+1]=f,a[p+2]=b):(a[p+1]=-2,u=!0)}else u=!0}if(u){var _=function(t,e,n,o,i,r,s){function a(t,e){for(var r=0;r<t.local.length;r++){var l=t.local[r].map(o,i,e);l?n.push(l):s.onRemove&&s.onRemove(t.local[r].spec)}for(var c=0;c<t.children.length;c+=3)a(t.children[c+2],t.children[c]+e+1)}for(var l=0;l<t.length;l+=3)-1==t[l+1]&&a(t[l+2],e[l]+r+1);return n}(a,t,e||[],n,i,r,s),w=ix(_,o,0,s);e=w.local;for(var x=0;x<a.length;x+=3)a[x+1]<0&&(a.splice(x,3),x-=3);for(var S=0,k=0;S<w.children.length;S+=3){for(var C=w.children[S];k<a.length&&a[k]<C;)k+=3;a.splice(k,0,w.children[S],w.children[S+1],w.children[S+2])}}return new Yw(e&&e.sort(rx),a)}(this.children,r,t,e,n,o,i):r?new Yw(r.sort(rx)):Qw},Yw.prototype.add=function(t,e){return e.length?this==Qw?Yw.create(t,e):this.addInner(t,e,0):this},Yw.prototype.addInner=function(t,e,n){var o,i=this,r=0;t.forEach((function(t,s){var a,l=s+n;if(a=nx(e,t,l)){for(o||(o=i.children.slice());r<o.length&&o[r]<s;)r+=3;o[r]==s?o[r+2]=o[r+2].addInner(t,a,l+1):o.splice(r,0,s,s+t.nodeSize,ix(a,t,l+1,Xw)),r+=3}}));var s=ex(r?ox(e):e,-n);return new Yw(s.length?this.local.concat(s).sort(rx):this.local,o||this.children)},Yw.prototype.remove=function(t){return 0==t.length||this==Qw?this:this.removeInner(t,0)},Yw.prototype.removeInner=function(t,e){for(var n=this.children,o=this.local,i=0;i<n.length;i+=3){for(var r=void 0,s=n[i]+e,a=n[i+1]+e,l=0,c=void 0;l<t.length;l++)(c=t[l])&&c.from>s&&c.to<a&&(t[l]=null,(r||(r=[])).push(c));if(r){n==this.children&&(n=this.children.slice());var u=n[i+2].removeInner(r,s+1);u!=Qw?n[i+2]=u:(n.splice(i,3),i-=3)}}if(o.length)for(var p=0,h=void 0;p<t.length;p++)if(h=t[p])for(var d=0;d<o.length;d++)o[d].type.eq(h.type)&&(o==this.local&&(o=this.local.slice()),o.splice(d--,1));return n==this.children&&o==this.local?this:o.length||n.length?new Yw(o,n):Qw},Yw.prototype.forChild=function(t,e){if(this==Qw)return this;if(e.isLeaf)return Yw.empty;for(var n,o,i=0;i<this.children.length;i+=3)if(this.children[i]>=t){this.children[i]==t&&(n=this.children[i+2]);break}for(var r=t+1,s=r+e.content.size,a=0;a<this.local.length;a++){var l=this.local[a];if(l.from<s&&l.to>r&&l.type instanceof Uw){var c=Math.max(r,l.from)-r,u=Math.min(s,l.to)-r;c<u&&(o||(o=[])).push(l.copy(c,u))}}if(o){var p=new Yw(o.sort(rx));return n?new tx([p,n]):p}return n||Qw},Yw.prototype.eq=function(t){if(this==t)return!0;if(!(t instanceof Yw)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(var e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0},Yw.prototype.locals=function(t){return sx(this.localsInner(t))},Yw.prototype.localsInner=function(t){if(this==Qw)return Gw;if(t.inlineContent||!this.local.some(Uw.is))return this.local;for(var e=[],n=0;n<this.local.length;n++)this.local[n].type instanceof Uw||e.push(this.local[n]);return e};var Qw=new Yw;Yw.empty=Qw,Yw.removeOverlap=sx;var tx=function(t){this.members=t};function ex(t,e){if(!e||!t.length)return t;for(var n=[],o=0;o<t.length;o++){var i=t[o];n.push(new Jw(i.from+e,i.to+e,i.type))}return n}function nx(t,e,n){if(e.isLeaf)return null;for(var o=n+e.nodeSize,i=null,r=0,s=void 0;r<t.length;r++)(s=t[r])&&s.from>n&&s.to<o&&((i||(i=[])).push(s),t[r]=null);return i}function ox(t){for(var e=[],n=0;n<t.length;n++)null!=t[n]&&e.push(t[n]);return e}function ix(t,e,n,o){var i=[],r=!1;e.forEach((function(e,s){var a=nx(t,e,s+n);if(a){r=!0;var l=ix(a,e,n+s+1,o);l!=Qw&&i.push(s,s+e.nodeSize,l)}}));for(var s=ex(r?ox(t):t,-n).sort(rx),a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(o.onRemove&&o.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new Yw(s,i):Qw}function rx(t,e){return t.from-e.from||t.to-e.to}function sx(t){for(var e=t,n=0;n<e.length-1;n++){var o=e[n];if(o.from!=o.to)for(var i=n+1;i<e.length;i++){var r=e[i];if(r.from!=o.from){r.from<o.to&&(e==t&&(e=t.slice()),e[n]=o.copy(o.from,r.from),ax(e,i,o.copy(r.from,o.to)));break}r.to!=o.to&&(e==t&&(e=t.slice()),e[i]=r.copy(r.from,o.to),ax(e,i+1,r.copy(o.to,r.to)))}}return e}function ax(t,e,n){for(;e<t.length&&rx(n,t[e])>0;)e++;t.splice(e,0,n)}function lx(t){var e=[];return t.someProp("decorations",(function(n){var o=n(t.state);o&&o!=Qw&&e.push(o)})),t.cursorWrapper&&e.push(Yw.create(t.state.doc,[t.cursorWrapper.deco])),tx.from(e)}tx.prototype.forChild=function(t,e){if(e.isLeaf)return Yw.empty;for(var n=[],o=0;o<this.members.length;o++){var i=this.members[o].forChild(t,e);i!=Qw&&(i instanceof tx?n=n.concat(i.members):n.push(i))}return tx.from(n)},tx.prototype.eq=function(t){if(!(t instanceof tx)||t.members.length!=this.members.length)return!1;for(var e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0},tx.prototype.locals=function(t){for(var e,n=!0,o=0;o<this.members.length;o++){var i=this.members[o].localsInner(t);if(i.length)if(e){n&&(e=e.slice(),n=!1);for(var r=0;r<i.length;r++)e.push(i[r])}else e=i}return e?sx(n?e:e.sort(rx)):Gw},tx.from=function(t){switch(t.length){case 0:return Qw;case 1:return t[0];default:return new tx(t)}};var cx,ux,px=function(t,e){this._props=e,this.state=e.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):t.apply?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=mx(this),this.markCursor=null,this.cursorWrapper=null,fx(this),this.nodeViews=vx(this),this.docView=C_(this.state.doc,dx(this),lx(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(t){t.shiftKey=!1,t.mouseDown=null,t.lastKeyCode=null,t.lastKeyCodeTime=0,t.lastClick={time:0,x:0,y:0,type:""},t.lastSelectionOrigin=null,t.lastSelectionTime=0,t.lastIOSEnter=0,t.composing=!1,t.composingTimeout=null,t.compositionNodes=[],t.compositionEndedAt=-2e8,t.domObserver=new ww(t,(function(e,n,o,i){return lw(t,e,n,o,i)})),t.domObserver.start(),t.domChangeCount=0,t.eventHandlers=Object.create(null);var e=function(e){var n=Sw[e];t.dom.addEventListener(e,t.eventHandlers[e]=function(e){!function(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(var n=e.target;n!=t.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}(t,e)||Tw(t,e)||!t.editable&&e.type in kw||n(t,e)})};for(var n in Sw)e(n);$b.safari&&t.dom.addEventListener("input",(function(){return null})),Ow(t)}(this),this.pluginViews=[],this.updatePluginViews()},hx={props:{configurable:!0},root:{configurable:!0}};function dx(t){var e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(t.state)),n)for(var o in n)"class"==o?e.class+=" "+n[o]:e[o]||"contenteditable"==o||"nodeName"==o||(e[o]=String(n[o]))})),[Jw.node(0,t.state.doc.content.size,e)]}function fx(t){var e=t.state.selection,n=e.$head,o=e.$anchor,i=e.visible;if(t.markCursor){var r=document.createElement("img");r.setAttribute("mark-placeholder","true"),t.cursorWrapper={dom:r,deco:Jw.widget(n.pos,r,{raw:!0,marks:t.markCursor})}}else if(i||n.pos!=o.pos)t.cursorWrapper=null;else{var s;!t.cursorWrapper||t.cursorWrapper.dom.childNodes.length?((s=document.createElement("div")).style.position="absolute",s.style.left="-100000px"):t.cursorWrapper.deco.pos!=n.pos&&(s=t.cursorWrapper.dom),s&&(t.cursorWrapper={dom:s,deco:Jw.widget(n.pos,s,{raw:!0})})}}function mx(t){return!t.someProp("editable",(function(e){return!1===e(t.state)}))}function vx(t){var e={};return t.someProp("nodeViews",(function(t){for(var n in t)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=t[n])})),e}if(hx.props.get=function(){if(this._props.state!=this.state){var t=this._props;for(var e in this._props={},t)this._props[e]=t[e];this._props.state=this.state}return this._props},px.prototype.update=function(t){t.handleDOMEvents!=this._props.handleDOMEvents&&Ow(this),this._props=t,this.updateStateInner(t.state,!0)},px.prototype.setProps=function(t){var e={};for(var n in this._props)e[n]=this._props[n];for(var o in e.state=this.state,t)e[o]=t[o];this.update(e)},px.prototype.updateState=function(t){this.updateStateInner(t,this.state.plugins!=t.plugins)},px.prototype.updateStateInner=function(t,e){var n=this,o=this.state,i=!1;if(this.state=t,e){var r=vx(this);(function(t,e){var n=0,o=0;for(var i in t){if(t[i]!=e[i])return!0;n++}for(var r in e)o++;return n!=o})(r,this.nodeViews)&&(this.nodeViews=r,i=!0),Ow(this)}this.editable=mx(this),fx(this);var s,a,l,c,u,p,h,d,f,m,v=lx(this),g=dx(this),y=e?"reset":t.scrollToSelection>o.scrollToSelection?"to selection":"preserve",b=i||!this.docView.matchesNode(t.doc,g,v),_=b||!t.selection.eq(o.selection),w="preserve"==y&&_&&null==this.dom.style.overflowAnchor&&function(t){for(var e,n,o=t.dom.getBoundingClientRect(),i=Math.max(0,o.top),r=(o.left+o.right)/2,s=i+1;s<Math.min(innerHeight,o.bottom);s+=5){var a=t.root.elementFromPoint(r,s);if(a!=t.dom&&t.dom.contains(a)){var l=a.getBoundingClientRect();if(l.top>=i-20){e=a,n=l.top;break}}}return{refDOM:e,refTop:n,stack:i_(t.dom)}}(this);if(_){this.domObserver.stop();var x=b&&($b.ie||$b.chrome)&&!o.selection.empty&&!t.selection.empty&&(c=o.selection,u=t.selection,p=Math.min(c.$anchor.sharedDepth(c.head),u.$anchor.sharedDepth(u.head)),c.$anchor.node(p)!=u.$anchor.node(p));b&&(!i&&this.docView.update(t.doc,g,v,this)||(this.docView.destroy(),this.docView=C_(t.doc,g,v,this.dom,this))),x||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&(s=this,a=s.docView.domFromPos(s.state.selection.anchor),l=s.root.getSelection(),Jb(a.node,a.offset,l.anchorNode,l.anchorOffset)))?Y_(this,x):(ow(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(o),"reset"==y)this.dom.scrollTop=0;else if("to selection"==y){var S=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(t){return t(n)}))||(t.selection instanceof qy?o_(this,this.docView.domAfterPos(t.selection.from).getBoundingClientRect(),S):o_(this,this.coordsAtPos(t.selection.head),S))}else w&&(d=(h=w).refDOM,f=h.refTop,r_(h.stack,0==(m=d?d.getBoundingClientRect().top:0)?0:m-f))},px.prototype.destroyPluginViews=function(){for(var t;t=this.pluginViews.pop();)t.destroy&&t.destroy()},px.prototype.updatePluginViews=function(t){if(t&&t.plugins==this.state.plugins)for(var e=0;e<this.pluginViews.length;e++){var n=this.pluginViews[e];n.update&&n.update(this,t)}else{this.destroyPluginViews();for(var o=0;o<this.state.plugins.length;o++){var i=this.state.plugins[o];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}},px.prototype.someProp=function(t,e){var n,o=this._props&&this._props[t];if(null!=o&&(n=e?e(o):o))return n;var i=this.state.plugins;if(i)for(var r=0;r<i.length;r++){var s=i[r].props[t];if(null!=s&&(n=e?e(s):s))return n}},px.prototype.hasFocus=function(){return this.root.activeElement==this.dom},px.prototype.focus=function(){this.domObserver.stop(),this.editable&&function(t){if(t.setActive)return t.setActive();if(s_)return t.focus(s_);var e=i_(t);t.focus(null==s_?{get preventScroll(){return s_={preventScroll:!0},!0}}:void 0),s_||(s_=!1,r_(e,0))}(this.dom),Y_(this),this.domObserver.start()},hx.root.get=function(){var t=this._root;if(null==t)for(var e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=function(){return document.getSelection()}),this._root=e;return t||document},px.prototype.posAtCoords=function(t){return c_(this,t)},px.prototype.coordsAtPos=function(t){return p_(this,t)},px.prototype.domAtPos=function(t){return this.docView.domFromPos(t)},px.prototype.nodeDOM=function(t){var e=this.docView.descAt(t);return e?e.nodeDOM:null},px.prototype.posAtDOM=function(t,e,n){void 0===n&&(n=-1);var o=this.docView.posFromDOM(t,e,n);if(null==o)throw new RangeError("DOM position not inside the editor");return o},px.prototype.endOfTextblock=function(t,e){return function(t,e,n){return m_==e&&v_==n?g_:(m_=e,v_=n,g_="up"==n||"down"==n?function(t,e,n){var o=e.selection,i="up"==n?o.$anchor.min(o.$head):o.$anchor.max(o.$head);return d_(t,e,(function(){for(var e=t.docView.domFromPos(i.pos).node;;){var o=t.docView.nearestDesc(e,!0);if(!o)break;if(o.node.isBlock){e=o.dom;break}e=o.dom.parentNode}for(var r=p_(t,i.pos),s=e.firstChild;s;s=s.nextSibling){var a=void 0;if(1==s.nodeType)a=s.getClientRects();else{if(3!=s.nodeType)continue;a=qb(s,0,s.nodeValue.length).getClientRects()}for(var l=0;l<a.length;l++){var c=a[l];if(c.bottom>c.top&&("up"==n?c.bottom<r.top+1:c.top>r.bottom-1))return!1}}return!0}))}(t,e,n):function(t,e,n){var o=e.selection.$head;if(!o.parent.isTextblock)return!1;var i=o.parentOffset,r=!i,s=i==o.parent.content.size,a=getSelection();return f_.test(o.parent.textContent)&&a.modify?d_(t,e,(function(){var e=a.getRangeAt(0),i=a.focusNode,r=a.focusOffset,s=a.caretBidiLevel;a.modify("move",n,"character");var l=!(o.depth?t.docView.domAfterPos(o.before()):t.dom).contains(1==a.focusNode.nodeType?a.focusNode:a.focusNode.parentNode)||i==a.focusNode&&r==a.focusOffset;return a.removeAllRanges(),a.addRange(e),null!=s&&(a.caretBidiLevel=s),l})):"left"==n||"backward"==n?r:s}(t,e,n))}(this,e||this.state,t)},px.prototype.destroy=function(){this.docView&&(function(t){for(var e in t.domObserver.stop(),t.eventHandlers)t.dom.removeEventListener(e,t.eventHandlers[e]);clearTimeout(t.composingTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],lx(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},px.prototype.dispatchEvent=function(t){return function(t,e){Tw(t,e)||!Sw[e.type]||!t.editable&&e.type in kw||Sw[e.type](t,e)}(this,t)},px.prototype.dispatch=function(t){var e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))},Object.defineProperties(px.prototype,hx),"undefined"!=typeof WeakMap){var gx=new WeakMap;cx=function(t){return gx.get(t)},ux=function(t,e){return gx.set(t,e),e}}else{var yx=[],bx=0;cx=function(t){for(var e=0;e<yx.length;e+=2)if(yx[e]==t)return yx[e+1]},ux=function(t,e){return 10==bx&&(bx=0),yx[bx++]=t,yx[bx++]=e}}var _x=function(t,e,n,o){this.left=t,this.top=e,this.right=n,this.bottom=o},wx=function(t,e,n,o){this.width=t,this.height=e,this.map=n,this.problems=o};function xx(t){if(t.colwidth)return t.colwidth.slice();for(var e=[],n=0;n<t.colspan;n++)e.push(0);return e}wx.prototype.findCell=function(t){for(var e=0;e<this.map.length;e++){var n=this.map[e];if(n==t){for(var o=e%this.width,i=e/this.width|0,r=o+1,s=i+1,a=1;r<this.width&&this.map[e+a]==n;a++)r++;for(var l=1;s<this.height&&this.map[e+this.width*l]==n;l++)s++;return new _x(o,i,r,s)}}throw new RangeError("No cell with offset "+t+" found")},wx.prototype.colCount=function(t){for(var e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError("No cell with offset "+t+" found")},wx.prototype.nextCell=function(t,e,n){var o=this.findCell(t),i=o.left,r=o.right,s=o.top,a=o.bottom;return"horiz"==e?(n<0?0==i:r==this.width)?null:this.map[s*this.width+(n<0?i-1:r)]:(n<0?0==s:a==this.height)?null:this.map[i+this.width*(n<0?s-1:a)]},wx.prototype.rectBetween=function(t,e){var n=this.findCell(t),o=n.left,i=n.right,r=n.top,s=n.bottom,a=this.findCell(e),l=a.left,c=a.right,u=a.top,p=a.bottom;return new _x(Math.min(o,l),Math.min(r,u),Math.max(i,c),Math.max(s,p))},wx.prototype.cellsInRect=function(t){for(var e=[],n={},o=t.top;o<t.bottom;o++)for(var i=t.left;i<t.right;i++){var r=o*this.width+i,s=this.map[r];n[s]||(n[s]=!0,i==t.left&&i&&this.map[r-1]==s||o==t.top&&o&&this.map[r-this.width]==s||e.push(s))}return e},wx.prototype.positionAt=function(t,e,n){for(var o=0,i=0;;o++){var r=i+n.child(o).nodeSize;if(o==t){for(var s=e+t*this.width,a=(t+1)*this.width;s<a&&this.map[s]<i;)s++;return s==a?r-1:this.map[s]}i=r}},wx.get=function(t){return cx(t)||ux(t,function(t){if("table"!=t.type.spec.tableRole)throw new RangeError("Not a table node: "+t.type.name);for(var e=function(t){for(var e=-1,n=!1,o=0;o<t.childCount;o++){var i=t.child(o),r=0;if(n)for(var s=0;s<o;s++)for(var a=t.child(s),l=0;l<a.childCount;l++){var c=a.child(l);s+c.attrs.rowspan>o&&(r+=c.attrs.colspan)}for(var u=0;u<i.childCount;u++){var p=i.child(u);r+=p.attrs.colspan,p.attrs.rowspan>1&&(n=!0)}-1==e?e=r:e!=r&&(e=Math.max(e,r))}return e}(t),n=t.childCount,o=[],i=0,r=null,s=[],a=0,l=e*n;a<l;a++)o[a]=0;for(var c=0,u=0;c<n;c++){var p=t.child(c);u++;for(var h=0;;h++){for(;i<o.length&&0!=o[i];)i++;if(h==p.childCount)break;for(var d=p.child(h),f=d.attrs,m=f.colspan,v=f.rowspan,g=f.colwidth,y=0;y<v;y++){if(y+c>=n){(r||(r=[])).push({type:"overlong_rowspan",pos:u,n:v-y});break}for(var b=i+y*e,_=0;_<m;_++){0==o[b+_]?o[b+_]=u:(r||(r=[])).push({type:"collision",row:c,pos:u,n:m-_});var w=g&&g[_];if(w){var x=(b+_)%e*2,S=s[x];null==S||S!=w&&1==s[x+1]?(s[x]=w,s[x+1]=1):S==w&&s[x+1]++}}}i+=m,u+=d.nodeSize}for(var k=(c+1)*e,C=0;i<k;)0==o[i++]&&C++;C&&(r||(r=[])).push({type:"missing",row:c,n:C}),u++}for(var O=new wx(e,n,o,r),T=!1,M=0;!T&&M<s.length;M+=2)null!=s[M]&&s[M+1]<n&&(T=!0);return T&&function(t,e,n){t.problems||(t.problems=[]);for(var o=0,i={};o<t.map.length;o++){var r=t.map[o];if(!i[r]){i[r]=!0;for(var s=n.nodeAt(r),a=null,l=0;l<s.attrs.colspan;l++){var c=e[2*((o+l)%t.width)];null==c||s.attrs.colwidth&&s.attrs.colwidth[l]==c||((a||(a=xx(s.attrs)))[l]=c)}a&&t.problems.unshift({type:"colwidth mismatch",pos:r,colwidth:a})}}}(O,s,t),O}(t))};var Sx=new ub("selectingCells");function kx(t){for(var e=t.depth-1;e>0;e--)if("row"==t.node(e).type.spec.tableRole)return t.node(0).resolve(t.before(e+1));return null}function Cx(t){for(var e=t.selection.$head,n=e.depth;n>0;n--)if("row"==e.node(n).type.spec.tableRole)return!0;return!1}function Ox(t){var e=t.selection;return e.$anchorCell?e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell:e.node&&"cell"==e.node.type.spec.tableRole?e.$anchor:kx(e.$head)||function(t){for(var e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){var o=e.type.spec.tableRole;if("cell"==o||"header_cell"==o)return t.doc.resolve(n)}for(var i=t.nodeBefore,r=t.pos;i;i=i.lastChild,r--){var s=i.type.spec.tableRole;if("cell"==s||"header_cell"==s)return t.doc.resolve(r-i.nodeSize)}}(e.$head)}function Tx(t){return"row"==t.parent.type.spec.tableRole&&t.nodeAfter}function Mx(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function Ex(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function Ax(t,e,n){var o=t.start(-1),i=wx.get(t.node(-1)).nextCell(t.pos-o,e,n);return null==i?null:t.node(0).resolve(o+i)}function Nx(t,e,n){var o={};for(var i in t)o[i]=t[i];return o[e]=n,o}function Px(t,e,n){void 0===n&&(n=1);var o=Nx(t,"colspan",t.colspan-n);return o.colwidth&&(o.colwidth=o.colwidth.slice(),o.colwidth.splice(e,n),o.colwidth.some((function(t){return t>0}))||(o.colwidth=null)),o}function Lx(t,e,n){void 0===n&&(n=1);var o=Nx(t,"colspan",t.colspan+n);if(o.colwidth){o.colwidth=o.colwidth.slice();for(var i=0;i<n;i++)o.colwidth.splice(e,0,0)}return o}var Ix=function(t){function e(e,n){void 0===n&&(n=e);var o=e.node(-1),i=wx.get(o),r=e.start(-1),s=i.rectBetween(e.pos-r,n.pos-r),a=e.node(0),l=i.cellsInRect(s).filter((function(t){return t!=n.pos-r}));l.unshift(n.pos-r);var c=l.map((function(t){var e=o.nodeAt(t),n=t+r+1;return new Hy(a.resolve(n),a.resolve(n+e.content.size))}));t.call(this,c[0].$from,c[0].$to,c),this.$anchorCell=e,this.$headCell=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(t,n){var o=t.resolve(n.map(this.$anchorCell.pos)),i=t.resolve(n.map(this.$headCell.pos));if(Tx(o)&&Tx(i)&&Ex(o,i)){var r=this.$anchorCell.node(-1)!=o.node(-1);return r&&this.isRowSelection()?e.rowSelection(o,i):r&&this.isColSelection()?e.colSelection(o,i):new e(o,i)}return Wy.between(o,i)},e.prototype.content=function(){for(var t=this.$anchorCell.node(-1),e=wx.get(t),n=this.$anchorCell.start(-1),o=e.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),i={},r=[],s=o.top;s<o.bottom;s++){for(var a=[],l=s*e.width+o.left,c=o.left;c<o.right;c++,l++){var u=e.map[l];if(!i[u]){i[u]=!0;var p=e.findCell(u),h=t.nodeAt(u),d=o.left-p.left,f=p.right-o.right;if(d>0||f>0){var m=h.attrs;d>0&&(m=Px(m,0,d)),f>0&&(m=Px(m,m.colspan-f,f)),h=p.left<o.left?h.type.createAndFill(m):h.type.create(m,h.content)}if(p.top<o.top||p.bottom>o.bottom){var v=Nx(h.attrs,"rowspan",Math.min(p.bottom,o.bottom)-Math.max(p.top,o.top));h=p.top<o.top?h.type.createAndFill(v):h.type.create(v,h.content)}a.push(h)}}r.push(t.child(s).copy(ig.from(a)))}var g=this.isColSelection()&&this.isRowSelection()?t:r;return new pg(ig.from(g),1,1)},e.prototype.replace=function(e,n){void 0===n&&(n=pg.empty);for(var o=e.steps.length,i=this.ranges,r=0;r<i.length;r++){var s=i[r],a=s.$from,l=s.$to,c=e.mapping.slice(o);e.replace(c.map(a.pos),c.map(l.pos),r?pg.empty:n)}var u=t.findFrom(e.doc.resolve(e.mapping.slice(o).map(this.to)),-1);u&&e.setSelection(u)},e.prototype.replaceWith=function(t,e){this.replace(t,new pg(ig.from(e),0,0))},e.prototype.forEachCell=function(t){for(var e=this.$anchorCell.node(-1),n=wx.get(e),o=this.$anchorCell.start(-1),i=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-o,this.$headCell.pos-o)),r=0;r<i.length;r++)t(e.nodeAt(i[r]),o+i[r])},e.prototype.isColSelection=function(){var t=this.$anchorCell.index(-1),e=this.$headCell.index(-1);if(Math.min(t,e)>0)return!1;var n=t+this.$anchorCell.nodeAfter.attrs.rowspan,o=e+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,o)==this.$headCell.node(-1).childCount},e.colSelection=function(t,n){void 0===n&&(n=t);var o=wx.get(t.node(-1)),i=t.start(-1),r=o.findCell(t.pos-i),s=o.findCell(n.pos-i),a=t.node(0);return r.top<=s.top?(r.top>0&&(t=a.resolve(i+o.map[r.left])),s.bottom<o.height&&(n=a.resolve(i+o.map[o.width*(o.height-1)+s.right-1]))):(s.top>0&&(n=a.resolve(i+o.map[s.left])),r.bottom<o.height&&(t=a.resolve(i+o.map[o.width*(o.height-1)+r.right-1]))),new e(t,n)},e.prototype.isRowSelection=function(){var t=wx.get(this.$anchorCell.node(-1)),e=this.$anchorCell.start(-1),n=t.colCount(this.$anchorCell.pos-e),o=t.colCount(this.$headCell.pos-e);if(Math.min(n,o)>0)return!1;var i=n+this.$anchorCell.nodeAfter.attrs.colspan,r=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(i,r)==t.width},e.prototype.eq=function(t){return t instanceof e&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos},e.rowSelection=function(t,n){void 0===n&&(n=t);var o=wx.get(t.node(-1)),i=t.start(-1),r=o.findCell(t.pos-i),s=o.findCell(n.pos-i),a=t.node(0);return r.left<=s.left?(r.left>0&&(t=a.resolve(i+o.map[r.top*o.width])),s.right<o.width&&(n=a.resolve(i+o.map[o.width*(s.top+1)-1]))):(s.left>0&&(n=a.resolve(i+o.map[s.top*o.width])),r.right<o.width&&(t=a.resolve(i+o.map[o.width*(r.top+1)-1]))),new e(t,n)},e.prototype.toJSON=function(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}},e.fromJSON=function(t,n){return new e(t.resolve(n.anchor),t.resolve(n.head))},e.create=function(t,n,o){return void 0===o&&(o=n),new e(t.resolve(n),t.resolve(o))},e.prototype.getBookmark=function(){return new Dx(this.$anchorCell.pos,this.$headCell.pos)},e}(Zy);Ix.prototype.visible=!1,Zy.jsonID("cell",Ix);var Dx=function(t,e){this.anchor=t,this.head=e};function Rx(t){if(!(t.selection instanceof Ix))return null;var e=[];return t.selection.forEachCell((function(t,n){e.push(Jw.node(n,n+t.nodeSize,{class:"selectedCell"}))})),Yw.create(t.doc,e)}function zx(t,e){var n=t.getAttribute("data-colwidth"),o=n&&/^\d+(,\d+)*$/.test(n)?n.split(",").map((function(t){return Number(t)})):null,i=Number(t.getAttribute("colspan")||1),r={colspan:i,rowspan:Number(t.getAttribute("rowspan")||1),colwidth:o&&o.length==i?o:null};for(var s in e){var a=e[s].getFromDOM,l=a&&a(t);null!=l&&(r[s]=l)}return r}function Bx(t,e){var n={};for(var o in 1!=t.attrs.colspan&&(n.colspan=t.attrs.colspan),1!=t.attrs.rowspan&&(n.rowspan=t.attrs.rowspan),t.attrs.colwidth&&(n["data-colwidth"]=t.attrs.colwidth.join(",")),e){var i=e[o].setDOMAttr;i&&i(t.attrs[o],n)}return n}function $x(t){var e=t.cached.tableNodeTypes;if(!e)for(var n in e=t.cached.tableNodeTypes={},t.nodes){var o=t.nodes[n],i=o.spec.tableRole;i&&(e[i]=o)}return e}function jx(t){if(!t.size)return null;for(var e=t.content,n=t.openStart,o=t.openEnd;1==e.childCount&&(n>0&&o>0||"table"==e.firstChild.type.spec.tableRole);)n--,o--,e=e.firstChild.content;var i=e.firstChild,r=i.type.spec.tableRole,s=i.type.schema,a=[];if("row"==r)for(var l=0;l<e.childCount;l++){var c=e.child(l).content,u=l?0:Math.max(0,n-1),p=l<e.childCount-1?0:Math.max(0,o-1);(u||p)&&(c=Vx($x(s).row,new pg(c,u,p)).content),a.push(c)}else{if("cell"!=r&&"header_cell"!=r)return null;a.push(n||o?Vx($x(s).row,new pg(e,n,o)).content:e)}return function(t,e){for(var n=[],o=0;o<e.length;o++)for(var i=e[o],r=i.childCount-1;r>=0;r--)for(var s=i.child(r).attrs,a=s.rowspan,l=s.colspan,c=o;c<o+a;c++)n[c]=(n[c]||0)+l;for(var u=0,p=0;p<n.length;p++)u=Math.max(u,n[p]);for(var h=0;h<n.length;h++)if(h>=e.length&&e.push(ig.empty),n[h]<u){for(var d=$x(t).cell.createAndFill(),f=[],m=n[h];m<u;m++)f.push(d);e[h]=e[h].append(ig.from(f))}return{height:e.length,width:u,rows:e}}(s,a)}function Vx(t,e){var n=t.createAndFill();return new yy(n).replace(0,n.content.size,e).doc}function Zx(t,e,n){var o=t.width,i=t.height,r=t.rows;if(o!=e){for(var s=[],a=[],l=0;l<r.length;l++){for(var c=r[l],u=[],p=s[l]||0,h=0;p<e;h++){var d=c.child(h%c.childCount);p+d.attrs.colspan>e&&(d=d.type.create(Px(d.attrs,d.attrs.colspan,p+d.attrs.colspan-e),d.content)),u.push(d),p+=d.attrs.colspan;for(var f=1;f<d.attrs.rowspan;f++)s[l+f]=(s[l+f]||0)+d.attrs.colspan}a.push(ig.from(u))}r=a,o=e}if(i!=n){for(var m=[],v=0,g=0;v<n;v++,g++){for(var y=[],b=r[g%i],_=0;_<b.childCount;_++){var w=b.child(_);v+w.attrs.rowspan>n&&(w=w.type.create(Nx(w.attrs,"rowspan",n-w.attrs.rowspan),w.content)),y.push(w)}m.push(ig.from(y))}r=m,i=n}return{width:o,height:i,rows:r}}function Fx(t,e,n,o,i,r,s,a){if(0==s||s==e.height)return!1;for(var l=!1,c=i;c<r;c++){var u=s*e.width+c,p=e.map[u];if(e.map[u-e.width]==p){l=!0;var h=n.nodeAt(p),d=e.findCell(p),f=d.top,m=d.left;t.setNodeMarkup(t.mapping.slice(a).map(p+o),null,Nx(h.attrs,"rowspan",s-f)),t.insert(t.mapping.slice(a).map(e.positionAt(s,m,n)),h.type.createAndFill(Nx(h.attrs,"rowspan",f+h.attrs.rowspan-s))),c+=h.attrs.colspan-1}}return l}function Hx(t,e,n,o,i,r,s,a){if(0==s||s==e.width)return!1;for(var l=!1,c=i;c<r;c++){var u=c*e.width+s,p=e.map[u];if(e.map[u-1]==p){l=!0;var h=n.nodeAt(p),d=e.colCount(p),f=t.mapping.slice(a).map(p+o);t.setNodeMarkup(f,null,Px(h.attrs,s-d,h.attrs.colspan-(s-d))),t.insert(f+h.nodeSize,h.type.createAndFill(Px(h.attrs,0,s-d))),c+=h.attrs.rowspan-1}}return l}function Wx(t,e,n,o,i){var r=n?t.doc.nodeAt(n-1):t.doc,s=wx.get(r),a=o.top,l=o.left,c=l+i.width,u=a+i.height,p=t.tr,h=0;function d(){r=n?p.doc.nodeAt(n-1):p.doc,s=wx.get(r),h=p.mapping.maps.length}(function(t,e,n,o,i,r,s){var a,l,c=$x(t.doc.type.schema);if(i>e.width)for(var u=0,p=0;u<e.height;u++){var h=n.child(u);p+=h.nodeSize;var d,f=[];d=null==h.lastChild||h.lastChild.type==c.cell?a||(a=c.cell.createAndFill()):l||(l=c.header_cell.createAndFill());for(var m=e.width;m<i;m++)f.push(d);t.insert(t.mapping.slice(s).map(p-1+o),f)}if(r>e.height){for(var v=[],g=0,y=(e.height-1)*e.width;g<Math.max(e.width,i);g++){var b=!(g>=e.width)&&n.nodeAt(e.map[y+g]).type==c.header_cell;v.push(b?l||(l=c.header_cell.createAndFill()):a||(a=c.cell.createAndFill()))}for(var _=c.row.create(null,ig.from(v)),w=[],x=e.height;x<r;x++)w.push(_);t.insert(t.mapping.slice(s).map(o+n.nodeSize-2),w)}return!(!a&&!l)})(p,s,r,n,c,u,h)&&d(),Fx(p,s,r,n,l,c,a,h)&&d(),Fx(p,s,r,n,l,c,u,h)&&d(),Hx(p,s,r,n,a,u,l,h)&&d(),Hx(p,s,r,n,a,u,c,h)&&d();for(var f=a;f<u;f++){var m=s.positionAt(f,l,r),v=s.positionAt(f,c,r);p.replace(p.mapping.slice(h).map(m+n),p.mapping.slice(h).map(v+n),new pg(i.rows[f-a],0,0))}d(),p.setSelection(new Ix(p.doc.resolve(n+s.positionAt(a,l,r)),p.doc.resolve(n+s.positionAt(u-1,c-1,r)))),e(p)}Dx.prototype.map=function(t){return new Dx(t.map(this.anchor),t.map(this.head))},Dx.prototype.resolve=function(t){var e=t.resolve(this.anchor),n=t.resolve(this.head);return"row"==e.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&e.index()<e.parent.childCount&&n.index()<n.parent.childCount&&Ex(e,n)?new Ix(e,n):Zy.near(n,1)};var Ux,qx,Jx=(Ux={ArrowLeft:Gx("horiz",-1),ArrowRight:Gx("horiz",1),ArrowUp:Gx("vert",-1),ArrowDown:Gx("vert",1),"Shift-ArrowLeft":Xx("horiz",-1),"Shift-ArrowRight":Xx("horiz",1),"Shift-ArrowUp":Xx("vert",-1),"Shift-ArrowDown":Xx("vert",1),Backspace:Yx,"Mod-Backspace":Yx,Delete:Yx,"Mod-Delete":Yx},qx=function(t){var e=Object.create(null);for(var n in t)e[zb(n)]=t[n];return e}(Ux),function(t,e){var n,o=function(t){var e=!(Lb&&(t.ctrlKey||t.altKey||t.metaKey)||(Eb||Pb)&&t.shiftKey&&t.key&&1==t.key.length)&&t.key||(t.shiftKey?Tb:Cb)[t.keyCode]||t.key||"Unidentified";return"Esc"==e&&(e="Escape"),"Del"==e&&(e="Delete"),"Left"==e&&(e="ArrowLeft"),"Up"==e&&(e="ArrowUp"),"Right"==e&&(e="ArrowRight"),"Down"==e&&(e="ArrowDown"),e}(e),i=1==o.length&&" "!=o,r=qx[Bb(o,e,!i)];if(r&&r(t.state,t.dispatch,t))return!0;if(i&&(e.shiftKey||e.altKey||e.metaKey)&&(n=Ob[e.keyCode])&&n!=o){var s=qx[Bb(n,e,!0)];if(s&&s(t.state,t.dispatch,t))return!0}else if(i&&e.shiftKey){var a=qx[Bb(o,e,!0)];if(a&&a(t.state,t.dispatch,t))return!0}return!1});function Kx(t,e,n){return!n.eq(t.selection)&&(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function Gx(t,e){return function(n,o,i){var r=n.selection;if(r instanceof Ix)return Kx(n,o,Zy.near(r.$headCell,e));if("horiz"!=t&&!r.empty)return!1;var s=nS(i,t,e);if(null==s)return!1;if("horiz"==t)return Kx(n,o,Zy.near(n.doc.resolve(r.head+e),e));var a,l=n.doc.resolve(s),c=Ax(l,t,e);return a=c?Zy.near(c,1):e<0?Zy.near(n.doc.resolve(l.before(-1)),-1):Zy.near(n.doc.resolve(l.after(-1)),1),Kx(n,o,a)}}function Xx(t,e){return function(n,o,i){var r=n.selection;if(!(r instanceof Ix)){var s=nS(i,t,e);if(null==s)return!1;r=new Ix(n.doc.resolve(s))}var a=Ax(r.$headCell,t,e);return!!a&&Kx(n,o,new Ix(r.$anchorCell,a))}}function Yx(t,e){var n=t.selection;if(!(n instanceof Ix))return!1;if(e){var o=t.tr,i=$x(t.schema).cell.createAndFill().content;n.forEachCell((function(t,e){t.content.eq(i)||o.replace(o.mapping.map(e+1),o.mapping.map(e+t.nodeSize-1),new pg(i,0,0))})),o.docChanged&&e(o)}return!0}function Qx(t,e){var n=kx(t.state.doc.resolve(e));return!!n&&(t.dispatch(t.state.tr.setSelection(new Ix(n))),!0)}function tS(t,e,n){if(!Cx(t.state))return!1;var o=jx(n),i=t.state.selection;if(i instanceof Ix){o||(o={width:1,height:1,rows:[ig.from(Vx($x(t.state.schema).cell,n))]});var r=i.$anchorCell.node(-1),s=i.$anchorCell.start(-1),a=wx.get(r).rectBetween(i.$anchorCell.pos-s,i.$headCell.pos-s);return o=Zx(o,a.right-a.left,a.bottom-a.top),Wx(t.state,t.dispatch,s,a,o),!0}if(o){var l=Ox(t.state),c=l.start(-1);return Wx(t.state,t.dispatch,c,wx.get(l.node(-1)).findCell(l.pos-c),o),!0}return!1}function eS(t,e){if(!e.ctrlKey&&!e.metaKey){var n,o=oS(t,e.target);if(e.shiftKey&&t.state.selection instanceof Ix)i(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&o&&null!=(n=kx(t.state.selection.$anchor))&&iS(t,e).pos!=n.pos)i(n,e),e.preventDefault();else if(!o)return;t.root.addEventListener("mouseup",r),t.root.addEventListener("dragstart",r),t.root.addEventListener("mousemove",s)}function i(e,n){var o=iS(t,n),i=null==Sx.getState(t.state);if(!o||!Ex(e,o)){if(!i)return;o=e}var r=new Ix(e,o);if(i||!t.state.selection.eq(r)){var s=t.state.tr.setSelection(r);i&&s.setMeta(Sx,e.pos),t.dispatch(s)}}function r(){t.root.removeEventListener("mouseup",r),t.root.removeEventListener("dragstart",r),t.root.removeEventListener("mousemove",s),null!=Sx.getState(t.state)&&t.dispatch(t.state.tr.setMeta(Sx,-1))}function s(n){var s,a=Sx.getState(t.state);if(null!=a)s=t.state.doc.resolve(a);else if(oS(t,n.target)!=o&&!(s=iS(t,e)))return r();s&&i(s,n)}}function nS(t,e,n){if(!(t.state.selection instanceof Wy))return null;for(var o=t.state.selection.$head,i=o.depth-1;i>=0;i--){var r=o.node(i);if((n<0?o.index(i):o.indexAfter(i))!=(n<0?0:r.childCount))return null;if("cell"==r.type.spec.tableRole||"header_cell"==r.type.spec.tableRole){var s=o.before(i),a="vert"==e?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(a)?s:null}}return null}function oS(t,e){for(;e&&e!=t.dom;e=e.parentNode)if("TD"==e.nodeName||"TH"==e.nodeName)return e}function iS(t,e){var n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?kx(t.state.doc.resolve(n.pos)):null}var rS=new ub("fix-tables");function sS(t,e){var n,o=function(e,o){"table"==e.type.spec.tableRole&&(n=function(t,e,n,o){var i=wx.get(e);if(!i.problems)return o;o||(o=t.tr);for(var r,s,a=[],l=0;l<i.height;l++)a.push(0);for(var c=0;c<i.problems.length;c++){var u=i.problems[c];if("collision"==u.type){for(var p=e.nodeAt(u.pos),h=0;h<p.attrs.rowspan;h++)a[u.row+h]+=u.n;o.setNodeMarkup(o.mapping.map(n+1+u.pos),null,Px(p.attrs,p.attrs.colspan-u.n,u.n))}else if("missing"==u.type)a[u.row]+=u.n;else if("overlong_rowspan"==u.type){var d=e.nodeAt(u.pos);o.setNodeMarkup(o.mapping.map(n+1+u.pos),null,Nx(d.attrs,"rowspan",d.attrs.rowspan-u.n))}else if("colwidth mismatch"==u.type){var f=e.nodeAt(u.pos);o.setNodeMarkup(o.mapping.map(n+1+u.pos),null,Nx(f.attrs,"colwidth",u.colwidth))}}for(var m=0;m<a.length;m++)a[m]&&(null==r&&(r=m),s=m);for(var v=0,g=n+1;v<i.height;v++){var y=e.child(v),b=g+y.nodeSize,_=a[v];if(_>0){var w="cell";y.firstChild&&(w=y.firstChild.type.spec.tableRole);for(var x=[],S=0;S<_;S++)x.push($x(t.schema)[w].createAndFill());var k=0!=v&&r!=v-1||s!=v?b-1:g+1;o.insert(o.mapping.map(k),x)}g=b}return o.setMeta(rS,{fixTables:!0})}(t,e,o,n))};return e?e.doc!=t.doc&&function t(e,n,o,i){var r=e.childCount,s=n.childCount;t:for(var a=0,l=0;a<s;a++){for(var c=n.child(a),u=l,p=Math.min(r,a+3);u<p;u++)if(e.child(u)==c){l=u+1,o+=c.nodeSize;continue t}i(c,o),l<r&&e.child(l).sameMarkup(c)?t(e.child(l),c,o+1,i):c.nodesBetween(0,c.content.size,i,o+1),o+=c.nodeSize}}(e.doc,t.doc,0,o):t.doc.descendants(o),n}function aS(t){var e,n=t.selection,o=Ox(t),i=o.node(-1),r=o.start(-1),s=wx.get(i);return(e=n instanceof Ix?s.rectBetween(n.$anchorCell.pos-r,n.$headCell.pos-r):s.findCell(o.pos-r)).tableStart=r,e.map=s,e.table=i,e}function lS(t,e,n){var o=e.map,i=e.tableStart,r=e.table,s=n>0?-1:0;(function(t,e,n){for(var o=$x(e.type.schema).header_cell,i=0;i<t.height;i++)if(e.nodeAt(t.map[n+i*t.width]).type!=o)return!1;return!0})(o,r,n+s)&&(s=0==n||n==o.width?null:0);for(var a=0;a<o.height;a++){var l=a*o.width+n;if(n>0&&n<o.width&&o.map[l-1]==o.map[l]){var c=o.map[l],u=r.nodeAt(c);t.setNodeMarkup(t.mapping.map(i+c),null,Lx(u.attrs,n-o.colCount(c))),a+=u.attrs.rowspan-1}else{var p=null==s?$x(r.type.schema).cell:r.nodeAt(o.map[l+s]).type,h=o.positionAt(a,n,r);t.insert(t.mapping.map(i+h),p.createAndFill())}}return t}function cS(t,e,n){for(var o=e.map,i=e.table,r=e.tableStart,s=t.mapping.maps.length,a=0;a<o.height;){var l=a*o.width+n,c=o.map[l],u=i.nodeAt(c);if(n>0&&o.map[l-1]==c||n<o.width-1&&o.map[l+1]==c)t.setNodeMarkup(t.mapping.slice(s).map(r+c),null,Px(u.attrs,n-o.colCount(c)));else{var p=t.mapping.slice(s).map(r+c);t.delete(p,p+u.nodeSize)}a+=u.attrs.rowspan}}function uS(t,e,n){for(var o=$x(e.type.schema).header_cell,i=0;i<t.width;i++)if(e.nodeAt(t.map[i+n*t.width]).type!=o)return!1;return!0}function pS(t,e,n){for(var o=e.map,i=e.tableStart,r=e.table,s=i,a=0;a<n;a++)s+=r.child(a).nodeSize;var l=[],c=n>0?-1:0;uS(o,r,n+c)&&(c=0==n||n==o.height?null:0);for(var u=0,p=o.width*n;u<o.width;u++,p++)if(n>0&&n<o.height&&o.map[p]==o.map[p-o.width]){var h=o.map[p],d=r.nodeAt(h).attrs;t.setNodeMarkup(i+h,null,Nx(d,"rowspan",d.rowspan+1)),u+=d.colspan-1}else{var f=null==c?$x(r.type.schema).cell:r.nodeAt(o.map[p+c*o.width]).type;l.push(f.createAndFill())}return t.insert(s,$x(r.type.schema).row.create(null,l)),t}function hS(t,e,n){for(var o=e.map,i=e.table,r=e.tableStart,s=0,a=0;a<n;a++)s+=i.child(a).nodeSize;var l=s+i.child(n).nodeSize,c=t.mapping.maps.length;t.delete(s+r,l+r);for(var u=0,p=n*o.width;u<o.width;u++,p++){var h=o.map[p];if(n>0&&h==o.map[p-o.width]){var d=i.nodeAt(h).attrs;t.setNodeMarkup(t.mapping.slice(c).map(h+r),null,Nx(d,"rowspan",d.rowspan-1)),u+=d.colspan-1}else if(n<o.width&&h==o.map[p+o.width]){var f=i.nodeAt(h),m=f.type.create(Nx(f.attrs,"rowspan",f.attrs.rowspan-1),f.content),v=o.positionAt(n+1,u,i);t.insert(t.mapping.slice(c).map(r+v),m),u+=f.attrs.colspan-1}}}function dS(t){var e=t.content;return 1==e.childCount&&e.firstChild.isTextblock&&0==e.firstChild.childCount}function fS(t){return function(e,n){var o,i,r=e.selection;if(r instanceof Ix){if(r.$anchorCell.pos!=r.$headCell.pos)return!1;o=r.$anchorCell.nodeAfter,i=r.$anchorCell.pos}else{if(!(o=function(t){for(var e=t.depth;e>0;e--){var n=t.node(e).type.spec.tableRole;if("cell"===n||"header_cell"===n)return t.node(e)}return null}(r.$from)))return!1;i=kx(r.$from).pos}if(1==o.attrs.colspan&&1==o.attrs.rowspan)return!1;if(n){var s=o.attrs,a=[],l=s.colwidth;s.rowspan>1&&(s=Nx(s,"rowspan",1)),s.colspan>1&&(s=Nx(s,"colspan",1));for(var c,u=aS(e),p=e.tr,h=0;h<u.right-u.left;h++)a.push(l?Nx(s,"colwidth",l&&l[h]?[l[h]]:null):s);for(var d=u.top;d<u.bottom;d++){var f=u.map.positionAt(d,u.left,u.table);d==u.top&&(f+=o.nodeSize);for(var m=u.left,v=0;m<u.right;m++,v++)m==u.left&&d==u.top||p.insert(c=p.mapping.map(f+u.tableStart,1),t({node:o,row:d,col:m}).createAndFill(a[v]))}p.setNodeMarkup(i,t({node:o,row:u.top,col:u.left}),a[0]),r instanceof Ix&&p.setSelection(new Ix(p.doc.resolve(r.$anchorCell.pos),c&&p.doc.resolve(c))),n(p)}return!0}}function mS(t,e,n){for(var o=e.map.cellsInRect({left:0,top:0,right:"row"==t?e.map.width:1,bottom:"column"==t?e.map.height:1}),i=0;i<o.length;i++){var r=e.table.nodeAt(o[i]);if(r&&r.type!==n.header_cell)return!1}return!0}function vS(t,e){return(e=e||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(t){return function(e,n){if(!Cx(e))return!1;if(n){for(var o=$x(e.schema),i=aS(e),r=e.tr,s=i.map.cellsInRect("column"==t?new _x(i.left,0,i.right,i.map.height):"row"==t?new _x(0,i.top,i.map.width,i.bottom):i),a=s.map((function(t){return i.table.nodeAt(t)})),l=0;l<s.length;l++)a[l].type==o.header_cell&&r.setNodeMarkup(i.tableStart+s[l],o.cell,a[l].attrs);if(0==r.steps.length)for(var c=0;c<s.length;c++)r.setNodeMarkup(i.tableStart+s[c],o.header_cell,a[c].attrs);n(r)}return!0}}(t):function(e,n){if(!Cx(e))return!1;if(n){var o=$x(e.schema),i=aS(e),r=e.tr,s=mS("row",i,o),a=mS("column",i,o),l=("column"===t?s:"row"===t&&a)?1:0,c="column"==t?new _x(0,l,1,i.map.height):"row"==t?new _x(l,0,i.map.width,1):i,u="column"==t?a?o.cell:o.header_cell:"row"==t?s?o.cell:o.header_cell:o.cell;i.map.cellsInRect(c).forEach((function(t){var e=t+i.tableStart,n=r.doc.nodeAt(e);n&&r.setNodeMarkup(e,u,n.attrs)})),n(r)}return!0}}var gS=vS("row",{useDeprecatedLogic:!0}),yS=vS("column",{useDeprecatedLogic:!0}),bS=vS("cell",{useDeprecatedLogic:!0}),_S=function(t,e){this.node=t,this.cellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),wS(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))};function wS(t,e,n,o,i,r){for(var s=0,a=!0,l=e.firstChild,c=t.firstChild,u=0,p=0;u<c.childCount;u++)for(var h=c.child(u).attrs,d=h.colspan,f=h.colwidth,m=0;m<d;m++,p++){var v=i==p?r:f&&f[m],g=v?v+"px":"";s+=v||o,v||(a=!1),l?(l.style.width!=g&&(l.style.width=g),l=l.nextSibling):e.appendChild(document.createElement("col")).style.width=g}for(;l;){var y=l.nextSibling;l.parentNode.removeChild(l),l=y}a?(n.style.width=s+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=s+"px")}_S.prototype.update=function(t){return t.type==this.node.type&&(this.node=t,wS(t,this.colgroup,this.table,this.cellMinWidth),!0)},_S.prototype.ignoreMutation=function(t){return"attributes"==t.type&&(t.target==this.table||this.colgroup.contains(t.target))};var xS=new ub("tableColumnResizing"),SS=function(t,e){this.activeHandle=t,this.dragging=e};function kS(t,e,n){var o=t.posAtCoords({left:e.clientX,top:e.clientY}).pos,i=kx(t.state.doc.resolve(o));if(!i)return-1;if("right"==n)return i.pos;var r=wx.get(i.node(-1)),s=i.start(-1),a=r.map.indexOf(i.pos-s);return a%r.width==0?-1:s+r.map[a-1]}function CS(t,e,n){var o=e.clientX-t.startX;return Math.max(n,t.startWidth+o)}function OS(t,e){t.dispatch(t.state.tr.setMeta(xS,{setHandle:e}))}function TS(t){for(var e=[],n=0;n<t;n++)e.push(0);return e}SS.prototype.apply=function(t){var e=this,n=t.getMeta(xS);if(n&&null!=n.setHandle)return new SS(n.setHandle,null);if(n&&void 0!==n.setDragging)return new SS(e.activeHandle,n.setDragging);if(e.activeHandle>-1&&t.docChanged){var o=t.mapping.map(e.activeHandle,-1);Tx(t.doc.resolve(o))||(o=null),e=new SS(o,e.dragging)}return e};var MS,ES=Object.freeze({__proto__:null,CellSelection:Ix,TableMap:wx,__clipCells:Zx,__insertCells:Wx,__pastedCells:jx,addColumn:lS,addColumnAfter:function(t,e){if(!Cx(t))return!1;if(e){var n=aS(t);e(lS(t.tr,n,n.right))}return!0},addColumnBefore:function(t,e){if(!Cx(t))return!1;if(e){var n=aS(t);e(lS(t.tr,n,n.left))}return!0},addRow:pS,addRowAfter:function(t,e){if(!Cx(t))return!1;if(e){var n=aS(t);e(pS(t.tr,n,n.bottom))}return!0},addRowBefore:function(t,e){if(!Cx(t))return!1;if(e){var n=aS(t);e(pS(t.tr,n,n.top))}return!0},cellAround:kx,colCount:function(t){return wx.get(t.node(-1)).colCount(t.pos-t.start(-1))},columnResizing:function(t){void 0===t&&(t={});var e=t.handleWidth;void 0===e&&(e=5);var n=t.cellMinWidth;void 0===n&&(n=25);var o=t.View;void 0===o&&(o=_S);var i=t.lastColumnResizable;return void 0===i&&(i=!0),new ab({key:xS,state:{init:function(t,e){return this.spec.props.nodeViews[$x(e.schema).table.name]=function(t,e){return new o(t,n,e)},new SS(-1,!1)},apply:function(t,e){return e.apply(t)}},props:{attributes:function(t){return xS.getState(t).activeHandle>-1?{class:"resize-cursor"}:null},handleDOMEvents:{mousemove:function(t,n){!function(t,e,n,o,i){var r=xS.getState(t.state);if(!r.dragging){var s=function(t){for(;t&&"TD"!=t.nodeName&&"TH"!=t.nodeName;)t=t.classList.contains("ProseMirror")?null:t.parentNode;return t}(e.target),a=-1;if(s){var l=s.getBoundingClientRect(),c=l.left,u=l.right;e.clientX-c<=n?a=kS(t,e,"left"):u-e.clientX<=n&&(a=kS(t,e,"right"))}if(a!=r.activeHandle){if(!i&&-1!==a){var p=t.state.doc.resolve(a),h=p.node(-1),d=wx.get(h),f=p.start(-1);if(d.colCount(p.pos-f)+p.nodeAfter.attrs.colspan-1==d.width-1)return}OS(t,a)}}}(t,n,e,0,i)},mouseleave:function(t){!function(t){var e=xS.getState(t.state);e.activeHandle>-1&&!e.dragging&&OS(t,-1)}(t)},mousedown:function(t,e){!function(t,e,n){var o=xS.getState(t.state);if(-1==o.activeHandle||o.dragging)return!1;var i=t.state.doc.nodeAt(o.activeHandle),r=function(t,e,n){var o=n.colspan,i=n.colwidth,r=i&&i[i.length-1];if(r)return r;var s=t.domAtPos(e),a=s.node.childNodes[s.offset].offsetWidth,l=o;if(i)for(var c=0;c<o;c++)i[c]&&(a-=i[c],l--);return a/l}(t,o.activeHandle,i.attrs);function s(e){window.removeEventListener("mouseup",s),window.removeEventListener("mousemove",a);var o=xS.getState(t.state);o.dragging&&(function(t,e,n){for(var o=t.state.doc.resolve(e),i=o.node(-1),r=wx.get(i),s=o.start(-1),a=r.colCount(o.pos-s)+o.nodeAfter.attrs.colspan-1,l=t.state.tr,c=0;c<r.height;c++){var u=c*r.width+a;if(!c||r.map[u]!=r.map[u-r.width]){var p=r.map[u],h=i.nodeAt(p).attrs,d=1==h.colspan?0:a-r.colCount(p);if(!h.colwidth||h.colwidth[d]!=n){var f=h.colwidth?h.colwidth.slice():TS(h.colspan);f[d]=n,l.setNodeMarkup(s+p,null,Nx(h,"colwidth",f))}}}l.docChanged&&t.dispatch(l)}(t,o.activeHandle,CS(o.dragging,e,n)),t.dispatch(t.state.tr.setMeta(xS,{setDragging:null})))}function a(e){if(!e.which)return s(e);var o=xS.getState(t.state),i=CS(o.dragging,e,n);!function(t,e,n,o){for(var i=t.state.doc.resolve(e),r=i.node(-1),s=i.start(-1),a=wx.get(r).colCount(i.pos-s)+i.nodeAfter.attrs.colspan-1,l=t.domAtPos(i.start(-1)).node;"TABLE"!=l.nodeName;)l=l.parentNode;wS(r,l.firstChild,l,o,a,n)}(t,o.activeHandle,i,n)}t.dispatch(t.state.tr.setMeta(xS,{setDragging:{startX:e.clientX,startWidth:r}})),window.addEventListener("mouseup",s),window.addEventListener("mousemove",a),e.preventDefault()}(t,e,n)}},decorations:function(t){var e=xS.getState(t);if(e.activeHandle>-1)return function(t,e){for(var n=[],o=t.doc.resolve(e),i=o.node(-1),r=wx.get(i),s=o.start(-1),a=r.colCount(o.pos-s)+o.nodeAfter.attrs.colspan,l=0;l<r.height;l++){var c=a+l*r.width-1;if(!(a!=r.width&&r.map[c]==r.map[c+1]||0!=l&&r.map[c-1]==r.map[c-1-r.width])){var u=r.map[c],p=s+u+i.nodeAt(u).nodeSize-1,h=document.createElement("div");h.className="column-resize-handle",n.push(Jw.widget(p,h))}}return Yw.create(t.doc,n)}(t,e.activeHandle)},nodeViews:{}}})},columnResizingPluginKey:xS,deleteColumn:function(t,e){if(!Cx(t))return!1;if(e){var n=aS(t),o=t.tr;if(0==n.left&&n.right==n.map.width)return!1;for(var i=n.right-1;cS(o,n,i),i!=n.left;i--)n.table=n.tableStart?o.doc.nodeAt(n.tableStart-1):o.doc,n.map=wx.get(n.table);e(o)}return!0},deleteRow:function(t,e){if(!Cx(t))return!1;if(e){var n=aS(t),o=t.tr;if(0==n.top&&n.bottom==n.map.height)return!1;for(var i=n.bottom-1;hS(o,n,i),i!=n.top;i--)n.table=n.tableStart?o.doc.nodeAt(n.tableStart-1):o.doc,n.map=wx.get(n.table);e(o)}return!0},deleteTable:function(t,e){for(var n=t.selection.$anchor,o=n.depth;o>0;o--)if("table"==n.node(o).type.spec.tableRole)return e&&e(t.tr.delete(n.before(o),n.after(o)).scrollIntoView()),!0;return!1},findCell:function(t){return wx.get(t.node(-1)).findCell(t.pos-t.start(-1))},fixTables:sS,fixTablesKey:rS,goToNextCell:function(t){return function(e,n){if(!Cx(e))return!1;var o=function(t,e){if(e<0){var n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(var o=t.index(-1)-1,i=t.before();o>=0;o--){var r=t.node(-1).child(o);if(r.childCount)return i-1-r.lastChild.nodeSize;i-=r.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;for(var s=t.node(-1),a=t.indexAfter(-1),l=t.after();a<s.childCount;a++){var c=s.child(a);if(c.childCount)return l+1;l+=c.nodeSize}}}(Ox(e),t);if(null!=o){if(n){var i=e.doc.resolve(o);n(e.tr.setSelection(Wy.between(i,Mx(i))).scrollIntoView())}return!0}}},handlePaste:tS,inSameTable:Ex,isInTable:Cx,mergeCells:function(t,e){var n=t.selection;if(!(n instanceof Ix)||n.$anchorCell.pos==n.$headCell.pos)return!1;var o=aS(t),i=o.map;if(function(t,e){for(var n=t.width,o=t.height,i=t.map,r=e.top*n+e.left,s=r,a=(e.bottom-1)*n+e.left,l=r+(e.right-e.left-1),c=e.top;c<e.bottom;c++){if(e.left>0&&i[s]==i[s-1]||e.right<n&&i[l]==i[l+1])return!0;s+=n,l+=n}for(var u=e.left;u<e.right;u++){if(e.top>0&&i[r]==i[r-n]||e.bottom<o&&i[a]==i[a+n])return!0;r++,a++}return!1}(i,o))return!1;if(e){for(var r,s,a=t.tr,l={},c=ig.empty,u=o.top;u<o.bottom;u++)for(var p=o.left;p<o.right;p++){var h=i.map[u*i.width+p],d=o.table.nodeAt(h);if(!l[h])if(l[h]=!0,null==r)r=h,s=d;else{dS(d)||(c=c.append(d.content));var f=a.mapping.map(h+o.tableStart);a.delete(f,f+d.nodeSize)}}if(a.setNodeMarkup(r+o.tableStart,null,Nx(Lx(s.attrs,s.attrs.colspan,o.right-o.left-s.attrs.colspan),"rowspan",o.bottom-o.top)),c.size){var m=r+1+s.content.size,v=dS(s)?r+1:m;a.replaceWith(v+o.tableStart,m+o.tableStart,c)}a.setSelection(new Ix(a.doc.resolve(r+o.tableStart))),e(a)}return!0},moveCellForward:Mx,nextCell:Ax,removeColumn:cS,removeRow:hS,rowIsHeader:uS,selectedRect:aS,selectionCell:Ox,setCellAttr:function(t,e){return function(n,o){if(!Cx(n))return!1;var i=Ox(n);if(i.nodeAfter.attrs[t]===e)return!1;if(o){var r=n.tr;n.selection instanceof Ix?n.selection.forEachCell((function(n,o){n.attrs[t]!==e&&r.setNodeMarkup(o,null,Nx(n.attrs,t,e))})):r.setNodeMarkup(i.pos,null,Nx(i.nodeAfter.attrs,t,e)),o(r)}return!0}},splitCell:function(t,e){var n=$x(t.schema);return fS((function(t){var e=t.node;return n[e.type.spec.tableRole]}))(t,e)},splitCellWithType:fS,tableEditing:function(t){void 0===t&&(t={});var e=t.allowTableNodeSelection;return void 0===e&&(e=!1),new ab({key:Sx,state:{init:function(){return null},apply:function(t,e){var n=t.getMeta(Sx);if(null!=n)return-1==n?null:n;if(null==e||!t.docChanged)return e;var o=t.mapping.mapResult(e),i=o.deleted,r=o.pos;return i?null:r}},props:{decorations:Rx,handleDOMEvents:{mousedown:eS},createSelectionBetween:function(t){if(null!=Sx.getState(t.state))return t.state.selection},handleTripleClick:Qx,handleKeyDown:Jx,handlePaste:tS},appendTransaction:function(t,n,o){return function(t,e,n){var o,i,r=(e||t).selection,s=(e||t).doc;if(r instanceof qy&&(i=r.node.type.spec.tableRole)){if("cell"==i||"header_cell"==i)o=Ix.create(s,r.from);else if("row"==i){var a=s.resolve(r.from+1);o=Ix.rowSelection(a,a)}else if(!n){var l=wx.get(r.node),c=r.from+1,u=c+l.map[l.width*l.height-1];o=Ix.create(s,c+1,u)}}else r instanceof Wy&&function(t){var e=t.$from,n=t.$to;if(e.pos==n.pos||e.pos<e.pos-6)return!1;for(var o=e.pos,i=n.pos,r=e.depth;r>=0&&!(e.after(r+1)<e.end(r));r--,o++);for(var s=n.depth;s>=0&&!(n.before(s+1)>n.start(s));s--,i--);return o==i&&/row|table/.test(e.node(r).type.spec.tableRole)}(r)?o=Wy.create(s,r.from):r instanceof Wy&&function(t){for(var e,n,o=t.$from,i=t.$to,r=o.depth;r>0;r--){var s=o.node(r);if("cell"===s.type.spec.tableRole||"header_cell"===s.type.spec.tableRole){e=s;break}}for(var a=i.depth;a>0;a--){var l=i.node(a);if("cell"===l.type.spec.tableRole||"header_cell"===l.type.spec.tableRole){n=l;break}}return e!==n&&0===i.parentOffset}(r)&&(o=Wy.create(s,r.$from.start(),r.$from.end()));return o&&(e||(e=t.tr)).setSelection(o),e}(o,sS(o,n),e)}})},tableEditingKey:Sx,tableNodes:function(t){var e=t.cellAttributes||{},n={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(var o in e)n[o]={default:e[o].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:t.tableGroup,parseDOM:[{tag:"table"}],toDOM:function(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM:function(){return["tr",0]}},table_cell:{content:t.cellContent,attrs:n,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:function(t){return zx(t,e)}}],toDOM:function(t){return["td",Bx(t,e),0]}},table_header:{content:t.cellContent,attrs:n,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:function(t){return zx(t,e)}}],toDOM:function(t){return["th",Bx(t,e),0]}}}},toggleHeader:vS,toggleHeaderCell:bS,toggleHeaderColumn:yS,toggleHeaderRow:gS,updateColumnsOnResize:wS}),AS=hu(py),NS=hu(ES),PS=pu((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){return function(n){Array.isArray(t)||(t=[t]);for(var o=0,i=t.length;o<i;o++){var r=M(t[o])(n.selection);if(r){var s=p(r.pos,e)(n);if(s!==n)return s}}return n}},o=function(t){return function(e){if(l(e.selection)){var n=e.selection,o=n.$from,i=n.$to;if(t instanceof AS.Fragment&&o.parent.canReplace(o.index(),o.indexAfter(),t)||o.parent.canReplaceWith(o.index(),o.indexAfter(),t.type))return u(e.replaceWith(o.pos,i.pos,t).setSelection(new pb.NodeSelection(e.doc.resolve(o.pos))))}return e}},i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(n){var o=pb.Selection.findFrom(n.doc.resolve(t),e,!0);return o?n.setSelection(o):n}},r=function(t){return t.type&&t.type.spec.selectable},s=function(t,e,n){return function(t){return r(t)&&t.type.isLeaf}(t)?n.setSelection(new pb.NodeSelection(n.doc.resolve(e))):i(e)(n)},a=function(t,e,i){return function(a){var c="number"==typeof e,p=a.selection.$from,h=c?a.doc.resolve(e):l(a.selection)?a.doc.resolve(p.pos+1):p,d=h.parent;if(l(a.selection)&&i&&a!==(a=o(t)(a)))return a;if(v(d)&&a!==(a=n(d.type,t)(a))){var f=r(t)?h.before(h.depth):h.pos;return s(t,f,a)}if(m(h,t)){a.insert(h.pos,t);var g=c?h.pos:r(t)?a.selection.$anchor.pos-1:a.selection.$anchor.pos;return u(s(t,g,a))}for(var y=h.depth;y>0;y--){var b=h.after(y),_=a.doc.resolve(b);if(m(_,t))return a.insert(b,t),u(s(t,b,a))}return a}},l=function(t){return t instanceof pb.NodeSelection},c=function(t,e){return Array.isArray(t)&&t.indexOf(e.type)>-1||e.type===t},u=function(t){return Object.assign(Object.create(t),t).setTime(Date.now())},p=function(t,e){return function(n){var o=n.doc.nodeAt(t),r=n.doc.resolve(t);if(h(r,e)){var s=(n=n.replaceWith(t,t+o.nodeSize,e)).selection.$from.pos-1;return n=i(Math.max(s,0),-1)(n),n=i(n.selection.$from.start())(n),u(n)}return n}},h=function(t,e){var n=t.node(t.depth);return n&&n.type.validContent(e instanceof AS.Fragment?e:AS.Fragment.from(e))},d=function(t){return function(e){var n=e.doc.nodeAt(t);return u(e.delete(t,t+n.nodeSize))}},f=function(t){if(t.cached.tableNodeTypes)return t.cached.tableNodeTypes;var e={};return Object.keys(t.nodes).forEach((function(n){var o=t.nodes[n];o.spec.tableRole&&(e[o.spec.tableRole]=o)})),t.cached.tableNodeTypes=e,e},m=function(t,e){var n=t.index();return e instanceof AS.Fragment?t.parent.canReplace(n,n,e):e instanceof AS.Node&&t.parent.canReplaceWith(n,n,e.type)},v=function(t){return!t||"paragraph"===t.type.name&&2===t.nodeSize},g=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e?t.createChecked(null,e):t.createAndFill()},y=function(t){return function(e){for(var n=NS.TableMap.get(e.$anchorCell.node(-1)),o=e.$anchorCell.start(-1),i=n.cellsInRect(t),r=n.cellsInRect(n.rectBetween(e.$anchorCell.pos-o,e.$headCell.pos-o)),s=0,a=i.length;s<a;s++)if(-1===r.indexOf(i[s]))return!1;return!0}},b=function(t){return t[0].map((function(e,n){return t.map((function(t){return t[n]}))}))},_=function(t){for(var e=NS.TableMap.get(t),n=[],o=0;o<e.height;o++){for(var i=[],r={},s=0;s<e.width;s++){var a=e.map[o*e.width+s],l=t.nodeAt(a),c=e.findCell(a);r[a]||c.top!==o?i.push(null):(r[a]=!0,i.push(l))}n.push(i)}return n},w=function(t,e){for(var n=[],o=NS.TableMap.get(t),i=0;i<o.height;i++){for(var r=t.child(i),s=[],a=0;a<o.width;a++)if(e[i][a]){var l=o.map[i*o.width+a],c=e[i][a],u=t.nodeAt(l).type.createChecked(Object.assign({},c.attrs),c.content,c.marks);s.push(u)}n.push(r.type.createChecked(r.attrs,s,r.marks))}return t.type.createChecked(t.attrs,n,t.marks)},x=function(t,e,n,o){var i=e[0]>n[0]?-1:1,r=t.splice(e[0],e.length),s=r.length%2==0?1:0,a=void 0;return a=-1===o&&1===i?n[0]-1:1===o&&-1===i?n[n.length-1]-s+1:-1===i?n[0]:n[n.length-1]-s,t.splice.apply(t,[a,0].concat(r)),t},S=function(t,e,n,o){var i="Target position is invalid, you can't move the "+o+" "+t+" to "+e+", the target can't be split. You could use tryToFit option.";if(1==(t>e?-1:1)){if(-1!==n.slice(0,n.length-1).indexOf(e))throw new Error(i)}else if(-1!==n.slice(1).indexOf(e))throw new Error(i);return!0},k=function(t){return function(e){var n=e.$from;return C(n,t)}},C=function(t,e){for(var n=t.depth;n>0;n--){var o=t.node(n);if(e(o))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:o}}},O=function(t,e){return function(n){var o=k(t)(n);if(o)return A(o.pos,e)}},T=function(t){return function(e){return!!k(t)(e)}},M=function(t){return function(e){return k((function(e){return c(t,e)}))(e)}},E=function(t){var e=t.$from.nodeBefore,n=pb.Selection.findFrom(t.$from,-1);if(n&&e){var o=M(e.type)(n);return o?o.pos:n.$from.pos}},A=function(t,e){var n=e(t),o=n.node.childNodes[n.offset];return n.node.nodeType===Node.TEXT_NODE?n.node.parentNode:o&&o.nodeType!==Node.TEXT_NODE?o:n.node},N=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t)throw new Error('Invalid "node" parameter');var n=[];return t.descendants((function(t,o){if(n.push({node:t,pos:o}),!e)return!1})),n},P=function(t,e,n){if(!t)throw new Error('Invalid "node" parameter');if(!e)throw new Error('Invalid "predicate" parameter');return N(t,n).filter((function(t){return e(t.node)}))},L=function(t,e,n){return P(t,(function(t){return t.type===e}),n)},I=function(t){return k((function(t){return t.type.spec.tableRole&&"table"===t.type.spec.tableRole}))(t)},D=function(t){return t instanceof NS.CellSelection},R=function(t){if(D(t)){var e=NS.TableMap.get(t.$anchorCell.node(-1));return y({left:0,right:e.width,top:0,bottom:e.height})(t)}return!1},z=function(t){return function(e){var n=I(e);if(n){var o=NS.TableMap.get(n.node);return(Array.isArray(t)?t:Array.from([t])).reduce((function(t,e){if(e>=0&&e<=o.width-1){var i=o.cellsInRect({left:e,right:e+1,top:0,bottom:o.height});return t.concat(i.map((function(t){var e=n.node.nodeAt(t),o=t+n.start;return{pos:o,start:o+1,node:e}})))}}),[])}}},B=function(t){return function(e){var n=I(e);if(n){var o=NS.TableMap.get(n.node);return(Array.isArray(t)?t:Array.from([t])).reduce((function(t,e){if(e>=0&&e<=o.height-1){var i=o.cellsInRect({left:0,right:o.width,top:e,bottom:e+1});return t.concat(i.map((function(t){var e=n.node.nodeAt(t),o=t+n.start;return{pos:o,start:o+1,node:e}})))}}),[])}}},$=function(t){return function(e,n){return function(o){var i=I(o.selection),r="row"===t;if(i){var s=NS.TableMap.get(i.node);if(e>=0&&e<(r?s.height:s.width)){var a=r?0:e,l=r?e:0,c=r?s.width:e+1,p=r?e+1:s.height;if(n){var h=q(o.selection.$from);if(!h)return o;var d=s.findCell(h.pos-i.start);r?(l=Math.min(l,d.top),p=Math.max(p,d.bottom)):(a=Math.min(a,d.left),c=Math.max(c,d.right))}var f=s.cellsInRect({left:a,top:l,right:r?c:a+1,bottom:r?l+1:p}),m=p-l==1?f:s.cellsInRect({left:r?a:c-1,top:r?p-1:l,right:c,bottom:p}),v=i.start+f[0],g=i.start+m[m.length-1],y=o.doc.resolve(v),b=o.doc.resolve(g);return u(o.setSelection(new NS.CellSelection(b,y)))}}return o}}},j=$("column"),V=$("row"),Z=function(t){return function(e){var n=I(e.selection);if(n){var o=NS.TableMap.get(n.node);if(t>=0&&t<=o.height){for(var i=n.node,r=f(i.type.schema),s=n.start,l=0;l<t+1;l++)s+=i.child(l).nodeSize;var c=i.child(t),u=[],p=0;if(c.forEach((function(t){1===t.attrs.rowspan&&(p+=t.attrs.colspan,u.push(r[t.type.spec.tableRole].createAndFill(t.attrs,t.marks)))})),p<o.width){for(var h=[],d=function(n){var o=K(n,(function(e,o){var i=e.node.attrs.rowspan;return i>1&&n+i>t}))(e);h.push.apply(h,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(o))},m=t;m>=0;m--)d(m);h.length&&h.forEach((function(t){e=U(t,{rowspan:t.node.attrs.rowspan+1})(e)}))}return a(r.row.create(c.attrs,u),s)(e)}}return e}},F=function(t){return function(e){var n=I(e.selection);if(n){var o=NS.TableMap.get(n.node);if(0===t&&1===o.width)return W(e);if(t>=0&&t<=o.width)return NS.removeColumn(e,{map:o,tableStart:n.start,table:n.node},t),u(e)}return e}},H=function(t){return function(e){var n=I(e.selection);if(n){var o=NS.TableMap.get(n.node);if(0===t&&1===o.height)return W(e);if(t>=0&&t<=o.height)return NS.removeRow(e,{map:o,tableStart:n.start,table:n.node},t),u(e)}return e}},W=function(t){for(var e=t.selection.$from,n=e.depth;n>0;n--)if("table"===e.node(n).type.spec.tableRole)return u(t.delete(e.before(n),e.after(n)));return t},U=function(t,e){return function(n){return t?(n.setNodeMarkup(t.pos,null,Object.assign({},t.node.attrs,e)),u(n)):n}},q=function(t){return C(t,(function(t){return t.type.spec.tableRole&&/cell/i.test(t.type.spec.tableRole)}))},J=function(t){var e=q(t);if(e){var n=function(t){return C(t,(function(t){return t.type.spec.tableRole&&/table/i.test(t.type.spec.tableRole)}))}(t),o=NS.TableMap.get(n.node),i=e.pos-n.start;return o.rectBetween(i,i)}},K=function(t,e){return function(n){var o=[],i=B(t)(n.selection);if(i)for(var r=i.length-1;r>=0;r--)e(i[r],n)&&o.push(i[r]);return o}},G=function(t){return function(e){for(var n=t,o=t,i=function(t){var i=z(t)(e.selection);i&&i.forEach((function(e){var i=e.node.attrs.colspan+t-1;i>=n&&(n=t),i>o&&(o=i)}))},r=t;r>=0;r--)i(r);var s=function(t){var n=z(t)(e.selection);n&&n.forEach((function(e){var n=e.node.attrs.colspan+t-1;e.node.attrs.colspan>1&&n>o&&(o=n)}))};for(r=t;r<=o;r++)s(r);var a=[];for(r=n;r<=o;r++){var l=z(r)(e.selection);l&&l.length&&a.push(r)}n=a[0],o=a[a.length-1];for(var c=z(n)(e.selection),u=B(0)(e.selection),p=e.doc.resolve(c[c.length-1].pos),h=void 0,d=o;d>=n;d--){var f=z(d)(e.selection);if(f&&f.length){for(var m=u.length-1;m>=0;m--)if(u[m].pos===f[0].pos){h=f[0];break}if(h)break}}return{$anchor:p,$head:e.doc.resolve(h.pos),indexes:a}}},X=function(t){return function(e){for(var n=t,o=t,i=function(t){B(t)(e.selection).forEach((function(e){var i=e.node.attrs.rowspan+t-1;i>=n&&(n=t),i>o&&(o=i)}))},r=t;r>=0;r--)i(r);var s=function(t){B(t)(e.selection).forEach((function(e){var n=e.node.attrs.rowspan+t-1;e.node.attrs.rowspan>1&&n>o&&(o=n)}))};for(r=t;r<=o;r++)s(r);var a=[];for(r=n;r<=o;r++){var l=B(r)(e.selection);l&&l.length&&a.push(r)}n=a[0],o=a[a.length-1];for(var c=B(n)(e.selection),u=z(0)(e.selection),p=e.doc.resolve(c[c.length-1].pos),h=void 0,d=o;d>=n;d--){var f=B(d)(e.selection);if(f&&f.length){for(var m=u.length-1;m>=0;m--)if(u[m].pos===f[0].pos){h=f[0];break}if(h)break}}return{$anchor:p,$head:e.doc.resolve(h.pos),indexes:a}}};e.isNodeSelection=l,e.canInsert=m,e.convertTableNodeToArrayOfRows=_,e.convertArrayOfRowsToTableNode=w,e.findParentNode=k,e.findParentNodeClosestToPos=C,e.findParentDomRef=O,e.hasParentNode=T,e.findParentNodeOfType=M,e.findParentNodeOfTypeClosestToPos=function(t,e){return C(t,(function(t){return c(e,t)}))},e.hasParentNodeOfType=function(t){return function(e){return T((function(e){return c(t,e)}))(e)}},e.findParentDomRefOfType=function(t,e){return function(n){return O((function(e){return c(t,e)}),e)(n)}},e.findSelectedNodeOfType=function(t){return function(e){if(l(e)){var n=e.node,o=e.$from;if(c(t,n))return{node:n,pos:o.pos,depth:o.depth}}}},e.findPositionOfNodeBefore=E,e.findDomRefAtPos=A,e.flatten=N,e.findChildren=P,e.findTextNodes=function(t,e){return P(t,(function(t){return t.isText}),e)},e.findInlineNodes=function(t,e){return P(t,(function(t){return t.isInline}),e)},e.findBlockNodes=function(t,e){return P(t,(function(t){return t.isBlock}),e)},e.findChildrenByAttr=function(t,e,n){return P(t,(function(t){return!!e(t.attrs)}),n)},e.findChildrenByType=L,e.findChildrenByMark=function(t,e,n){return P(t,(function(t){return e.isInSet(t.marks)}),n)},e.contains=function(t,e){return!!L(t,e).length},e.findTable=I,e.isCellSelection=D,e.getSelectionRect=function(t){if(D(t)){var e=t.$anchorCell.start(-1);return NS.TableMap.get(t.$anchorCell.node(-1)).rectBetween(t.$anchorCell.pos-e,t.$headCell.pos-e)}},e.isColumnSelected=function(t){return function(e){if(D(e)){var n=NS.TableMap.get(e.$anchorCell.node(-1));return y({left:t,right:t+1,top:0,bottom:n.height})(e)}return!1}},e.isRowSelected=function(t){return function(e){if(D(e)){var n=NS.TableMap.get(e.$anchorCell.node(-1));return y({left:0,right:n.width,top:t,bottom:t+1})(e)}return!1}},e.isTableSelected=R,e.getCellsInColumn=z,e.getCellsInRow=B,e.getCellsInTable=function(t){var e=I(t);if(e){var n=NS.TableMap.get(e.node);return n.cellsInRect({left:0,right:n.width,top:0,bottom:n.height}).map((function(t){var n=e.node.nodeAt(t),o=t+e.start;return{pos:o,start:o+1,node:n}}))}},e.selectColumn=j,e.selectRow=V,e.selectTable=function(t){var e=I(t.selection);if(e){var n=NS.TableMap.get(e.node).map;if(n&&n.length){var o=e.start+n[0],i=e.start+n[n.length-1],r=t.doc.resolve(o),s=t.doc.resolve(i);return u(t.setSelection(new NS.CellSelection(s,r)))}}return t},e.emptyCell=function(t,e){return function(n){if(t){var o=f(e).cell.createAndFill().content;if(!t.node.content.eq(o))return n.replaceWith(t.pos+1,t.pos+t.node.nodeSize,o),u(n)}return n}},e.addColumnAt=function(t){return function(e){var n=I(e.selection);if(n){var o=NS.TableMap.get(n.node);if(t>=0&&t<=o.width)return u(NS.addColumn(e,{map:o,tableStart:n.start,table:n.node},t))}return e}},e.moveRow=function(t,e,n){return function(o){var i=Object.assign({tryToFit:!1,direction:0},n),r=I(o.selection);if(!r)return o;var s=X(t)(o).indexes,a=X(e)(o).indexes;if(s.indexOf(e)>-1)return o;!i.tryToFit&&a.length>1&&S(t,e,a,"row");var l=function(t,e,n,o){var i=_(t.node);return i=x(i,e,n,o),w(t.node,i)}(r,s,a,i.direction);return u(o).replaceWith(r.pos,r.pos+r.node.nodeSize,l)}},e.moveColumn=function(t,e,n){return function(o){var i=Object.assign({tryToFit:!1,direction:0},n),r=I(o.selection);if(!r)return o;var s=G(t)(o).indexes,a=G(e)(o).indexes;if(s.indexOf(e)>-1)return o;!i.tryToFit&&a.length>1&&S(t,e,a,"column");var l=function(t,e,n,o){var i=b(_(t.node));return i=x(i,e,n,o),i=b(i),w(t.node,i)}(r,s,a,i.direction);return u(o).replaceWith(r.pos,r.pos+r.node.nodeSize,l)}},e.addRowAt=function(t,e){return function(n){var o=I(n.selection);if(o){var i=NS.TableMap.get(o.node),r=t-1;if(e&&r>=0)return u(Z(r)(n));if(t>=0&&t<=i.height)return u(NS.addRow(n,{map:i,tableStart:o.start,table:o.node},t))}return n}},e.cloneRowAt=Z,e.removeColumnAt=F,e.removeRowAt=H,e.removeTable=W,e.removeSelectedColumns=function(t){var e=t.selection;if(R(e))return W(t);if(D(e)){var n=I(e);if(n){var o=NS.TableMap.get(n.node),i=o.rectBetween(e.$anchorCell.pos-n.start,e.$headCell.pos-n.start);if(0==i.left&&i.right==o.width)return!1;for(var r=Object.assign({},i,{map:o,table:n.node,tableStart:n.start}),s=r.right-1;NS.removeColumn(t,r,s),s!==r.left;s--)r.table=r.tableStart?t.doc.nodeAt(r.tableStart-1):t.doc,r.map=NS.TableMap.get(r.table);return u(t)}}return t},e.removeSelectedRows=function(t){var e=t.selection;if(R(e))return W(t);if(D(e)){var n=I(e);if(n){var o=NS.TableMap.get(n.node),i=o.rectBetween(e.$anchorCell.pos-n.start,e.$headCell.pos-n.start);if(0==i.top&&i.bottom==o.height)return!1;for(var r=Object.assign({},i,{map:o,table:n.node,tableStart:n.start}),s=r.bottom-1;NS.removeRow(t,r,s),s!==r.top;s--)r.table=r.tableStart?t.doc.nodeAt(r.tableStart-1):t.doc,r.map=NS.TableMap.get(r.table);return u(t)}}return t},e.removeColumnClosestToPos=function(t){return function(e){var n=J(t);return n?F(n.left)(i(t.pos)(e)):e}},e.removeRowClosestToPos=function(t){return function(e){var n=J(t);return n?H(n.top)(i(t.pos)(e)):e}},e.forEachCellInColumn=function(t,e,n){return function(o){var i=z(t)(o.selection);if(i){for(var r=i.length-1;r>=0;r--)o=e(i[r],o);if(n){var s=o.doc.resolve(o.mapping.map(i[i.length-1].pos));o.setSelection(pb.Selection.near(s))}return u(o)}return o}},e.forEachCellInRow=function(t,e,n){return function(o){var i=B(t)(o.selection);if(i){for(var r=i.length-1;r>=0;r--)o=e(i[r],o);if(n){var s=o.doc.resolve(o.mapping.map(i[i.length-1].pos));o.setSelection(pb.Selection.near(s))}}return o}},e.setCellAttrs=U,e.createTable=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=f(t),s=r.cell,a=r.header_cell,l=r.row,c=r.table,u=[],p=[],h=0;h<n;h++)u.push(g(s,i)),o&&p.push(g(a,i));for(var d=[],m=0;m<e;m++)d.push(l.createChecked(null,o&&0===m?p:u));return c.createChecked(null,d)},e.findCellClosestToPos=q,e.findCellRectClosestToPos=J,e.getSelectionRangeInColumn=G,e.getSelectionRangeInRow=X,e.removeParentNodeOfType=function(t){return function(e){var n=M(t)(e.selection);return n?d(n.pos)(e):e}},e.replaceParentNodeOfType=n,e.removeSelectedNode=function(t){if(l(t.selection)){var e=t.selection.$from.pos,n=t.selection.$to.pos;return u(t.delete(e,n))}return t},e.replaceSelectedNode=o,e.setTextSelection=i,e.safeInsert=a,e.setParentNodeMarkup=function(t,e,n,o){return function(i){var r=M(t)(i.selection);return r?u(i.setNodeMarkup(r.pos,e,Object.assign({},r.node.attrs,n),o)):i}},e.selectParentNodeOfType=function(t){return function(e){if(!l(e.selection)){var n=M(t)(e.selection);if(n)return u(e.setSelection(pb.NodeSelection.create(e.doc,n.pos)))}return e}},e.removeNodeBefore=function(t){var e=E(t.selection);return"number"==typeof e?d(e)(t):t}}));(MS=PS)&&MS.__esModule&&Object.prototype.hasOwnProperty.call(MS,"default")&&MS.default,PS.isNodeSelection,PS.canInsert,PS.convertTableNodeToArrayOfRows,PS.convertArrayOfRowsToTableNode,PS.findParentNode,PS.findParentNodeClosestToPos,PS.findParentDomRef,PS.hasParentNode,PS.findParentNodeOfType,PS.findParentNodeOfTypeClosestToPos,PS.hasParentNodeOfType,PS.findParentDomRefOfType,PS.findSelectedNodeOfType,PS.findPositionOfNodeBefore,PS.findDomRefAtPos,PS.flatten,PS.findChildren,PS.findTextNodes,PS.findInlineNodes,PS.findBlockNodes,PS.findChildrenByAttr,PS.findChildrenByType,PS.findChildrenByMark,PS.contains,PS.findTable,PS.isCellSelection,PS.getSelectionRect,PS.isColumnSelected,PS.isRowSelected,PS.isTableSelected,PS.getCellsInColumn,PS.getCellsInRow,PS.getCellsInTable,PS.selectColumn,PS.selectRow,PS.selectTable,PS.emptyCell,PS.addColumnAt,PS.moveRow,PS.moveColumn,PS.addRowAt,PS.cloneRowAt,PS.removeColumnAt,PS.removeRowAt,PS.removeTable,PS.removeSelectedColumns,PS.removeSelectedRows,PS.removeColumnClosestToPos,PS.removeRowClosestToPos,PS.forEachCellInColumn,PS.forEachCellInRow,PS.setCellAttrs,PS.createTable,PS.findCellClosestToPos,PS.findCellRectClosestToPos,PS.getSelectionRangeInColumn,PS.getSelectionRangeInRow,PS.removeParentNodeOfType,PS.replaceParentNodeOfType,PS.removeSelectedNode,PS.replaceSelectedNode,PS.setTextSelection,PS.safeInsert,PS.setParentNodeMarkup,PS.selectParentNodeOfType,PS.removeNodeBefore;var LS,IS=zd({render:function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"tiptap-vuetify-todo-item-view",attrs:{"data-type":this.node.type.name,"data-done":this.node.attrs.done.toString(),"data-drag-handle":""}},[e("VCheckbox",{staticClass:"mr-2 mt-3 pt-1",attrs:{"input-value":this.node.attrs.done,"hide-details":""},on:{change:this.onChange}}),this._v(" "),e("div",{ref:"content",staticClass:"todo-content",attrs:{contenteditable:this.view.editable.toString()}})],1)},staticRenderFns:[]},void 0,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return nu(e,t),e.prototype.onChange=function(){this.updateAttrs({done:!this.node.attrs.done})},iu([Sd({type:Object,required:!0}),ru("design:type",Object)],e.prototype,"node",void 0),iu([Sd({type:Object,required:!0}),ru("design:type",Object)],e.prototype,"view",void 0),iu([Sd({type:Function,required:!0}),ru("design:type",Function)],e.prototype,"updateAttrs",void 0),iu([wd({components:{VCheckbox:Za}})],e)}(Rt.Z),void 0,!1,void 0,void 0,void 0),DS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return nu(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"todo_item"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultOptions",{get:function(){return{nested:!1}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return IS},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){var t=this;return{attrs:{done:{default:!1}},draggable:!0,content:this.options.nested?"(paragraph|todo_list)+":"paragraph+",toDOM:function(e){var n=e.attrs.done;return["li",{"data-type":t.name,"data-done":n.toString()},["span",{class:"todo-checkbox",contenteditable:"false"}],["div",{class:"todo-content"},0]]},parseDOM:[{priority:51,tag:'[data-type="'+this.name+'"]',getAttrs:function(t){return{done:"true"===t.getAttribute("data-done")}}}]}},enumerable:!0,configurable:!0}),e.prototype.keys=function(t){var e,n=t.type;return{Enter:(e=n,function(t,n){var o=t.selection,i=o.$from,r=o.$to,s=o.node;if(s&&s.isBlock||i.depth<2||!i.sameParent(r))return!1;var a=i.node(-1);if(a.type!=e)return!1;if(0==i.parent.content.size){if(2==i.depth||i.node(-3).type!=e||i.index(-2)!=i.node(-2).childCount-1)return!1;if(n){for(var l=ig.empty,c=i.index(-1)>0,u=i.depth-(c?1:2);u>=i.depth-3;u--)l=ig.from(i.node(u).copy(l));l=l.append(ig.from(e.createAndFill()));var p=t.tr.replace(i.before(c?null:-1),i.after(-3),new pg(l,c?3:2,2));p.setSelection(t.selection.constructor.near(p.doc.resolve(i.pos+(c?3:2)))),n(p.scrollIntoView())}return!0}var h=r.pos==i.end()?a.contentMatchAt(i.indexAfter(-1)).defaultType:null,d=t.tr.delete(i.pos,r.pos),f=h&&[{type:e},{type:h}];return f||(f=[{type:e},null]),!!function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3?arguments[3]:void 0,i=t.resolve(e),r=i.depth-n,s=o&&o[o.length-1]||i.parent;if(r<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(var a=i.depth-1,l=n-2;a>r;a--,l--){var c=i.node(a),u=i.index(a);if(c.type.spec.isolating)return!1;var p=c.content.cutByIndex(u,c.childCount),h=o&&o[l]||c;if(h!=c&&(p=p.replaceChild(0,h.type.create(h.attrs))),!c.canReplace(u+1,c.childCount))return!1}var d=i.indexAfter(r),f=o&&o[0];return i.node(r).canReplaceWith(d,d,f?f.type:i.node(r+1).type)}(d.doc,i.pos,2,f)&&(n&&n(d.split(i.pos,2,f).scrollIntoView()),!0)}),Tab:this.options.nested?kb(n):function(){},"Shift-Tab":Sb(n)}},e}(_a),RS=(function(t){function e(e){return t.call(this,e,DS)||this}nu(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){return[]},enumerable:!0,configurable:!0})}(Tm),"context"),zS="editor",BS=zd({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{value:t.value,"max-width":"500px"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[t._v("\n        Tables\n      ")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{icon:""},on:{click:t.close}},[n("v-icon",[t._v(t._s(t.COMMON_ICONS.close[t.$tiptapVuetify.iconsGroup]))])],1)],1),t._v(" "),n("v-card-text",[n("v-text-field",{attrs:{label:"Rows count"},model:{value:t.form.rowsCount,callback:function(e){t.$set(t.form,"rowsCount",e)},expression:"form.rowsCount"}}),t._v(" "),n("v-text-field",{attrs:{label:"Cols count"},model:{value:t.form.colsCount,callback:function(e){t.$set(t.form,"colsCount",e)},expression:"form.colsCount"}}),t._v(" "),n("v-checkbox",{attrs:{label:"With header row"},model:{value:t.form.withHeaderRow,callback:function(e){t.$set(t.form,"withHeaderRow",e)},expression:"form.withHeaderRow"}})],1),t._v(" "),n("v-card-actions",[n("v-btn",{attrs:{text:""},on:{click:t.close}},[t._v("\n        Close\n      ")]),t._v(" "),n("v-btn",{attrs:{text:""},on:{click:t.apply}},[t._v("\n        Apply\n      ")])],1)],1)],1)},staticRenderFns:[]},void 0,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.COMMON_ICONS=xm,e.form={rowsCount:2,colsCount:3,withHeaderRow:!1},e}return nu(e,t),e.prototype.apply=function(){this[RS].commands.createTable({rowsCount:this.form.rowsCount,colsCount:this.form.colsCount,withHeaderRow:this.form.withHeaderRow}),this.close(),this[zS].focus()},e.prototype.close=function(){this.$destroy(),this.$el.parentNode.removeChild(this.$el)},"value","nativeExtensionName",RS,zS,"imageSourcesOverride",iu([Sd({type:Boolean,default:!1}),ru("design:type",Boolean)],e.prototype,"value",void 0),iu([Sd({type:String,required:!0}),ru("design:type",String)],e.prototype,"nativeExtensionName",void 0),iu([Sd({type:Object,required:!0}),ru("design:type",Object)],e.prototype,"context",void 0),iu([Sd({type:Object,required:!0}),ru("design:type",Object)],e.prototype,"editor",void 0),iu([Sd({type:Boolean,required:!1}),ru("design:type",Object)],e.prototype,"imageSourcesOverride",void 0),iu([wd({components:{VRow:A.Z,VCol:g.Z,VDialog:b.Z,VCard:m.Z,VCardTitle:v.EB,VCardText:v.ZB,VCardActions:v.h7,VBtn:f.Z,VSpacer:P.Z,VIcon:C.Z,VTextField:I.Z,VCheckbox:Za}})],e)}(gd(wf)),void 0,!1,void 0,void 0,void 0),$S=(function(t){function e(e){return t.call(this,e,Zc)||this}nu(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){var t;return[{render:new $d({tooltip:"TODO",icons:(t={},t.md=new Ld("table"),t.fa=new Ld("fas fa-table"),t.mdi=new Ld("mdi-table"),t.mdiSvg=new Ld("M8.5,13.5L11,16.5L14.5,12L19,18H5M21,19V5C21,3.89 20.1,3 19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19Z"),t),nativeExtensionName:"table",onClick:function(t){var e=t.context,n=t.editor;return su(this,void 0,void 0,(function(){var t,o;return au(this,(function(i){return t=Rt.Z.extend(BS),(o=new t({vuetify:Rt.Z.prototype.tiptapVuetifyPlugin.vuetify,propsData:{value:!0,nativeExtensionName:"table",context:e,editor:n}})).$mount(),document.querySelector("body").appendChild(o.$el),[2]}))}))}})}]},enumerable:!0,configurable:!0})}(Tm),function(t){function e(e){return t.call(this,e,Hc)||this}nu(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){return[]},enumerable:!0,configurable:!0})}(Tm),function(t){function e(e){return t.call(this,e,Fc)||this}nu(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){return[]},enumerable:!0,configurable:!0})}(Tm),function(t){function e(e){return t.call(this,e,Wc)||this}nu(e,t),Object.defineProperty(e.prototype,"availableActions",{get:function(){return[]},enumerable:!0,configurable:!0})}(Tm),new(function(){function t(){this.installed=!1}return Object.defineProperty(t.prototype,"vuetifyLang",{get:function(){return this.vuetify.framework.lang.current},enumerable:!0,configurable:!0}),t.prototype.install=function(t,e){if(e&&e.vuetify){var n=e.vuetify,o=e.iconsGroup,i=void 0===o?"md":o;t.prototype.tiptapVuetifyPlugin=$S,t.prototype.$tiptapVuetify={iconsGroup:i},this.vuetify=n,this.installed=!0}else Dd.error('Please, specify in options the Vuetify Object ("vuetify" property)')},t}()));LS=null,"undefined"!=typeof window?LS=window:void 0!==n.g&&(LS=n.g),LS&&LS.Vue&&(LS.Vue.use($S,ou({vuetify:LS.vuetify},LS.tiptapVuetifyPluginOptions)),LS.Vue.component("tiptap-vuetify",wm));var jS=n(5584),VS={insert:"head",singleton:!1};W()(jS.Z,VS);jS.Z.locals;var ZS=n(3196);function FS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function HS(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?FS(Object(n),!0).forEach((function(e){WS(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function WS(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const US={name:"EventFormAddMediaDialog",data:function(){return{processing:!1,addMediaDialog:!1,mediaUrl:"",mediaFile:null}},computed:HS({},(0,s.Se)("map",["indexSelectedEvent"])),methods:HS(HS(HS({},(0,s.OI)("map",["ADD_EVENT_MEDIA_URL"])),(0,s.nv)("map",["addMedia"])),{},{addMediaResource:function(){var t=this;this.mediaFile?(this.processing=!0,this.addMedia(this.mediaFile).then((function(e){t.addMediaDialog=!1,t.mediaFile=null})).finally((function(){t.processing=!1}))):this.mediaUrl&&(this.ADD_EVENT_MEDIA_URL({index:this.indexSelectedEvent,mediaUrl:this.mediaUrl}),this.addMediaDialog=!1,this.mediaUrl="")}})};var qS=(0,p.Z)(US,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{persistent:t.processing,"max-width":"380"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[n("v-btn",t._g({staticClass:"mb-4 primary--text",staticStyle:{"flex-grow":"0"},attrs:{block:"",large:""}},o),[n("v-icon",{staticClass:"mr-2"},[t._v("insert_photo")]),t._v("\n            Добавить медиа\n        ")],1)]}}]),model:{value:t.addMediaDialog,callback:function(e){t.addMediaDialog=e},expression:"addMediaDialog"}},[t._v(" "),n("v-card",[n("v-toolbar",{staticClass:"pr-1",attrs:{height:"68",flat:""}},[n("v-toolbar-title",[n("v-icon",{staticClass:"mr-1 pb-1",attrs:{large:""}},[t._v("insert_photo")]),t._v("\n                Добавление медиа\n            ")],1)],1),t._v(" "),n("v-card-text",{staticClass:"pb-0"},[n("v-text-field",{attrs:{disabled:null!==t.mediaFile,clearable:"",label:"Ссылка на картинку или YouTube"},model:{value:t.mediaUrl,callback:function(e){t.mediaUrl="string"==typeof e?e.trim():e},expression:"mediaUrl"}}),t._v("\n            или\n            "),n("v-file-input",{attrs:{disabled:""!==t.mediaUrl,label:"Загрузка файла с компьютера",accept:"image/*, video/*","prepend-icon":"attach_file"},model:{value:t.mediaFile,callback:function(e){t.mediaFile=e},expression:"mediaFile"}})],1),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{loading:t.processing,color:"primary",text:"",disabled:""===t.mediaUrl&&null===t.mediaFile},on:{click:function(e){return t.addMediaResource()}}},[t._v("\n                Добавить\n            ")])],1)],1)],1)}),[],!1,null,null,null);const JS=qS.exports;function KS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function GS(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?KS(Object(n),!0).forEach((function(e){XS(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function XS(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}d()(qS,{VBtn:f.Z,VCard:m.Z,VCardActions:v.h7,VCardText:v.ZB,VDialog:b.Z,VFileInput:x.Z,VIcon:C.Z,VSpacer:P.Z,VTextField:I.Z,VToolbar:D.Z,VToolbarTitle:R.qW}),Rt.Z.use($S,{vuetify:zt.Z,iconsGroup:"md"});const YS={name:"ConstructorForm",components:{EventFormAddMediaDialog:JS,MediaContent:ZS.Z,TiptapVuetify:wm},data:function(){return{changeIconDialog:!1,iconUrl:"",iconWidth:null,iconHeight:null,extensions:[Zm,Km,[Mm,{options:{levels:[1,2,3,4]}}],Pm,Nm,Am,Em,Bm,Rm,zm,$m,Vm,Dm,jm,Lm,Im]}},watch:{changeIconDialog:function(t){t&&(this.iconUrl=this.selectedEvent.marker.url,this.iconWidth=this.selectedEvent.marker.size[0],this.iconHeight=this.selectedEvent.marker.size[1])}},computed:GS(GS({},(0,s.Se)("map",["selectedEvent","indexSelectedEvent"])),{},{model_title:{get:function(){return this.selectedEvent.title},set:function(t){var e={index:this.indexSelectedEvent,title:t};this.SET_EVENT_TITLE(e)}},model_description:{get:function(){return this.selectedEvent.description},set:function(t){var e={index:this.indexSelectedEvent,description:t};this.SET_EVENT_DESCRIPTION(e)}},model_mediaUrl:{get:function(){return this.selectedEvent.mediaUrl},set:function(t){var e={index:this.indexSelectedEvent,mediaUrl:t};this.SET_EVENT_MEDIA_URL(e)}}}),methods:GS({},(0,s.OI)("map",["SET_EVENT_TITLE","SET_EVENT_DESCRIPTION","SET_ICON_FOR_EVENT","SET_ICON_FOR_ALL_EVENTS"]))};var QS=n(1502),tk={insert:"head",singleton:!1};W()(QS.Z,tk);QS.Z.locals;var ek=(0,p.Z)(YS,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",{staticClass:"mt-3",staticStyle:{"max-height":"36vh","min-height":"36vh"},attrs:{"no-gutters":""}},[n("v-col",{staticClass:"pr-1 d-flex flex-column",staticStyle:{"max-height":"100%",overflow:"auto"},attrs:{cols:"6"}},[n("v-text-field",{staticClass:"border-color-gray",staticStyle:{"flex-grow":"0"},attrs:{label:"Название события...","single-line":"",outlined:"","hide-details":"",clearable:""},model:{value:t.model_title,callback:function(e){t.model_title="string"==typeof e?e.trim():e},expression:"model_title"}}),t._v(" "),n("tiptap-vuetify",{staticClass:"d-flex flex-grow-1 mt-3",attrs:{extensions:t.extensions,"card-props":{outlined:!0,style:"width: 100%"},placeholder:"Описание события..."},model:{value:t.model_description,callback:function(e){t.model_description=e},expression:"model_description"}})],1),t._v(" "),n("v-col",{staticClass:"d-flex flex-column pl-2",staticStyle:{"max-height":"100%"},attrs:{cols:"6"}},[n("v-card",{staticClass:"d-flex flex-column",attrs:{height:"100%",outlined:""}},[n("v-card-title",{staticStyle:{"font-size":"1rem !important"}},[n("v-icon",{staticClass:"mr-2"},[t._v("perm_media")]),t._v("\n                Медиа-содержимое\n            ")],1),t._v(" "),n("v-divider"),t._v(" "),n("v-card-text",{staticClass:"d-flex flex",staticStyle:{"max-height":"100%",overflow:"auto"}},[n("v-col",{staticClass:"d-flex flex-column justify-center",attrs:{cols:"6"}},[n("EventFormAddMediaDialog"),t._v(" "),n("v-btn",{staticStyle:{"flex-grow":"0"},attrs:{block:"",large:""},on:{click:function(e){t.changeIconDialog=!0}}},[n("v-img",{staticClass:"mr-2",attrs:{"max-height":"32","max-width":"32",contain:"",src:t.selectedEvent.marker.url}}),t._v("\n                        Изменить иконку\n                    ")],1),t._v(" "),n("v-dialog",{attrs:{"max-width":"320"},model:{value:t.changeIconDialog,callback:function(e){t.changeIconDialog=e},expression:"changeIconDialog"}},[n("v-card",[n("v-toolbar",{staticClass:"pr-1",attrs:{height:"68",flat:""}},[n("v-toolbar-title",[n("v-icon",{staticClass:"mr-1 pb-1",attrs:{large:""}},[t._v("location_on")]),t._v("\n                                    Изменение иконки\n                                ")],1)],1),t._v(" "),n("v-card-text",{staticClass:"pb-0"},[n("v-text-field",{attrs:{label:"Ссылка на иконку"},model:{value:t.iconUrl,callback:function(e){t.iconUrl=e},expression:"iconUrl"}}),t._v(" "),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Ширина"},model:{value:t.iconWidth,callback:function(e){t.iconWidth=e},expression:"iconWidth"}})],1),t._v(" "),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"Высота"},model:{value:t.iconHeight,callback:function(e){t.iconHeight=e},expression:"iconHeight"}})],1)],1)],1),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("div",{staticClass:"d-flex flex-column align-end"},[n("v-btn",{staticClass:"my-1",attrs:{text:""},on:{click:function(e){t.changeIconDialog=!1,t.SET_ICON_FOR_ALL_EVENTS({index:t.indexSelectedEvent,iconUrl:t.iconUrl,size:[t.iconWidth,t.iconHeight]})}}},[t._v("\n                                        Применить ко всем\n                                    ")]),t._v(" "),n("v-btn",{staticClass:"flex-grow-0 my-1",attrs:{color:"primary",text:""},on:{click:function(e){t.changeIconDialog=!1,t.SET_ICON_FOR_EVENT({index:t.indexSelectedEvent,iconUrl:t.iconUrl,size:[t.iconWidth,t.iconHeight]})}}},[t._v("\n                                        Применить\n                                    ")])],1)],1)],1)],1)],1),t._v(" "),n("v-col",{staticClass:"d-flex flex-column justify-center",staticStyle:{"max-height":"100%",overflow:"auto"},attrs:{cols:"6"}},[n("MediaContent",{attrs:{height:"100%"}})],1)],1)],1)],1)],1)}),[],!1,null,"2c2ff232",null);const nk=ek.exports;d()(ek,{VBtn:f.Z,VCard:m.Z,VCardActions:v.h7,VCardText:v.ZB,VCardTitle:v.EB,VCol:g.Z,VDialog:b.Z,VDivider:_.Z,VIcon:C.Z,VImg:O.Z,VRow:A.Z,VSpacer:P.Z,VTextField:I.Z,VToolbar:D.Z,VToolbarTitle:R.qW});var ok=n(5352),ik=n(2727),rk=n(8380),sk=n(4616),ak=n(8592),lk=n(6595),ck=n(5243),uk=function(t){var e={};for(var n in t){var o=t[n];null!=o&&(e[n]=o)}return e},pk={name:"LControlZoom",mixins:[{props:{position:{type:String,default:"topright"}},mounted:function(){this.controlOptions={position:this.position}},beforeDestroy:function(){this.mapObject&&this.mapObject.remove()}},{props:{options:{type:Object,default:function(){return{}}}}}],props:{zoomInText:{type:String,default:"+"},zoomInTitle:{type:String,default:"Zoom in"},zoomOutText:{type:String,default:"-"},zoomOutTitle:{type:String,default:"Zoom out"}},mounted:function(){var t=this,e=function(t,e){var n=e.options&&e.options.constructor===Object?e.options:{};t=t&&t.constructor===Object?t:{};var o=uk(n);t=uk(t);var i=e.$options.props;for(var r in t){var s=i[r]?i[r].default&&"function"==typeof i[r].default?i[r].default.call():i[r].default:Symbol("unique"),a=!1;a=Array.isArray(s)?JSON.stringify(s)===JSON.stringify(t[r]):s===t[r],o[r]&&!a?(console.warn(r+" props is overriding the value passed in the options props"),o[r]=t[r]):o[r]||(o[r]=t[r])}return o}(Object.assign({},this.controlOptions,{zoomInText:this.zoomInText,zoomInTitle:this.zoomInTitle,zoomOutText:this.zoomOutText,zoomOutTitle:this.zoomOutTitle}),this);this.mapObject=ck.control.zoom(e),function(t,e,n,o){var i=function(o){var i,r="set"+((i=o)&&"function"==typeof i.charAt?i.charAt(0).toUpperCase()+i.slice(1):i),s=n[o].type===Object||n[o].type===Array||Array.isArray(n[o].type);n[o].custom&&t[r]?t.$watch(o,(function(e,n){t[r](e,n)}),{deep:s}):"setOptions"===r?t.$watch(o,(function(t,n){(0,ck.setOptions)(e,t)}),{deep:s}):e[r]&&t.$watch(o,(function(t,n){e[r](t)}),{deep:s})};for(var r in n)i(r)}(this,this.mapObject,this.$options.props),this.mapObject.addTo(this.$parent.mapObject),this.$nextTick((function(){t.$emit("ready",t.mapObject)}))},render:function(){return null}};function hk(t,e,n,o,i,r,s,a,l,c){"boolean"!=typeof s&&(l=a,a=s,s=!1);var u,p="function"==typeof n?n.options:n;if(t&&t.render&&(p.render=t.render,p.staticRenderFns=t.staticRenderFns,p._compiled=!0,i&&(p.functional=!0)),o&&(p._scopeId=o),r?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(r)},p._ssrRegister=u):e&&(u=s?function(t){e.call(this,c(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,a(t))}),u)if(p.functional){var h=p.render;p.render=function(t,e){return u.call(e),h(t,e)}}else{var d=p.beforeCreate;p.beforeCreate=d?[].concat(d,u):[u]}return n}const dk=hk({},undefined,pk,undefined,undefined,undefined,!1,void 0,void 0,void 0);var fk=n(7892);n(3888);function mk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function vk(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?mk(Object(n),!0).forEach((function(e){gk(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mk(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function gk(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const yk={name:"Map",components:{LMap:ok.Z,LTileLayer:ik.Z,LMarker:rk.Z,LTooltip:sk.Z,LIcon:ak.Z,LPolyline:lk.Z,LControlZoom:dk,LImageOverlay:fk.Z},data:function(){return{maxBoundsViscosity:.9,polylineOpacity:.6,polylineDashArray:"6"}},watch:{"config.selectedEventId":function(){this.SET_TILE_CENTER(this.selectedEvent.marker.position)}},computed:vk(vk(vk(vk({},(0,s.rn)("map",["config","events","tileCenter"])),(0,s.Se)("map",["selectedEvent","indexSelectedEvent","arrayMarker"])),(0,s.Se)("tiles",{tile:"selectedTile"})),{},{sync_center:{get:function(){return this.tileCenter},set:function(t){this.SET_TILE_CENTER(t)}},notGeomap:function(){return-1===this.tile.url.indexOf("{z}")&&-1===this.tile.url.indexOf("{x}")||-1===this.tile.url.indexOf("{y}")},crs:function(){return this.notGeomap?ck.CRS.Simple:ck.CRS.EPSG3857}}),methods:vk(vk(vk({},(0,s.OI)("map",["SET_TILE_CENTER","SET_SELECTED_EVENT_ID","SET_EVENT_MARKER_POSITION","SET_MIN_TILE_ZOOM","SET_MAX_TILE_ZOOM"])),(0,s.OI)("tiles",["SET_TILE_BOUNDS"])),{},{latLngDragUpdatePosition:function(t){var e={index:this.indexSelectedEvent,position:t};this.SET_EVENT_MARKER_POSITION(e),this.SET_TILE_CENTER(this.selectedEvent.marker.position)},latLngClickUpdatePosition:function(t){this.$refs.map.mapObject.setView(this.selectedEvent.marker.position);var e={index:this.indexSelectedEvent,position:t.latlng};this.SET_EVENT_MARKER_POSITION(e)}})};var bk=n(9836),_k={insert:"head",singleton:!1};W()(bk.Z,_k);bk.Z.locals;var wk=(0,p.Z)(yk,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return void 0===t.tile?n("div",{staticClass:"d-flex justify-center align-center",staticStyle:{width:"100%",height:"100%","background-color":"rgba(204, 204, 204, 0.5)"}},[n("v-icon",{attrs:{large:""}},[t._v("layers")])],1):n("l-map",{ref:"map",staticClass:"map",staticStyle:{"z-index":"0"},attrs:{crs:t.crs,minZoom:t.notGeomap?t.config.minZoom-1:t.config.minZoom,maxZoom:t.config.maxZoom,center:t.sync_center,options:{zoomControl:!1}},on:{"update:center":function(e){t.sync_center=e},click:t.latLngClickUpdatePosition}},[t.notGeomap?n("l-image-overlay",{attrs:{bounds:t.tile.bounds,url:t.tile.url}}):n("l-tile-layer",{attrs:{url:t.tile.url,noWrap:"",attribution:t.tile.attribution}}),t._v(" "),t._l(t.events,(function(e,o){return n("l-marker",{key:e.id,attrs:{"lat-lng":e.marker.position,draggable:t.indexSelectedEvent===o},on:{click:function(n){return t.SET_SELECTED_EVENT_ID(e.id)},"update:latLng":t.latLngDragUpdatePosition}},[n("l-tooltip",[t._v("\n            "+t._s(e.title)+"\n        ")]),t._v(" "),t.indexSelectedEvent!==o?n("l-icon",{attrs:{"icon-size":e.marker.size,"icon-url":t.events[o].marker.url}}):n("l-icon",{attrs:{"icon-size":[1.4*e.marker.size[0],1.4*e.marker.size[1]],"icon-url":t.events[o].marker.url}})],1)})),t._v(" "),t.config.showPolyline?[n("l-polyline",{attrs:{"lat-lngs":t.arrayMarker,opacity:t.polylineOpacity,dashArray:t.polylineDashArray,weight:void 0!==t.config.polylineWeight?t.config.polylineWeight:2}})]:t._e(),t._v(" "),n("l-control-zoom",{attrs:{position:"topright"}})],2)}),[],!1,null,"54dca508",null);const xk=wk.exports;function Sk(t,e,n,o,i,r,s){try{var a=t[r](s),l=a.value}catch(t){return void n(t)}a.done?e(l):Promise.resolve(l).then(o,i)}function kk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Ck(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}d()(wk,{VIcon:C.Z});const Ok={name:"Constructor",components:{ControlPanel:Ot,EventList:Dt,EventForm:nk,Map:xk},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?kk(Object(n),!0).forEach((function(e){Ck(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kk(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},(0,s.Se)("map",["wasChanges"])),methods:{preventNav:function(t){this.wasChanges&&(t.preventDefault(),t.returnValue="")}},beforeRouteEnter:function(t,e,n){return function(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var r=t.apply(e,n);function s(t){Sk(r,o,i,s,a,"next",t)}function a(t){Sk(r,o,i,s,a,"throw",t)}s(void 0)}))}}(i().mark((function o(){return i().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!t.params.id){o.next=8;break}if("viewer"===e.name||t.params.id===e.params.id){o.next=4;break}return o.next=4,r.Z.dispatch("map/getMap",t.params.id,{root:!0});case 4:document.title=r.Z.state.map.name+" - MapDesigner",document.description=r.Z.state.map.description,o.next=13;break;case 8:if("viewer"===e.name){o.next=11;break}return o.next=11,r.Z.dispatch("map/setEmptyExampleMap",null,{root:!0});case 11:document.title="Пробное использование конструктора карт и атласов - MapDesigner",document.description="Попробуйте возможности для онлайн создания карт и электронных атласов в конструкторе MapDesigner бесплатно.";case 13:n((function(e){t.params.id&&window.addEventListener("beforeunload",e.preventNav)}));case 14:case"end":return o.stop()}}),o)})))()},beforeRouteLeave:function(t,e,n){this.wasChanges&&e.params.id&&"viewer"!==t.name&&!window.confirm("Изменения атласа не будут сохранены. Продолжить?")?n(!1):(window.removeEventListener("beforeunload",this.preventNav),n())}},Tk=Ok;var Mk=(0,p.Z)(Tk,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"d-flex flex-column",staticStyle:{height:"100vh"},attrs:{fluid:""}},[n("ControlPanel"),t._v(" "),n("v-divider",{staticClass:"my-3",staticStyle:{"border-style":"dashed"}}),t._v(" "),n("div",{staticClass:"d-flex flex overflow-hidden"},[n("EventList"),t._v(" "),n("div",{staticClass:"d-flex flex-column",staticStyle:{flex:"1","min-width":"200px","padding-left":"12px"}},[n("Map"),t._v(" "),n("EventForm")],1)],1)],1)}),[],!1,null,null,null);const Ek=Mk.exports;d()(Mk,{VContainer:y.Z,VDivider:_.Z})},9838:(t,e,n)=>{"use strict";n.d(e,{Z:()=>h});var o=n(3379),i=n.n(o),r=n(18),s={insert:"head",singleton:!1};i()(r.Z,s);r.Z.locals;const a=n(9487).Z;var l=n(9011),c=n(8131),u=n(8219),p=n(7559);const h=a.extend({name:"v-file-input",model:{prop:"value",event:"change"},props:{chips:Boolean,clearable:{type:Boolean,default:!0},counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,placeholder:String,prependIcon:{type:String,default:"$file"},readonly:{type:Boolean,default:!1},showSize:{type:[Boolean,Number],default:!1,validator:t=>"boolean"==typeof t||[1e3,1024].includes(t)},smallChips:Boolean,truncateLength:{type:[Number,String],default:22},type:{type:String,default:"file"},value:{default:void 0,validator:t=>(0,c.TI)(t).every((t=>null!=t&&"object"==typeof t))}},computed:{classes(){return{...a.options.computed.classes.call(this),"v-file-input":!0}},computedCounterValue(){const t=this.multiple&&this.lazyValue?this.lazyValue.length:this.lazyValue instanceof File?1:0;if(!this.showSize)return this.$vuetify.lang.t(this.counterString,t);const e=this.internalArrayValue.reduce(((t,{size:e=0})=>t+e),0);return this.$vuetify.lang.t(this.counterSizeString,t,(0,c.XE)(e,1024===this.base))},internalArrayValue(){return(0,c.TI)(this.internalValue)},internalValue:{get(){return this.lazyValue},set(t){this.lazyValue=t,this.$emit("change",this.lazyValue)}},isDirty(){return this.internalArrayValue.length>0},isLabelActive(){return this.isDirty},text(){return this.isDirty||!this.persistentPlaceholder&&!this.isFocused&&this.hasLabel?this.internalArrayValue.map((t=>{const{name:e="",size:n=0}=t,o=this.truncateText(e);return this.showSize?`${o} (${(0,c.XE)(n,1024===this.base)})`:o})):[this.placeholder]},base(){return"boolean"!=typeof this.showSize?this.showSize:void 0},hasChips(){return this.chips||this.smallChips}},watch:{readonly:{handler(t){!0===t&&(0,u.N6)("readonly is not supported on <v-file-input>",this)},immediate:!0},value(t){const e=this.multiple?t:t?[t]:[];(0,c.vZ)(e,this.$refs.input.files)||(this.$refs.input.value="")}},methods:{clearableCallback(){this.internalValue=this.multiple?[]:null,this.$refs.input.value=""},genChips(){return this.isDirty?this.text.map(((t,e)=>this.$createElement(l.Z,{props:{small:this.smallChips},on:{"click:close":()=>{const t=this.internalValue;t.splice(e,1),this.internalValue=t}}},[t]))):[]},genControl(){const t=a.options.methods.genControl.call(this);return this.hideInput&&(t.data.style=(0,p.y0)(t.data.style,{display:"none"})),t},genInput(){const t=a.options.methods.genInput.call(this);return t.data.attrs.multiple=this.multiple,delete t.data.domProps.value,delete t.data.on.input,t.data.on.change=this.onInput,[this.genSelections(),t]},genPrependSlot(){if(!this.prependIcon)return null;const t=this.genIcon("prepend",(()=>{this.$refs.input.click()}));return this.genSlot("prepend","outer",[t])},genSelectionText(){const t=this.text.length;return t<2?this.text:this.showSize&&!this.counter?[this.computedCounterValue]:[this.$vuetify.lang.t(this.counterString,t)]},genSelections(){const t=[];return this.isDirty&&this.$scopedSlots.selection?this.internalArrayValue.forEach(((e,n)=>{this.$scopedSlots.selection&&t.push(this.$scopedSlots.selection({text:this.text[n],file:e,index:n}))})):t.push(this.hasChips&&this.isDirty?this.genChips():this.genSelectionText()),this.$createElement("div",{staticClass:"v-file-input__text",class:{"v-file-input__text--placeholder":this.placeholder&&!this.isDirty,"v-file-input__text--chips":this.hasChips&&!this.$scopedSlots.selection}},t)},genTextFieldSlot(){const t=a.options.methods.genTextFieldSlot.call(this);return t.data.on={...t.data.on||{},click:()=>this.$refs.input.click()},t},onInput(t){const e=[...t.target.files||[]];this.internalValue=this.multiple?e:e[0],this.initialValue=this.internalValue},onKeyDown(t){this.$emit("keydown",t)},truncateText(t){if(t.length<Number(this.truncateLength))return t;const e=Math.floor((Number(this.truncateLength)-1)/2);return`${t.slice(0,e)}…${t.slice(t.length-e)}`}}})},9657:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var o=n(1811),i=n(4552),r=n(5530),s=n(8219);const a=(0,r.Z)(o.Z,i.Z).extend({name:"v-hover",props:{disabled:{type:Boolean,default:!1},value:{type:Boolean,default:void 0}},methods:{onMouseEnter(){this.runDelay("open")},onMouseLeave(){this.runDelay("close")}},render(){if(!this.$scopedSlots.default&&void 0===this.value)return(0,s.Kd)("v-hover is missing a default scopedSlot or bound value",this),null;let t;return this.$scopedSlots.default&&(t=this.$scopedSlots.default({hover:this.isActive})),Array.isArray(t)&&1===t.length&&(t=t[0]),t&&!Array.isArray(t)&&t.tag?(this.disabled||(t.data=t.data||{},this._g(t.data,{mouseenter:this.onMouseEnter,mouseleave:this.onMouseLeave})),t):((0,s.Kd)("v-hover should only contain a single element",this),t)}})},4739:(t,e,n)=>{"use strict";n.d(e,{Z:()=>m});var o=n(3379),i=n.n(o),r=n(2099),s={insert:"head",singleton:!1};i()(r.Z,s);r.Z.locals;var a=n(7561),l=n(5836),c=n(1811),u=n(4665),p=n(9471),h=n(4552),d=n(8131),f=n(8219);const m=(0,n(5530).Z)(l.Z,c.Z,u.Z,p.Z,h.Z).extend({name:"v-tooltip",props:{closeDelay:{type:[Number,String],default:0},disabled:Boolean,openDelay:{type:[Number,String],default:0},openOnHover:{type:Boolean,default:!0},tag:{type:String,default:"span"},transition:String},data:()=>({calculatedMinWidth:0,closeDependents:!1}),computed:{calculatedLeft(){const{activator:t,content:e}=this.dimensions,n=!(this.bottom||this.left||this.top||this.right),o=!1!==this.attach?t.offsetLeft:t.left;let i=0;return this.top||this.bottom||n?i=o+t.width/2-e.width/2:(this.left||this.right)&&(i=o+(this.right?t.width:-e.width)+(this.right?10:-10)),this.nudgeLeft&&(i-=parseInt(this.nudgeLeft)),this.nudgeRight&&(i+=parseInt(this.nudgeRight)),`${this.calcXOverflow(i,this.dimensions.content.width)}px`},calculatedTop(){const{activator:t,content:e}=this.dimensions,n=!1!==this.attach?t.offsetTop:t.top;let o=0;return this.top||this.bottom?o=n+(this.bottom?t.height:-e.height)+(this.bottom?10:-10):(this.left||this.right)&&(o=n+t.height/2-e.height/2),this.nudgeTop&&(o-=parseInt(this.nudgeTop)),this.nudgeBottom&&(o+=parseInt(this.nudgeBottom)),!1===this.attach&&(o+=this.pageYOffset),`${this.calcYOverflow(o)}px`},classes(){return{"v-tooltip--top":this.top,"v-tooltip--right":this.right,"v-tooltip--bottom":this.bottom,"v-tooltip--left":this.left,"v-tooltip--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},computedTransition(){return this.transition?this.transition:this.isActive?"scale-transition":"fade-transition"},offsetY(){return this.top||this.bottom},offsetX(){return this.left||this.right},styles(){return{left:this.calculatedLeft,maxWidth:(0,d.kb)(this.maxWidth),minWidth:(0,d.kb)(this.minWidth),top:this.calculatedTop,zIndex:this.zIndex||this.activeZIndex}}},beforeMount(){this.$nextTick((()=>{this.value&&this.callActivate()}))},mounted(){"v-slot"===(0,d.sp)(this,"activator",!0)&&(0,f.N6)("v-tooltip's activator slot must be bound, try '<template #activator=\"data\"><v-btn v-on=\"data.on>'",this)},methods:{activate(){this.updateDimensions(),requestAnimationFrame(this.startTransition)},deactivate(){this.runDelay("close")},genActivatorListeners(){const t=a.Z.options.methods.genActivatorListeners.call(this);return t.focus=t=>{this.getActivator(t),this.runDelay("open")},t.blur=t=>{this.getActivator(t),this.runDelay("close")},t.keydown=t=>{t.keyCode===d.Do.esc&&(this.getActivator(t),this.runDelay("close"))},t},genActivatorAttributes(){return{"aria-haspopup":!0,"aria-expanded":String(this.isActive)}},genTransition(){const t=this.genContent();return this.computedTransition?this.$createElement("transition",{props:{name:this.computedTransition}},[t]):t},genContent(){return this.$createElement("div",this.setBackgroundColor(this.color,{staticClass:"v-tooltip__content",class:{[this.contentClass]:!0,menuable__content__active:this.isActive,"v-tooltip__content--fixed":this.activatorFixed},style:this.styles,attrs:this.getScopeIdAttrs(),directives:[{name:"show",value:this.isContentActive}],ref:"content"}),this.getContentSlot())}},render(t){return t(this.tag,{staticClass:"v-tooltip",class:this.classes},[this.showLazyContent((()=>[this.genTransition()])),this.genActivator()])}})},9536:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var o=n(6986),i=n(1302),r=n(2706),s=n(8131);const a=(0,n(5530).Z)(o.Z,(0,i.d)("windowGroup","v-window-item","v-window")).extend().extend().extend({name:"v-window-item",directives:{Touch:r.Z},props:{disabled:Boolean,reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},value:{required:!1}},data:()=>({isActive:!1,inTransition:!1}),computed:{classes(){return this.groupClasses},computedTransition(){return this.windowGroup.internalReverse?void 0!==this.reverseTransition?this.reverseTransition||"":this.windowGroup.computedTransition:void 0!==this.transition?this.transition||"":this.windowGroup.computedTransition}},methods:{genDefaultSlot(){return this.$slots.default},genWindowItem(){return this.$createElement("div",{staticClass:"v-window-item",class:this.classes,directives:[{name:"show",value:this.isActive}],on:this.$listeners},this.genDefaultSlot())},onAfterTransition(){this.inTransition&&(this.inTransition=!1,this.windowGroup.transitionCount>0&&(this.windowGroup.transitionCount--,0===this.windowGroup.transitionCount&&(this.windowGroup.transitionHeight=void 0)))},onBeforeTransition(){this.inTransition||(this.inTransition=!0,0===this.windowGroup.transitionCount&&(this.windowGroup.transitionHeight=(0,s.kb)(this.windowGroup.$el.clientHeight)),this.windowGroup.transitionCount++)},onTransitionCancelled(){this.onAfterTransition()},onEnter(t){this.inTransition&&this.$nextTick((()=>{this.computedTransition&&this.inTransition&&(this.windowGroup.transitionHeight=(0,s.kb)(t.clientHeight))}))}},render(t){return t("transition",{props:{name:this.computedTransition},on:{beforeEnter:this.onBeforeTransition,afterEnter:this.onAfterTransition,enterCancelled:this.onTransitionCancelled,beforeLeave:this.onBeforeTransition,afterLeave:this.onAfterTransition,leaveCancelled:this.onTransitionCancelled,enter:this.onEnter}},this.showLazyContent((()=>[this.genWindowItem()])))}})},7565:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var o=n(7648);const i=o.y.extend({name:"button-group",provide(){return{btnToggle:this}},computed:{classes(){return o.y.options.computed.classes.call(this)}},methods:{genData:o.y.options.methods.genData}})}}]);